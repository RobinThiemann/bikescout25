var pW=Object.defineProperty,gW=Object.defineProperties,mW=Object.getOwnPropertyDescriptors,kU=Object.getOwnPropertySymbols,_W=Object.prototype.hasOwnProperty,yW=Object.prototype.propertyIsEnumerable,NU=(pt,ke,O)=>ke in pt?pW(pt,ke,{enumerable:!0,configurable:!0,writable:!0,value:O}):pt[ke]=O,OU=(pt,ke)=>{for(var O in ke||(ke={}))_W.call(ke,O)&&NU(pt,O,ke[O]);if(kU)for(var O of kU(ke))yW.call(ke,O)&&NU(pt,O,ke[O]);return pt},LU=(pt,ke)=>gW(pt,mW(ke));(self.webpackChunkbikescout25=self.webpackChunkbikescout25||[]).push([[179],{2011:(pt,ke,O)=>{"use strict";O.d(ke,{Dh:()=>ve,GT:()=>_e,cc:()=>je,hO:()=>qe,on:()=>Q,pX:()=>we,xv:()=>Ee});var g=O(5e3),W=O(127),j=O(5813);pt=O.hmd(pt);const le=["ngOnDestroy"],we=(Le,ot,it,ze={})=>new Proxy(Le,{get:(He,Re)=>it.runOutsideAngular(()=>{var at;if(Le[Re])return(null===(at=null==ze?void 0:ze.spy)||void 0===at?void 0:at.get)&&ze.spy.get(Re,Le[Re]),Le[Re];if(le.indexOf(Re)>-1)return()=>{};const ce=ot.toPromise().then(be=>{const Ne=be&&be[Re];return"function"==typeof Ne?Ne.bind(be):Ne&&Ne.then?Ne.then(se=>it.run(()=>se)):it.run(()=>Ne)});return new Proxy(()=>{},{get:(be,Ne)=>ce[Ne],apply:(be,Ne,se)=>ce.then(me=>{var pe;const Se=me&&me(...se);return(null===(pe=null==ze?void 0:ze.spy)||void 0===pe?void 0:pe.apply)&&ze.spy.apply(Re,se,Se),Se})})})}),_e=(Le,ot)=>{ot.forEach(it=>{Object.getOwnPropertyNames(it.prototype||it).forEach(ze=>{Object.defineProperty(Le.prototype,ze,Object.getOwnPropertyDescriptor(it.prototype||it,ze))})})};class Te{constructor(ot){return ot}}const ve=new g.OlP("angularfire2.app.options"),Ee=new g.OlP("angularfire2.app.name");function Q(Le,ot,it){const He="object"==typeof it&&it||{};He.name=He.name||"string"==typeof it&&it||"[DEFAULT]";const at=W.Z.apps.filter(ce=>ce&&ce.name===He.name)[0]||ot.runOutsideAngular(()=>W.Z.initializeApp(Le,He));try{JSON.stringify(Le)!==JSON.stringify(at.options)&&X("error",`${at.name} Firebase App already initialized with different options${pt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(ce){}return new Te(at)}const X=(Le,...ot)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[Le](...ot)},ge={provide:Te,useFactory:Q,deps:[ve,g.R0b,[new g.FiY,Ee]]};let qe=(()=>{class Le{constructor(it){W.Z.registerVersion("angularfire",j.q4.full,"core"),W.Z.registerVersion("angularfire",j.q4.full,"app-compat"),W.Z.registerVersion("angular",g.q4F.full,it.toString())}static initializeApp(it,ze){return{ngModule:Le,providers:[{provide:ve,useValue:it},{provide:Ee,useValue:ze}]}}}return Le.\u0275fac=function(it){return new(it||Le)(g.LFG(g.Lbi))},Le.\u0275mod=g.oAB({type:Le}),Le.\u0275inj=g.cJS({providers:[ge]}),Le})();function je(Le,ot,it,ze,He){const[,Re,at]=globalThis.\u0275AngularfireInstanceCache.find(ce=>ce[0]===Le)||[];if(Re)return function Ke(Le,ot){try{return Le.toString()===ot.toString()}catch(it){return Le===ot}}(He,at)||(Ie("error",`${ot} was already initialized on the ${it} Firebase App with different settings.${nt?" You may need to reload as Firebase is not HMR aware.":""}`),Ie("warn",{is:He,was:at})),Re;{const ce=ze();return globalThis.\u0275AngularfireInstanceCache.push([Le,ce,He]),ce}}const nt=!!pt.hot,Ie=(Le,...ot)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[Le](...ot)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(pt,ke,O)=>{"use strict";O.d(ke,{q4:()=>xu,iC:()=>$o,fc:()=>kl,HU:()=>Rl,vb:()=>Dd,JM:()=>Td,u3:()=>Ac});var g=O(5e3),W=O(5867),j=O(5861),le=O(9681),we=O(2090),_e=O(4859),Te=O(1877),ve=O(8766);const Ee="@firebase/installations",Q="0.5.9",ge=`w:${Q}`,qe="FIS_v2",ot=new we.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function it(A){return A instanceof we.ZR&&A.code.includes("request-failed")}function ze({projectId:A}){return`https://firebaseinstallations.googleapis.com/v1/projects/${A}/installations`}function He(A){return{token:A.token,requestStatus:2,expiresIn:me(A.expiresIn),creationTime:Date.now()}}function Re(A,M){return at.apply(this,arguments)}function at(){return(at=(0,j.Z)(function*(A,M){const Z=(yield M.json()).error;return ot.create("request-failed",{requestName:A,serverCode:Z.code,serverMessage:Z.message,serverStatus:Z.status})})).apply(this,arguments)}function ce({apiKey:A}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":A})}function be(A,{refreshToken:M}){const U=ce(A);return U.append("Authorization",function pe(A){return`${qe} ${A}`}(M)),U}function Ne(A){return se.apply(this,arguments)}function se(){return(se=(0,j.Z)(function*(A){const M=yield A();return M.status>=500&&M.status<600?A():M})).apply(this,arguments)}function me(A){return Number(A.replace("s","000"))}function Se(A,M){return oe.apply(this,arguments)}function oe(){return(oe=(0,j.Z)(function*({appConfig:A,heartbeatServiceProvider:M},{fid:U}){const Z=ze(A),ae=ce(A),ue=M.getImmediate({optional:!0});if(ue){const qt=yield ue.getHeartbeatsHeader();qt&&ae.append("x-firebase-client",qt)}const ut={method:"POST",headers:ae,body:JSON.stringify({fid:U,authVersion:qe,appId:A.appId,sdkVersion:ge})},Ft=yield Ne(()=>fetch(Z,ut));if(Ft.ok){const qt=yield Ft.json();return{fid:qt.fid||U,registrationStatus:2,refreshToken:qt.refreshToken,authToken:He(qt.authToken)}}throw yield Re("Create Installation",Ft)})).apply(this,arguments)}function Qe(A){return new Promise(M=>{setTimeout(M,A)})}const Tt=/^[cdef][\w-]{21}$/;function Xe(){try{const A=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(A),A[0]=112+A[0]%16;const U=function zt(A){return function et(A){return btoa(String.fromCharCode(...A)).replace(/\+/g,"-").replace(/\//g,"_")}(A).substr(0,22)}(A);return Tt.test(U)?U:""}catch(A){return""}}function Vt(A){return`${A.appName}!${A.appId}`}const Nt=new Map;function Xt(A,M){const U=Vt(A);Vn(U,M),function Ei(A,M){const U=function Hn(){return!yr&&"BroadcastChannel"in self&&(yr=new BroadcastChannel("[Firebase] FID Change"),yr.onmessage=A=>{Vn(A.data.key,A.data.fid)}),yr}();U&&U.postMessage({key:A,fid:M}),function hs(){0===Nt.size&&yr&&(yr.close(),yr=null)}()}(U,M)}function Vn(A,M){const U=Nt.get(A);if(U)for(const Z of U)Z(M)}let yr=null;const Xn="firebase-installations-store";let Ci=null;function xt(){return Ci||(Ci=(0,ve.X3)("firebase-installations-database",1,{upgrade:(A,M)=>{0===M&&A.createObjectStore(Xn)}})),Ci}function Yr(A,M){return kn.apply(this,arguments)}function kn(){return(kn=(0,j.Z)(function*(A,M){const U=Vt(A),ae=(yield xt()).transaction(Xn,"readwrite"),ue=ae.objectStore(Xn),Je=yield ue.get(U);return yield ue.put(M,U),yield ae.done,(!Je||Je.fid!==M.fid)&&Xt(A,M.fid),M})).apply(this,arguments)}function Cn(A){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,j.Z)(function*(A){const M=Vt(A),Z=(yield xt()).transaction(Xn,"readwrite");yield Z.objectStore(Xn).delete(M),yield Z.done})).apply(this,arguments)}function xr(A,M){return ui.apply(this,arguments)}function ui(){return(ui=(0,j.Z)(function*(A,M){const U=Vt(A),ae=(yield xt()).transaction(Xn,"readwrite"),ue=ae.objectStore(Xn),Je=yield ue.get(U),ut=M(Je);return void 0===ut?yield ue.delete(U):yield ue.put(ut,U),yield ae.done,ut&&(!Je||Je.fid!==ut.fid)&&Xt(A,ut.fid),ut})).apply(this,arguments)}function Nn(A){return vr.apply(this,arguments)}function vr(){return(vr=(0,j.Z)(function*(A){let M;const U=yield xr(A.appConfig,Z=>{const ae=fs(Z),ue=cn(A,ae);return M=ue.registrationPromise,ue.installationEntry});return""===U.fid?{installationEntry:yield M}:{installationEntry:U,registrationPromise:M}})).apply(this,arguments)}function fs(A){return ts(A||{fid:Xe(),registrationStatus:0})}function cn(A,M){if(0===M.registrationStatus){if(!navigator.onLine)return{installationEntry:M,registrationPromise:Promise.reject(ot.create("app-offline"))};const U={fid:M.fid,registrationStatus:1,registrationTime:Date.now()},Z=function bt(A,M){return mt.apply(this,arguments)}(A,U);return{installationEntry:U,registrationPromise:Z}}return 1===M.registrationStatus?{installationEntry:M,registrationPromise:Fi(A)}:{installationEntry:M}}function mt(){return(mt=(0,j.Z)(function*(A,M){try{const U=yield Se(A,M);return Yr(A.appConfig,U)}catch(U){throw it(U)&&409===U.customData.serverCode?yield Cn(A.appConfig):yield Yr(A.appConfig,{fid:M.fid,registrationStatus:0}),U}})).apply(this,arguments)}function Fi(A){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,j.Z)(function*(A){let M=yield en(A.appConfig);for(;1===M.registrationStatus;)yield Qe(100),M=yield en(A.appConfig);if(0===M.registrationStatus){const{installationEntry:U,registrationPromise:Z}=yield Nn(A);return Z||U}return M})).apply(this,arguments)}function en(A){return xr(A,M=>{if(!M)throw ot.create("installation-not-found");return ts(M)})}function ts(A){return function or(A){return 1===A.registrationStatus&&A.registrationTime+1e4<Date.now()}(A)?{fid:A.fid,registrationStatus:0}:A}function Tn(A,M){return K.apply(this,arguments)}function K(){return(K=(0,j.Z)(function*({appConfig:A,heartbeatServiceProvider:M},U){const Z=ne(A,U),ae=be(A,U),ue=M.getImmediate({optional:!0});if(ue){const qt=yield ue.getHeartbeatsHeader();qt&&ae.append("x-firebase-client",qt)}const ut={method:"POST",headers:ae,body:JSON.stringify({installation:{sdkVersion:ge,appId:A.appId}})},Ft=yield Ne(()=>fetch(Z,ut));if(Ft.ok)return He(yield Ft.json());throw yield Re("Generate Auth Token",Ft)})).apply(this,arguments)}function ne(A,{fid:M}){return`${ze(A)}/${M}/authTokens:generate`}function ie(A){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,j.Z)(function*(A,M=!1){let U;const Z=yield xr(A.appConfig,ue=>{if(!Qt(ue))throw ot.create("not-registered");const Je=ue.authToken;if(!M&&Mn(Je))return ue;if(1===Je.requestStatus)return U=ee(A,M),ue;{if(!navigator.onLine)throw ot.create("app-offline");const ut=wr(ue);return U=dt(A,ut),ut}});return U?yield U:Z.authToken})).apply(this,arguments)}function ee(A,M){return he.apply(this,arguments)}function he(){return(he=(0,j.Z)(function*(A,M){let U=yield $e(A.appConfig);for(;1===U.authToken.requestStatus;)yield Qe(100),U=yield $e(A.appConfig);const Z=U.authToken;return 0===Z.requestStatus?ie(A,M):Z})).apply(this,arguments)}function $e(A){return xr(A,M=>{if(!Qt(M))throw ot.create("not-registered");return function Ce(A){return 1===A.requestStatus&&A.requestTime+1e4<Date.now()}(M.authToken)?Object.assign(Object.assign({},M),{authToken:{requestStatus:0}}):M})}function dt(A,M){return St.apply(this,arguments)}function St(){return(St=(0,j.Z)(function*(A,M){try{const U=yield Tn(A,M),Z=Object.assign(Object.assign({},M),{authToken:U});return yield Yr(A.appConfig,Z),U}catch(U){if(!it(U)||401!==U.customData.serverCode&&404!==U.customData.serverCode){const Z=Object.assign(Object.assign({},M),{authToken:{requestStatus:0}});yield Yr(A.appConfig,Z)}else yield Cn(A.appConfig);throw U}})).apply(this,arguments)}function Qt(A){return void 0!==A&&2===A.registrationStatus}function Mn(A){return 2===A.requestStatus&&!function Ot(A){const M=Date.now();return M<A.creationTime||A.creationTime+A.expiresIn<M+36e5}(A)}function wr(A){const M={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},A),{authToken:M})}function q(){return(q=(0,j.Z)(function*(A){const M=A,{installationEntry:U,registrationPromise:Z}=yield Nn(M);return Z?Z.catch(console.error):ie(M).catch(console.error),U.fid})).apply(this,arguments)}function lt(){return(lt=(0,j.Z)(function*(A,M=!1){const U=A;return yield Et(U),(yield ie(U,M)).token})).apply(this,arguments)}function Et(A){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,j.Z)(function*(A){const{registrationPromise:M}=yield Nn(A);M&&(yield M)})).apply(this,arguments)}function ua(A){return ot.create("missing-app-config-values",{valueName:A})}const Ti="installations",nn=A=>{const M=A.getProvider("app").getImmediate(),U=function Ur(A){if(!A||!A.options)throw ua("App Configuration");if(!A.name)throw ua("App Name");const M=["projectId","apiKey","appId"];for(const U of M)if(!A.options[U])throw ua(U);return{appName:A.name,projectId:A.options.projectId,apiKey:A.options.apiKey,appId:A.options.appId}}(M);return{app:M,appConfig:U,heartbeatServiceProvider:(0,le._getProvider)(M,"heartbeat"),_delete:()=>Promise.resolve()}},Bn=A=>{const M=A.getProvider("app").getImmediate(),U=(0,le._getProvider)(M,Ti).getImmediate();return{getId:()=>function re(A){return q.apply(this,arguments)}(U),getToken:ae=>function Ue(A){return lt.apply(this,arguments)}(U,ae)}};(function ci(){(0,le._registerComponent)(new _e.wA(Ti,nn,"PUBLIC")),(0,le._registerComponent)(new _e.wA("installations-internal",Bn,"PRIVATE"))})(),(0,le.registerVersion)(Ee,Q),(0,le.registerVersion)(Ee,Q,"esm2017");const Ps="@firebase/remote-config",er=new we.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class du{constructor(M,U,Z,ae){this.client=M,this.storage=U,this.storageCache=Z,this.logger=ae}isCachedDataFresh(M,U){if(!U)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Z=Date.now()-U,ae=Z<=M;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Z}. Cache max age millis (minimumFetchIntervalMillis setting): ${M}. Is cache hit: ${ae}.`),ae}fetch(M){var U=this;return(0,j.Z)(function*(){const[Z,ae]=yield Promise.all([U.storage.getLastSuccessfulFetchTimestampMillis(),U.storage.getLastSuccessfulFetchResponse()]);if(ae&&U.isCachedDataFresh(M.cacheMaxAgeMillis,Z))return ae;M.eTag=ae&&ae.eTag;const ue=yield U.client.fetch(M),Je=[U.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ue.status&&Je.push(U.storage.setLastSuccessfulFetchResponse(ue)),yield Promise.all(Je),ue})()}}function uo(A=navigator){return A.languages&&A.languages[0]||A.language}class ar{constructor(M,U,Z,ae,ue,Je){this.firebaseInstallations=M,this.sdkVersion=U,this.namespace=Z,this.projectId=ae,this.apiKey=ue,this.appId=Je}fetch(M){var U=this;return(0,j.Z)(function*(){const[Z,ae]=yield Promise.all([U.firebaseInstallations.getId(),U.firebaseInstallations.getToken()]),Je=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${U.projectId}/namespaces/${U.namespace}:fetch?key=${U.apiKey}`,ut={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":M.eTag||"*"},Ft={sdk_version:U.sdkVersion,app_instance_id:Z,app_instance_id_token:ae,app_id:U.appId,language_code:uo()},qt={method:"POST",headers:ut,body:JSON.stringify(Ft)},vn=fetch(Je,qt),$t=new Promise((Ia,as)=>{M.signal.addEventListener(()=>{const Ru=new Error("The operation was aborted.");Ru.name="AbortError",as(Ru)})});let Hi;try{yield Promise.race([vn,$t]),Hi=yield vn}catch(Ia){let as="fetch-client-network";throw"AbortError"===Ia.name&&(as="fetch-timeout"),er.create(as,{originalErrorMessage:Ia.message})}let mr=Hi.status;const wo=Hi.headers.get("ETag")||void 0;let Ca,$i;if(200===Hi.status){let Ia;try{Ia=yield Hi.json()}catch(as){throw er.create("fetch-client-parse",{originalErrorMessage:as.message})}Ca=Ia.entries,$i=Ia.state}if("INSTANCE_STATE_UNSPECIFIED"===$i?mr=500:"NO_CHANGE"===$i?mr=304:("NO_TEMPLATE"===$i||"EMPTY_CONFIG"===$i)&&(Ca={}),304!==mr&&200!==mr)throw er.create("fetch-status",{httpStatus:mr});return{status:mr,eTag:wo,config:Ca}})()}}class ss{constructor(M,U){this.client=M,this.storage=U}fetch(M){var U=this;return(0,j.Z)(function*(){const Z=(yield U.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return U.attemptFetch(M,Z)})()}attemptFetch(M,{throttleEndTimeMillis:U,backoffCount:Z}){var ae=this;return(0,j.Z)(function*(){yield function hu(A,M){return new Promise((U,Z)=>{const ae=Math.max(M-Date.now(),0),ue=setTimeout(U,ae);A.addEventListener(()=>{clearTimeout(ue),Z(er.create("fetch-throttle",{throttleEndTimeMillis:M}))})})}(M.signal,U);try{const ue=yield ae.client.fetch(M);return yield ae.storage.deleteThrottleMetadata(),ue}catch(ue){if(!function $u(A){if(!(A instanceof we.ZR&&A.customData))return!1;const M=Number(A.customData.httpStatus);return 429===M||500===M||503===M||504===M}(ue))throw ue;const Je={throttleEndTimeMillis:Date.now()+(0,we.$s)(Z),backoffCount:Z+1};return yield ae.storage.setThrottleMetadata(Je),ae.attemptFetch(M,Je)}})()}}class _c{constructor(M,U,Z,ae,ue){this.app=M,this._client=U,this._storageCache=Z,this._storage=ae,this._logger=ue,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ro(A,M){const U=A.target.error||void 0;return er.create(M,{originalErrorMessage:U&&U.message})}const la="app_namespace_store";class Gu{constructor(M,U,Z,ae=function Wn(){return new Promise((A,M)=>{try{const U=indexedDB.open("firebase_remote_config",1);U.onerror=Z=>{M(Ro(Z,"storage-open"))},U.onsuccess=Z=>{A(Z.target.result)},U.onupgradeneeded=Z=>{0===Z.oldVersion&&Z.target.result.createObjectStore(la,{keyPath:"compositeKey"})}}catch(U){M(er.create("storage-open",{originalErrorMessage:U}))}})}()){this.appId=M,this.appName=U,this.namespace=Z,this.openDbPromise=ae}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(M){return this.set("last_fetch_status",M)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(M){return this.set("last_successful_fetch_timestamp_millis",M)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(M){return this.set("last_successful_fetch_response",M)}getActiveConfig(){return this.get("active_config")}setActiveConfig(M){return this.set("active_config",M)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(M){return this.set("active_config_etag",M)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(M){return this.set("throttle_metadata",M)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(M){var U=this;return(0,j.Z)(function*(){const Z=yield U.openDbPromise;return new Promise((ae,ue)=>{const ut=Z.transaction([la],"readonly").objectStore(la),Ft=U.createCompositeKey(M);try{const qt=ut.get(Ft);qt.onerror=vn=>{ue(Ro(vn,"storage-get"))},qt.onsuccess=vn=>{const $t=vn.target.result;ae($t?$t.value:void 0)}}catch(qt){ue(er.create("storage-get",{originalErrorMessage:qt&&qt.message}))}})})()}set(M,U){var Z=this;return(0,j.Z)(function*(){const ae=yield Z.openDbPromise;return new Promise((ue,Je)=>{const Ft=ae.transaction([la],"readwrite").objectStore(la),qt=Z.createCompositeKey(M);try{const vn=Ft.put({compositeKey:qt,value:U});vn.onerror=$t=>{Je(Ro($t,"storage-set"))},vn.onsuccess=()=>{ue()}}catch(vn){Je(er.create("storage-set",{originalErrorMessage:vn&&vn.message}))}})})()}delete(M){var U=this;return(0,j.Z)(function*(){const Z=yield U.openDbPromise;return new Promise((ae,ue)=>{const ut=Z.transaction([la],"readwrite").objectStore(la),Ft=U.createCompositeKey(M);try{const qt=ut.delete(Ft);qt.onerror=vn=>{ue(Ro(vn,"storage-delete"))},qt.onsuccess=()=>{ae()}}catch(qt){ue(er.create("storage-delete",{originalErrorMessage:qt&&qt.message}))}})})()}createCompositeKey(M){return[this.appId,this.appName,this.namespace,M].join()}}class lo{constructor(M){this.storage=M}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var M=this;return(0,j.Z)(function*(){const U=M.storage.getLastFetchStatus(),Z=M.storage.getLastSuccessfulFetchTimestampMillis(),ae=M.storage.getActiveConfig(),ue=yield U;ue&&(M.lastFetchStatus=ue);const Je=yield Z;Je&&(M.lastSuccessfulFetchTimestampMillis=Je);const ut=yield ae;ut&&(M.activeConfig=ut)})()}setLastFetchStatus(M){return this.lastFetchStatus=M,this.storage.setLastFetchStatus(M)}setLastSuccessfulFetchTimestampMillis(M){return this.lastSuccessfulFetchTimestampMillis=M,this.storage.setLastSuccessfulFetchTimestampMillis(M)}setActiveConfig(M){return this.activeConfig=M,this.storage.setActiveConfig(M)}}function yc(){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,j.Z)(function*(){if(!(0,we.hl)())return!1;try{return yield(0,we.eu)()}catch(A){return!1}})).apply(this,arguments)}!function wl(){(0,le._registerComponent)(new _e.wA("remote-config",function A(M,{instanceIdentifier:U}){const Z=M.getProvider("app").getImmediate(),ae=M.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw er.create("registration-window");if(!(0,we.hl)())throw er.create("indexed-db-unavailable");const{projectId:ue,apiKey:Je,appId:ut}=Z.options;if(!ue)throw er.create("registration-project-id");if(!Je)throw er.create("registration-api-key");if(!ut)throw er.create("registration-app-id");const Ft=new Gu(ut,Z.name,U=U||"firebase"),qt=new lo(Ft),vn=new Te.Yd(Ps);vn.logLevel=Te.in.ERROR;const $t=new ar(ae,le.SDK_VERSION,U,ue,Je,ut),Hi=new ss($t,Ft),mr=new du(Hi,Ft,qt,vn),wo=new _c(Z,mr,qt,Ft,vn);return function An(A){const M=(0,we.m9)(A);M._initializePromise||(M._initializePromise=M._storageCache.loadFromStorage().then(()=>{M._isInitializationComplete=!0}))}(wo),wo},"PUBLIC").setMultipleInstances(!0)),(0,le.registerVersion)(Ps,"0.3.8"),(0,le.registerVersion)(Ps,"0.3.8","esm2017")}();const Jn="/firebase-messaging-sw.js",Pr="/firebase-cloud-messaging-push-scope",ko="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ca="google.c.a.c_id",qu="google.c.a.c_l",Ed="google.c.a.ts",co="google.c.a.e";var Os=(()=>{return(A=Os||(Os={})).PUSH_RECEIVED="push-received",A.NOTIFICATION_CLICKED="notification-clicked",Os;var A})();function ur(A){const M=new Uint8Array(A);return btoa(String.fromCharCode(...M)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function da(A){const U=(A+"=".repeat((4-A.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Z=atob(U),ae=new Uint8Array(Z.length);for(let ue=0;ue<Z.length;++ue)ae[ue]=Z.charCodeAt(ue);return ae}const zr="fcm_token_details_db",fu="fcm_token_object_Store";function El(A){return Ua.apply(this,arguments)}function Ua(){return Ua=(0,j.Z)(function*(A){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ue=>ue.name).includes(zr))return null;let M=null;return(yield(0,ve.X3)(zr,5,{upgrade:(Z=(0,j.Z)(function*(ae,ue,Je,ut){var Ft;if(ue<2||!ae.objectStoreNames.contains(fu))return;const qt=ut.objectStore(fu),vn=yield qt.index("fcmSenderId").get(A);if(yield qt.clear(),vn)if(2===ue){const $t=vn;if(!$t.auth||!$t.p256dh||!$t.endpoint)return;M={token:$t.fcmToken,createTime:null!==(Ft=$t.createTime)&&void 0!==Ft?Ft:Date.now(),subscriptionOptions:{auth:$t.auth,p256dh:$t.p256dh,endpoint:$t.endpoint,swScope:$t.swScope,vapidKey:"string"==typeof $t.vapidKey?$t.vapidKey:ur($t.vapidKey)}}}else if(3===ue){const $t=vn;M={token:$t.fcmToken,createTime:$t.createTime,subscriptionOptions:{auth:ur($t.auth),p256dh:ur($t.p256dh),endpoint:$t.endpoint,swScope:$t.swScope,vapidKey:ur($t.vapidKey)}}}else if(4===ue){const $t=vn;M={token:$t.fcmToken,createTime:$t.createTime,subscriptionOptions:{auth:ur($t.auth),p256dh:ur($t.p256dh),endpoint:$t.endpoint,swScope:$t.swScope,vapidKey:ur($t.vapidKey)}}}}),function(ue,Je,ut,Ft){return Z.apply(this,arguments)})})).close(),yield(0,ve.Lj)(zr),yield(0,ve.Lj)("fcm_vapid_details_db"),yield(0,ve.Lj)("undefined"),pu(M)?M:null;var Z}),Ua.apply(this,arguments)}function pu(A){if(!A||!A.subscriptionOptions)return!1;const{subscriptionOptions:M}=A;return"number"==typeof A.createTime&&A.createTime>0&&"string"==typeof A.token&&A.token.length>0&&"string"==typeof M.auth&&M.auth.length>0&&"string"==typeof M.p256dh&&M.p256dh.length>0&&"string"==typeof M.endpoint&&M.endpoint.length>0&&"string"==typeof M.swScope&&M.swScope.length>0&&"string"==typeof M.vapidKey&&M.vapidKey.length>0}const Ls="firebase-messaging-store";let Ui=null;function On(){return Ui||(Ui=(0,ve.X3)("firebase-messaging-database",1,{upgrade:(A,M)=>{0===M&&A.createObjectStore(Ls)}})),Ui}function ha(A){return ti.apply(this,arguments)}function ti(){return(ti=(0,j.Z)(function*(A){const M=Er(A),Z=yield(yield On()).transaction(Ls).objectStore(Ls).get(M);if(Z)return Z;{const ae=yield El(A.appConfig.senderId);if(ae)return yield Pn(A,ae),ae}})).apply(this,arguments)}function Pn(A,M){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,j.Z)(function*(A,M){const U=Er(A),ae=(yield On()).transaction(Ls,"readwrite");return yield ae.objectStore(Ls).put(M,U),yield ae.done,M})).apply(this,arguments)}function ja(A){return No.apply(this,arguments)}function No(){return(No=(0,j.Z)(function*(A){const M=Er(A),Z=(yield On()).transaction(Ls,"readwrite");yield Z.objectStore(Ls).delete(M),yield Z.done})).apply(this,arguments)}function Er({appConfig:A}){return A.appId}const tr=new we.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ms(A,M){return hr.apply(this,arguments)}function hr(){return(hr=(0,j.Z)(function*(A,M){const U=yield ho(A),Z=Lo(M),ae={method:"POST",headers:U,body:JSON.stringify(Z)};let ue;try{ue=yield(yield fetch(Fs(A.appConfig),ae)).json()}catch(Je){throw tr.create("token-subscribe-failed",{errorInfo:Je})}if(ue.error)throw tr.create("token-subscribe-failed",{errorInfo:ue.error.message});if(!ue.token)throw tr.create("token-subscribe-no-token");return ue.token})).apply(this,arguments)}function Vi(A,M){return _s.apply(this,arguments)}function _s(){return(_s=(0,j.Z)(function*(A,M){const U=yield ho(A),Z=Lo(M.subscriptionOptions),ae={method:"PATCH",headers:U,body:JSON.stringify(Z)};let ue;try{ue=yield(yield fetch(`${Fs(A.appConfig)}/${M.token}`,ae)).json()}catch(Je){throw tr.create("token-update-failed",{errorInfo:Je})}if(ue.error)throw tr.create("token-update-failed",{errorInfo:ue.error.message});if(!ue.token)throw tr.create("token-update-no-token");return ue.token})).apply(this,arguments)}function Oo(A,M){return lr.apply(this,arguments)}function lr(){return(lr=(0,j.Z)(function*(A,M){const Z={method:"DELETE",headers:yield ho(A)};try{const ue=yield(yield fetch(`${Fs(A.appConfig)}/${M}`,Z)).json();if(ue.error)throw tr.create("token-unsubscribe-failed",{errorInfo:ue.error.message})}catch(ae){throw tr.create("token-unsubscribe-failed",{errorInfo:ae})}})).apply(this,arguments)}function Fs({projectId:A}){return`https://fcmregistrations.googleapis.com/v1/projects/${A}/registrations`}function ho(A){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,j.Z)(function*({appConfig:A,installations:M}){const U=yield M.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":A.apiKey,"x-goog-firebase-installations-auth":`FIS ${U}`})})).apply(this,arguments)}function Lo({p256dh:A,auth:M,endpoint:U,vapidKey:Z}){const ae={web:{endpoint:U,auth:M,p256dh:A}};return Z!==ko&&(ae.web.applicationPubKey=Z),ae}const fa=6048e5;function _u(A){return za.apply(this,arguments)}function za(){return(za=(0,j.Z)(function*(A){const M=yield Us(A.swRegistration,A.vapidKey),U={vapidKey:A.vapidKey,swScope:A.swRegistration.scope,endpoint:M.endpoint,auth:ur(M.getKey("auth")),p256dh:ur(M.getKey("p256dh"))},Z=yield ha(A.firebaseDependencies);if(Z){if(Uo(Z.subscriptionOptions,U))return Date.now()>=Z.createTime+fa?vc(A,{token:Z.token,createTime:Date.now(),subscriptionOptions:U}):Z.token;try{yield Oo(A.firebaseDependencies,Z.token)}catch(ae){console.warn(ae)}return Ve(A.firebaseDependencies,U)}return Ve(A.firebaseDependencies,U)})).apply(this,arguments)}function bl(A){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,j.Z)(function*(A){const M=yield ha(A.firebaseDependencies);M&&(yield Oo(A.firebaseDependencies,M.token),yield ja(A.firebaseDependencies));const U=yield A.swRegistration.pushManager.getSubscription();return!U||U.unsubscribe()})).apply(this,arguments)}function vc(A,M){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,j.Z)(function*(A,M){try{const U=yield Vi(A.firebaseDependencies,M),Z=Object.assign(Object.assign({},M),{token:U,createTime:Date.now()});return yield Pn(A.firebaseDependencies,Z),U}catch(U){throw yield bl(A),U}})).apply(this,arguments)}function Ve(A,M){return dn.apply(this,arguments)}function dn(){return(dn=(0,j.Z)(function*(A,M){const Z={token:yield ms(A,M),createTime:Date.now(),subscriptionOptions:M};return yield Pn(A,Z),Z.token})).apply(this,arguments)}function Us(A,M){return qn.apply(this,arguments)}function qn(){return(qn=(0,j.Z)(function*(A,M){return(yield A.pushManager.getSubscription())||A.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:da(M)})})).apply(this,arguments)}function Uo(A,M){return M.vapidKey===A.vapidKey&&M.endpoint===A.endpoint&&M.auth===A.auth&&M.p256dh===A.p256dh}function Vs(A){const M={from:A.from,collapseKey:A.collapse_key,messageId:A.fcmMessageId};return function hi(A,M){if(!M.notification)return;A.notification={};const U=M.notification.title;U&&(A.notification.title=U);const Z=M.notification.body;Z&&(A.notification.body=Z);const ae=M.notification.image;ae&&(A.notification.image=ae)}(M,A),function yu(A,M){!M.data||(A.data=M.data)}(M,A),function fo(A,M){if(!M.fcmOptions)return;A.fcmOptions={};const U=M.fcmOptions.link;U&&(A.fcmOptions.link=U);const Z=M.fcmOptions.analytics_label;Z&&(A.fcmOptions.analyticsLabel=Z)}(M,A),M}function wc(A){return"object"==typeof A&&!!A&&ca in A}function Bs(A,M){const U=[];for(let Z=0;Z<A.length;Z++)U.push(A.charAt(Z)),Z<M.length&&U.push(M.charAt(Z));return U.join("")}function Vo(A){return tr.create("missing-app-config-values",{valueName:A})}Bs("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Bs("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class br{constructor(M,U,Z){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ae=function Ha(A){if(!A||!A.options)throw Vo("App Configuration Object");if(!A.name)throw Vo("App Name");const M=["projectId","apiKey","appId","messagingSenderId"],{options:U}=A;for(const Z of M)if(!U[Z])throw Vo(Z);return{appName:A.name,projectId:U.projectId,apiKey:U.apiKey,appId:U.appId,senderId:U.messagingSenderId}}(M);this.firebaseDependencies={app:M,appConfig:ae,installations:U,analyticsProvider:Z}}_delete(){return Promise.resolve()}}function ys(A){return fi.apply(this,arguments)}function fi(){return(fi=(0,j.Z)(function*(A){try{A.swRegistration=yield navigator.serviceWorker.register(Jn,{scope:Pr}),A.swRegistration.update().catch(()=>{})}catch(M){throw tr.create("failed-service-worker-registration",{browserErrorMessage:M.message})}})).apply(this,arguments)}function pa(A,M){return kr.apply(this,arguments)}function kr(){return(kr=(0,j.Z)(function*(A,M){if(!M&&!A.swRegistration&&(yield ys(A)),M||!A.swRegistration){if(!(M instanceof ServiceWorkerRegistration))throw tr.create("invalid-sw-registration");A.swRegistration=M}})).apply(this,arguments)}function Ec(A,M){return pi.apply(this,arguments)}function pi(){return(pi=(0,j.Z)(function*(A,M){M?A.vapidKey=M:A.vapidKey||(A.vapidKey=ko)})).apply(this,arguments)}function ga(){return(ga=(0,j.Z)(function*(A,M){if(!navigator)throw tr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw tr.create("permission-blocked");return yield Ec(A,null==M?void 0:M.vapidKey),yield pa(A,null==M?void 0:M.serviceWorkerRegistration),_u(A)})).apply(this,arguments)}function $a(A,M,U){return js.apply(this,arguments)}function js(){return(js=(0,j.Z)(function*(A,M,U){const Z=wu(M);(yield A.firebaseDependencies.analyticsProvider.get()).logEvent(Z,{message_id:U[ca],message_name:U[qu],message_time:U[Ed],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function wu(A){switch(A){case Os.NOTIFICATION_CLICKED:return"notification_open";case Os.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function po(){return(po=(0,j.Z)(function*(A,M){const U=M.data;if(!U.isFirebaseMessaging)return;A.onMessageHandler&&U.messageType===Os.PUSH_RECEIVED&&("function"==typeof A.onMessageHandler?A.onMessageHandler(Vs(U)):A.onMessageHandler.next(Vs(U)));const Z=U.data;wc(Z)&&"1"===Z[co]&&(yield $a(A,U.messageType,Z))})).apply(this,arguments)}const go="@firebase/messaging",mo=A=>{const M=new br(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),A.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",U=>function Ga(A,M){return po.apply(this,arguments)}(M,U)),M},Cl=A=>{const M=A.getProvider("messaging").getImmediate();return{getToken:Z=>function vu(A,M){return ga.apply(this,arguments)}(M,Z)}};function bu(){return gi.apply(this,arguments)}function gi(){return(gi=(0,j.Z)(function*(){try{yield(0,we.eu)()}catch(A){return!1}return"undefined"!=typeof window&&(0,we.hl)()&&(0,we.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Eu(){(0,le._registerComponent)(new _e.wA("messaging",mo,"PUBLIC")),(0,le._registerComponent)(new _e.wA("messaging-internal",Cl,"PRIVATE")),(0,le.registerVersion)(go,"0.9.13"),(0,le.registerVersion)(go,"0.9.13","esm2017")}();const Zu="analytics",bd="firebase_id",vs="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",_a="https://www.googletagmanager.com/gtag/js",Cr=new Te.Yd("@firebase/analytics");function Il(A){return Promise.all(A.map(M=>M.catch(U=>U)))}function _o(A,M){const U=document.createElement("script");U.src=`${_a}?l=${A}&id=${M}`,U.async=!0,document.head.appendChild(U)}function jo(A,M,U,Z,ae,ue){return ya.apply(this,arguments)}function ya(){return(ya=(0,j.Z)(function*(A,M,U,Z,ae,ue){const Je=Z[ae];try{if(Je)yield M[Je];else{const Ft=(yield Il(U)).find(qt=>qt.measurementId===ae);Ft&&(yield M[Ft.appId])}}catch(ut){Cr.error(ut)}A("config",ae,ue)})).apply(this,arguments)}function Ku(A,M,U,Z,ae){return Es.apply(this,arguments)}function Es(){return(Es=(0,j.Z)(function*(A,M,U,Z,ae){try{let ue=[];if(ae&&ae.send_to){let Je=ae.send_to;Array.isArray(Je)||(Je=[Je]);const ut=yield Il(U);for(const Ft of Je){const qt=ut.find($t=>$t.measurementId===Ft),vn=qt&&M[qt.appId];if(!vn){ue=[];break}ue.push(vn)}}0===ue.length&&(ue=Object.values(M)),yield Promise.all(ue),A("event",Z,ae||{})}catch(ue){Cr.error(ue)}})).apply(this,arguments)}function Ln(){const A=window.document.getElementsByTagName("script");for(const M of Object.values(A))if(M.src&&M.src.includes(_a))return M;return null}const yt=new we.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),va=new class ri{constructor(M={},U=1e3){this.throttleMetadata=M,this.intervalMillis=U}getThrottleMetadata(M){return this.throttleMetadata[M]}setThrottleMetadata(M,U){this.throttleMetadata[M]=U}deleteThrottleMetadata(M){delete this.throttleMetadata[M]}};function wa(A){return new Headers({Accept:"application/json","x-goog-api-key":A})}function Yu(A){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,j.Z)(function*(A){var M;const{appId:U,apiKey:Z}=A,ae={method:"GET",headers:wa(Z)},ue=vs.replace("{app-id}",U),Je=yield fetch(ue,ae);if(200!==Je.status&&304!==Je.status){let ut="";try{const Ft=yield Je.json();(null===(M=Ft.error)||void 0===M?void 0:M.message)&&(ut=Ft.error.message)}catch(Ft){}throw yt.create("config-fetch-failed",{httpStatus:Je.status,responseMessage:ut})}return Je.json()})).apply(this,arguments)}function Tl(A){return l.apply(this,arguments)}function l(){return(l=(0,j.Z)(function*(A,M=va,U){const{appId:Z,apiKey:ae,measurementId:ue}=A.options;if(!Z)throw yt.create("no-app-id");if(!ae){if(ue)return{measurementId:ue,appId:Z};throw yt.create("no-api-key")}const Je=M.getThrottleMetadata(Z)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ut=new V;return setTimeout((0,j.Z)(function*(){ut.abort()}),void 0!==U?U:6e4),f({appId:Z,apiKey:ae,measurementId:ue},Je,ut,M)})).apply(this,arguments)}function f(A,M,U){return v.apply(this,arguments)}function v(){return(v=(0,j.Z)(function*(A,{throttleEndTimeMillis:M,backoffCount:U},Z,ae=va){const{appId:ue,measurementId:Je}=A;try{yield T(Z,M)}catch(ut){if(Je)return Cr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Je} provided in the "measurementId" field in the local Firebase config. [${ut.message}]`),{appId:ue,measurementId:Je};throw ut}try{const ut=yield Yu(A);return ae.deleteThrottleMetadata(ue),ut}catch(ut){if(!P(ut)){if(ae.deleteThrottleMetadata(ue),Je)return Cr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Je} provided in the "measurementId" field in the local Firebase config. [${ut.message}]`),{appId:ue,measurementId:Je};throw ut}const Ft=503===Number(ut.customData.httpStatus)?(0,we.$s)(U,ae.intervalMillis,30):(0,we.$s)(U,ae.intervalMillis),qt={throttleEndTimeMillis:Date.now()+Ft,backoffCount:U+1};return ae.setThrottleMetadata(ue,qt),Cr.debug(`Calling attemptFetch again in ${Ft} millis`),f(A,qt,Z,ae)}})).apply(this,arguments)}function T(A,M){return new Promise((U,Z)=>{const ae=Math.max(M-Date.now(),0),ue=setTimeout(U,ae);A.addEventListener(()=>{clearTimeout(ue),Z(yt.create("fetch-throttle",{throttleEndTimeMillis:M}))})})}function P(A){if(!(A instanceof we.ZR&&A.customData))return!1;const M=Number(A.customData.httpStatus);return 429===M||500===M||503===M||504===M}class V{constructor(){this.listeners=[]}addEventListener(M){this.listeners.push(M)}abort(){this.listeners.forEach(M=>M())}}function Y(){return de.apply(this,arguments)}function de(){return(de=(0,j.Z)(function*(){if(!(0,we.hl)())return Cr.warn(yt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,we.eu)()}catch(A){return Cr.warn(yt.create("indexeddb-unavailable",{errorInfo:A}).message),!1}return!0})).apply(this,arguments)}function We(){return(We=(0,j.Z)(function*(A,M,U,Z,ae,ue,Je){var ut;const Ft=Tl(A);Ft.then(mr=>{U[mr.measurementId]=mr.appId,A.options.measurementId&&mr.measurementId!==A.options.measurementId&&Cr.warn(`The measurement ID in the local Firebase config (${A.options.measurementId}) does not match the measurement ID fetched from the server (${mr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(mr=>Cr.error(mr)),M.push(Ft);const qt=Y().then(mr=>{if(mr)return Z.getId()}),[vn,$t]=yield Promise.all([Ft,qt]);Ln()||_o(ue,vn.measurementId),ae("js",new Date);const Hi=null!==(ut=null==Je?void 0:Je.config)&&void 0!==ut?ut:{};return Hi.origin="firebase",Hi.update=!0,null!=$t&&(Hi[bd]=$t),ae("config",vn.measurementId,Hi),vn.measurementId})).apply(this,arguments)}class _t{constructor(M){this.app=M}_delete(){return delete Lt[this.app.options.appId],Promise.resolve()}}let Lt={},Kt=[];const mi={};let ii,$s,Di="dataLayer",qa=!1;function Bi(A,M,U){!function Tu(){const A=[];if((0,we.ru)()&&A.push("This is a browser extension environment."),(0,we.zI)()||A.push("Cookies are not available."),A.length>0){const M=A.map((Z,ae)=>`(${ae+1}) ${Z}`).join(" "),U=yt.create("invalid-analytics-context",{errorInfo:M});Cr.warn(U.message)}}();const Z=A.options.appId;if(!Z)throw yt.create("no-app-id");if(!A.options.apiKey){if(!A.options.measurementId)throw yt.create("no-api-key");Cr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${A.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Lt[Z])throw yt.create("already-exists",{id:Z});if(!qa){!function ws(A){let M=[];Array.isArray(window[A])?M=window[A]:window[A]=M}(Di);const{wrappedGtag:ue,gtagCore:Je}=function Tc(A,M,U,Z,ae){let ue=function(...Je){window[Z].push(arguments)};return window[ae]&&"function"==typeof window[ae]&&(ue=window[ae]),window[ae]=function zo(A,M,U,Z){function ue(){return(ue=(0,j.Z)(function*(Je,ut,Ft){try{"event"===Je?yield Ku(A,M,U,ut,Ft):"config"===Je?yield jo(A,M,U,Z,ut,Ft):A("set",ut)}catch(qt){Cr.error(qt)}})).apply(this,arguments)}return function ae(Je,ut,Ft){return ue.apply(this,arguments)}}(ue,A,M,U),{gtagCore:ue,wrappedGtag:window[ae]}}(Lt,Kt,mi,Di,"gtag");$s=ue,ii=Je,qa=!0}return Lt[Z]=function De(A,M,U,Z,ae,ue,Je){return We.apply(this,arguments)}(A,Kt,mi,M,ii,Di,U),new _t(A)}function fr(){return(fr=(0,j.Z)(function*(A,M,U,Z,ae){if(ae&&ae.global)A("event",U,Z);else{const ue=yield M;A("event",U,Object.assign(Object.assign({},Z),{send_to:ue}))}})).apply(this,arguments)}function Gs(){return Du.apply(this,arguments)}function Du(){return(Du=(0,j.Z)(function*(){if((0,we.ru)()||!(0,we.zI)()||!(0,we.hl)())return!1;try{return yield(0,we.eu)()}catch(A){return!1}})).apply(this,arguments)}const ji="@firebase/analytics";!function ba(){(0,le._registerComponent)(new _e.wA(Zu,(M,{options:U})=>Bi(M.getProvider("app").getImmediate(),M.getProvider("installations-internal").getImmediate(),U),"PUBLIC")),(0,le._registerComponent)(new _e.wA("analytics-internal",function A(M){try{const U=M.getProvider(Zu).getImmediate();return{logEvent:(Z,ae,ue)=>function Su(A,M,U,Z){A=(0,we.m9)(A),function Dl(A,M,U,Z,ae){return fr.apply(this,arguments)}($s,Lt[A.app.options.appId],M,U,Z).catch(ae=>Cr.error(ae))}(U,Z,ae,ue)}}catch(U){throw yt.create("interop-component-reg-failed",{reason:U})}},"PRIVATE")),(0,le.registerVersion)(ji,"0.7.9"),(0,le.registerVersion)(ji,"0.7.9","esm2017")}();var Cd=O(4408),nf=O(7565);const Dc=new class Dr extends nf.v{}(class Ws extends Cd.o{constructor(M,U){super(M,U),this.scheduler=M,this.work=U}schedule(M,U=0){return U>0?super.schedule(M,U):(this.delay=U,this.state=M,this.scheduler.flush(this),this)}execute(M,U){return U>0||this.closed?super.execute(M,U):this._execute(M,U)}requestAsyncId(M,U,Z=0){return null!=Z&&Z>0||null==Z&&this.delay>0?super.requestAsyncId(M,U,Z):M.flush(this)}});var Zp=O(4986),Sl=O(8306),xi=O(8505),Mi=O(5363),Al=O(9468);const xu=new g.GfV("7.3.0"),Za="__angularfire_symbol__analyticsIsSupportedValue",vo="__angularfire_symbol__analyticsIsSupported",Qu="__angularfire_symbol__remoteConfigIsSupportedValue",xl="__angularfire_symbol__remoteConfigIsSupported",hn="__angularfire_symbol__messagingIsSupportedValue",Id="__angularfire_symbol__messagingIsSupported";function Td(A,M,U){if(M){if(1===M.length)return M[0];const ue=M.filter(Je=>Je.app===U);if(1===ue.length)return ue[0]}return U.container.getProvider(A).getImmediate({optional:!0})}globalThis[vo]||(globalThis[vo]=Gs().then(A=>globalThis[Za]=A).catch(()=>globalThis[Za]=!1)),globalThis[Id]||(globalThis[Id]=bu().then(A=>globalThis[hn]=A).catch(()=>globalThis[hn]=!1)),globalThis[xl]||(globalThis[xl]=yc().then(A=>globalThis[Qu]=A).catch(()=>globalThis[Qu]=!1));const Dd=(A,M)=>{const U=M?[M]:(0,W.C6)(),Z=[];return U.forEach(ae=>{ae.container.getProvider(A).instances.forEach(Je=>{Z.includes(Je)||Z.push(Je)})}),Z};function si(){}class Sc{constructor(M,U=Dc){this.zone=M,this.delegate=U}now(){return this.delegate.now()}schedule(M,U,Z){const ae=this.zone;return this.delegate.schedule(function(Je){ae.runGuarded(()=>{M.apply(this,[Je])})},U,Z)}}class Pl{constructor(M){this.zone=M,this.task=null}call(M,U){const Z=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",si,{},si,si)),U.pipe((0,xi.b)({next:Z,complete:Z,error:Z})).subscribe(M).add(Z)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Rl=(()=>{class A{constructor(U){this.ngZone=U,this.outsideAngular=U.runOutsideAngular(()=>new Sc(Zone.current)),this.insideAngular=U.run(()=>new Sc(Zone.current,Zp.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return A.\u0275fac=function(U){return new(U||A)(g.LFG(g.R0b))},A.\u0275prov=g.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();function Mu(){const A=globalThis.\u0275AngularFireScheduler;if(!A)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return A}function gr(A){return Mu().ngZone.runOutsideAngular(()=>A())}function Wr(A){return Mu().ngZone.run(()=>A())}function kl(A){return A.pipe((0,Mi.Q)(Mu().outsideAngular))}function $o(A){return Mu(),function Pu(A){return function(U){return(U=U.lift(new Pl(A.ngZone))).pipe((0,Al.R)(A.outsideAngular),(0,Mi.Q)(A.insideAngular))}}(Mu())(A)}const Nl=(A,M)=>function(){const Z=arguments;return M&&setTimeout(()=>{"scheduled"===M.state&&M.invoke()},10),Wr(()=>A.apply(void 0,Z))},Ac=(A,M)=>function(){let U;const Z=arguments;for(let ue=0;ue<arguments.length;ue++)"function"==typeof Z[ue]&&(M&&(U||(U=Wr(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",si,{},si,si)))),Z[ue]=Nl(Z[ue],U));const ae=gr(()=>A.apply(this,Z));if(!M){if(ae instanceof Sl.y){const ue=Mu();return ae.pipe((0,Al.R)(ue.outsideAngular),(0,Mi.Q)(ue.insideAngular))}return Wr(()=>ae)}return ae instanceof Sl.y?ae.pipe($o):ae instanceof Promise?Wr(()=>new Promise((ue,Je)=>ae.then(ut=>Wr(()=>ue(ut)),ut=>Wr(()=>Je(ut))))):"function"==typeof ae&&U?function(){return setTimeout(()=>{U&&"scheduled"===U.state&&U.invoke()},10),ae.apply(this,arguments)}:Wr(()=>ae)}},198:(pt,ke,O)=>{"use strict";O.d(ke,{$:()=>Fs,A:()=>X,B:()=>je,G:()=>Bn,H:()=>In,J:()=>ss,L:()=>Mn,M:()=>Ns,N:()=>Fa,P:()=>Za,Q:()=>ca,R:()=>ba,T:()=>qu,U:()=>ko,V:()=>Os,W:()=>ur,X:()=>El,Y:()=>mu,Z:()=>ms,_:()=>Vi,a:()=>ni,a0:()=>_u,a1:()=>bl,a2:()=>vc,a3:()=>Ve,a4:()=>Us,a5:()=>Uo,a6:()=>hi,a7:()=>yu,a8:()=>wc,a9:()=>Bs,aA:()=>as,aB:()=>mr,aC:()=>Ac,aD:()=>Nl,aE:()=>tt,aI:()=>wa,aL:()=>co,aa:()=>ys,ab:()=>pa,ac:()=>Ec,af:()=>$a,ag:()=>wu,ah:()=>Ga,ak:()=>Ls,al:()=>Cu,an:()=>_a,ao:()=>ya,ap:()=>$n,aq:()=>Ne,ar:()=>tn,as:()=>Et,at:()=>it,au:()=>lf,av:()=>xc,aw:()=>ze,ax:()=>ce,ay:()=>me,az:()=>Ot,b:()=>yt,c:()=>Ju,d:()=>Sc,e:()=>Dd,f:()=>U,g:()=>Ft,h:()=>ue,i:()=>Bi,j:()=>$t,k:()=>Jp,l:()=>Dc,m:()=>eg,n:()=>H_,o:()=>ve,r:()=>Zp,s:()=>nf,u:()=>Al});var g=O(5861),W=O(2090),j=O(9681),le=O(655),we=O(1877),_e=O(4859);const ve={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},X={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const je=function ge(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ke=function qe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},nt=new W.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Le=new we.Yd("@firebase/auth");function ot(C,..._){Le.logLevel<=we.in.ERROR&&Le.error(`Auth (${j.SDK_VERSION}): ${C}`,..._)}function it(C,..._){throw at(C,..._)}function ze(C,..._){return at(C,..._)}function He(C,_,w){const D=Object.assign(Object.assign({},Ke()),{[_]:w});return new W.LL("auth","Firebase",D).create(_,{appName:C.name})}function Re(C,_,w){if(!(_ instanceof w))throw w.name!==_.constructor.name&&it(C,"argument-error"),He(C,"argument-error",`Type of ${_.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function at(C,..._){if("string"!=typeof C){const w=_[0],D=[..._.slice(1)];return D[0]&&(D[0].appName=C.name),C._errorFactory.create(w,...D)}return nt.create(C,..._)}function ce(C,_,...w){if(!C)throw at(_,...w)}function be(C){const _="INTERNAL ASSERTION FAILED: "+C;throw ot(_),new Error(_)}function Ne(C,_){C||be(_)}const se=new Map;function me(C){Ne(C instanceof Function,"Expected a class definition");let _=se.get(C);return _?(Ne(_ instanceof C,"Instance stored in cache mismatched with class"),_):(_=new C,se.set(C,_),_)}function oe(){var C;return"undefined"!=typeof self&&(null===(C=self.location)||void 0===C?void 0:C.href)||""}function Qe(){return"http:"===et()||"https:"===et()}function et(){var C;return"undefined"!=typeof self&&(null===(C=self.location)||void 0===C?void 0:C.protocol)||null}class Xe{constructor(_,w){this.shortDelay=_,this.longDelay=w,Ne(w>_,"Short delay should be less than long delay!"),this.isMobile=(0,W.uI)()||(0,W.b$)()}get(){return function Tt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Qe()||(0,W.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function zt(C,_){Ne(C.emulator,"Emulator should always be set here");const{url:w}=C.emulator;return _?`${w}${_.startsWith("/")?_.slice(1):_}`:w}class Vt{static initialize(_,w,D){this.fetchImpl=_,w&&(this.headersImpl=w),D&&(this.responseImpl=D)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void be("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void be("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void be("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Nt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Xt=new Xe(3e4,6e4);function Gt(C,_){return C.tenantId&&!_.tenantId?Object.assign(Object.assign({},_),{tenantId:C.tenantId}):_}function wn(C,_,w,D){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,g.Z)(function*(C,_,w,D,N={}){return Ei(C,N,(0,g.Z)(function*(){let H={},ye={};D&&("GET"===_?ye=D:H={body:JSON.stringify(D)});const Ge=(0,W.xO)(Object.assign({key:C.config.apiKey},ye)).slice(1),ht=yield C._getAdditionalHeaders();return ht["Content-Type"]="application/json",C.languageCode&&(ht["X-Firebase-Locale"]=C.languageCode),Vt.fetch()(bi(C,C.config.apiHost,w,Ge),Object.assign({method:_,headers:ht,referrerPolicy:"no-referrer"},H))}))})).apply(this,arguments)}function Ei(C,_,w){return yr.apply(this,arguments)}function yr(){return(yr=(0,g.Z)(function*(C,_,w){C._canInitEmulator=!1;const D=Object.assign(Object.assign({},Nt),_);try{const N=new Li(C),H=yield Promise.race([w(),N.promise]);N.clearNetworkTimeout();const ye=yield H.json();if("needConfirmation"in ye)throw Xn(C,"account-exists-with-different-credential",ye);if(H.ok&&!("errorMessage"in ye))return ye;{const Ge=H.ok?ye.errorMessage:ye.error.message,[ht,kt]=Ge.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ht)throw Xn(C,"credential-already-in-use",ye);if("EMAIL_EXISTS"===ht)throw Xn(C,"email-already-in-use",ye);const Jt=D[ht]||ht.toLowerCase().replace(/[_\s]+/g,"-");if(kt)throw He(C,Jt,kt);it(C,Jt)}}catch(N){if(N instanceof W.ZR)throw N;it(C,"network-request-failed")}})).apply(this,arguments)}function Hn(C,_,w,D){return hs.apply(this,arguments)}function hs(){return(hs=(0,g.Z)(function*(C,_,w,D,N={}){const H=yield wn(C,_,w,D,N);return"mfaPendingCredential"in H&&it(C,"multi-factor-auth-required",{_serverResponse:H}),H})).apply(this,arguments)}function bi(C,_,w,D){const N=`${_}${w}?${D}`;return C.config.emulator?zt(C.config,N):`${C.config.apiScheme}://${N}`}class Li{constructor(_){this.auth=_,this.timer=null,this.promise=new Promise((w,D)=>{this.timer=setTimeout(()=>D(ze(this.auth,"network-request-failed")),Xt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Xn(C,_,w){const D={appName:C.name};w.email&&(D.email=w.email),w.phoneNumber&&(D.phoneNumber=w.phoneNumber);const N=ze(C,_,D);return N.customData._tokenResponse=w,N}function xt(){return(xt=(0,g.Z)(function*(C,_){return wn(C,"POST","/v1/accounts:delete",_)})).apply(this,arguments)}function Yr(C,_){return kn.apply(this,arguments)}function kn(){return(kn=(0,g.Z)(function*(C,_){return wn(C,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function Cn(C,_){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,g.Z)(function*(C,_){return wn(C,"POST","/v1/accounts:lookup",_)})).apply(this,arguments)}function xr(C){if(C)try{const _=new Date(Number(C));if(!isNaN(_.getTime()))return _.toUTCString()}catch(_){}}function vr(){return(vr=(0,g.Z)(function*(C,_=!1){const w=(0,W.m9)(C),D=yield w.getIdToken(_),N=cn(D);ce(N&&N.exp&&N.auth_time&&N.iat,w.auth,"internal-error");const H="object"==typeof N.firebase?N.firebase:void 0,ye=null==H?void 0:H.sign_in_provider;return{claims:N,token:D,authTime:xr(fs(N.auth_time)),issuedAtTime:xr(fs(N.iat)),expirationTime:xr(fs(N.exp)),signInProvider:ye||null,signInSecondFactor:(null==H?void 0:H.sign_in_second_factor)||null}})).apply(this,arguments)}function fs(C){return 1e3*Number(C)}function cn(C){const[_,w,D]=C.split(".");if(void 0===_||void 0===w||void 0===D)return ot("JWT malformed, contained fewer than 3 sections"),null;try{const N=(0,W.tV)(w);return N?JSON.parse(N):(ot("Failed to decode base64 JWT payload"),null)}catch(N){return ot("Caught error parsing JWT payload as JSON",N),null}}function mt(C,_){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,g.Z)(function*(C,_,w=!1){if(w)return _;try{return yield _}catch(D){throw D instanceof W.ZR&&Ii(D)&&C.auth.currentUser===C&&(yield C.auth.signOut()),D}})).apply(this,arguments)}function Ii({code:C}){return"auth/user-disabled"===C||"auth/user-token-expired"===C}class en{constructor(_){this.user=_,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(_){var w;if(_){const D=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),D}{this.errorBackoff=3e4;const N=(null!==(w=this.user.stsTokenManager.expirationTime)&&void 0!==w?w:0)-Date.now()-3e5;return Math.max(0,N)}}schedule(_=!1){var w=this;if(!this.isRunning)return;const D=this.getInterval(_);this.timerId=setTimeout((0,g.Z)(function*(){yield w.iteration()}),D)}iteration(){var _=this;return(0,g.Z)(function*(){try{yield _.user.getIdToken(!0)}catch(w){return void("auth/network-request-failed"===w.code&&_.schedule(!0))}_.schedule()})()}}class ts{constructor(_,w){this.createdAt=_,this.lastLoginAt=w,this._initializeTime()}_initializeTime(){this.lastSignInTime=xr(this.lastLoginAt),this.creationTime=xr(this.createdAt)}_copy(_){this.createdAt=_.createdAt,this.lastLoginAt=_.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function or(C){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,g.Z)(function*(C){var _;const w=C.auth,D=yield C.getIdToken(),N=yield mt(C,Cn(w,{idToken:D}));ce(null==N?void 0:N.users.length,w,"internal-error");const H=N.users[0];C._notifyReloadListener(H);const ye=(null===(_=H.providerUserInfo)||void 0===_?void 0:_.length)?Pe(H.providerUserInfo):[],Ge=ie(C.providerData,ye),Jt=!!C.isAnonymous&&!(C.email&&H.passwordHash||(null==Ge?void 0:Ge.length)),Sr={uid:H.localId,displayName:H.displayName||null,photoURL:H.photoUrl||null,email:H.email||null,emailVerified:H.emailVerified||!1,phoneNumber:H.phoneNumber||null,tenantId:H.tenantId||null,providerData:Ge,metadata:new ts(H.createdAt,H.lastLoginAt),isAnonymous:Jt};Object.assign(C,Sr)})).apply(this,arguments)}function ne(){return(ne=(0,g.Z)(function*(C){const _=(0,W.m9)(C);yield or(_),yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)})).apply(this,arguments)}function ie(C,_){return[...C.filter(D=>!_.some(N=>N.providerId===D.providerId)),..._]}function Pe(C){return C.map(_=>{var{providerId:w}=_,D=(0,le._T)(_,["providerId"]);return{providerId:w,uid:D.rawId||"",displayName:D.displayName||null,email:D.email||null,phoneNumber:D.phoneNumber||null,photoURL:D.photoUrl||null}})}function he(){return(he=(0,g.Z)(function*(C,_){const w=yield Ei(C,{},(0,g.Z)(function*(){const D=(0,W.xO)({grant_type:"refresh_token",refresh_token:_}).slice(1),{tokenApiHost:N,apiKey:H}=C.config,ye=bi(C,N,"/v1/token",`key=${H}`),Ge=yield C._getAdditionalHeaders();return Ge["Content-Type"]="application/x-www-form-urlencoded",Vt.fetch()(ye,{method:"POST",headers:Ge,body:D})}));return{accessToken:w.access_token,expiresIn:w.expires_in,refreshToken:w.refresh_token}})).apply(this,arguments)}class $e{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(_){ce(_.idToken,"internal-error"),ce(void 0!==_.idToken,"internal-error"),ce(void 0!==_.refreshToken,"internal-error");const w="expiresIn"in _&&void 0!==_.expiresIn?Number(_.expiresIn):function bt(C){const _=cn(C);return ce(_,"internal-error"),ce(void 0!==_.exp,"internal-error"),ce(void 0!==_.iat,"internal-error"),Number(_.exp)-Number(_.iat)}(_.idToken);this.updateTokensAndExpiration(_.idToken,_.refreshToken,w)}getToken(_,w=!1){var D=this;return(0,g.Z)(function*(){return ce(!D.accessToken||D.refreshToken,_,"user-token-expired"),w||!D.accessToken||D.isExpired?D.refreshToken?(yield D.refresh(_,D.refreshToken),D.accessToken):null:D.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(_,w){var D=this;return(0,g.Z)(function*(){const{accessToken:N,refreshToken:H,expiresIn:ye}=yield function ee(C,_){return he.apply(this,arguments)}(_,w);D.updateTokensAndExpiration(N,H,Number(ye))})()}updateTokensAndExpiration(_,w,D){this.refreshToken=w||null,this.accessToken=_||null,this.expirationTime=Date.now()+1e3*D}static fromJSON(_,w){const{refreshToken:D,accessToken:N,expirationTime:H}=w,ye=new $e;return D&&(ce("string"==typeof D,"internal-error",{appName:_}),ye.refreshToken=D),N&&(ce("string"==typeof N,"internal-error",{appName:_}),ye.accessToken=N),H&&(ce("number"==typeof H,"internal-error",{appName:_}),ye.expirationTime=H),ye}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(_){this.accessToken=_.accessToken,this.refreshToken=_.refreshToken,this.expirationTime=_.expirationTime}_clone(){return Object.assign(new $e,this.toJSON())}_performRefresh(){return be("not implemented")}}function dt(C,_){ce("string"==typeof C||void 0===C,"internal-error",{appName:_})}class St{constructor(_){var{uid:w,auth:D,stsTokenManager:N}=_,H=(0,le._T)(_,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new en(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=w,this.auth=D,this.stsTokenManager=N,this.accessToken=N.accessToken,this.displayName=H.displayName||null,this.email=H.email||null,this.emailVerified=H.emailVerified||!1,this.phoneNumber=H.phoneNumber||null,this.photoURL=H.photoURL||null,this.isAnonymous=H.isAnonymous||!1,this.tenantId=H.tenantId||null,this.providerData=H.providerData?[...H.providerData]:[],this.metadata=new ts(H.createdAt||void 0,H.lastLoginAt||void 0)}getIdToken(_){var w=this;return(0,g.Z)(function*(){const D=yield mt(w,w.stsTokenManager.getToken(w.auth,_));return ce(D,w.auth,"internal-error"),w.accessToken!==D&&(w.accessToken=D,yield w.auth._persistUserIfCurrent(w),w.auth._notifyListenersIfCurrent(w)),D})()}getIdTokenResult(_){return function Nn(C){return vr.apply(this,arguments)}(this,_)}reload(){return function K(C){return ne.apply(this,arguments)}(this)}_assign(_){this!==_&&(ce(this.uid===_.uid,this.auth,"internal-error"),this.displayName=_.displayName,this.photoURL=_.photoURL,this.email=_.email,this.emailVerified=_.emailVerified,this.phoneNumber=_.phoneNumber,this.isAnonymous=_.isAnonymous,this.tenantId=_.tenantId,this.providerData=_.providerData.map(w=>Object.assign({},w)),this.metadata._copy(_.metadata),this.stsTokenManager._assign(_.stsTokenManager))}_clone(_){return new St(Object.assign(Object.assign({},this),{auth:_,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(_){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=_,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(_){this.reloadListener?this.reloadListener(_):this.reloadUserInfo=_}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(_,w=!1){var D=this;return(0,g.Z)(function*(){let N=!1;_.idToken&&_.idToken!==D.stsTokenManager.accessToken&&(D.stsTokenManager.updateFromServerResponse(_),N=!0),w&&(yield or(D)),yield D.auth._persistUserIfCurrent(D),N&&D.auth._notifyListenersIfCurrent(D)})()}delete(){var _=this;return(0,g.Z)(function*(){const w=yield _.getIdToken();return yield mt(_,function Ci(C,_){return xt.apply(this,arguments)}(_.auth,{idToken:w})),_.stsTokenManager.clearRefreshToken(),_.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(_=>Object.assign({},_)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(_,w){var D,N,H,ye,Ge,ht,kt,Jt;const Sr=null!==(D=w.displayName)&&void 0!==D?D:void 0,Eo=null!==(N=w.email)&&void 0!==N?N:void 0,Ta=null!==(H=w.phoneNumber)&&void 0!==H?H:void 0,Ul=null!==(ye=w.photoURL)&&void 0!==ye?ye:void 0,Nc=null!==(Ge=w.tenantId)&&void 0!==Ge?Ge:void 0,Vl=null!==(ht=w._redirectEventId)&&void 0!==ht?ht:void 0,hf=null!==(kt=w.createdAt)&&void 0!==kt?kt:void 0,Bl=null!==(Jt=w.lastLoginAt)&&void 0!==Jt?Jt:void 0,{uid:jl,emailVerified:ng,isAnonymous:ff,providerData:Oc,stsTokenManager:Lc}=w;ce(jl&&Lc,_,"internal-error");const $_=$e.fromJSON(this.name,Lc);ce("string"==typeof jl,_,"internal-error"),dt(Sr,_.name),dt(Eo,_.name),ce("boolean"==typeof ng,_,"internal-error"),ce("boolean"==typeof ff,_,"internal-error"),dt(Ta,_.name),dt(Ul,_.name),dt(Nc,_.name),dt(Vl,_.name),dt(hf,_.name),dt(Bl,_.name);const nl=new St({uid:jl,auth:_,email:Eo,emailVerified:ng,displayName:Sr,isAnonymous:ff,photoURL:Ul,phoneNumber:Ta,tenantId:Nc,stsTokenManager:$_,createdAt:hf,lastLoginAt:Bl});return Oc&&Array.isArray(Oc)&&(nl.providerData=Oc.map(bo=>Object.assign({},bo))),Vl&&(nl._redirectEventId=Vl),nl}static _fromIdTokenResponse(_,w,D=!1){return(0,g.Z)(function*(){const N=new $e;N.updateFromServerResponse(w);const H=new St({uid:w.localId,auth:_,stsTokenManager:N,isAnonymous:D});return yield or(H),H})()}}const Mn=(()=>{class C{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(w,D){var N=this;return(0,g.Z)(function*(){N.storage[w]=D})()}_get(w){var D=this;return(0,g.Z)(function*(){const N=D.storage[w];return void 0===N?null:N})()}_remove(w){var D=this;return(0,g.Z)(function*(){delete D.storage[w]})()}_addListener(w,D){}_removeListener(w,D){}}return C.type="NONE",C})();function Ot(C,_,w){return`firebase:${C}:${_}:${w}`}class wr{constructor(_,w,D){this.persistence=_,this.auth=w,this.userKey=D;const{config:N,name:H}=this.auth;this.fullUserKey=Ot(this.userKey,N.apiKey,H),this.fullPersistenceKey=Ot("persistence",N.apiKey,H),this.boundEventHandler=w._onStorageEvent.bind(w),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(_){return this.persistence._set(this.fullUserKey,_.toJSON())}getCurrentUser(){var _=this;return(0,g.Z)(function*(){const w=yield _.persistence._get(_.fullUserKey);return w?St._fromJSON(_.auth,w):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(_){var w=this;return(0,g.Z)(function*(){if(w.persistence===_)return;const D=yield w.getCurrentUser();return yield w.removeCurrentUser(),w.persistence=_,D?w.setCurrentUser(D):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(_,w,D="authUser"){return(0,g.Z)(function*(){if(!w.length)return new wr(me(Mn),_,D);const N=(yield Promise.all(w.map(function(){var kt=(0,g.Z)(function*(Jt){if(yield Jt._isAvailable())return Jt});return function(Jt){return kt.apply(this,arguments)}}()))).filter(kt=>kt);let H=N[0]||me(Mn);const ye=Ot(D,_.config.apiKey,_.name);let Ge=null;for(const kt of w)try{const Jt=yield kt._get(ye);if(Jt){const Sr=St._fromJSON(_,Jt);kt!==H&&(Ge=Sr),H=kt;break}}catch(Jt){}const ht=N.filter(kt=>kt._shouldAllowMigration);return H._shouldAllowMigration&&ht.length?(H=ht[0],Ge&&(yield H._set(ye,Ge.toJSON())),yield Promise.all(w.map(function(){var kt=(0,g.Z)(function*(Jt){if(Jt!==H)try{yield Jt._remove(ye)}catch(Sr){}});return function(Jt){return kt.apply(this,arguments)}}())),new wr(H,_,D)):new wr(H,_,D)})()}}function Ce(C){const _=C.toLowerCase();if(_.includes("opera/")||_.includes("opr/")||_.includes("opios/"))return"Opera";if(lt(_))return"IEMobile";if(_.includes("msie")||_.includes("trident/"))return"IE";if(_.includes("edge/"))return"Edge";if(re(_))return"Firefox";if(_.includes("silk/"))return"Silk";if(Wt(_))return"Blackberry";if(sn(_))return"Webos";if(q(_))return"Safari";if((_.includes("chrome/")||Ue(_))&&!_.includes("edge/"))return"Chrome";if(Et(_))return"Android";{const D=C.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==D?void 0:D.length))return D[1]}return"Other"}function re(C=(0,W.z$)()){return/firefox\//i.test(C)}function q(C=(0,W.z$)()){const _=C.toLowerCase();return _.includes("safari/")&&!_.includes("chrome/")&&!_.includes("crios/")&&!_.includes("android")}function Ue(C=(0,W.z$)()){return/crios\//i.test(C)}function lt(C=(0,W.z$)()){return/iemobile/i.test(C)}function Et(C=(0,W.z$)()){return/android/i.test(C)}function Wt(C=(0,W.z$)()){return/blackberry/i.test(C)}function sn(C=(0,W.z$)()){return/webos/i.test(C)}function tn(C=(0,W.z$)()){return/iphone|ipad|ipod/i.test(C)}function $n(C=(0,W.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(C)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(C)}function Qr(C=(0,W.z$)()){return tn(C)||Et(C)||sn(C)||Wt(C)||/windows phone/i.test(C)||lt(C)}function Ur(C,_=[]){let w;switch(C){case"Browser":w=Ce((0,W.z$)());break;case"Worker":w=`${Ce((0,W.z$)())}-${C}`;break;default:w=C}const D=_.length?_.join(","):"FirebaseCore-web";return`${w}/JsCore/${j.SDK_VERSION}/${D}`}class ua{constructor(_){this.auth=_,this.queue=[]}pushCallback(_,w){const D=H=>new Promise((ye,Ge)=>{try{ye(_(H))}catch(ht){Ge(ht)}});D.onAbort=w,this.queue.push(D);const N=this.queue.length-1;return()=>{this.queue[N]=()=>Promise.resolve()}}runMiddleware(_){var w=this;return(0,g.Z)(function*(){if(w.auth.currentUser===_)return;const D=[];try{for(const N of w.queue)yield N(_),N.onAbort&&D.push(N.onAbort)}catch(N){D.reverse();for(const H of D)try{H()}catch(ye){}throw w.auth._errorFactory.create("login-blocked",{originalMessage:N.message})}})()}}class Ti{constructor(_,w,D){this.app=_,this.heartbeatServiceProvider=w,this.config=D,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nn(this),this.idTokenSubscription=new nn(this),this.beforeStateQueue=new ua(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=_.name,this.clientVersion=D.sdkClientVersion}_initializeWithPersistence(_,w){var D=this;return w&&(this._popupRedirectResolver=me(w)),this._initializationPromise=this.queue((0,g.Z)(function*(){var N,H;if(!D._deleted&&(D.persistenceManager=yield wr.create(D,_),!D._deleted)){if(null===(N=D._popupRedirectResolver)||void 0===N?void 0:N._shouldInitProactively)try{yield D._popupRedirectResolver._initialize(D)}catch(ye){}yield D.initializeCurrentUser(w),D.lastNotifiedUid=(null===(H=D.currentUser)||void 0===H?void 0:H.uid)||null,!D._deleted&&(D._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var _=this;return(0,g.Z)(function*(){if(_._deleted)return;const w=yield _.assertedPersistence.getCurrentUser();if(_.currentUser||w){if(_.currentUser&&w&&_.currentUser.uid===w.uid)return _._currentUser._assign(w),void(yield _.currentUser.getIdToken());yield _._updateCurrentUser(w,!0)}})()}initializeCurrentUser(_){var w=this;return(0,g.Z)(function*(){var D;const N=yield w.assertedPersistence.getCurrentUser();let H=N,ye=!1;if(_&&w.config.authDomain){yield w.getOrInitRedirectPersistenceManager();const Ge=null===(D=w.redirectUser)||void 0===D?void 0:D._redirectEventId,ht=null==H?void 0:H._redirectEventId,kt=yield w.tryRedirectSignIn(_);(!Ge||Ge===ht)&&(null==kt?void 0:kt.user)&&(H=kt.user,ye=!0)}if(!H)return w.directlySetCurrentUser(null);if(!H._redirectEventId){if(ye)try{yield w.beforeStateQueue.runMiddleware(H)}catch(Ge){H=N,w._popupRedirectResolver._overrideRedirectResult(w,()=>Promise.reject(Ge))}return H?w.reloadAndSetCurrentUserOrClear(H):w.directlySetCurrentUser(null)}return ce(w._popupRedirectResolver,w,"argument-error"),yield w.getOrInitRedirectPersistenceManager(),w.redirectUser&&w.redirectUser._redirectEventId===H._redirectEventId?w.directlySetCurrentUser(H):w.reloadAndSetCurrentUserOrClear(H)})()}tryRedirectSignIn(_){var w=this;return(0,g.Z)(function*(){let D=null;try{D=yield w._popupRedirectResolver._completeRedirectFn(w,_,!0)}catch(N){yield w._setRedirectUser(null)}return D})()}reloadAndSetCurrentUserOrClear(_){var w=this;return(0,g.Z)(function*(){try{yield or(_)}catch(D){if("auth/network-request-failed"!==D.code)return w.directlySetCurrentUser(null)}return w.directlySetCurrentUser(_)})()}useDeviceLanguage(){this.languageCode=function Ut(){if("undefined"==typeof navigator)return null;const C=navigator;return C.languages&&C.languages[0]||C.language||null}()}_delete(){var _=this;return(0,g.Z)(function*(){_._deleted=!0})()}updateCurrentUser(_){var w=this;return(0,g.Z)(function*(){const D=_?(0,W.m9)(_):null;return D&&ce(D.auth.config.apiKey===w.config.apiKey,w,"invalid-user-token"),w._updateCurrentUser(D&&D._clone(w))})()}_updateCurrentUser(_,w=!1){var D=this;return(0,g.Z)(function*(){if(!D._deleted)return _&&ce(D.tenantId===_.tenantId,D,"tenant-id-mismatch"),w||(yield D.beforeStateQueue.runMiddleware(_)),D.queue((0,g.Z)(function*(){yield D.directlySetCurrentUser(_),D.notifyAuthListeners()}))})()}signOut(){var _=this;return(0,g.Z)(function*(){return yield _.beforeStateQueue.runMiddleware(null),(_.redirectPersistenceManager||_._popupRedirectResolver)&&(yield _._setRedirectUser(null)),_._updateCurrentUser(null,!0)})()}setPersistence(_){var w=this;return this.queue((0,g.Z)(function*(){yield w.assertedPersistence.setPersistence(me(_))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(_){this._errorFactory=new W.LL("auth","Firebase",_())}onAuthStateChanged(_,w,D){return this.registerStateListener(this.authStateSubscription,_,w,D)}beforeAuthStateChanged(_,w){return this.beforeStateQueue.pushCallback(_,w)}onIdTokenChanged(_,w,D){return this.registerStateListener(this.idTokenSubscription,_,w,D)}toJSON(){var _;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(_=this._currentUser)||void 0===_?void 0:_.toJSON()}}_setRedirectUser(_,w){var D=this;return(0,g.Z)(function*(){const N=yield D.getOrInitRedirectPersistenceManager(w);return null===_?N.removeCurrentUser():N.setCurrentUser(_)})()}getOrInitRedirectPersistenceManager(_){var w=this;return(0,g.Z)(function*(){if(!w.redirectPersistenceManager){const D=_&&me(_)||w._popupRedirectResolver;ce(D,w,"argument-error"),w.redirectPersistenceManager=yield wr.create(w,[me(D._redirectPersistence)],"redirectUser"),w.redirectUser=yield w.redirectPersistenceManager.getCurrentUser()}return w.redirectPersistenceManager})()}_redirectUserForId(_){var w=this;return(0,g.Z)(function*(){var D,N;return w._isInitialized&&(yield w.queue((0,g.Z)(function*(){}))),(null===(D=w._currentUser)||void 0===D?void 0:D._redirectEventId)===_?w._currentUser:(null===(N=w.redirectUser)||void 0===N?void 0:N._redirectEventId)===_?w.redirectUser:null})()}_persistUserIfCurrent(_){var w=this;return(0,g.Z)(function*(){if(_===w.currentUser)return w.queue((0,g.Z)(function*(){return w.directlySetCurrentUser(_)}))})()}_notifyListenersIfCurrent(_){_===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var _,w;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const D=null!==(w=null===(_=this.currentUser)||void 0===_?void 0:_.uid)&&void 0!==w?w:null;this.lastNotifiedUid!==D&&(this.lastNotifiedUid=D,this.authStateSubscription.next(this.currentUser))}registerStateListener(_,w,D,N){if(this._deleted)return()=>{};const H="function"==typeof w?w:w.next.bind(w),ye=this._isInitialized?Promise.resolve():this._initializationPromise;return ce(ye,this,"internal-error"),ye.then(()=>H(this.currentUser)),"function"==typeof w?_.addObserver(w,D,N):_.addObserver(w)}directlySetCurrentUser(_){var w=this;return(0,g.Z)(function*(){w.currentUser&&w.currentUser!==_&&(w._currentUser._stopProactiveRefresh(),_&&w.isProactiveRefreshEnabled&&_._startProactiveRefresh()),w.currentUser=_,_?yield w.assertedPersistence.setCurrentUser(_):yield w.assertedPersistence.removeCurrentUser()})()}queue(_){return this.operations=this.operations.then(_,_),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(_){!_||this.frameworks.includes(_)||(this.frameworks.push(_),this.frameworks.sort(),this.clientVersion=Ur(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var _=this;return(0,g.Z)(function*(){var w;const D={"X-Client-Version":_.clientVersion};_.app.options.appId&&(D["X-Firebase-gmpid"]=_.app.options.appId);const N=yield null===(w=_.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===w?void 0:w.getHeartbeatsHeader();return N&&(D["X-Firebase-Client"]=N),D})()}}function tt(C){return(0,W.m9)(C)}class nn{constructor(_){this.auth=_,this.observer=null,this.addObserver=(0,W.ne)(w=>this.observer=w)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Bn(C,_,w){const D=tt(C);ce(D._canInitEmulator,D,"emulator-config-failed"),ce(/^https?:\/\//.test(_),D,"invalid-emulator-scheme");const N=!!(null==w?void 0:w.disableWarnings),H=ci(_),{host:ye,port:Ge}=function Ps(C){const _=ci(C),w=/(\/\/)?([^?#/]+)/.exec(C.substr(_.length));if(!w)return{host:"",port:null};const D=w[2].split("@").pop()||"",N=/^(\[[^\]]+\])(:|$)/.exec(D);if(N){const H=N[1];return{host:H,port:dr(D.substr(H.length+1))}}{const[H,ye]=D.split(":");return{host:H,port:dr(ye)}}}(_);D.config.emulator={url:`${H}//${ye}${null===Ge?"":`:${Ge}`}/`},D.settings.appVerificationDisabledForTesting=!0,D.emulatorConfig=Object.freeze({host:ye,port:Ge,protocol:H.replace(":",""),options:Object.freeze({disableWarnings:N})}),N||function ns(){function C(){const _=document.createElement("p"),w=_.style;_.innerText="Running in emulator mode. Do not use with production credentials.",w.position="fixed",w.width="100%",w.backgroundColor="#ffffff",w.border=".1em solid #000000",w.color="#b50000",w.bottom="0px",w.left="0px",w.margin="0px",w.zIndex="10000",w.textAlign="center",_.classList.add("firebase-emulator-warning"),document.body.appendChild(_)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",C):C())}()}function ci(C){const _=C.indexOf(":");return _<0?"":C.substr(0,_+1)}function dr(C){if(!C)return null;const _=Number(C);return isNaN(_)?null:_}class In{constructor(_,w){this.providerId=_,this.signInMethod=w}toJSON(){return be("not implemented")}_getIdTokenResponse(_){return be("not implemented")}_linkToIdToken(_,w){return be("not implemented")}_getReauthenticationResolver(_){return be("not implemented")}}function oo(C,_){return er.apply(this,arguments)}function er(){return(er=(0,g.Z)(function*(C,_){return wn(C,"POST","/v1/accounts:resetPassword",Gt(C,_))})).apply(this,arguments)}function Ht(C,_){return an.apply(this,arguments)}function an(){return(an=(0,g.Z)(function*(C,_){return wn(C,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function Rn(C,_){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,g.Z)(function*(C,_){return wn(C,"POST","/v1/accounts:update",Gt(C,_))})).apply(this,arguments)}function Gn(){return(Gn=(0,g.Z)(function*(C,_){return Hn(C,"POST","/v1/accounts:signInWithPassword",Gt(C,_))})).apply(this,arguments)}function gs(C,_){return jt.apply(this,arguments)}function jt(){return(jt=(0,g.Z)(function*(C,_){return wn(C,"POST","/v1/accounts:sendOobCode",Gt(C,_))})).apply(this,arguments)}function mn(C,_){return An.apply(this,arguments)}function An(){return(An=(0,g.Z)(function*(C,_){return gs(C,_)})).apply(this,arguments)}function Na(C,_){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,g.Z)(function*(C,_){return gs(C,_)})).apply(this,arguments)}function is(C,_){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,g.Z)(function*(C,_){return gs(C,_)})).apply(this,arguments)}function ao(C,_){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,g.Z)(function*(C,_){return gs(C,_)})).apply(this,arguments)}function jr(){return(jr=(0,g.Z)(function*(C,_){return Hn(C,"POST","/v1/accounts:signInWithEmailLink",Gt(C,_))})).apply(this,arguments)}function du(){return(du=(0,g.Z)(function*(C,_){return Hn(C,"POST","/v1/accounts:signInWithEmailLink",Gt(C,_))})).apply(this,arguments)}class uo extends In{constructor(_,w,D,N=null){super("password",D),this._email=_,this._password=w,this._tenantId=N}static _fromEmailAndPassword(_,w){return new uo(_,w,"password")}static _fromEmailAndCode(_,w,D=null){return new uo(_,w,"emailLink",D)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(_){const w="string"==typeof _?JSON.parse(_):_;if((null==w?void 0:w.email)&&(null==w?void 0:w.password)){if("password"===w.signInMethod)return this._fromEmailAndPassword(w.email,w.password);if("emailLink"===w.signInMethod)return this._fromEmailAndCode(w.email,w.password,w.tenantId)}return null}_getIdTokenResponse(_){var w=this;return(0,g.Z)(function*(){switch(w.signInMethod){case"password":return function rs(C,_){return Gn.apply(this,arguments)}(_,{returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function di(C,_){return jr.apply(this,arguments)}(_,{email:w._email,oobCode:w._password});default:it(_,"internal-error")}})()}_linkToIdToken(_,w){var D=this;return(0,g.Z)(function*(){switch(D.signInMethod){case"password":return Ht(_,{idToken:w,returnSecureToken:!0,email:D._email,password:D._password});case"emailLink":return function Oa(C,_){return du.apply(this,arguments)}(_,{idToken:w,email:D._email,oobCode:D._password});default:it(_,"internal-error")}})()}_getReauthenticationResolver(_){return this._getIdTokenResponse(_)}}function ar(C,_){return hu.apply(this,arguments)}function hu(){return(hu=(0,g.Z)(function*(C,_){return Hn(C,"POST","/v1/accounts:signInWithIdp",Gt(C,_))})).apply(this,arguments)}class ss extends In{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(_){const w=new ss(_.providerId,_.signInMethod);return _.idToken||_.accessToken?(_.idToken&&(w.idToken=_.idToken),_.accessToken&&(w.accessToken=_.accessToken),_.nonce&&!_.pendingToken&&(w.nonce=_.nonce),_.pendingToken&&(w.pendingToken=_.pendingToken)):_.oauthToken&&_.oauthTokenSecret?(w.accessToken=_.oauthToken,w.secret=_.oauthTokenSecret):it("argument-error"),w}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(_){const w="string"==typeof _?JSON.parse(_):_,{providerId:D,signInMethod:N}=w,H=(0,le._T)(w,["providerId","signInMethod"]);if(!D||!N)return null;const ye=new ss(D,N);return ye.idToken=H.idToken||void 0,ye.accessToken=H.accessToken||void 0,ye.secret=H.secret,ye.nonce=H.nonce,ye.pendingToken=H.pendingToken||null,ye}_getIdTokenResponse(_){return ar(_,this.buildRequest())}_linkToIdToken(_,w){const D=this.buildRequest();return D.idToken=w,ar(_,D)}_getReauthenticationResolver(_){const w=this.buildRequest();return w.autoCreate=!1,ar(_,w)}buildRequest(){const _={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)_.pendingToken=this.pendingToken;else{const w={};this.idToken&&(w.id_token=this.idToken),this.accessToken&&(w.access_token=this.accessToken),this.secret&&(w.oauth_token_secret=this.secret),w.providerId=this.providerId,this.nonce&&!this.pendingToken&&(w.nonce=this.nonce),_.postBody=(0,W.xO)(w)}return _}}function vl(C,_){return La.apply(this,arguments)}function La(){return(La=(0,g.Z)(function*(C,_){return wn(C,"POST","/v1/accounts:sendVerificationCode",Gt(C,_))})).apply(this,arguments)}function Ro(){return(Ro=(0,g.Z)(function*(C,_){return Hn(C,"POST","/v1/accounts:signInWithPhoneNumber",Gt(C,_))})).apply(this,arguments)}function Zt(){return(Zt=(0,g.Z)(function*(C,_){const w=yield Hn(C,"POST","/v1/accounts:signInWithPhoneNumber",Gt(C,_));if(w.temporaryProof)throw Xn(C,"account-exists-with-different-credential",w);return w})).apply(this,arguments)}const ks={USER_NOT_FOUND:"user-not-found"};function Gu(){return(Gu=(0,g.Z)(function*(C,_){return Hn(C,"POST","/v1/accounts:signInWithPhoneNumber",Gt(C,Object.assign(Object.assign({},_),{operation:"REAUTH"})),ks)})).apply(this,arguments)}class lo extends In{constructor(_){super("phone","phone"),this.params=_}static _fromVerification(_,w){return new lo({verificationId:_,verificationCode:w})}static _fromTokenResponse(_,w){return new lo({phoneNumber:_,temporaryProof:w})}_getIdTokenResponse(_){return function _c(C,_){return Ro.apply(this,arguments)}(_,this._makeVerificationRequest())}_linkToIdToken(_,w){return function la(C,_){return Zt.apply(this,arguments)}(_,Object.assign({idToken:w},this._makeVerificationRequest()))}_getReauthenticationResolver(_){return function Wn(C,_){return Gu.apply(this,arguments)}(_,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:_,phoneNumber:w,verificationId:D,verificationCode:N}=this.params;return _&&w?{temporaryProof:_,phoneNumber:w}:{sessionInfo:D,code:N}}toJSON(){const _={providerId:this.providerId};return this.params.phoneNumber&&(_.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(_.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(_.verificationCode=this.params.verificationCode),this.params.verificationId&&(_.verificationId=this.params.verificationId),_}static fromJSON(_){"string"==typeof _&&(_=JSON.parse(_));const{verificationId:w,verificationCode:D,phoneNumber:N,temporaryProof:H}=_;return D||w||N||H?new lo({verificationId:w,verificationCode:D,phoneNumber:N,temporaryProof:H}):null}}class Xr{constructor(_){var w,D,N,H,ye,Ge;const ht=(0,W.zd)((0,W.pd)(_)),kt=null!==(w=ht.apiKey)&&void 0!==w?w:null,Jt=null!==(D=ht.oobCode)&&void 0!==D?D:null,Sr=function wl(C){switch(C){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(N=ht.mode)&&void 0!==N?N:null);ce(kt&&Jt&&Sr,"argument-error"),this.apiKey=kt,this.operation=Sr,this.code=Jt,this.continueUrl=null!==(H=ht.continueUrl)&&void 0!==H?H:null,this.languageCode=null!==(ye=ht.languageCode)&&void 0!==ye?ye:null,this.tenantId=null!==(Ge=ht.tenantId)&&void 0!==Ge?Ge:null}static parseLink(_){const w=function Wu(C){const _=(0,W.zd)((0,W.pd)(C)).link,w=_?(0,W.zd)((0,W.pd)(_)).deep_link_id:null,D=(0,W.zd)((0,W.pd)(C)).deep_link_id;return(D?(0,W.zd)((0,W.pd)(D)).link:null)||D||w||_||C}(_);try{return new Xr(w)}catch(D){return null}}}let Ns=(()=>{class C{constructor(){this.providerId=C.PROVIDER_ID}static credential(w,D){return uo._fromEmailAndPassword(w,D)}static credentialWithLink(w,D){const N=Xr.parseLink(D);return ce(N,"argument-error"),uo._fromEmailAndCode(w,N.code,N.tenantId)}}return C.PROVIDER_ID="password",C.EMAIL_PASSWORD_SIGN_IN_METHOD="password",C.EMAIL_LINK_SIGN_IN_METHOD="emailLink",C})();class Jn{constructor(_){this.providerId=_,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(_){this.defaultLanguageCode=_}setCustomParameters(_){return this.customParameters=_,this}getCustomParameters(){return this.customParameters}}class Pr extends Jn{constructor(){super(...arguments),this.scopes=[]}addScope(_){return this.scopes.includes(_)||this.scopes.push(_),this}getScopes(){return[...this.scopes]}}class ko extends Pr{static credentialFromJSON(_){const w="string"==typeof _?JSON.parse(_):_;return ce("providerId"in w&&"signInMethod"in w,"argument-error"),ss._fromParams(w)}credential(_){return this._credential(Object.assign(Object.assign({},_),{nonce:_.rawNonce}))}_credential(_){return ce(_.idToken||_.accessToken,"argument-error"),ss._fromParams(Object.assign(Object.assign({},_),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(_){return ko.oauthCredentialFromTaggedObject(_)}static credentialFromError(_){return ko.oauthCredentialFromTaggedObject(_.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:w,oauthAccessToken:D,oauthTokenSecret:N,pendingToken:H,nonce:ye,providerId:Ge}=_;if(!D&&!N&&!w&&!H||!Ge)return null;try{return new ko(Ge)._credential({idToken:w,accessToken:D,nonce:ye,pendingToken:H})}catch(ht){return null}}}let Fa=(()=>{class C extends Pr{constructor(){super("facebook.com")}static credential(w){return ss._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.FACEBOOK_SIGN_IN_METHOD,accessToken:w})}static credentialFromResult(w){return C.credentialFromTaggedObject(w)}static credentialFromError(w){return C.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w||!("oauthAccessToken"in w)||!w.oauthAccessToken)return null;try{return C.credential(w.oauthAccessToken)}catch(D){return null}}}return C.FACEBOOK_SIGN_IN_METHOD="facebook.com",C.PROVIDER_ID="facebook.com",C})(),ca=(()=>{class C extends Pr{constructor(){super("google.com"),this.addScope("profile")}static credential(w,D){return ss._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GOOGLE_SIGN_IN_METHOD,idToken:w,accessToken:D})}static credentialFromResult(w){return C.credentialFromTaggedObject(w)}static credentialFromError(w){return C.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w)return null;const{oauthIdToken:D,oauthAccessToken:N}=w;if(!D&&!N)return null;try{return C.credential(D,N)}catch(H){return null}}}return C.GOOGLE_SIGN_IN_METHOD="google.com",C.PROVIDER_ID="google.com",C})(),qu=(()=>{class C extends Pr{constructor(){super("github.com")}static credential(w){return ss._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GITHUB_SIGN_IN_METHOD,accessToken:w})}static credentialFromResult(w){return C.credentialFromTaggedObject(w)}static credentialFromError(w){return C.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w||!("oauthAccessToken"in w)||!w.oauthAccessToken)return null;try{return C.credential(w.oauthAccessToken)}catch(D){return null}}}return C.GITHUB_SIGN_IN_METHOD="github.com",C.PROVIDER_ID="github.com",C})();class co extends In{constructor(_,w){super(_,_),this.pendingToken=w}_getIdTokenResponse(_){return ar(_,this.buildRequest())}_linkToIdToken(_,w){const D=this.buildRequest();return D.idToken=w,ar(_,D)}_getReauthenticationResolver(_){const w=this.buildRequest();return w.autoCreate=!1,ar(_,w)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(_){const w="string"==typeof _?JSON.parse(_):_,{providerId:D,signInMethod:N,pendingToken:H}=w;return D&&N&&H&&D===N?new co(D,H):null}static _create(_,w){return new co(_,w)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Os extends Jn{constructor(_){ce(_.startsWith("saml."),"argument-error"),super(_)}static credentialFromResult(_){return Os.samlCredentialFromTaggedObject(_)}static credentialFromError(_){return Os.samlCredentialFromTaggedObject(_.customData||{})}static credentialFromJSON(_){const w=co.fromJSON(_);return ce(w,"argument-error"),w}static samlCredentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{pendingToken:w,providerId:D}=_;if(!w||!D)return null;try{return co._create(D,w)}catch(N){return null}}}let ur=(()=>{class C extends Pr{constructor(){super("twitter.com")}static credential(w,D){return ss._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.TWITTER_SIGN_IN_METHOD,oauthToken:w,oauthTokenSecret:D})}static credentialFromResult(w){return C.credentialFromTaggedObject(w)}static credentialFromError(w){return C.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w)return null;const{oauthAccessToken:D,oauthTokenSecret:N}=w;if(!D||!N)return null;try{return C.credential(D,N)}catch(H){return null}}}return C.TWITTER_SIGN_IN_METHOD="twitter.com",C.PROVIDER_ID="twitter.com",C})();function da(C,_){return zr.apply(this,arguments)}function zr(){return(zr=(0,g.Z)(function*(C,_){return Hn(C,"POST","/v1/accounts:signUp",Gt(C,_))})).apply(this,arguments)}class ei{constructor(_){this.user=_.user,this.providerId=_.providerId,this._tokenResponse=_._tokenResponse,this.operationType=_.operationType}static _fromIdTokenResponse(_,w,D,N=!1){return(0,g.Z)(function*(){const H=yield St._fromIdTokenResponse(_,D,N),ye=fu(D);return new ei({user:H,providerId:ye,_tokenResponse:D,operationType:w})})()}static _forOperation(_,w,D){return(0,g.Z)(function*(){yield _._updateTokensIfNecessary(D,!0);const N=fu(D);return new ei({user:_,providerId:N,_tokenResponse:D,operationType:w})})()}}function fu(C){return C.providerId?C.providerId:"phoneNumber"in C?"phone":null}function El(C){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,g.Z)(function*(C){var _;const w=tt(C);if(yield w._initializationPromise,null===(_=w.currentUser)||void 0===_?void 0:_.isAnonymous)return new ei({user:w.currentUser,providerId:null,operationType:"signIn"});const D=yield da(w,{returnSecureToken:!0}),N=yield ei._fromIdTokenResponse(w,"signIn",D,!0);return yield w._updateCurrentUser(N.user),N})).apply(this,arguments)}class pu extends W.ZR{constructor(_,w,D,N){var H;super(w.code,w.message),this.operationType=D,this.user=N,Object.setPrototypeOf(this,pu.prototype),this.customData={appName:_.name,tenantId:null!==(H=_.tenantId)&&void 0!==H?H:void 0,_serverResponse:w.customData._serverResponse,operationType:D}}static _fromErrorAndOperation(_,w,D,N){return new pu(_,w,D,N)}}function gu(C,_,w,D){return("reauthenticate"===_?w._getReauthenticationResolver(C):w._getIdTokenResponse(C)).catch(H=>{throw"auth/multi-factor-auth-required"===H.code?pu._fromErrorAndOperation(C,H,_,D):H})}function Va(C){return new Set(C.map(({providerId:_})=>_).filter(_=>!!_))}function Ls(C,_){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,g.Z)(function*(C,_){const w=(0,W.m9)(C);yield ti(!0,w,_);const{providerUserInfo:D}=yield Yr(w.auth,{idToken:yield w.getIdToken(),deleteProvider:[_]}),N=Va(D||[]);return w.providerData=w.providerData.filter(H=>N.has(H.providerId)),N.has("phone")||(w.phoneNumber=null),yield w.auth._persistUserIfCurrent(w),w})).apply(this,arguments)}function On(C,_){return ha.apply(this,arguments)}function ha(){return(ha=(0,g.Z)(function*(C,_,w=!1){const D=yield mt(C,_._linkToIdToken(C.auth,yield C.getIdToken()),w);return ei._forOperation(C,"link",D)})).apply(this,arguments)}function ti(C,_,w){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,g.Z)(function*(C,_,w){yield or(_);const N=!1===C?"provider-already-linked":"no-such-provider";ce(Va(_.providerData).has(w)===C,_.auth,N)})).apply(this,arguments)}function Ba(C,_){return ja.apply(this,arguments)}function ja(){return(ja=(0,g.Z)(function*(C,_,w=!1){const{auth:D}=C,N="reauthenticate";try{const H=yield mt(C,gu(D,N,_,C),w);ce(H.idToken,D,"internal-error");const ye=cn(H.idToken);ce(ye,D,"internal-error");const{sub:Ge}=ye;return ce(C.uid===Ge,D,"user-mismatch"),ei._forOperation(C,N,H)}catch(H){throw"auth/user-not-found"===(null==H?void 0:H.code)&&it(D,"user-mismatch"),H}})).apply(this,arguments)}function No(C,_){return Er.apply(this,arguments)}function Er(){return(Er=(0,g.Z)(function*(C,_,w=!1){const D="signIn",N=yield gu(C,D,_),H=yield ei._fromIdTokenResponse(C,D,N);return w||(yield C._updateCurrentUser(H.user)),H})).apply(this,arguments)}function mu(C,_){return tr.apply(this,arguments)}function tr(){return(tr=(0,g.Z)(function*(C,_){return No(tt(C),_)})).apply(this,arguments)}function ms(C,_){return hr.apply(this,arguments)}function hr(){return(hr=(0,g.Z)(function*(C,_){const w=(0,W.m9)(C);return yield ti(!1,w,_.providerId),On(w,_)})).apply(this,arguments)}function Vi(C,_){return _s.apply(this,arguments)}function _s(){return(_s=(0,g.Z)(function*(C,_){return Ba((0,W.m9)(C),_)})).apply(this,arguments)}function Oo(C,_){return lr.apply(this,arguments)}function lr(){return(lr=(0,g.Z)(function*(C,_){return Hn(C,"POST","/v1/accounts:signInWithCustomToken",Gt(C,_))})).apply(this,arguments)}function Fs(C,_){return ho.apply(this,arguments)}function ho(){return(ho=(0,g.Z)(function*(C,_){const w=tt(C),D=yield Oo(w,{token:_,returnSecureToken:!0}),N=yield ei._fromIdTokenResponse(w,"signIn",D);return yield w._updateCurrentUser(N.user),N})).apply(this,arguments)}class Rt{constructor(_,w){this.factorId=_,this.uid=w.mfaEnrollmentId,this.enrollmentTime=new Date(w.enrolledAt).toUTCString(),this.displayName=w.displayName}static _fromServerResponse(_,w){return"phoneInfo"in w?Lo._fromServerResponse(_,w):it(_,"internal-error")}}class Lo extends Rt{constructor(_){super("phone",_),this.phoneNumber=_.phoneInfo}static _fromServerResponse(_,w){return new Lo(w)}}function fa(C,_,w){var D;ce((null===(D=w.url)||void 0===D?void 0:D.length)>0,C,"invalid-continue-uri"),ce(void 0===w.dynamicLinkDomain||w.dynamicLinkDomain.length>0,C,"invalid-dynamic-link-domain"),_.continueUrl=w.url,_.dynamicLinkDomain=w.dynamicLinkDomain,_.canHandleCodeInApp=w.handleCodeInApp,w.iOS&&(ce(w.iOS.bundleId.length>0,C,"missing-ios-bundle-id"),_.iOSBundleId=w.iOS.bundleId),w.android&&(ce(w.android.packageName.length>0,C,"missing-android-pkg-name"),_.androidInstallApp=w.android.installApp,_.androidMinimumVersionCode=w.android.minimumVersion,_.androidPackageName=w.android.packageName)}function _u(C,_,w){return za.apply(this,arguments)}function za(){return(za=(0,g.Z)(function*(C,_,w){const D=(0,W.m9)(C),N={requestType:"PASSWORD_RESET",email:_};w&&fa(D,N,w),yield Na(D,N)})).apply(this,arguments)}function bl(C,_,w){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,g.Z)(function*(C,_,w){yield oo((0,W.m9)(C),{oobCode:_,newPassword:w})})).apply(this,arguments)}function vc(C,_){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,g.Z)(function*(C,_){yield Rn((0,W.m9)(C),{oobCode:_})})).apply(this,arguments)}function Ve(C,_){return dn.apply(this,arguments)}function dn(){return(dn=(0,g.Z)(function*(C,_){const w=(0,W.m9)(C),D=yield oo(w,{oobCode:_}),N=D.requestType;switch(ce(N,w,"internal-error"),N){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ce(D.newEmail,w,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ce(D.mfaInfo,w,"internal-error");default:ce(D.email,w,"internal-error")}let H=null;return D.mfaInfo&&(H=Rt._fromServerResponse(tt(w),D.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.newEmail:D.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.email:D.newEmail)||null,multiFactorInfo:H},operation:N}})).apply(this,arguments)}function Us(C,_){return qn.apply(this,arguments)}function qn(){return(qn=(0,g.Z)(function*(C,_){const{data:w}=yield Ve((0,W.m9)(C),_);return w.email})).apply(this,arguments)}function Uo(C,_,w){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,g.Z)(function*(C,_,w){const D=tt(C),N=yield da(D,{returnSecureToken:!0,email:_,password:w}),H=yield ei._fromIdTokenResponse(D,"signIn",N);return yield D._updateCurrentUser(H.user),H})).apply(this,arguments)}function hi(C,_,w){return mu((0,W.m9)(C),Ns.credential(_,w))}function yu(C,_,w){return fo.apply(this,arguments)}function fo(){return(fo=(0,g.Z)(function*(C,_,w){const D=(0,W.m9)(C),N={requestType:"EMAIL_SIGNIN",email:_};ce(w.handleCodeInApp,D,"argument-error"),w&&fa(D,N,w),yield is(D,N)})).apply(this,arguments)}function wc(C,_){const w=Xr.parseLink(_);return"EMAIL_SIGNIN"===(null==w?void 0:w.operation)}function Bs(C,_,w){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,g.Z)(function*(C,_,w){const D=(0,W.m9)(C),N=Ns.credentialWithLink(_,w||oe());return ce(N._tenantId===(D.tenantId||null),D,"tenant-id-mismatch"),mu(D,N)})).apply(this,arguments)}function Vo(C,_){return br.apply(this,arguments)}function br(){return(br=(0,g.Z)(function*(C,_){return wn(C,"POST","/v1/accounts:createAuthUri",Gt(C,_))})).apply(this,arguments)}function ys(C,_){return fi.apply(this,arguments)}function fi(){return(fi=(0,g.Z)(function*(C,_){const D={identifier:_,continueUri:Qe()?oe():"http://localhost"},{signinMethods:N}=yield Vo((0,W.m9)(C),D);return N||[]})).apply(this,arguments)}function pa(C,_){return kr.apply(this,arguments)}function kr(){return(kr=(0,g.Z)(function*(C,_){const w=(0,W.m9)(C),N={requestType:"VERIFY_EMAIL",idToken:yield C.getIdToken()};_&&fa(w.auth,N,_);const{email:H}=yield mn(w.auth,N);H!==C.email&&(yield C.reload())})).apply(this,arguments)}function Ec(C,_,w){return pi.apply(this,arguments)}function pi(){return(pi=(0,g.Z)(function*(C,_,w){const D=(0,W.m9)(C),H={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield C.getIdToken(),newEmail:_};w&&fa(D.auth,H,w);const{email:ye}=yield ao(D.auth,H);ye!==C.email&&(yield C.reload())})).apply(this,arguments)}function vu(C,_){return ga.apply(this,arguments)}function ga(){return(ga=(0,g.Z)(function*(C,_){return wn(C,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function $a(C,_){return js.apply(this,arguments)}function js(){return(js=(0,g.Z)(function*(C,{displayName:_,photoURL:w}){if(void 0===_&&void 0===w)return;const D=(0,W.m9)(C),H={idToken:yield D.getIdToken(),displayName:_,photoUrl:w,returnSecureToken:!0},ye=yield mt(D,vu(D.auth,H));D.displayName=ye.displayName||null,D.photoURL=ye.photoUrl||null;const Ge=D.providerData.find(({providerId:ht})=>"password"===ht);Ge&&(Ge.displayName=D.displayName,Ge.photoURL=D.photoURL),yield D._updateTokensIfNecessary(ye)})).apply(this,arguments)}function wu(C,_){return po((0,W.m9)(C),_,null)}function Ga(C,_){return po((0,W.m9)(C),null,_)}function po(C,_,w){return go.apply(this,arguments)}function go(){return(go=(0,g.Z)(function*(C,_,w){const{auth:D}=C,H={idToken:yield C.getIdToken(),returnSecureToken:!0};_&&(H.email=_),w&&(H.password=w);const ye=yield mt(C,Ht(D,H));yield C._updateTokensIfNecessary(ye,!0)})).apply(this,arguments)}class mo{constructor(_,w,D={}){this.isNewUser=_,this.providerId=w,this.profile=D}}class Cl extends mo{constructor(_,w,D,N){super(_,w,D),this.username=N}}class Eu extends mo{constructor(_,w){super(_,"facebook.com",w)}}class bu extends Cl{constructor(_,w){super(_,"github.com",w,"string"==typeof(null==w?void 0:w.login)?null==w?void 0:w.login:null)}}class gi extends mo{constructor(_,w){super(_,"google.com",w)}}class bc extends Cl{constructor(_,w,D){super(_,"twitter.com",w,D)}}function Cu(C){const{user:_,_tokenResponse:w}=C;return _.isAnonymous&&!w?{providerId:null,isNewUser:!1,profile:null}:function Bo(C){var _,w;if(!C)return null;const{providerId:D}=C,N=C.rawUserInfo?JSON.parse(C.rawUserInfo):{},H=C.isNewUser||"identitytoolkit#SignupNewUserResponse"===C.kind;if(!D&&(null==C?void 0:C.idToken)){const ye=null===(w=null===(_=cn(C.idToken))||void 0===_?void 0:_.firebase)||void 0===w?void 0:w.sign_in_provider;if(ye)return new mo(H,"anonymous"!==ye&&"custom"!==ye?ye:null)}if(!D)return null;switch(D){case"facebook.com":return new Eu(H,N);case"github.com":return new bu(H,N);case"google.com":return new gi(H,N);case"twitter.com":return new bc(H,N,C.screenName||null);case"custom":case"anonymous":return new mo(H,null);default:return new mo(H,D,N)}}(w)}class zs{constructor(_,w){this.type=_,this.credential=w}static _fromIdtoken(_){return new zs("enroll",_)}static _fromMfaPendingCredential(_){return new zs("signin",_)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(_){var w,D;if(null==_?void 0:_.multiFactorSession){if(null===(w=_.multiFactorSession)||void 0===w?void 0:w.pendingCredential)return zs._fromMfaPendingCredential(_.multiFactorSession.pendingCredential);if(null===(D=_.multiFactorSession)||void 0===D?void 0:D.idToken)return zs._fromIdtoken(_.multiFactorSession.idToken)}return null}}class vs{constructor(_,w,D){this.session=_,this.hints=w,this.signInResolver=D}static _fromError(_,w){const D=tt(_),N=w.customData._serverResponse,H=(N.mfaInfo||[]).map(Ge=>Rt._fromServerResponse(D,Ge));ce(N.mfaPendingCredential,D,"internal-error");const ye=zs._fromMfaPendingCredential(N.mfaPendingCredential);return new vs(ye,H,function(){var Ge=(0,g.Z)(function*(ht){const kt=yield ht._process(D,ye);delete N.mfaInfo,delete N.mfaPendingCredential;const Jt=Object.assign(Object.assign({},N),{idToken:kt.idToken,refreshToken:kt.refreshToken});switch(w.operationType){case"signIn":const Sr=yield ei._fromIdTokenResponse(D,w.operationType,Jt);return yield D._updateCurrentUser(Sr.user),Sr;case"reauthenticate":return ce(w.user,D,"internal-error"),ei._forOperation(w.user,w.operationType,Jt);default:it(D,"internal-error")}});return function(ht){return Ge.apply(this,arguments)}}())}resolveSignIn(_){var w=this;return(0,g.Z)(function*(){return w.signInResolver(_)})()}}function _a(C,_){var w;const D=(0,W.m9)(C),N=_;return ce(_.customData.operationType,D,"argument-error"),ce(null===(w=N.customData._serverResponse)||void 0===w?void 0:w.mfaPendingCredential,D,"argument-error"),vs._fromError(D,N)}function Cr(C,_){return wn(C,"POST","/v2/accounts/mfaEnrollment:start",Gt(C,_))}class ws{constructor(_){this.user=_,this.enrolledFactors=[],_._onReload(w=>{w.mfaInfo&&(this.enrolledFactors=w.mfaInfo.map(D=>Rt._fromServerResponse(_.auth,D)))})}static _fromUser(_){return new ws(_)}getSession(){var _=this;return(0,g.Z)(function*(){return zs._fromIdtoken(yield _.user.getIdToken())})()}enroll(_,w){var D=this;return(0,g.Z)(function*(){const N=_,H=yield D.getSession(),ye=yield mt(D.user,N._process(D.user.auth,H,w));return yield D.user._updateTokensIfNecessary(ye),D.user.reload()})()}unenroll(_){var w=this;return(0,g.Z)(function*(){const D="string"==typeof _?_:_.uid,N=yield w.user.getIdToken(),H=yield mt(w.user,function _o(C,_){return wn(C,"POST","/v2/accounts/mfaEnrollment:withdraw",Gt(C,_))}(w.user.auth,{idToken:N,mfaEnrollmentId:D}));w.enrolledFactors=w.enrolledFactors.filter(({uid:ye})=>ye!==D),yield w.user._updateTokensIfNecessary(H);try{yield w.user.reload()}catch(ye){if("auth/user-token-expired"!==ye.code)throw ye}})()}}const jo=new WeakMap;function ya(C){const _=(0,W.m9)(C);return jo.has(_)||jo.set(_,ws._fromUser(_)),jo.get(_)}const Ku="__sak";class Es{constructor(_,w){this.storageRetriever=_,this.type=w}_isAvailable(){try{return this.storage?(this.storage.setItem(Ku,"1"),this.storage.removeItem(Ku),Promise.resolve(!0)):Promise.resolve(!1)}catch(_){return Promise.resolve(!1)}}_set(_,w){return this.storage.setItem(_,JSON.stringify(w)),Promise.resolve()}_get(_){const w=this.storage.getItem(_);return Promise.resolve(w?JSON.parse(w):null)}_remove(_){return this.storage.removeItem(_),Promise.resolve()}get storage(){return this.storageRetriever()}}const yt=(()=>{class C extends Es{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(w,D)=>this.onStorageEvent(w,D),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function zo(){const C=(0,W.z$)();return q(C)||tn(C)}()&&function ps(){try{return!(!window||window===window.top)}catch(C){return!1}}(),this.fallbackToPolling=Qr(),this._shouldAllowMigration=!0}forAllChangedKeys(w){for(const D of Object.keys(this.listeners)){const N=this.storage.getItem(D),H=this.localCache[D];N!==H&&w(D,H,N)}}onStorageEvent(w,D=!1){if(!w.key)return void this.forAllChangedKeys((Ge,ht,kt)=>{this.notifyListeners(Ge,kt)});const N=w.key;if(D?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ge=this.storage.getItem(N);if(w.newValue!==Ge)null!==w.newValue?this.storage.setItem(N,w.newValue):this.storage.removeItem(N);else if(this.localCache[N]===w.newValue&&!D)return}const H=()=>{const Ge=this.storage.getItem(N);!D&&this.localCache[N]===Ge||this.notifyListeners(N,Ge)},ye=this.storage.getItem(N);!function on(){return(0,W.w1)()&&10===document.documentMode}()||ye===w.newValue||w.newValue===w.oldValue?H():setTimeout(H,10)}notifyListeners(w,D){this.localCache[w]=D;const N=this.listeners[w];if(N)for(const H of Array.from(N))H(D&&JSON.parse(D))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((w,D,N)=>{this.onStorageEvent(new StorageEvent("storage",{key:w,oldValue:D,newValue:N}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(w,D){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[w]||(this.listeners[w]=new Set,this.localCache[w]=this.storage.getItem(w)),this.listeners[w].add(D)}_removeListener(w,D){this.listeners[w]&&(this.listeners[w].delete(D),0===this.listeners[w].size&&delete this.listeners[w]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(w,D){var N=()=>super._set,H=this;return(0,g.Z)(function*(){yield N().call(H,w,D),H.localCache[w]=JSON.stringify(D)})()}_get(w){var D=()=>super._get,N=this;return(0,g.Z)(function*(){const H=yield D().call(N,w);return N.localCache[w]=JSON.stringify(H),H})()}_remove(w){var D=()=>super._remove,N=this;return(0,g.Z)(function*(){yield D().call(N,w),delete N.localCache[w]})()}}return C.type="LOCAL",C})(),ni=(()=>{class C extends Es{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(w,D){}_removeListener(w,D){}}return C.type="SESSION",C})();let va=(()=>{class C{constructor(w){this.eventTarget=w,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(w){const D=this.receivers.find(H=>H.isListeningto(w));if(D)return D;const N=new C(w);return this.receivers.push(N),N}isListeningto(w){return this.eventTarget===w}handleEvent(w){var D=this;return(0,g.Z)(function*(){const N=w,{eventId:H,eventType:ye,data:Ge}=N.data,ht=D.handlersMap[ye];if(!(null==ht?void 0:ht.size))return;N.ports[0].postMessage({status:"ack",eventId:H,eventType:ye});const kt=Array.from(ht).map(function(){var Sr=(0,g.Z)(function*(Eo){return Eo(N.origin,Ge)});return function(Eo){return Sr.apply(this,arguments)}}()),Jt=yield function ri(C){return Promise.all(C.map(function(){var _=(0,g.Z)(function*(w){try{return{fulfilled:!0,value:yield w}}catch(D){return{fulfilled:!1,reason:D}}});return function(w){return _.apply(this,arguments)}}()))}(kt);N.ports[0].postMessage({status:"done",eventId:H,eventType:ye,response:Jt})})()}_subscribe(w,D){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[w]||(this.handlersMap[w]=new Set),this.handlersMap[w].add(D)}_unsubscribe(w,D){this.handlersMap[w]&&D&&this.handlersMap[w].delete(D),(!D||0===this.handlersMap[w].size)&&delete this.handlersMap[w],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return C.receivers=[],C})();function wa(C="",_=10){let w="";for(let D=0;D<_;D++)w+=Math.floor(10*Math.random());return C+w}class Yu{constructor(_){this.target=_,this.handlers=new Set}removeMessageHandler(_){_.messageChannel&&(_.messageChannel.port1.removeEventListener("message",_.onMessage),_.messageChannel.port1.close()),this.handlers.delete(_)}_send(_,w,D=50){var N=this;return(0,g.Z)(function*(){const H="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!H)throw new Error("connection_unavailable");let ye,Ge;return new Promise((ht,kt)=>{const Jt=wa("",20);H.port1.start();const Sr=setTimeout(()=>{kt(new Error("unsupported_event"))},D);Ge={messageChannel:H,onMessage(Eo){const Ta=Eo;if(Ta.data.eventId===Jt)switch(Ta.data.status){case"ack":clearTimeout(Sr),ye=setTimeout(()=>{kt(new Error("timeout"))},3e3);break;case"done":clearTimeout(ye),ht(Ta.data.response);break;default:clearTimeout(Sr),clearTimeout(ye),kt(new Error("invalid_response"))}}},N.handlers.add(Ge),H.port1.addEventListener("message",Ge.onMessage),N.target.postMessage({eventType:_,eventId:Jt,data:w},[H.port2])}).finally(()=>{Ge&&N.removeMessageHandler(Ge)})})()}}function Fn(){return window}function l(){return void 0!==Fn().WorkerGlobalScope&&"function"==typeof Fn().importScripts}function v(){return(v=(0,g.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(C){return null}})).apply(this,arguments)}const V="firebaseLocalStorageDb",de="firebaseLocalStorage",De="fbase_key";class We{constructor(_){this.request=_}toPromise(){return new Promise((_,w)=>{this.request.addEventListener("success",()=>{_(this.request.result)}),this.request.addEventListener("error",()=>{w(this.request.error)})})}}function _t(C,_){return C.transaction([de],_?"readwrite":"readonly").objectStore(de)}function Kt(){const C=indexedDB.open(V,1);return new Promise((_,w)=>{C.addEventListener("error",()=>{w(C.error)}),C.addEventListener("upgradeneeded",()=>{const D=C.result;try{D.createObjectStore(de,{keyPath:De})}catch(N){w(N)}}),C.addEventListener("success",(0,g.Z)(function*(){const D=C.result;D.objectStoreNames.contains(de)?_(D):(D.close(),yield function Lt(){const C=indexedDB.deleteDatabase(V);return new We(C).toPromise()}(),_(yield Kt()))}))})}function mi(C,_,w){return Di.apply(this,arguments)}function Di(){return(Di=(0,g.Z)(function*(C,_,w){const D=_t(C,!0).put({[De]:_,value:w});return new We(D).toPromise()})).apply(this,arguments)}function ii(){return(ii=(0,g.Z)(function*(C,_){const w=_t(C,!1).get(_),D=yield new We(w).toPromise();return void 0===D?null:D.value})).apply(this,arguments)}function $s(C,_){const w=_t(C,!0).delete(_);return new We(w).toPromise()}const Bi=(()=>{class C{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var w=this;return(0,g.Z)(function*(){return w.db||(w.db=yield Kt()),w.db})()}_withRetries(w){var D=this;return(0,g.Z)(function*(){let N=0;for(;;)try{const H=yield D._openDb();return yield w(H)}catch(H){if(N++>3)throw H;D.db&&(D.db.close(),D.db=void 0)}})()}initializeServiceWorkerMessaging(){var w=this;return(0,g.Z)(function*(){return l()?w.initializeReceiver():w.initializeSender()})()}initializeReceiver(){var w=this;return(0,g.Z)(function*(){w.receiver=va._getInstance(function P(){return l()?self:null}()),w.receiver._subscribe("keyChanged",function(){var D=(0,g.Z)(function*(N,H){return{keyProcessed:(yield w._poll()).includes(H.key)}});return function(N,H){return D.apply(this,arguments)}}()),w.receiver._subscribe("ping",function(){var D=(0,g.Z)(function*(N,H){return["keyChanged"]});return function(N,H){return D.apply(this,arguments)}}())})()}initializeSender(){var w=this;return(0,g.Z)(function*(){var D,N;if(w.activeServiceWorker=yield function f(){return v.apply(this,arguments)}(),!w.activeServiceWorker)return;w.sender=new Yu(w.activeServiceWorker);const H=yield w.sender._send("ping",{},800);!H||(null===(D=H[0])||void 0===D?void 0:D.fulfilled)&&(null===(N=H[0])||void 0===N?void 0:N.value.includes("keyChanged"))&&(w.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(w){var D=this;return(0,g.Z)(function*(){if(D.sender&&D.activeServiceWorker&&function T(){var C;return(null===(C=null==navigator?void 0:navigator.serviceWorker)||void 0===C?void 0:C.controller)||null}()===D.activeServiceWorker)try{yield D.sender._send("keyChanged",{key:w},D.serviceWorkerReceiverAvailable?800:50)}catch(N){}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const w=yield Kt();return yield mi(w,Ku,"1"),yield $s(w,Ku),!0}catch(w){}return!1})()}_withPendingWrite(w){var D=this;return(0,g.Z)(function*(){D.pendingWrites++;try{yield w()}finally{D.pendingWrites--}})()}_set(w,D){var N=this;return(0,g.Z)(function*(){return N._withPendingWrite((0,g.Z)(function*(){return yield N._withRetries(H=>mi(H,w,D)),N.localCache[w]=D,N.notifyServiceWorker(w)}))})()}_get(w){var D=this;return(0,g.Z)(function*(){const N=yield D._withRetries(H=>function Hs(C,_){return ii.apply(this,arguments)}(H,w));return D.localCache[w]=N,N})()}_remove(w){var D=this;return(0,g.Z)(function*(){return D._withPendingWrite((0,g.Z)(function*(){return yield D._withRetries(N=>$s(N,w)),delete D.localCache[w],D.notifyServiceWorker(w)}))})()}_poll(){var w=this;return(0,g.Z)(function*(){const D=yield w._withRetries(ye=>{const Ge=_t(ye,!1).getAll();return new We(Ge).toPromise()});if(!D)return[];if(0!==w.pendingWrites)return[];const N=[],H=new Set;for(const{fbase_key:ye,value:Ge}of D)H.add(ye),JSON.stringify(w.localCache[ye])!==JSON.stringify(Ge)&&(w.notifyListeners(ye,Ge),N.push(ye));for(const ye of Object.keys(w.localCache))w.localCache[ye]&&!H.has(ye)&&(w.notifyListeners(ye,null),N.push(ye));return N})()}notifyListeners(w,D){this.localCache[w]=D;const N=this.listeners[w];if(N)for(const H of Array.from(N))H(D)}startPolling(){var w=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return w._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(w,D){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[w]||(this.listeners[w]=new Set,this._get(w)),this.listeners[w].add(D)}_removeListener(w,D){this.listeners[w]&&(this.listeners[w].delete(D),0===this.listeners[w].size&&delete this.listeners[w]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return C.type="LOCAL",C})();function Dl(C,_){return wn(C,"POST","/v2/accounts/mfaSignIn:start",Gt(C,_))}function Si(){return(Si=(0,g.Z)(function*(C){return(yield wn(C,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function yo(C){return new Promise((_,w)=>{const D=document.createElement("script");D.setAttribute("src",C),D.onload=_,D.onerror=N=>{const H=ze("internal-error");H.customData=N,w(H)},D.type="text/javascript",D.charset="UTF-8",function Ir(){var C,_;return null!==(_=null===(C=document.getElementsByTagName("head"))||void 0===C?void 0:C[0])&&void 0!==_?_:document}().appendChild(D)})}function Ho(C){return`__${C}${Math.floor(1e6*Math.random())}`}const pr=1e12;class Ea{constructor(_){this.auth=_,this.counter=pr,this._widgets=new Map}render(_,w){const D=this.counter;return this._widgets.set(D,new Gr(_,this.auth.name,w||{})),this.counter++,D}reset(_){var w;const D=_||pr;null===(w=this._widgets.get(D))||void 0===w||w.delete(),this._widgets.delete(D)}getResponse(_){var w;return(null===(w=this._widgets.get(_||pr))||void 0===w?void 0:w.getResponse())||""}execute(_){var w=this;return(0,g.Z)(function*(){var D;return null===(D=w._widgets.get(_||pr))||void 0===D||D.execute(),""})()}}class Gr{constructor(_,w,D){this.params=D,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const N="string"==typeof _?document.getElementById(_):_;ce(N,"argument-error",{appName:w}),this.container=N,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Gs(C){const _=[],w="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let D=0;D<C;D++)_.push(w.charAt(Math.floor(Math.random()*w.length)));return _.join("")}(50);const{callback:_,"expired-callback":w}=this.params;if(_)try{_(this.responseToken)}catch(D){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,w)try{w()}catch(D){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Du=Ho("rcb"),Xh=new Xe(3e4,6e4);class ef{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Fn().grecaptcha}load(_,w=""){return ce(function N_(C){return C.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(C)}(w),_,"argument-error"),this.shouldResolveImmediately(w)?Promise.resolve(Fn().grecaptcha):new Promise((D,N)=>{const H=Fn().setTimeout(()=>{N(ze(_,"network-request-failed"))},Xh.get());Fn()[Du]=()=>{Fn().clearTimeout(H),delete Fn()[Du];const Ge=Fn().grecaptcha;if(!Ge)return void N(ze(_,"internal-error"));const ht=Ge.render;Ge.render=(kt,Jt)=>{const Sr=ht(kt,Jt);return this.counter++,Sr},this.hostLanguage=w,D(Ge)},yo(`https://www.google.com/recaptcha/api.js??${(0,W.xO)({onload:Du,render:"explicit",hl:w})}`).catch(()=>{clearTimeout(H),N(ze(_,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(_){return!!Fn().grecaptcha&&(_===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Su{load(_){return(0,g.Z)(function*(){return new Ea(_)})()}clearedOneInstance(){}}const ji="recaptcha",tf={theme:"light",type:"image"};class ba{constructor(_,w=Object.assign({},tf),D){this.parameters=w,this.type=ji,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=tt(D),this.isInvisible="invisible"===this.parameters.size,ce("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const N="string"==typeof _?document.getElementById(_):_;ce(N,this.auth,"argument-error"),this.container=N,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Su:new ef,this.validateStartingState()}verify(){var _=this;return(0,g.Z)(function*(){_.assertNotDestroyed();const w=yield _.render(),D=_.getAssertedRecaptcha();return D.getResponse(w)||new Promise(H=>{const ye=Ge=>{!Ge||(_.tokenChangeListeners.delete(ye),H(Ge))};_.tokenChangeListeners.add(ye),_.isInvisible&&D.execute(w)})})()}render(){try{this.assertNotDestroyed()}catch(_){return Promise.reject(_)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(_=>{throw this.renderPromise=null,_})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(_=>{this.container.removeChild(_)})}validateStartingState(){ce(!this.parameters.sitekey,this.auth,"argument-error"),ce(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ce("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(_){return w=>{if(this.tokenChangeListeners.forEach(D=>D(w)),"function"==typeof _)_(w);else if("string"==typeof _){const D=Fn()[_];"function"==typeof D&&D(w)}}}assertNotDestroyed(){ce(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var _=this;return(0,g.Z)(function*(){if(yield _.init(),!_.widgetId){let w=_.container;if(!_.isInvisible){const D=document.createElement("div");w.appendChild(D),w=D}_.widgetId=_.getAssertedRecaptcha().render(w,_.parameters)}return _.widgetId})()}init(){var _=this;return(0,g.Z)(function*(){ce(Qe()&&!l(),_.auth,"internal-error"),yield function Cd(){let C=null;return new Promise(_=>{"complete"!==document.readyState?(C=()=>_(),window.addEventListener("load",C)):_()}).catch(_=>{throw C&&window.removeEventListener("load",C),_})}(),_.recaptcha=yield _._recaptchaLoader.load(_.auth,_.auth.languageCode||void 0);const w=yield function rr(C){return Si.apply(this,arguments)}(_.auth);ce(w,_.auth,"internal-error"),_.parameters.sitekey=w})()}getAssertedRecaptcha(){return ce(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ws{constructor(_,w){this.verificationId=_,this.onConfirmation=w}confirm(_){const w=lo._fromVerification(this.verificationId,_);return this.onConfirmation(w)}}function nf(C,_,w){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,g.Z)(function*(C,_,w){const D=tt(C),N=yield xi(D,_,(0,W.m9)(w));return new Ws(N,H=>mu(D,H))})).apply(this,arguments)}function Dc(C,_,w){return Au.apply(this,arguments)}function Au(){return(Au=(0,g.Z)(function*(C,_,w){const D=(0,W.m9)(C);yield ti(!1,D,"phone");const N=yield xi(D.auth,_,(0,W.m9)(w));return new Ws(N,H=>ms(D,H))})).apply(this,arguments)}function Zp(C,_,w){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,g.Z)(function*(C,_,w){const D=(0,W.m9)(C),N=yield xi(D.auth,_,(0,W.m9)(w));return new Ws(N,H=>Vi(D,H))})).apply(this,arguments)}function xi(C,_,w){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,g.Z)(function*(C,_,w){var D;const N=yield w.verify();try{let H;if(ce("string"==typeof N,C,"argument-error"),ce(w.type===ji,C,"argument-error"),H="string"==typeof _?{phoneNumber:_}:_,"session"in H){const ye=H.session;if("phoneNumber"in H)return ce("enroll"===ye.type,C,"internal-error"),(yield Cr(C,{idToken:ye.credential,phoneEnrollmentInfo:{phoneNumber:H.phoneNumber,recaptchaToken:N}})).phoneSessionInfo.sessionInfo;{ce("signin"===ye.type,C,"internal-error");const Ge=(null===(D=H.multiFactorHint)||void 0===D?void 0:D.uid)||H.multiFactorUid;return ce(Ge,C,"missing-multi-factor-info"),(yield Dl(C,{mfaPendingCredential:ye.credential,mfaEnrollmentId:Ge,phoneSignInInfo:{recaptchaToken:N}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ye}=yield vl(C,{phoneNumber:H.phoneNumber,recaptchaToken:N});return ye}}finally{w._reset()}})).apply(this,arguments)}function Al(C,_){return xu.apply(this,arguments)}function xu(){return(xu=(0,g.Z)(function*(C,_){yield On((0,W.m9)(C),_)})).apply(this,arguments)}let Za=(()=>{class C{constructor(w){this.providerId=C.PROVIDER_ID,this.auth=tt(w)}verifyPhoneNumber(w,D){return xi(this.auth,w,(0,W.m9)(D))}static credential(w,D){return lo._fromVerification(w,D)}static credentialFromResult(w){return C.credentialFromTaggedObject(w)}static credentialFromError(w){return C.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w)return null;const{phoneNumber:D,temporaryProof:N}=w;return D&&N?lo._fromTokenResponse(D,N):null}}return C.PROVIDER_ID="phone",C.PHONE_SIGN_IN_METHOD="phone",C})();function vo(C,_){return _?me(_):(ce(C._popupRedirectResolver,C,"argument-error"),C._popupRedirectResolver)}class Qu extends In{constructor(_){super("custom","custom"),this.params=_}_getIdTokenResponse(_){return ar(_,this._buildIdpRequest())}_linkToIdToken(_,w){return ar(_,this._buildIdpRequest(w))}_getReauthenticationResolver(_){return ar(_,this._buildIdpRequest())}_buildIdpRequest(_){const w={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return _&&(w.idToken=_),w}}function xl(C){return No(C.auth,new Qu(C),C.bypassAuthState)}function hn(C){const{auth:_,user:w}=C;return ce(w,_,"internal-error"),Ba(w,new Qu(C),C.bypassAuthState)}function Id(C){return qs.apply(this,arguments)}function qs(){return(qs=(0,g.Z)(function*(C){const{auth:_,user:w}=C;return ce(w,_,"internal-error"),On(w,new Qu(C),C.bypassAuthState)})).apply(this,arguments)}class zi{constructor(_,w,D,N,H=!1){this.auth=_,this.resolver=D,this.user=N,this.bypassAuthState=H,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(w)?w:[w]}execute(){var _=this;return new Promise(function(){var w=(0,g.Z)(function*(D,N){_.pendingPromise={resolve:D,reject:N};try{_.eventManager=yield _.resolver._initialize(_.auth),yield _.onExecution(),_.eventManager.registerConsumer(_)}catch(H){_.reject(H)}});return function(D,N){return w.apply(this,arguments)}}())}onAuthEvent(_){var w=this;return(0,g.Z)(function*(){const{urlResponse:D,sessionId:N,postBody:H,tenantId:ye,error:Ge,type:ht}=_;if(Ge)return void w.reject(Ge);const kt={auth:w.auth,requestUri:D,sessionId:N,tenantId:ye||void 0,postBody:H||void 0,user:w.user,bypassAuthState:w.bypassAuthState};try{w.resolve(yield w.getIdpTask(ht)(kt))}catch(Jt){w.reject(Jt)}})()}onError(_){this.reject(_)}getIdpTask(_){switch(_){case"signInViaPopup":case"signInViaRedirect":return xl;case"linkViaPopup":case"linkViaRedirect":return Id;case"reauthViaPopup":case"reauthViaRedirect":return hn;default:it(this.auth,"internal-error")}}resolve(_){Ne(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(_),this.unregisterAndCleanUp()}reject(_){Ne(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(_),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ml=new Xe(2e3,1e4);function Ju(C,_,w){return Td.apply(this,arguments)}function Td(){return(Td=(0,g.Z)(function*(C,_,w){const D=tt(C);Re(C,_,Jn);const N=vo(D,w);return new Rl(D,"signInViaPopup",_,N).executeNotNull()})).apply(this,arguments)}function Dd(C,_,w){return si.apply(this,arguments)}function si(){return(si=(0,g.Z)(function*(C,_,w){const D=(0,W.m9)(C);Re(D.auth,_,Jn);const N=vo(D.auth,w);return new Rl(D.auth,"reauthViaPopup",_,N,D).executeNotNull()})).apply(this,arguments)}function Sc(C,_,w){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,g.Z)(function*(C,_,w){const D=(0,W.m9)(C);Re(D.auth,_,Jn);const N=vo(D.auth,w);return new Rl(D.auth,"linkViaPopup",_,N,D).executeNotNull()})).apply(this,arguments)}let Rl=(()=>{class C extends zi{constructor(w,D,N,H,ye){super(w,D,H,ye),this.provider=N,this.authWindow=null,this.pollId=null,C.currentPopupAction&&C.currentPopupAction.cancel(),C.currentPopupAction=this}executeNotNull(){var w=this;return(0,g.Z)(function*(){const D=yield w.execute();return ce(D,w.auth,"internal-error"),D})()}onExecution(){var w=this;return(0,g.Z)(function*(){Ne(1===w.filter.length,"Popup operations only handle one event");const D=wa();w.authWindow=yield w.resolver._openPopup(w.auth,w.provider,w.filter[0],D),w.authWindow.associatedEvent=D,w.resolver._originValidation(w.auth).catch(N=>{w.reject(N)}),w.resolver._isIframeWebStorageSupported(w.auth,N=>{N||w.reject(ze(w.auth,"web-storage-unsupported"))}),w.pollUserCancellation()})()}get eventId(){var w;return(null===(w=this.authWindow)||void 0===w?void 0:w.associatedEvent)||null}cancel(){this.reject(ze(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,C.currentPopupAction=null}pollUserCancellation(){const w=()=>{var D,N;this.pollId=(null===(N=null===(D=this.authWindow)||void 0===D?void 0:D.window)||void 0===N?void 0:N.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(ze(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(w,Ml.get())};w()}}return C.currentPopupAction=null,C})();const gr=new Map;class Wr extends zi{constructor(_,w,D=!1){super(_,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],w,void 0,D),this.eventId=null}execute(){var _=()=>super.execute,w=this;return(0,g.Z)(function*(){let D=gr.get(w.auth._key());if(!D){try{const H=(yield function kl(C,_){return rf.apply(this,arguments)}(w.resolver,w.auth))?yield _().call(w):null;D=()=>Promise.resolve(H)}catch(N){D=()=>Promise.reject(N)}gr.set(w.auth._key(),D)}return w.bypassAuthState||gr.set(w.auth._key(),()=>Promise.resolve(null)),D()})()}onAuthEvent(_){var w=()=>super.onAuthEvent,D=this;return(0,g.Z)(function*(){if("signInViaRedirect"===_.type)return w().call(D,_);if("unknown"!==_.type){if(_.eventId){const N=yield D.auth._redirectUserForId(_.eventId);if(N)return D.user=N,w().call(D,_);D.resolve(null)}}else D.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function rf(){return(rf=(0,g.Z)(function*(C,_){const w=M(_),D=A(C);if(!(yield D._isAvailable()))return!1;const N="true"===(yield D._get(w));return yield D._remove(w),N})).apply(this,arguments)}function $o(C,_){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,g.Z)(function*(C,_){return A(C)._set(M(_),"true")})).apply(this,arguments)}function Nl(){gr.clear()}function Ac(C,_){gr.set(C._key(),_)}function A(C){return me(C._redirectPersistence)}function M(C){return Ot("pendingRedirect",C.config.apiKey,C.name)}function U(C,_,w){return function Z(C,_,w){return ae.apply(this,arguments)}(C,_,w)}function ae(){return(ae=(0,g.Z)(function*(C,_,w){const D=tt(C);Re(C,_,Jn);const N=vo(D,w);return yield $o(N,D),N._openRedirect(D,_,"signInViaRedirect")})).apply(this,arguments)}function ue(C,_,w){return function Je(C,_,w){return ut.apply(this,arguments)}(C,_,w)}function ut(){return(ut=(0,g.Z)(function*(C,_,w){const D=(0,W.m9)(C);Re(D.auth,_,Jn);const N=vo(D.auth,w);yield $o(N,D.auth);const H=yield Ca(D);return N._openRedirect(D.auth,_,"reauthViaRedirect",H)})).apply(this,arguments)}function Ft(C,_,w){return function qt(C,_,w){return vn.apply(this,arguments)}(C,_,w)}function vn(){return(vn=(0,g.Z)(function*(C,_,w){const D=(0,W.m9)(C);Re(D.auth,_,Jn);const N=vo(D.auth,w);yield ti(!1,D,_.providerId),yield $o(N,D.auth);const H=yield Ca(D);return N._openRedirect(D.auth,_,"linkViaRedirect",H)})).apply(this,arguments)}function $t(C,_){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,g.Z)(function*(C,_){return yield tt(C)._initializationPromise,mr(C,_,!1)})).apply(this,arguments)}function mr(C,_){return wo.apply(this,arguments)}function wo(){return(wo=(0,g.Z)(function*(C,_,w=!1){const D=tt(C),N=vo(D,_),ye=yield new Wr(D,N,w).execute();return ye&&!w&&(delete ye.user._redirectEventId,yield D._persistUserIfCurrent(ye.user),yield D._setRedirectUser(null,_)),ye})).apply(this,arguments)}function Ca(C){return $i.apply(this,arguments)}function $i(){return($i=(0,g.Z)(function*(C){const _=wa(`${C.uid}:::`);return C._redirectEventId=_,yield C.auth._setRedirectUser(C),yield C.auth._persistUserIfCurrent(C),_})).apply(this,arguments)}class as{constructor(_){this.auth=_,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(_){this.consumers.add(_),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,_)&&(this.sendToConsumer(this.queuedRedirectEvent,_),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(_){this.consumers.delete(_)}onEvent(_){if(this.hasEventBeenHandled(_))return!1;let w=!1;return this.consumers.forEach(D=>{this.isEventForConsumer(_,D)&&(w=!0,this.sendToConsumer(_,D),this.saveEventToCache(_))}),this.hasHandledPotentialRedirect||!function Ad(C){switch(C.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Sd(C);default:return!1}}(_)||(this.hasHandledPotentialRedirect=!0,w||(this.queuedRedirectEvent=_,w=!0)),w}sendToConsumer(_,w){var D;if(_.error&&!Sd(_)){const N=(null===(D=_.error.code)||void 0===D?void 0:D.split("auth/")[1])||"internal-error";w.onError(ze(this.auth,N))}else w.onAuthEvent(_)}isEventForConsumer(_,w){const D=null===w.eventId||!!_.eventId&&_.eventId===w.eventId;return w.filter.includes(_.type)&&D}hasEventBeenHandled(_){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ru(_))}saveEventToCache(_){this.cachedEventUids.add(Ru(_)),this.lastProcessedEventTime=Date.now()}}function Ru(C){return[C.type,C.eventId,C.sessionId,C.tenantId].filter(_=>_).join("-")}function Sd({type:C,error:_}){return"unknown"===C&&"auth/no-auth-event"===(null==_?void 0:_.code)}function xc(C){return xd.apply(this,arguments)}function xd(){return(xd=(0,g.Z)(function*(C,_={}){return wn(C,"GET","/v1/projects",_)})).apply(this,arguments)}const O_=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Md=/^https?/;function Xu(){return(Xu=(0,g.Z)(function*(C){if(C.config.emulator)return;const{authorizedDomains:_}=yield xc(C);for(const w of _)try{if(L_(w))return}catch(D){}it(C,"unauthorized-domain")})).apply(this,arguments)}function L_(C){const _=oe(),{protocol:w,hostname:D}=new URL(_);if(C.startsWith("chrome-extension://")){const ye=new URL(C);return""===ye.hostname&&""===D?"chrome-extension:"===w&&C.replace("chrome-extension://","")===_.replace("chrome-extension://",""):"chrome-extension:"===w&&ye.hostname===D}if(!Md.test(w))return!1;if(O_.test(C))return D===C;const N=C.replace(/\./g,"\\.");return new RegExp("^(.+\\."+N+"|"+N+")$","i").test(D)}const Ww=new Xe(3e4,6e4);function sf(){const C=Fn().___jsl;if(null==C?void 0:C.H)for(const _ of Object.keys(C.H))if(C.H[_].r=C.H[_].r||[],C.H[_].L=C.H[_].L||[],C.H[_].r=[...C.H[_].L],C.CP)for(let w=0;w<C.CP.length;w++)C.CP[w]=null}let Mc=null;function af(C){return Mc=Mc||function Kp(C){return new Promise((_,w)=>{var D,N,H;function ye(){sf(),gapi.load("gapi.iframes",{callback:()=>{_(gapi.iframes.getContext())},ontimeout:()=>{sf(),w(ze(C,"network-request-failed"))},timeout:Ww.get()})}if(null===(N=null===(D=Fn().gapi)||void 0===D?void 0:D.iframes)||void 0===N?void 0:N.Iframe)_(gapi.iframes.getContext());else{if(!(null===(H=Fn().gapi)||void 0===H?void 0:H.load)){const Ge=Ho("iframefcb");return Fn()[Ge]=()=>{gapi.load?ye():w(ze(C,"network-request-failed"))},yo(`https://apis.google.com/js/api.js?onload=${Ge}`).catch(ht=>w(ht))}ye()}}).catch(_=>{throw Mc=null,_})}(C),Mc}const Ka=new Xe(5e3,15e3),Pd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Fl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function el(C){const _=C.config;ce(_.authDomain,C,"auth-domain-config-required");const w=_.emulator?zt(_,"emulator/auth/iframe"):`https://${C.config.authDomain}/__/auth/iframe`,D={apiKey:_.apiKey,appName:C.name,v:j.SDK_VERSION},N=Fl.get(C.config.apiHost);N&&(D.eid=N);const H=C._getFrameworks();return H.length&&(D.fw=H.join(",")),`${w}?${(0,W.xO)(D).slice(1)}`}function Qp(){return Qp=(0,g.Z)(function*(C){const _=yield af(C),w=Fn().gapi;return ce(w,C,"internal-error"),_.open({where:document.body,url:el(C),messageHandlersFilter:w.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Pd,dontclear:!0},D=>new Promise(function(){var N=(0,g.Z)(function*(H,ye){yield D.restyle({setHideOnLeave:!1});const Ge=ze(C,"network-request-failed"),ht=Fn().setTimeout(()=>{ye(Ge)},Ka.get());function kt(){Fn().clearTimeout(ht),H(D)}D.ping(kt).then(kt,()=>{ye(Ge)})});return function(H,ye){return N.apply(this,arguments)}}()))}),Qp.apply(this,arguments)}const tl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Rc{constructor(_){this.window=_,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(_){}}}function lf(C,_,w,D,N,H){ce(C.config.authDomain,C,"auth-domain-config-required"),ce(C.config.apiKey,C,"invalid-api-key");const ye={apiKey:C.config.apiKey,appName:C.name,authType:w,redirectUrl:D,v:j.SDK_VERSION,eventId:N};if(_ instanceof Jn){_.setDefaultLanguage(C.languageCode),ye.providerId=_.providerId||"",(0,W.xb)(_.getCustomParameters())||(ye.customParameters=JSON.stringify(_.getCustomParameters()));for(const[ht,kt]of Object.entries(H||{}))ye[ht]=kt}if(_ instanceof Pr){const ht=_.getScopes().filter(kt=>""!==kt);ht.length>0&&(ye.scopes=ht.join(","))}C.tenantId&&(ye.tid=C.tenantId);const Ge=ye;for(const ht of Object.keys(Ge))void 0===Ge[ht]&&delete Ge[ht];return`${function Go({config:C}){return C.emulator?zt(C,"emulator/auth/handler"):`https://${C.authDomain}/__/auth/handler`}(C)}?${(0,W.xO)(Ge).slice(1)}`}const Wo="webStorageSupport",Jp=class cf{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ni,this._completeRedirectFn=mr,this._overrideRedirectResult=Ac}_openPopup(_,w,D,N){var H=this;return(0,g.Z)(function*(){var ye;Ne(null===(ye=H.eventManagers[_._key()])||void 0===ye?void 0:ye.manager,"_initialize() not called before _openPopup()");const Ge=lf(_,w,D,oe(),N);return function F_(C,_,w,D=500,N=600){const H=Math.max((window.screen.availHeight-N)/2,0).toString(),ye=Math.max((window.screen.availWidth-D)/2,0).toString();let Ge="";const ht=Object.assign(Object.assign({},tl),{width:D.toString(),height:N.toString(),top:H,left:ye}),kt=(0,W.z$)().toLowerCase();w&&(Ge=Ue(kt)?"_blank":w),re(kt)&&(_=_||"http://localhost",ht.scrollbars="yes");const Jt=Object.entries(ht).reduce((Eo,[Ta,Ul])=>`${Eo}${Ta}=${Ul},`,"");if(function li(C=(0,W.z$)()){var _;return tn(C)&&!!(null===(_=window.navigator)||void 0===_?void 0:_.standalone)}(kt)&&"_self"!==Ge)return function kc(C,_){const w=document.createElement("a");w.href=C,w.target=_;const D=document.createEvent("MouseEvent");D.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),w.dispatchEvent(D)}(_||"",Ge),new Rc(null);const Sr=window.open(_||"",Ge,Jt);ce(Sr,C,"popup-blocked");try{Sr.focus()}catch(Eo){}return new Rc(Sr)}(_,Ge,wa())})()}_openRedirect(_,w,D,N){var H=this;return(0,g.Z)(function*(){return yield H._originValidation(_),function Tl(C){Fn().location.href=C}(lf(_,w,D,oe(),N)),new Promise(()=>{})})()}_initialize(_){const w=_._key();if(this.eventManagers[w]){const{manager:N,promise:H}=this.eventManagers[w];return N?Promise.resolve(N):(Ne(H,"If manager is not set, promise should be"),H)}const D=this.initAndGetManager(_);return this.eventManagers[w]={promise:D},D.catch(()=>{delete this.eventManagers[w]}),D}initAndGetManager(_){var w=this;return(0,g.Z)(function*(){const D=yield function Yp(C){return Qp.apply(this,arguments)}(_),N=new as(_);return D.register("authEvent",H=>(ce(null==H?void 0:H.authEvent,_,"invalid-auth-event"),{status:N.onEvent(H.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),w.eventManagers[_._key()]={manager:N},w.iframes[_._key()]=D,N})()}_isIframeWebStorageSupported(_,w){this.iframes[_._key()].send(Wo,{type:Wo},N=>{var H;const ye=null===(H=null==N?void 0:N[0])||void 0===H?void 0:H[Wo];void 0!==ye&&w(!!ye),it(_,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(_){const w=_._key();return this.originValidationPromises[w]||(this.originValidationPromises[w]=function Ol(C){return Xu.apply(this,arguments)}(_)),this.originValidationPromises[w]}get _shouldInitProactively(){return Qr()||q()||tn()}};class Xp extends class B_{constructor(_){this.factorId=_}_process(_,w,D){switch(w.type){case"enroll":return this._finalizeEnroll(_,w.credential,D);case"signin":return this._finalizeSignIn(_,w.credential);default:return be("unexpected MultiFactorSessionType")}}}{constructor(_){super("phone"),this.credential=_}static _fromCredential(_){return new Xp(_)}_finalizeEnroll(_,w,D){return function Il(C,_){return wn(C,"POST","/v2/accounts/mfaEnrollment:finalize",Gt(C,_))}(_,{idToken:w,displayName:D,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(_,w){return function fr(C,_){return wn(C,"POST","/v2/accounts/mfaSignIn:finalize",Gt(C,_))}(_,{mfaPendingCredential:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let eg=(()=>{class C{constructor(){}static assertion(w){return Xp._fromCredential(w)}}return C.FACTOR_ID="phone",C})();var j_="@firebase/auth";class z_{constructor(_){this.auth=_,this.internalListeners=new Map}getUid(){var _;return this.assertAuthConfigured(),(null===(_=this.auth.currentUser)||void 0===_?void 0:_.uid)||null}getToken(_){var w=this;return(0,g.Z)(function*(){return w.assertAuthConfigured(),yield w.auth._initializationPromise,w.auth.currentUser?{accessToken:yield w.auth.currentUser.getIdToken(_)}:null})()}addAuthTokenListener(_){if(this.assertAuthConfigured(),this.internalListeners.has(_))return;const w=this.auth.onIdTokenChanged(D=>{var N;_((null===(N=D)||void 0===N?void 0:N.stsTokenManager.accessToken)||null)});this.internalListeners.set(_,w),this.updateProactiveRefresh()}removeAuthTokenListener(_){this.assertAuthConfigured();const w=this.internalListeners.get(_);!w||(this.internalListeners.delete(_),w(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function H_(C=(0,j.getApp)()){const _=(0,j._getProvider)(C,"auth");return _.isInitialized()?_.getImmediate():function pe(C,_){const w=(0,j._getProvider)(C,"auth");if(w.isInitialized()){const N=w.getImmediate(),H=w.getOptions();if((0,W.vZ)(H,null!=_?_:{}))return N;it(N,"already-initialized")}return w.initialize({options:_})}(C,{popupRedirectResolver:Jp,persistence:[Bi,yt,ni]})}!function Od(C){(0,j._registerComponent)(new _e.wA("auth",(_,{options:w})=>{const D=_.getProvider("app").getImmediate(),N=_.getProvider("heartbeat"),{apiKey:H,authDomain:ye}=D.options;return((Ge,ht)=>{ce(H&&!H.includes(":"),"invalid-api-key",{appName:Ge.name}),ce(!(null==ye?void 0:ye.includes(":")),"argument-error",{appName:Ge.name});const kt={apiKey:H,authDomain:ye,clientPlatform:C,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ur(C)},Jt=new Ti(Ge,ht,kt);return function Se(C,_){const w=(null==_?void 0:_.persistence)||[],D=(Array.isArray(w)?w:[w]).map(me);(null==_?void 0:_.errorMap)&&C._updateErrorMap(_.errorMap),C._initializeWithPersistence(D,null==_?void 0:_.popupRedirectResolver)}(Jt,w),Jt})(D,N)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((_,w,D)=>{_.getProvider("auth-internal").initialize()})),(0,j._registerComponent)(new _e.wA("auth-internal",_=>{const w=tt(_.getProvider("auth").getImmediate());return new z_(w)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,j.registerVersion)(j_,"0.20.1",function tg(C){switch(C){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(C)),(0,j.registerVersion)(j_,"0.20.1","esm2017")}("Browser")},2090:(pt,ke,O)=>{"use strict";O.d(ke,{$s:()=>en,BH:()=>qe,DV:()=>wn,Dv:()=>Fr,G6:()=>ce,GJ:()=>Xt,L:()=>ve,LL:()=>oe,Mn:()=>Re,Pz:()=>Ut,Sg:()=>je,UG:()=>Ie,UI:()=>Ei,US:()=>_e,Wj:()=>Nn,Yr:()=>at,ZB:()=>X,ZR:()=>Se,b$:()=>it,cI:()=>Tt,d:()=>ze,dS:()=>fs,eu:()=>Ne,g5:()=>j,gK:()=>xr,gQ:()=>Xn,h$:()=>Te,hl:()=>be,hu:()=>W,jU:()=>Le,lb:()=>vr,m9:()=>Tn,ne:()=>Ci,p$:()=>Q,pd:()=>Li,r3:()=>Gt,ru:()=>ot,tV:()=>Ee,uI:()=>nt,ug:()=>cn,vZ:()=>yr,w1:()=>He,w9:()=>Nt,xO:()=>hs,xb:()=>Vn,z$:()=>Ke,zI:()=>se,zd:()=>bi});const W=function(K,ne){if(!K)throw j(ne)},j=function(K){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+K)},le=function(K){const ne=[];let ie=0;for(let Pe=0;Pe<K.length;Pe++){let ee=K.charCodeAt(Pe);ee<128?ne[ie++]=ee:ee<2048?(ne[ie++]=ee>>6|192,ne[ie++]=63&ee|128):55296==(64512&ee)&&Pe+1<K.length&&56320==(64512&K.charCodeAt(Pe+1))?(ee=65536+((1023&ee)<<10)+(1023&K.charCodeAt(++Pe)),ne[ie++]=ee>>18|240,ne[ie++]=ee>>12&63|128,ne[ie++]=ee>>6&63|128,ne[ie++]=63&ee|128):(ne[ie++]=ee>>12|224,ne[ie++]=ee>>6&63|128,ne[ie++]=63&ee|128)}return ne},_e={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(K,ne){if(!Array.isArray(K))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ie=ne?this.byteToCharMapWebSafe_:this.byteToCharMap_,Pe=[];for(let ee=0;ee<K.length;ee+=3){const he=K[ee],$e=ee+1<K.length,dt=$e?K[ee+1]:0,St=ee+2<K.length,Qt=St?K[ee+2]:0;let wr=(15&dt)<<2|Qt>>6,Ce=63&Qt;St||(Ce=64,$e||(wr=64)),Pe.push(ie[he>>2],ie[(3&he)<<4|dt>>4],ie[wr],ie[Ce])}return Pe.join("")},encodeString(K,ne){return this.HAS_NATIVE_SUPPORT&&!ne?btoa(K):this.encodeByteArray(le(K),ne)},decodeString(K,ne){return this.HAS_NATIVE_SUPPORT&&!ne?atob(K):function(K){const ne=[];let ie=0,Pe=0;for(;ie<K.length;){const ee=K[ie++];if(ee<128)ne[Pe++]=String.fromCharCode(ee);else if(ee>191&&ee<224){const he=K[ie++];ne[Pe++]=String.fromCharCode((31&ee)<<6|63&he)}else if(ee>239&&ee<365){const St=((7&ee)<<18|(63&K[ie++])<<12|(63&K[ie++])<<6|63&K[ie++])-65536;ne[Pe++]=String.fromCharCode(55296+(St>>10)),ne[Pe++]=String.fromCharCode(56320+(1023&St))}else{const he=K[ie++],$e=K[ie++];ne[Pe++]=String.fromCharCode((15&ee)<<12|(63&he)<<6|63&$e)}}return ne.join("")}(this.decodeStringToByteArray(K,ne))},decodeStringToByteArray(K,ne){this.init_();const ie=ne?this.charToByteMapWebSafe_:this.charToByteMap_,Pe=[];for(let ee=0;ee<K.length;){const he=ie[K.charAt(ee++)],dt=ee<K.length?ie[K.charAt(ee)]:0;++ee;const Qt=ee<K.length?ie[K.charAt(ee)]:64;++ee;const Ot=ee<K.length?ie[K.charAt(ee)]:64;if(++ee,null==he||null==dt||null==Qt||null==Ot)throw Error();Pe.push(he<<2|dt>>4),64!==Qt&&(Pe.push(dt<<4&240|Qt>>2),64!==Ot&&Pe.push(Qt<<6&192|Ot))}return Pe},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let K=0;K<this.ENCODED_VALS.length;K++)this.byteToCharMap_[K]=this.ENCODED_VALS.charAt(K),this.charToByteMap_[this.byteToCharMap_[K]]=K,this.byteToCharMapWebSafe_[K]=this.ENCODED_VALS_WEBSAFE.charAt(K),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[K]]=K,K>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(K)]=K,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(K)]=K)}}},Te=function(K){const ne=le(K);return _e.encodeByteArray(ne,!0)},ve=function(K){return Te(K).replace(/\./g,"")},Ee=function(K){try{return _e.decodeString(K,!0)}catch(ne){console.error("base64Decode failed: ",ne)}return null};function Q(K){return X(void 0,K)}function X(K,ne){if(!(ne instanceof Object))return ne;switch(ne.constructor){case Date:return new Date(ne.getTime());case Object:void 0===K&&(K={});break;case Array:K=[];break;default:return ne}for(const ie in ne)!ne.hasOwnProperty(ie)||!ge(ie)||(K[ie]=X(K[ie],ne[ie]));return K}function ge(K){return"__proto__"!==K}class qe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ne,ie)=>{this.resolve=ne,this.reject=ie})}wrapCallback(ne){return(ie,Pe)=>{ie?this.reject(ie):this.resolve(Pe),"function"==typeof ne&&(this.promise.catch(()=>{}),1===ne.length?ne(ie):ne(ie,Pe))}}}function je(K,ne){if(K.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Pe=ne||"demo-project",ee=K.iat||0,he=K.sub||K.user_id;if(!he)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const $e=Object.assign({iss:`https://securetoken.google.com/${Pe}`,aud:Pe,iat:ee,exp:ee+3600,auth_time:ee,sub:he,user_id:he,firebase:{sign_in_provider:"custom",identities:{}}},K);return[ve(JSON.stringify({alg:"none",type:"JWT"})),ve(JSON.stringify($e)),""].join(".")}function Ke(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function nt(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ke())}function Ie(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(K){return!1}}function Le(){return"object"==typeof self&&self.self===self}function ot(){const K="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof K&&void 0!==K.id}function it(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ze(){return Ke().indexOf("Electron/")>=0}function He(){const K=Ke();return K.indexOf("MSIE ")>=0||K.indexOf("Trident/")>=0}function Re(){return Ke().indexOf("MSAppHost/")>=0}function at(){return!1}function ce(){return!Ie()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function be(){return"object"==typeof indexedDB}function Ne(){return new Promise((K,ne)=>{try{let ie=!0;const Pe="validate-browser-context-for-indexeddb-analytics-module",ee=self.indexedDB.open(Pe);ee.onsuccess=()=>{ee.result.close(),ie||self.indexedDB.deleteDatabase(Pe),K(!0)},ee.onupgradeneeded=()=>{ie=!1},ee.onerror=()=>{var he;ne((null===(he=ee.error)||void 0===he?void 0:he.message)||"")}}catch(ie){ne(ie)}})}function se(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Se extends Error{constructor(ne,ie,Pe){super(ie),this.code=ne,this.customData=Pe,this.name="FirebaseError",Object.setPrototypeOf(this,Se.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oe.prototype.create)}}class oe{constructor(ne,ie,Pe){this.service=ne,this.serviceName=ie,this.errors=Pe}create(ne,...ie){const Pe=ie[0]||{},ee=`${this.service}/${ne}`,he=this.errors[ne],$e=he?function Qe(K,ne){return K.replace(et,(ie,Pe)=>{const ee=ne[Pe];return null!=ee?String(ee):`<${Pe}?>`})}(he,Pe):"Error";return new Se(ee,`${this.serviceName}: ${$e} (${ee}).`,Pe)}}const et=/\{\$([^}]+)}/g;function Tt(K){return JSON.parse(K)}function Ut(K){return JSON.stringify(K)}const Xe=function(K){let ne={},ie={},Pe={},ee="";try{const he=K.split(".");ne=Tt(Ee(he[0])||""),ie=Tt(Ee(he[1])||""),ee=he[2],Pe=ie.d||{},delete ie.d}catch(he){}return{header:ne,claims:ie,data:Pe,signature:ee}},Nt=function(K){const ie=Xe(K).claims;return!!ie&&"object"==typeof ie&&ie.hasOwnProperty("iat")},Xt=function(K){const ne=Xe(K).claims;return"object"==typeof ne&&!0===ne.admin};function Gt(K,ne){return Object.prototype.hasOwnProperty.call(K,ne)}function wn(K,ne){if(Object.prototype.hasOwnProperty.call(K,ne))return K[ne]}function Vn(K){for(const ne in K)if(Object.prototype.hasOwnProperty.call(K,ne))return!1;return!0}function Ei(K,ne,ie){const Pe={};for(const ee in K)Object.prototype.hasOwnProperty.call(K,ee)&&(Pe[ee]=ne.call(ie,K[ee],ee,K));return Pe}function yr(K,ne){if(K===ne)return!0;const ie=Object.keys(K),Pe=Object.keys(ne);for(const ee of ie){if(!Pe.includes(ee))return!1;const he=K[ee],$e=ne[ee];if(Hn(he)&&Hn($e)){if(!yr(he,$e))return!1}else if(he!==$e)return!1}for(const ee of Pe)if(!ie.includes(ee))return!1;return!0}function Hn(K){return null!==K&&"object"==typeof K}function hs(K){const ne=[];for(const[ie,Pe]of Object.entries(K))Array.isArray(Pe)?Pe.forEach(ee=>{ne.push(encodeURIComponent(ie)+"="+encodeURIComponent(ee))}):ne.push(encodeURIComponent(ie)+"="+encodeURIComponent(Pe));return ne.length?"&"+ne.join("&"):""}function bi(K){const ne={};return K.replace(/^\?/,"").split("&").forEach(Pe=>{if(Pe){const[ee,he]=Pe.split("=");ne[decodeURIComponent(ee)]=decodeURIComponent(he)}}),ne}function Li(K){const ne=K.indexOf("?");if(!ne)return"";const ie=K.indexOf("#",ne);return K.substring(ne,ie>0?ie:void 0)}class Xn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let ne=1;ne<this.blockSize;++ne)this.pad_[ne]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(ne,ie){ie||(ie=0);const Pe=this.W_;if("string"==typeof ne)for(let Ot=0;Ot<16;Ot++)Pe[Ot]=ne.charCodeAt(ie)<<24|ne.charCodeAt(ie+1)<<16|ne.charCodeAt(ie+2)<<8|ne.charCodeAt(ie+3),ie+=4;else for(let Ot=0;Ot<16;Ot++)Pe[Ot]=ne[ie]<<24|ne[ie+1]<<16|ne[ie+2]<<8|ne[ie+3],ie+=4;for(let Ot=16;Ot<80;Ot++){const wr=Pe[Ot-3]^Pe[Ot-8]^Pe[Ot-14]^Pe[Ot-16];Pe[Ot]=4294967295&(wr<<1|wr>>>31)}let Qt,Mn,ee=this.chain_[0],he=this.chain_[1],$e=this.chain_[2],dt=this.chain_[3],St=this.chain_[4];for(let Ot=0;Ot<80;Ot++){Ot<40?Ot<20?(Qt=dt^he&($e^dt),Mn=1518500249):(Qt=he^$e^dt,Mn=1859775393):Ot<60?(Qt=he&$e|dt&(he|$e),Mn=2400959708):(Qt=he^$e^dt,Mn=3395469782);const wr=(ee<<5|ee>>>27)+Qt+St+Mn+Pe[Ot]&4294967295;St=dt,dt=$e,$e=4294967295&(he<<30|he>>>2),he=ee,ee=wr}this.chain_[0]=this.chain_[0]+ee&4294967295,this.chain_[1]=this.chain_[1]+he&4294967295,this.chain_[2]=this.chain_[2]+$e&4294967295,this.chain_[3]=this.chain_[3]+dt&4294967295,this.chain_[4]=this.chain_[4]+St&4294967295}update(ne,ie){if(null==ne)return;void 0===ie&&(ie=ne.length);const Pe=ie-this.blockSize;let ee=0;const he=this.buf_;let $e=this.inbuf_;for(;ee<ie;){if(0===$e)for(;ee<=Pe;)this.compress_(ne,ee),ee+=this.blockSize;if("string"==typeof ne){for(;ee<ie;)if(he[$e]=ne.charCodeAt(ee),++$e,++ee,$e===this.blockSize){this.compress_(he),$e=0;break}}else for(;ee<ie;)if(he[$e]=ne[ee],++$e,++ee,$e===this.blockSize){this.compress_(he),$e=0;break}}this.inbuf_=$e,this.total_+=ie}digest(){const ne=[];let ie=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ee=this.blockSize-1;ee>=56;ee--)this.buf_[ee]=255&ie,ie/=256;this.compress_(this.buf_);let Pe=0;for(let ee=0;ee<5;ee++)for(let he=24;he>=0;he-=8)ne[Pe]=this.chain_[ee]>>he&255,++Pe;return ne}}function Ci(K,ne){const ie=new xt(K,ne);return ie.subscribe.bind(ie)}class xt{constructor(ne,ie){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ie,this.task.then(()=>{ne(this)}).catch(Pe=>{this.error(Pe)})}next(ne){this.forEachObserver(ie=>{ie.next(ne)})}error(ne){this.forEachObserver(ie=>{ie.error(ne)}),this.close(ne)}complete(){this.forEachObserver(ne=>{ne.complete()}),this.close()}subscribe(ne,ie,Pe){let ee;if(void 0===ne&&void 0===ie&&void 0===Pe)throw new Error("Missing Observer.");ee=function kn(K,ne){if("object"!=typeof K||null===K)return!1;for(const ie of ne)if(ie in K&&"function"==typeof K[ie])return!0;return!1}(ne,["next","error","complete"])?ne:{next:ne,error:ie,complete:Pe},void 0===ee.next&&(ee.next=Cn),void 0===ee.error&&(ee.error=Cn),void 0===ee.complete&&(ee.complete=Cn);const he=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ee.error(this.finalError):ee.complete()}catch($e){}}),this.observers.push(ee),he}unsubscribeOne(ne){void 0===this.observers||void 0===this.observers[ne]||(delete this.observers[ne],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ne){if(!this.finalized)for(let ie=0;ie<this.observers.length;ie++)this.sendOne(ie,ne)}sendOne(ne,ie){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ne])try{ie(this.observers[ne])}catch(Pe){"undefined"!=typeof console&&console.error&&console.error(Pe)}})}close(ne){this.finalized||(this.finalized=!0,void 0!==ne&&(this.finalError=ne),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Cn(){}const Fr=function(K,ne,ie,Pe){let ee;if(Pe<ne?ee="at least "+ne:Pe>ie&&(ee=0===ie?"none":"no more than "+ie),ee)throw new Error(K+" failed: Was called with "+Pe+(1===Pe?" argument.":" arguments.")+" Expects "+ee+".")};function xr(K,ne){return`${K} failed: ${ne} argument `}function Nn(K,ne,ie,Pe){if((!Pe||ie)&&"function"!=typeof ie)throw new Error(xr(K,ne)+"must be a valid function.")}function vr(K,ne,ie,Pe){if((!Pe||ie)&&("object"!=typeof ie||null===ie))throw new Error(xr(K,ne)+"must be a valid context object.")}const fs=function(K){const ne=[];let ie=0;for(let Pe=0;Pe<K.length;Pe++){let ee=K.charCodeAt(Pe);if(ee>=55296&&ee<=56319){const he=ee-55296;Pe++,W(Pe<K.length,"Surrogate pair missing trail surrogate."),ee=65536+(he<<10)+(K.charCodeAt(Pe)-56320)}ee<128?ne[ie++]=ee:ee<2048?(ne[ie++]=ee>>6|192,ne[ie++]=63&ee|128):ee<65536?(ne[ie++]=ee>>12|224,ne[ie++]=ee>>6&63|128,ne[ie++]=63&ee|128):(ne[ie++]=ee>>18|240,ne[ie++]=ee>>12&63|128,ne[ie++]=ee>>6&63|128,ne[ie++]=63&ee|128)}return ne},cn=function(K){let ne=0;for(let ie=0;ie<K.length;ie++){const Pe=K.charCodeAt(ie);Pe<128?ne++:Pe<2048?ne+=2:Pe>=55296&&Pe<=56319?(ne+=4,ie++):ne+=3}return ne};function en(K,ne=1e3,ie=2){const Pe=ne*Math.pow(ie,K),ee=Math.round(.5*Pe*(Math.random()-.5)*2);return Math.min(144e5,Pe+ee)}function Tn(K){return K&&K._delegate?K._delegate:K}},8907:(pt,ke,O)=>{"use strict";var g=O(5e3);let W=null;function j(){return W}const Te=new g.OlP("DocumentToken");let ve=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function Ee(){return(0,g.LFG)(X)}()},providedIn:"platform"}),n})();const Q=new g.OlP("Location Initialized");let X=(()=>{class n extends ve{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return j().getBaseHref(this._doc)}onPopState(t){const r=j().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=j().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){ge()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){ge()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Te))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function qe(){return new X((0,g.LFG)(Te))}()},providedIn:"platform"}),n})();function ge(){return!!window.history.pushState}function je(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ke(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function nt(n){return n&&"?"!==n[0]?"?"+n:n}let Ie=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function Le(n){const e=(0,g.LFG)(Te).location;return new it((0,g.LFG)(ve),e&&e.origin||"")}()},providedIn:"root"}),n})();const ot=new g.OlP("appBaseHref");let it=(()=>{class n extends Ie{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return je(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+nt(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const c=this.prepareExternalUrl(i+nt(a));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){const c=this.prepareExternalUrl(i+nt(a));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ve),g.LFG(ot,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),ze=(()=>{class n extends Ie{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=je(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let c=this.prepareExternalUrl(i+nt(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){let c=this.prepareExternalUrl(i+nt(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ve),g.LFG(ot,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),He=(()=>{class n{constructor(t,r){this._subject=new g.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Ke(ce(i)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+nt(r))}normalize(t){return n.stripTrailingSlash(function at(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,ce(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+nt(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+nt(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=nt,n.joinWithSlash=je,n.stripTrailingSlash=Ke,n.\u0275fac=function(t){return new(t||n)(g.LFG(Ie),g.LFG(ve))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function Re(){return new He((0,g.LFG)(Ie),(0,g.LFG)(ve))}()},providedIn:"root"}),n})();function ce(n){return n.replace(/\/index.html$/,"")}function an(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}class rs{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Gn=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new rs(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===a?void 0:a);else if(null!==a){const p=r.get(a);r.move(p,c),gs(p,i)}});for(let i=0,a=r.length;i<a;i++){const p=r.get(i).context;p.index=i,p.count=a,p.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{gs(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function gs(n,e){n.context.$implicit=e.item}let mn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new An,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Na("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Na("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class An{constructor(){this.$implicit=null,this.ngIf=null}}function Na(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,g.AaK)(e)}'.`)}let co=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function ei(n){return"server"===n}let pu=(()=>{class n{}return n.\u0275prov=(0,g.Yz7)({token:n,providedIn:"root",factory:()=>new gu((0,g.LFG)(Te),window)}),n})();class gu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Ls(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const c=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Va(this.window.history)||Va(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Va(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class On{}class ti extends class ha extends class _e{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function we(n){W||(W=n)}(new ti)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Ba(){return Pn=Pn||document.querySelector("base"),Pn?Pn.getAttribute("href"):null}();return null==t?null:function No(n){ja=ja||document.createElement("a"),ja.setAttribute("href",n);const e=ja.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Pn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return an(document.cookie,e)}}let ja,Pn=null;const Er=new g.OlP("TRANSITION_ID"),tr=[{provide:g.ip1,useFactory:function mu(n,e,t){return()=>{t.get(g.CZH).donePromise.then(()=>{const r=j(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[Er,Te,g.zs3],multi:!0}];class ms{static init(){(0,g.VLi)(new ms)}addToWindow(e){g.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},g.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(r=>{const i=g.dqk.getAllAngularTestabilities();let a=i.length,c=!1;const p=function(y){c=c||y,a--,0==a&&r(c)};i.forEach(function(y){y.whenStable(p)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?j().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let hr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Vi=new g.OlP("EventManagerPlugins");let _s=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const c=i[a];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Vi),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class Oo{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=j().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let lr=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Fs=(()=>{class n extends lr{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const c=this._doc.createElement("style");c.textContent=a,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(ho),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(ho))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Te))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function ho(n){j().remove(n)}const Rt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Lo=/%COMP%/g;function Rr(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Rr(n,i,t):(i=i.replace(Lo,n),t.push(i))}return t}function Ve(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Us=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new qn(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case g.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new hi(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case g.ifc.ShadowDom:return new yu(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Rr(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(_s),g.LFG(Fs),g.LFG(g.AFp))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class qn{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Rt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=Rt[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Rt[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(g.JOm.DashCase|g.JOm.Important)?e.style.setProperty(t,r,i&g.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&g.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ve(r)):this.eventManager.addEventListener(e,t,Ve(r))}}class hi extends qn{constructor(e,t,r,i){super(e),this.component=r;const a=Rr(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function Fo(n){return"_ngcontent-%COMP%".replace(Lo,n)}(i+"-"+r.id),this.hostAttr=function vc(n){return"_nghost-%COMP%".replace(Lo,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class yu extends qn{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Rr(i.id,i.styles,[]);for(let c=0;c<a.length;c++){const p=document.createElement("style");p.textContent=a[c],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let fo=(()=>{class n extends Oo{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Te))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const wc=["alt","control","meta","shift"],Ha={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Vo={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},br={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ys=(()=>{class n extends Oo{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),c=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>j().onAndCancel(t,a.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let c="";if(wc.forEach(y=>{const b=r.indexOf(y);b>-1&&(r.splice(b,1),c+=y+".")}),c+=a,0!=r.length||0===a.length)return null;const p={};return p.domEventName=i,p.fullKey=c,p}static getEventFullKey(t){let r="",i=function fi(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Vo.hasOwnProperty(e)&&(e=Vo[e]))}return Ha[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),wc.forEach(a=>{a!=i&&br[a](t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Te))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const vu=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:"browser"},{provide:g.g9A,useValue:function pa(){ti.makeCurrent(),ms.init()},multi:!0},{provide:Te,useFactory:function Ec(){return(0,g.RDi)(document),document},deps:[]}]),ga=[{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function kr(){return new g.qLn},deps:[]},{provide:Vi,useClass:fo,multi:!0,deps:[Te,g.R0b,g.Lbi]},{provide:Vi,useClass:ys,multi:!0,deps:[Te]},{provide:Us,useClass:Us,deps:[_s,Fs,g.AFp]},{provide:g.FYo,useExisting:Us},{provide:lr,useExisting:Fs},{provide:Fs,useClass:Fs,deps:[Te]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b]},{provide:_s,useClass:_s,deps:[Vi,g.R0b]},{provide:On,useClass:hr,deps:[]}];let $a=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:g.AFp,useValue:t.appId},{provide:Er,useExisting:g.AFp},tr]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(n,12))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:ga,imports:[co,g.hGG]}),n})();"undefined"!=typeof window&&window;var Ln=O(8996),Wa=O(7669);function yt(...n){const e=(0,Wa.yG)(n);return(0,Ln.D)(n,e)}var os=O(7579);class ni extends os.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var ri=O(8306);const{isArray:va}=Array,{getPrototypeOf:wa,prototype:Yu,keys:Fn}=Object;function Tl(n){if(1===n.length){const e=n[0];if(va(e))return{args:e,keys:null};if(function l(n){return n&&"object"==typeof n&&wa(n)===Yu}(e)){const t=Fn(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var f=O(4671),v=O(4004);const{isArray:T}=Array;function V(n){return(0,v.U)(e=>function P(n,e){return T(e)?n(...e):n(e)}(n,e))}function Y(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var de=O(5403),De=O(9672);function Lt(n,e,t){n?(0,De.f)(t,n,e):e()}var Kt=O(576);function mi(n,e){const t=(0,Kt.m)(n)?n:()=>n,r=i=>i.error(t());return new ri.y(e?i=>e.schedule(r,0,i):r)}const Hs=(0,O(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var ii=O(8189);function qa(...n){return function $s(){return(0,ii.J)(1)}()((0,Ln.D)(n,(0,Wa.yG)(n)))}var Iu=O(8421);function Tu(n){return new ri.y(e=>{(0,Iu.Xf)(n()).subscribe(e)})}var Bi=O(515),Dl=O(727),fr=O(4482);function rr(){return(0,fr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,de.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Si extends ri.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,fr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Dl.w0;const t=this.getSubject();e.add(this.source.subscribe((0,de.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Dl.w0.EMPTY)}return e}refCount(){return rr()(this)}}function Ir(n,e){return(0,fr.e)((t,r)=>{let i=null,a=0,c=!1;const p=()=>c&&!i&&r.complete();t.subscribe((0,de.x)(r,y=>{null==i||i.unsubscribe();let b=0;const x=a++;(0,Iu.Xf)(n(y,x)).subscribe(i=(0,de.x)(r,R=>r.next(e?e(y,R,x,b++):R),()=>{i=null,p()}))},()=>{c=!0,p()}))})}var yo=O(5698);function Ho(...n){const e=(0,Wa.yG)(n);return(0,fr.e)((t,r)=>{(e?qa(n,t,e):qa(n,t)).subscribe(r)})}function bs(n,e,t,r,i){return(a,c)=>{let p=t,y=e,b=0;a.subscribe((0,de.x)(c,x=>{const R=b++;y=p?n(y,x,R):(p=!0,x),r&&c.next(y)},i&&(()=>{p&&c.next(y),c.complete()})))}}function Ai(n,e){return(0,fr.e)(bs(n,e,arguments.length>=2,!0))}function pr(n,e){return(0,fr.e)((t,r)=>{let i=0;t.subscribe((0,de.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}function Ea(n){return(0,fr.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,de.x)(t,void 0,void 0,c=>{a=(0,Iu.Xf)(n(c,Ea(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}var Gr=O(5577);function Gs(n,e){return(0,Kt.m)(e)?(0,Gr.z)(n,e,1):(0,Gr.z)(n,1)}function Du(n){return n<=0?()=>Bi.E:(0,fr.e)((e,t)=>{let r=[];e.subscribe((0,de.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Xh(n=Tr){return(0,fr.e)((e,t)=>{let r=!1;e.subscribe((0,de.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Tr(){return new Hs}function ef(n){return(0,fr.e)((e,t)=>{let r=!1;e.subscribe((0,de.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Su(n,e){const t=arguments.length>=2;return r=>r.pipe(n?pr((i,a)=>n(i,a,r)):f.y,(0,yo.q)(1),t?ef(e):Xh(()=>new Hs))}var ji=O(8505);class ba{constructor(e,t){this.id=e,this.url=t}}class Cd extends ba{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ws extends ba{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class nf extends ba{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Dr extends ba{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Dc extends ba{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Au extends ba{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zp extends ba{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Sl extends ba{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xi extends ba{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mi{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Al{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class xu{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Za{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vo{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qu{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xl{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const hn="primary";class Id{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function qs(n){return new Id(n)}const zi="ngNavigationCancelingError";function Ml(n){const e=Error("NavigationCancelingError: "+n);return e[zi]=!0,e}function Td(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const c=r[a],p=n[a];if(c.startsWith(":"))i[c.substring(1)]=p;else if(c!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function si(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!Sc(n[i],e[i]))return!1;return!0}function Sc(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function Pl(n){return Array.prototype.concat.apply([],n)}function Rl(n){return n.length>0?n[n.length-1]:null}function gr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Wr(n){return(0,g.CqO)(n)?n:(0,g.QGY)(n)?(0,Ln.D)(Promise.resolve(n)):yt(n)}const rf={exact:function Ac(n,e,t){if(!Ft(n.segments,e.segments)||!Z(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Ac(n.children[r],e.children[r],t))return!1;return!0},subset:M},$o={exact:function Nl(n,e){return si(n,e)},subset:function A(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Sc(n[t],e[t]))},ignored:()=>!0};function Pu(n,e,t){return rf[t.paths](n.root,e.root,t.matrixParams)&&$o[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function M(n,e,t){return U(n,e,e.segments,t)}function U(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Ft(i,t)||e.hasChildren()||!Z(i,t,r))}if(n.segments.length===t.length){if(!Ft(n.segments,t)||!Z(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!M(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(Ft(n.segments,i)&&Z(n.segments,i,r)&&n.children[hn])&&U(n.children[hn],e,a,r)}}function Z(n,e,t){return e.every((r,i)=>$o[t](n[i].parameters,r.parameters))}class ae{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qs(this.queryParams)),this._queryParamMap}toString(){return Hi.serialize(this)}}class ue{constructor(e,t){this.segments=e,this.children=t,this.parent=null,gr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return mr(this)}}class Je{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=qs(this.parameters)),this._parameterMap}toString(){return Ad(this)}}function Ft(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class vn{}class $t{parse(e){const t=new sf(e);return new ae(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${wo(e.root,!0)}`,r=function xd(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${$i(t)}=${$i(i)}`).join("&"):`${$i(t)}=${$i(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Ia(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Hi=new $t;function mr(n){return n.segments.map(e=>Ad(e)).join("/")}function wo(n,e){if(!n.hasChildren())return mr(n);if(e){const t=n.children[hn]?wo(n.children[hn],!1):"",r=[];return gr(n.children,(i,a)=>{a!==hn&&r.push(`${a}:${wo(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function qt(n,e){let t=[];return gr(n.children,(r,i)=>{i===hn&&(t=t.concat(e(r,i)))}),gr(n.children,(r,i)=>{i!==hn&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===hn?[wo(n.children[hn],!1)]:[`${i}:${wo(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[hn]?`${mr(n)}/${t[0]}`:`${mr(n)}/(${t.join("//")})`}}function Ca(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $i(n){return Ca(n).replace(/%3B/gi,";")}function as(n){return Ca(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ru(n){return decodeURIComponent(n)}function Sd(n){return Ru(n.replace(/\+/g,"%20"))}function Ad(n){return`${as(n.path)}${function xc(n){return Object.keys(n).map(e=>`;${as(e)}=${as(n[e])}`).join("")}(n.parameters)}`}const O_=/^[^\/()?;=#]+/;function Md(n){const e=n.match(O_);return e?e[0]:""}const Ol=/^[^=?&#]+/,L_=/^[^&#]+/;class sf{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ue([],{}):new ue([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[hn]=new ue(e,t)),r}parseSegment(){const e=Md(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Je(Ru(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Md(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Md(this.remaining);i&&(r=i,this.capture(r))}e[Ru(t)]=Ru(r)}parseQueryParam(e){const t=function Xu(n){const e=n.match(Ol);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function Ww(n){const e=n.match(L_);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=Sd(t),a=Sd(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Md(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let a;r.indexOf(":")>-1?(a=r.substr(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=hn);const c=this.parseChildren();t[a]=1===Object.keys(c).length?c[hn]:new ue([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Kp{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Mc(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Mc(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=af(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return af(e,this._root).map(t=>t.value)}}function Mc(n,e){if(n===e.value)return e;for(const t of e.children){const r=Mc(n,t);if(r)return r}return null}function af(n,e){if(n===e.value)return[e];for(const t of e.children){const r=af(n,t);if(r.length)return r.unshift(e),r}return[]}class Ka{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ll(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Pc extends Kp{constructor(e,t){super(e),this.snapshot=t,kd(this,e)}toString(){return this.snapshot.toString()}}function Pd(n,e){const t=function Fl(n,e){const c=new tl([],{},{},"",{},hn,e,null,n.root,-1,{});return new Rd("",new Ka(c,[]))}(n,e),r=new ni([new Je("",{})]),i=new ni({}),a=new ni({}),c=new ni({}),p=new ni(""),y=new el(r,i,c,p,a,hn,e,t.root);return y.snapshot=t.root,new Pc(new Ka(y,[]),t)}class el{constructor(e,t,r,i,a,c,p,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=p,this._futureSnapshot=y}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,v.U)(e=>qs(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,v.U)(e=>qs(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Yp(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function Qp(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class tl{constructor(e,t,r,i,a,c,p,y,b,x,R){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=p,this.routeConfig=y,this._urlSegment=b,this._lastPathIndex=x,this._resolve=R}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=qs(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qs(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Rd extends Kp{constructor(e,t){super(t),this.url=e,kd(this,t)}toString(){return uf(this._root)}}function kd(n,e){e.value._routerState=n,e.children.forEach(t=>kd(n,t))}function uf(n){const e=n.children.length>0?` { ${n.children.map(uf).join(", ")} } `:"";return`${n.value}${e}`}function Nd(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,si(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),si(e.params,t.params)||n.params.next(t.params),function Dd(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!si(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),si(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Rc(n,e){const t=si(n.params,e.params)&&function ut(n,e){return Ft(n,e)&&n.every((t,r)=>si(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Rc(n.parent,e.parent))}function kc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function U_(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return kc(n,r,i);return kc(n,r)})}(n,e,t);return new Ka(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const c=a.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(p=>kc(n,p)),c}}const r=function V_(n){return new el(new ni(n.url),new ni(n.params),new ni(n.queryParams),new ni(n.fragment),new ni(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>kc(n,a));return new Ka(r,i)}}function Go(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Wo(n){return"object"==typeof n&&null!=n&&n.outlets}function cf(n,e,t,r,i){let a={};if(r&&gr(r,(p,y)=>{a[y]=Array.isArray(p)?p.map(b=>`${b}`):`${p}`}),n===e)return new ae(t,a,i);const c=Jp(n,e,t);return new ae(c,a,i)}function Jp(n,e,t){const r={};return gr(n.children,(i,a)=>{r[a]=i===e?t:Jp(i,e,t)}),new ue(n.segments,r)}class B_{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Go(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Wo);if(i&&i!==Rl(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class eg{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function tg(n,e,t){if(n||(n=new ue([],{})),0===n.segments.length&&n.hasChildren())return Od(n,e,t);const r=function H_(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const c=n.segments[i],p=t[r];if(Wo(p))break;const y=`${p}`,b=r<t.length-1?t[r+1]:null;if(i>0&&void 0===y)break;if(y&&b&&"object"==typeof b&&void 0===b.outlets){if(!D(y,b,c))return a;r+=2}else{if(!D(y,{},c))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new ue(n.segments.slice(0,r.pathIndex),{});return a.children[hn]=new ue(n.segments.slice(r.pathIndex),n.children),Od(a,0,i)}return r.match&&0===i.length?new ue(n.segments,{}):r.match&&!n.hasChildren()?C(n,e,t):r.match?Od(n,0,i):C(n,e,t)}function Od(n,e,t){if(0===t.length)return new ue(n.segments,{});{const r=function z_(n){return Wo(n[0])?n[0].outlets:{[hn]:n}}(t),i={};return gr(r,(a,c)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[c]=tg(n.children[c],e,a))}),gr(n.children,(a,c)=>{void 0===r[c]&&(i[c]=a)}),new ue(n.segments,i)}}function C(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(Wo(a)){const y=_(a.outlets);return new ue(r,y)}if(0===i&&Go(t[0])){r.push(new Je(n.segments[e].path,w(t[0]))),i++;continue}const c=Wo(a)?a.outlets[hn]:`${a}`,p=i<t.length-1?t[i+1]:null;c&&p&&Go(p)?(r.push(new Je(c,w(p))),i+=2):(r.push(new Je(c,{})),i++)}return new ue(r,{})}function _(n){const e={};return gr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=C(new ue([],{}),0,t))}),e}function w(n){const e={};return gr(n,(t,r)=>e[r]=`${t}`),e}function D(n,e,t){return n==t.path&&si(e,t.parameters)}class H{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Nd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Ll(t);e.children.forEach(a=>{const c=a.value.outlet;this.deactivateRoutes(a,i[c],r),delete i[c]}),gr(i,(a,c)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Ll(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);if(r&&r.outlet){const c=r.outlet.detach(),p=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:p})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Ll(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Ll(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new Qu(a.value.snapshot))}),e.children.length&&this.forwardEvent(new Za(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(Nd(i),i===a)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const p=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(p.contexts),c.attachRef=p.componentRef,c.route=p.route.value,c.outlet&&c.outlet.attach(p.componentRef,p.route.value),Nd(p.route.value),this.activateChildRoutes(e,null,c.children)}else{const p=function ye(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),y=p?p.module.componentFactoryResolver:null;c.attachRef=null,c.route=i,c.resolver=y,c.outlet&&c.outlet.activateWith(i,y),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class Ge{constructor(e,t){this.routes=e,this.module=t}}function ht(n){return"function"==typeof n}function Jt(n){return n instanceof ae}const Nc=Symbol("INITIAL_VALUE");function Vl(){return Ir(n=>function We(...n){const e=(0,Wa.yG)(n),t=(0,Wa.jO)(n),{args:r,keys:i}=Tl(n);if(0===r.length)return(0,Ln.D)([],e);const a=new ri.y(function _t(n,e,t=f.y){return r=>{Lt(e,()=>{const{length:i}=n,a=new Array(i);let c=i,p=i;for(let y=0;y<i;y++)Lt(e,()=>{const b=(0,Ln.D)(n[y],e);let x=!1;b.subscribe((0,de.x)(r,R=>{a[y]=R,x||(x=!0,p--),p||r.next(t(a.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>Y(i,c):f.y));return t?a.pipe(V(t)):a}(n.map(e=>e.pipe((0,yo.q)(1),Ho(Nc)))).pipe(Ai((e,t)=>{let r=!1;return t.reduce((i,a,c)=>i!==Nc?i:(a===Nc&&(r=!0),r||!1!==a&&c!==t.length-1&&!Jt(a)?i:a),e)},Nc),pr(e=>e!==Nc),(0,v.U)(e=>Jt(e)?e:!0===e),(0,yo.q)(1)))}class hf{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Bl,this.attachRef=null}}class Bl{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new hf,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let jl=(()=>{class n{constructor(t,r,i,a,c){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=a||hn,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),p=this.parentContexts.getOrCreateContext(this.name).children,y=new ng(t,p,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,y),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Bl),g.Y36(g.s_b),g.Y36(g._Vd),g.$8M("name"),g.Y36(g.sBO))},n.\u0275dir=g.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class ng{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===el?this.route:e===Bl?this.childContexts:this.parent.get(e,t)}}let ff=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},directives:[jl],encapsulation:2}),n})();function Oc(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Lc(r,$_(e,r))}}function Lc(n,e){n.children&&Oc(n.children,e)}function $_(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function nl(n){const e=n.children&&n.children.map(nl),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==hn&&(t.component=ff),t}function bo(n){return n.outlet||hn}function oi(n,e){const t=n.filter(r=>bo(r)===e);return t.push(...n.filter(r=>bo(r)!==e)),t}const qw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function rg(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},qw):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const a=(e.matcher||Td)(t,n,e);if(!a)return Object.assign({},qw);const c={};gr(a.posParams,(y,b)=>{c[b]=y.path});const p=a.consumed.length>0?Object.assign(Object.assign({},c),a.consumed[a.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:a.consumed,remainingSegments:t.slice(a.consumed.length),parameters:p,positionalParamSegments:null!==(r=a.posParams)&&void 0!==r?r:{}}}function Ld(n,e,t,r,i="corrected"){if(t.length>0&&function tD(n,e,t){return t.some(r=>ig(n,e,r)&&bo(r)!==hn)}(n,t,r)){const c=new ue(e,function eD(n,e,t,r){const i={};i[hn]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&bo(a)!==hn){const c=new ue([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[bo(a)]=c}return i}(n,e,r,new ue(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function nD(n,e,t){return t.some(r=>ig(n,e,r))}(n,t,r)){const c=new ue(n.segments,function Zw(n,e,t,r,i,a){const c={};for(const p of r)if(ig(n,t,p)&&!i[bo(p)]){const y=new ue([],{});y._sourceSegment=n,y._segmentIndexShift="legacy"===a?n.segments.length:e.length,c[bo(p)]=y}return Object.assign(Object.assign({},i),c)}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const a=new ue(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function ig(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Kw(n,e,t,r){return!!(bo(n)===r||r!==hn&&ig(e,t,n))&&("**"===n.path||rg(e,n,t).matched)}function rD(n,e,t){return 0===e.length&&!n.children[t]}class G_{constructor(e){this.segmentGroup=e||null}}class Fd{constructor(e){this.urlTree=e}}function Pi(n){return mi(new G_(n))}function sg(n){return mi(new Fd(n))}class pf{constructor(e,t,r,i,a){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(g.h0i)}apply(){const e=Ld(this.urlTree.root,[],[],this.config).segmentGroup,t=new ue(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,hn).pipe((0,v.U)(a=>this.createUrlTree(q_(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ea(a=>{if(a instanceof Fd)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof G_?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,hn).pipe((0,v.U)(i=>this.createUrlTree(q_(i),e.queryParams,e.fragment))).pipe(Ea(i=>{throw i instanceof G_?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new ue([],{[hn]:e}):e;return new ae(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,v.U)(a=>new ue([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,Ln.D)(i).pipe(Gs(a=>{const c=r.children[a],p=oi(t,a);return this.expandSegmentGroup(e,p,c,a).pipe((0,v.U)(y=>({segment:y,outlet:a})))}),Ai((a,c)=>(a[c.outlet]=c.segment,a),{}),function N_(n,e){const t=arguments.length>=2;return r=>r.pipe(n?pr((i,a)=>n(i,a,r)):f.y,Du(1),t?ef(e):Xh(()=>new Hs))}())}expandSegment(e,t,r,i,a,c){return(0,Ln.D)(r).pipe(Gs(p=>this.expandSegmentAgainstRoute(e,t,r,p,i,a,c).pipe(Ea(b=>{if(b instanceof G_)return yt(null);throw b}))),Su(p=>!!p),Ea((p,y)=>{if(p instanceof Hs||"EmptyError"===p.name)return rD(t,i,a)?yt(new ue([],{})):Pi(t);throw p}))}expandSegmentAgainstRoute(e,t,r,i,a,c,p){return Kw(i,t,a,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,c):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c):Pi(t):Pi(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?sg(a):this.lineralizeSegments(r,a).pipe((0,Gr.z)(c=>{const p=new ue(c,{});return this.expandSegment(e,p,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){const{matched:p,consumedSegments:y,remainingSegments:b,positionalParamSegments:x}=rg(t,i,a);if(!p)return Pi(t);const R=this.applyRedirectCommands(y,i.redirectTo,x);return i.redirectTo.startsWith("/")?sg(R):this.lineralizeSegments(i,R).pipe((0,Gr.z)(B=>this.expandSegment(e,t,r,B.concat(b),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){if("**"===r.path)return r.loadChildren?(r._loadedConfig?yt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,v.U)(R=>(r._loadedConfig=R,new ue(i,{})))):yt(new ue(i,{}));const{matched:c,consumedSegments:p,remainingSegments:y}=rg(t,r,i);return c?this.getChildConfig(e,r,i).pipe((0,Gr.z)(x=>{const R=x.module,B=x.routes,{segmentGroup:G,slicedSegments:J}=Ld(t,p,y,B),xe=new ue(G.segments,G.children);if(0===J.length&&xe.hasChildren())return this.expandChildren(R,B,xe).pipe((0,v.U)(At=>new ue(p,At)));if(0===B.length&&0===J.length)return yt(new ue(p,{}));const Ze=bo(r)===a;return this.expandSegment(R,xe,B,J,Ze?hn:a,!0).pipe((0,v.U)(Mt=>new ue(p.concat(Mt.segments),Mt.children)))})):Pi(t)}getChildConfig(e,t,r){return t.children?yt(new Ge(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?yt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Gr.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,v.U)(a=>(t._loadedConfig=a,a))):function Qw(n){return mi(Ml(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):yt(new Ge([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?yt(i.map(c=>{const p=e.get(c);let y;if(function Sr(n){return n&&ht(n.canLoad)}(p))y=p.canLoad(t,r);else{if(!ht(p))throw new Error("Invalid CanLoad guard");y=p(t,r)}return Wr(y)})).pipe(Vl(),(0,ji.b)(c=>{if(!Jt(c))return;const p=Ml(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw p.url=c,p}),(0,v.U)(c=>!0===c)):yt(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return yt(r);if(i.numberOfChildren>1||!i.children[hn])return mi(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[hn]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new ae(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return gr(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const p=i.substring(1);r[a]=t[p]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let c={};return gr(t.children,(p,y)=>{c[y]=this.createSegmentGroup(e,p,r,i)}),new ue(a,c)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function q_(n){const e={};for(const r of Object.keys(n.children)){const a=q_(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function W_(n){if(1===n.numberOfChildren&&n.children[hn]){const e=n.children[hn];return new ue(n.segments.concat(e.segments),e.children)}return n}(new ue(n.segments,e))}class Z_{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class og{constructor(e,t){this.component=e,this.route=t}}function Jw(n,e,t){const r=n._root;return mf(r,e?e._root:null,t,[r.value])}function gf(n,e,t){const r=function oD(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function mf(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Ll(e);return n.children.forEach(c=>{(function K_(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,c=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(c&&a.routeConfig===c.routeConfig){const y=function aD(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ft(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ft(n.url,e.url)||!si(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Rc(n,e)||!si(n.queryParams,e.queryParams);default:return!Rc(n,e)}}(c,a,a.routeConfig.runGuardsAndResolvers);y?i.canActivateChecks.push(new Z_(r)):(a.data=c.data,a._resolvedData=c._resolvedData),mf(n,e,a.component?p?p.children:null:t,r,i),y&&p&&p.outlet&&p.outlet.isActivated&&i.canDeactivateChecks.push(new og(p.outlet.component,c))}else c&&_f(e,p,i),i.canActivateChecks.push(new Z_(r)),mf(n,null,a.component?p?p.children:null:t,r,i)})(c,a[c.value.outlet],t,r.concat([c.value]),i),delete a[c.value.outlet]}),gr(a,(c,p)=>_f(c,t.getContext(p),i)),i}function _f(n,e,t){const r=Ll(n),i=n.value;gr(r,(a,c)=>{_f(a,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new og(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class pD{}function Q_(n){return new ri.y(e=>e.error(n))}class mD{constructor(e,t,r,i,a,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=c}recognize(){const e=Ld(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,hn);if(null===t)return null;const r=new tl([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},hn,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Ka(r,t),a=new Rd(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,r=Yp(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const a of Object.keys(t.children)){const c=t.children[a],p=oi(e,a),y=this.processSegmentGroup(p,c,a);if(null===y)return null;r.push(...y)}const i=Xw(r);return function _D(n){n.sort((e,t)=>e.value.outlet===hn?-1:t.value.outlet===hn?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const a of e){const c=this.processSegmentAgainstRoute(a,t,r,i);if(null!==c)return c}return rD(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!Kw(e,t,r,i))return null;let a,c=[],p=[];if("**"===e.path){const G=r.length>0?Rl(r).parameters:{};a=new tl(r,G,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ya(e),bo(e),e.component,e,eE(t),Fc(t)+r.length,wD(e))}else{const G=rg(t,e,r);if(!G.matched)return null;c=G.consumedSegments,p=G.remainingSegments,a=new tl(c,G.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ya(e),bo(e),e.component,e,eE(t),Fc(t)+c.length,wD(e))}const y=function yD(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:b,slicedSegments:x}=Ld(t,c,p,y.filter(G=>void 0===G.redirectTo),this.relativeLinkResolution);if(0===x.length&&b.hasChildren()){const G=this.processChildren(y,b);return null===G?null:[new Ka(a,G)]}if(0===y.length&&0===x.length)return[new Ka(a,[])];const R=bo(e)===i,B=this.processSegment(y,b,x,R?hn:i);return null===B?null:[new Ka(a,B)]}}function vD(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Xw(n){const e=[],t=new Set;for(const r of n){if(!vD(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Xw(r.children);e.push(new Ka(r.value,i))}return e.filter(r=>!t.has(r))}function eE(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Fc(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function Ya(n){return n.data||{}}function wD(n){return n.resolve||{}}function ug(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function X_(n){return Ir(e=>{const t=n(e);return t?(0,Ln.D)(t).pipe((0,v.U)(()=>e)):yt(e)})}class rE extends class yf{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const lg=new g.OlP("ROUTES");class cg{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,v.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=a.create(e);return new Ge(Pl(c.injector.get(lg,void 0,g.XFs.Self|g.XFs.Optional)).map(nl),c)}),Ea(a=>{throw t._loader$=void 0,a}));return t._loader$=new Si(i,()=>new os.x).pipe(rr()),t._loader$}loadModuleFactory(e){return Wr(e()).pipe((0,Gr.z)(t=>t instanceof g.YKP?yt(t):(0,Ln.D)(this.compiler.compileModuleAsync(t))))}}class iE{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function qR(n){throw n}function Ud(n,e,t){return e.parse("/")}function dg(n,e){return yt(null)}const sE={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ED={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ar=(()=>{class n{constructor(t,r,i,a,c,p,y){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=y,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new os.x,this.errorHandler=qR,this.malformedUriErrorHandler=Ud,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:dg,afterPreactivation:dg},this.urlHandlingStrategy=new iE,this.routeReuseStrategy=new rE,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(g.h0i),this.console=c.get(g.c2e);const R=c.get(g.R0b);this.isNgZoneEnabled=R instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(y),this.currentUrlTree=function kl(){return new ae(new ue([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new cg(c,p,B=>this.triggerEvent(new Mi(B)),B=>this.triggerEvent(new Al(B))),this.routerState=Pd(this.currentUrlTree,this.rootComponentType),this.transitions=new ni({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(pr(i=>0!==i.id),(0,v.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Ir(i=>{let a=!1,c=!1;return yt(i).pipe((0,ji.b)(p=>{this.currentNavigation={id:p.id,initialUrl:p.currentRawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Ir(p=>{const y=this.browserUrlTree.toString(),b=!this.navigated||p.extractedUrl.toString()!==y||y!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return oE(p.source)&&(this.browserUrlTree=p.extractedUrl),yt(p).pipe(Ir(R=>{const B=this.transitions.getValue();return r.next(new Cd(R.id,this.serializeUrl(R.extractedUrl),R.source,R.restoredState)),B!==this.transitions.getValue()?Bi.E:Promise.resolve(R)}),function iD(n,e,t,r){return Ir(i=>function Cs(n,e,t,r,i){return new pf(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,v.U)(a=>Object.assign(Object.assign({},i),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ji.b)(R=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:R.urlAfterRedirects})}),function GR(n,e,t,r,i){return(0,Gr.z)(a=>function gD(n,e,t,r,i="emptyOnly",a="legacy"){try{const c=new mD(n,e,t,r,i,a).recognize();return null===c?Q_(new pD):yt(c)}catch(c){return Q_(c)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),r,i).pipe((0,v.U)(c=>Object.assign(Object.assign({},a),{targetSnapshot:c}))))}(this.rootComponentType,this.config,R=>this.serializeUrl(R),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ji.b)(R=>{if("eager"===this.urlUpdateStrategy){if(!R.extras.skipLocationChange){const G=this.urlHandlingStrategy.merge(R.urlAfterRedirects,R.rawUrl);this.setBrowserUrl(G,R)}this.browserUrlTree=R.urlAfterRedirects}const B=new Dc(R.id,this.serializeUrl(R.extractedUrl),this.serializeUrl(R.urlAfterRedirects),R.targetSnapshot);r.next(B)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:B,extractedUrl:G,source:J,restoredState:xe,extras:Ze}=p,vt=new Cd(B,this.serializeUrl(G),J,xe);r.next(vt);const Mt=Pd(G,this.rootComponentType).snapshot;return yt(Object.assign(Object.assign({},p),{targetSnapshot:Mt,urlAfterRedirects:G,extras:Object.assign(Object.assign({},Ze),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=p.rawUrl,p.resolve(null),Bi.E}),X_(p=>{const{targetSnapshot:y,id:b,extractedUrl:x,rawUrl:R,extras:{skipLocationChange:B,replaceUrl:G}}=p;return this.hooks.beforePreactivation(y,{navigationId:b,appliedUrlTree:x,rawUrlTree:R,skipLocationChange:!!B,replaceUrl:!!G})}),(0,ji.b)(p=>{const y=new Au(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}),(0,v.U)(p=>Object.assign(Object.assign({},p),{guards:Jw(p.targetSnapshot,p.currentSnapshot,this.rootContexts)})),function Y_(n,e){return(0,Gr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:c}}=t;return 0===c.length&&0===a.length?yt(Object.assign(Object.assign({},t),{guardsResult:!0})):function uD(n,e,t,r){return(0,Ln.D)(n).pipe((0,Gr.z)(i=>function fD(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?yt(a.map(p=>{const y=gf(p,e,i);let b;if(function Ul(n){return n&&ht(n.canDeactivate)}(y))b=Wr(y.canDeactivate(n,e,t,r));else{if(!ht(y))throw new Error("Invalid CanDeactivate guard");b=Wr(y(n,e,t,r))}return b.pipe(Su())})).pipe(Vl()):yt(!0)}(i.component,i.route,t,e,r)),Su(i=>!0!==i,!0))}(c,r,i,n).pipe((0,Gr.z)(p=>p&&function kt(n){return"boolean"==typeof n}(p)?function lD(n,e,t,r){return(0,Ln.D)(e).pipe(Gs(i=>qa(function cD(n,e){return null!==n&&e&&e(new xu(n)),yt(!0)}(i.route.parent,r),function ag(n,e){return null!==n&&e&&e(new vo(n)),yt(!0)}(i.route,r),function hD(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(c=>function sD(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>Tu(()=>yt(c.guards.map(y=>{const b=gf(y,c.node,t);let x;if(function Ta(n){return n&&ht(n.canActivateChild)}(b))x=Wr(b.canActivateChild(r,n));else{if(!ht(b))throw new Error("Invalid CanActivateChild guard");x=Wr(b(r,n))}return x.pipe(Su())})).pipe(Vl())));return yt(a).pipe(Vl())}(n,i.path,t),function dD(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return yt(!0);const i=r.map(a=>Tu(()=>{const c=gf(a,e,t);let p;if(function Eo(n){return n&&ht(n.canActivate)}(c))p=Wr(c.canActivate(e,n));else{if(!ht(c))throw new Error("Invalid CanActivate guard");p=Wr(c(e,n))}return p.pipe(Su())}));return yt(i).pipe(Vl())}(n,i.route,t))),Su(i=>!0!==i,!0))}(r,a,n,e):yt(p)),(0,v.U)(p=>Object.assign(Object.assign({},t),{guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),(0,ji.b)(p=>{if(Jt(p.guardsResult)){const b=Ml(`Redirecting to "${this.serializeUrl(p.guardsResult)}"`);throw b.url=p.guardsResult,b}const y=new Zp(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(y)}),pr(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,""),!1)),X_(p=>{if(p.guards.canActivateChecks.length)return yt(p).pipe((0,ji.b)(y=>{const b=new Sl(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(b)}),Ir(y=>{let b=!1;return yt(y).pipe(function tE(n,e){return(0,Gr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return yt(t);let a=0;return(0,Ln.D)(i).pipe(Gs(c=>function WR(n,e,t,r){return function ku(n,e,t,r){const i=ug(n);if(0===i.length)return yt({});const a={};return(0,Ln.D)(i).pipe((0,Gr.z)(c=>function J_(n,e,t,r){const i=gf(n,e,r);return Wr(i.resolve?i.resolve(e,t):i(e,t))}(n[c],e,t,r).pipe((0,ji.b)(p=>{a[c]=p}))),Du(1),(0,Gr.z)(()=>ug(a).length===i.length?yt(a):Bi.E))}(n._resolve,n,e,r).pipe((0,v.U)(a=>(n._resolvedData=a,n.data=Object.assign(Object.assign({},n.data),Yp(n,t).resolve),null)))}(c.route,r,n,e)),(0,ji.b)(()=>a++),Du(1),(0,Gr.z)(c=>a===i.length?yt(t):Bi.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ji.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(y),this.cancelNavigationTransition(y,"At least one route resolver didn't emit any value."))}}))}),(0,ji.b)(y=>{const b=new xi(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(b)}))}),X_(p=>{const{targetSnapshot:y,id:b,extractedUrl:x,rawUrl:R,extras:{skipLocationChange:B,replaceUrl:G}}=p;return this.hooks.afterPreactivation(y,{navigationId:b,appliedUrlTree:x,rawUrlTree:R,skipLocationChange:!!B,replaceUrl:!!G})}),(0,v.U)(p=>{const y=function F_(n,e,t){const r=kc(n,e._root,t?t._root:void 0);return new Pc(r,e)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return Object.assign(Object.assign({},p),{targetRouterState:y})}),(0,ji.b)(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((n,e,t)=>(0,v.U)(r=>(new H(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),(0,ji.b)({next(){a=!0},complete(){a=!0}}),function tf(n){return(0,fr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var p;a||c||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(p=this.currentNavigation)||void 0===p?void 0:p.id)===i.id&&(this.currentNavigation=null)}),Ea(p=>{if(c=!0,function Ju(n){return n&&n[zi]}(p)){const y=Jt(p.url);y||(this.navigated=!0,this.restoreHistory(i,!0));const b=new nf(i.id,this.serializeUrl(i.extractedUrl),p.message);r.next(b),y?setTimeout(()=>{const x=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),R={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||oE(i.source)};this.scheduleNavigation(x,"imperative",null,R,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const y=new Dr(i.id,this.serializeUrl(i.extractedUrl),p);r.next(y);try{i.resolve(this.errorHandler(p))}catch(b){i.reject(b)}}return Bi.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const a={replaceUrl:!0},c=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(c){const y=Object.assign({},c);delete y.navigationId,delete y.\u0275routerPageId,0!==Object.keys(y).length&&(a.state=y)}const p=this.parseUrl(t.url);this.scheduleNavigation(p,r,c,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Oc(t),this.config=t.map(nl),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:c,queryParamsHandling:p,preserveFragment:y}=r,b=i||this.routerState.root,x=y?this.currentUrlTree.fragment:c;let R=null;switch(p){case"merge":R=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":R=this.currentUrlTree.queryParams;break;default:R=a||null}return null!==R&&(R=this.removeEmptyProps(R)),function lf(n,e,t,r,i){if(0===t.length)return cf(e.root,e.root,e.root,r,i);const a=function Xp(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new B_(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,c)=>{if("object"==typeof a&&null!=a){if(a.outlets){const p={};return gr(a.outlets,(y,b)=>{p[b]="string"==typeof y?y.split("/"):y}),[...i,{outlets:p}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===c?(a.split("/").forEach((p,y)=>{0==y&&"."===p||(0==y&&""===p?t=!0:".."===p?e++:""!=p&&i.push(p))}),i):[...i,a]},[]);return new B_(t,e,r)}(t);if(a.toRoot())return cf(e.root,e.root,new ue([],{}),r,i);const c=function j_(n,e,t){if(n.isAbsolute)return new eg(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new eg(a,a===e.root,0)}const r=Go(n.commands[0])?0:1;return function df(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new eg(r,!1,i-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(a,e,n),p=c.processChildren?Od(c.segmentGroup,c.index,a.commands):tg(c.segmentGroup,c.index,a.commands);return cf(e.root,c.segmentGroup,p,r,i)}(b,this.currentUrlTree,t,R,null!=x?x:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Jt(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function bD(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},sE):!1===r?Object.assign({},ED):r,Jt(t))return Pu(this.currentUrlTree,t,i);const a=this.parseUrl(t);return Pu(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Ws(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,c){var p,y;if(this.disposed)return Promise.resolve(!1);let b,x,R;c?(b=c.resolve,x=c.reject,R=c.promise):R=new Promise((J,xe)=>{b=J,x=xe});const B=++this.navigationId;let G;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),G=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(p=this.browserPageId)&&void 0!==p?p:0:(null!==(y=this.browserPageId)&&void 0!==y?y:0)+1):G=0,this.setTransition({id:B,targetPageId:G,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:b,reject:x,promise:R,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),R.catch(J=>Promise.reject(J))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){var i,a;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===c?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new nf(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function oE(n){return"imperative"!==n}let Vd=(()=>{class n{constructor(t,r,i,a,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=c,this.commands=null,this.onChanges=new os.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Bd(this.skipLocationChange),replaceUrl:Bd(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Bd(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Ar),g.Y36(el),g.$8M("tabindex"),g.Y36(g.Qsj),g.Y36(g.SBq))},n.\u0275dir=g.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&g.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[g.TTD]}),n})();function Bd(n){return""===n||!!n}class hg{}class fg{preload(e,t){return yt(null)}}let lE=(()=>{class n{constructor(t,r,i,a){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new cg(i,r,y=>t.triggerEvent(new Mi(y)),y=>t.triggerEvent(new Al(y)))}setUpPreloading(){this.subscription=this.router.events.pipe(pr(t=>t instanceof Ws),Gs(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(g.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const c=a._loadedConfig;i.push(this.processRoutes(c.module,c.routes))}else a.loadChildren&&!a.canLoad?i.push(this.preloadConfig(t,a)):a.children&&i.push(this.processRoutes(t,a.children));return(0,Ln.D)(i).pipe((0,ii.J)(),(0,v.U)(a=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?yt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Gr.z)(a=>(r._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Ar),g.LFG(g.Sil),g.LFG(g.zs3),g.LFG(hg))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),ny=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Cd?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ws&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof xl&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new xl(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const zl=new g.OlP("ROUTER_CONFIGURATION"),Hl=new g.OlP("ROUTER_FORROOT_GUARD"),cE=[He,{provide:vn,useClass:$t},{provide:Ar,useFactory:function pE(n,e,t,r,i,a,c={},p,y){const b=new Ar(null,n,e,t,r,i,Pl(a));return p&&(b.urlHandlingStrategy=p),y&&(b.routeReuseStrategy=y),function iy(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,b),c.enableTracing&&b.events.subscribe(x=>{var R,B;null===(R=console.group)||void 0===R||R.call(console,`Router Event: ${x.constructor.name}`),console.log(x.toString()),console.log(x),null===(B=console.groupEnd)||void 0===B||B.call(console)}),b},deps:[vn,Bl,He,g.zs3,g.Sil,lg,zl,[class ey{},new g.FiY],[class nE{},new g.FiY]]},Bl,{provide:el,useFactory:function gE(n){return n.routerState.root},deps:[Ar]},lE,fg,class uE{preload(e,t){return t().pipe(Ea(()=>yt(null)))}},{provide:zl,useValue:{enableTracing:!1}}];function dE(){return new g.PXZ("Router",Ar)}let hE=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[cE,ry(t),{provide:Hl,useFactory:fE,deps:[[Ar,new g.FiY,new g.tp0]]},{provide:zl,useValue:r||{}},{provide:Ie,useFactory:TD,deps:[ve,[new g.tBr(ot),new g.FiY],zl]},{provide:ny,useFactory:pg,deps:[Ar,pu,zl]},{provide:hg,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:fg},{provide:g.PXZ,multi:!0,useFactory:dE},[jd,{provide:g.ip1,multi:!0,useFactory:gg,deps:[jd]},{provide:mg,useFactory:mE,deps:[jd]},{provide:g.tb,multi:!0,useExisting:mg}]]}}static forChild(t){return{ngModule:n,providers:[ry(t)]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Hl,8),g.LFG(Ar,8))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function pg(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new ny(n,e,t)}function TD(n,e,t={}){return t.useHash?new ze(n,e):new it(n,e)}function fE(n){return"guarded"}function ry(n){return[{provide:g.deG,multi:!0,useValue:n},{provide:lg,multi:!0,useValue:n}]}let jd=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new os.x}appInitializer(){return this.injector.get(Q,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(p=>r=p),a=this.injector.get(Ar),c=this.injector.get(zl);return"disabled"===c.initialNavigation?(a.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?yt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),a.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(zl),i=this.injector.get(lE),a=this.injector.get(ny),c=this.injector.get(Ar),p=this.injector.get(g.z2F);t===p.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),i.setUpPreloading(),a.init(),c.resetRootComponentType(p.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.zs3))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function gg(n){return n.appInitializer.bind(n)}function mE(n){return n.bootstrapListener.bind(n)}const mg=new g.OlP("Router Initializer");var Uc=O(6451),_g=O(5363),vE=O(6063);class DD extends os.x{constructor(e=1/0,t=1/0,r=vE.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:c}=this;t||(r.push(e),!i&&r.push(a.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let c=0;c<a.length&&!e.closed;c+=r?1:2)e.next(a[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const c=t.now();let p=0;for(let y=1;y<r.length&&r[y]<=c;y+=2)p=y;p&&r.splice(0,p+1)}}}var wE=O(3099);function sy(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,wE.B)({connector:()=>new DD(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function yg(n,e){return(0,Kt.m)(e)?Ir(()=>n,e):Ir(()=>n)}var vg=O(9468),un=O(5813),_i=O(2011),$l=O(5867);class Vc{constructor(e){return e}}class oy{constructor(){return(0,$l.C6)()}}const ay=new g.OlP("angularfire2._apps"),EE={provide:Vc,useFactory:function Qa(n){return n&&1===n.length?n[0]:new Vc((0,$l.Mq)())},deps:[[new g.FiY,ay]]},SD={provide:oy,deps:[[new g.FiY,ay]]};function AD(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Vc(r)}}let xD=(()=>{class n{constructor(t){(0,$l.KN)("angularfire",un.q4.full,"core"),(0,$l.KN)("angularfire",un.q4.full,"app"),(0,$l.KN)("angular",g.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.Lbi))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[EE,SD]}),n})();function MD(n,...e){return{ngModule:xD,providers:[{provide:ay,useFactory:AD(n),multi:!0,deps:[g.R0b,g.zs3,un.HU,...e]}]}}const RD=(0,un.u3)($l.ZF,!0);var Oe=O(5861),yi=O(9681),ai=O(4859),z=O(2090),Ja=O(1877);const wg=new Map,rl={activated:!1,tokenObservers:[]},uy={initialized:!1,enabled:!1};function Ri(n){return wg.get(n)||rl}function qo(n,e){wg.set(n,e)}function ly(){return uy}class dy{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Oe.Z)(function*(){t.stop();try{t.pending=new z.BH,yield function JR(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new z.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Zs=new z.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function bE(n){if(!Ri(n).activated)throw Zs.create("use-before-activation",{appName:n.name})}function TE(n,e){return Sg.apply(this,arguments)}function Sg(){return(Sg=(0,Oe.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const R=yield i.getHeartbeatsHeader();R&&(r["X-Firebase-Client"]=R)}const a={method:"POST",body:JSON.stringify(e),headers:r};let c,p;try{c=yield fetch(n,a)}catch(R){throw Zs.create("fetch-network-error",{originalErrorMessage:R.message})}if(200!==c.status)throw Zs.create("fetch-status-error",{httpStatus:c.status});try{p=yield c.json()}catch(R){throw Zs.create("fetch-parse-error",{originalErrorMessage:R.message})}const y=p.ttl.match(/^([\d.]+)(s)$/);if(!y||!y[2]||isNaN(Number(y[1])))throw Zs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${p.ttl}`});const b=1e3*Number(y[1]),x=Date.now();return{token:p.token,expireTimeMillis:x+b,issuedAtTimeMillis:x}})).apply(this,arguments)}function hy(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Ag="firebase-app-check-store";let fy=null;function UD(){return fy||(fy=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Zs.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Ag,{keyPath:"compositeKey"})}}catch(t){e(Zs.create("storage-open",{originalErrorMessage:t.message}))}}),fy)}function vf(){return(vf=(0,Oe.Z)(function*(n,e){const r=(yield UD()).transaction(Ag,"readwrite"),a=r.objectStore(Ag).put({compositeKey:n,value:e});return new Promise((c,p)=>{a.onsuccess=y=>{c()},r.onerror=y=>{var b;p(Zs.create("storage-set",{originalErrorMessage:null===(b=y.target.error)||void 0===b?void 0:b.message}))}})})).apply(this,arguments)}const zd=new Ja.Yd("@firebase/app-check");function sl(n,e){return(0,z.hl)()?function nk(n,e){return function il(n,e){return vf.apply(this,arguments)}(function Mg(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{zd.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Pg(){return ly().enabled}function xE(){return Rg.apply(this,arguments)}function Rg(){return(Rg=(0,Oe.Z)(function*(){const n=ly();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const BD={error:"UNKNOWN_ERROR"};function wf(n){return z.US.encodeString(JSON.stringify(n),!1)}function ol(n){return Ef.apply(this,arguments)}function Ef(){return(Ef=(0,Oe.Z)(function*(n,e=!1){const t=n.app;bE(t);const r=Ri(t);let a,i=r.token;if(!i){const y=yield r.cachedTokenPromise;y&&bf(y)&&(i=y)}if(!e&&i&&bf(i))return{token:i.token};let p,c=!1;if(Pg()){r.exchangeTokenPromise||(r.exchangeTokenPromise=TE(hy(t,yield xE()),n.heartbeatServiceProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),c=!0);const y=yield r.exchangeTokenPromise;return yield sl(t,y),qo(t,Object.assign(Object.assign({},r),{token:y})),{token:y.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(y=>(r.exchangeTokenPromise=void 0,y)),c=!0),i=yield r.exchangeTokenPromise}catch(y){"appCheck/throttled"===y.code?zd.warn(y.message):zd.error(y),a=y}return i?(p={token:i.token},qo(t,Object.assign(Object.assign({},r),{token:i})),yield sl(t,i)):p=yy(a),c&&_y(t,p),p})).apply(this,arguments)}function Bc(n,e){const t=Ri(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),qo(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function jc(n){const{app:e}=n,t=Ri(e);let r=t.tokenRefresher;r||(r=function jD(n){const{app:e}=n;return new dy((0,Oe.Z)(function*(){let r;if(r=Ri(e).token?yield ol(n,!0):yield ol(n),r.error)throw r.error}),()=>!0,()=>{const t=Ri(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),qo(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function _y(n,e){const t=Ri(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function bf(n){return n.expireTimeMillis-Date.now()>0}function yy(n){return{token:wf(BD),error:n}}class vy{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ri(this.app);for(const t of e)Bc(this.app,t.next);return Promise.resolve()}}const UE="app-check-internal";!function YD(){(0,yi._registerComponent)(new ai.wA("app-check",n=>function ME(n,e){return new vy(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(UE).initialize()})),(0,yi._registerComponent)(new ai.wA(UE,n=>function kg(n){return{getToken:e=>ol(n,e),addTokenListener:e=>function Gl(n,e,t,r){const{app:i}=n,a=Ri(i),c={next:t,error:r,type:e};if(qo(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,c]})),a.token&&bf(a.token)){const p=a.token;Promise.resolve().then(()=>{t({token:p.token}),jc(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>jc(n))}(n,"INTERNAL",e),removeTokenListener:e=>Bc(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,yi.registerVersion)("@firebase/app-check","0.5.8")}();class zc{constructor(){return(0,un.vb)("app-check")}}"undefined"!=typeof window&&window;var Tf=O(127);const Fg=new g.OlP("angularfire2.auth.use-emulator"),jE=new g.OlP("angularfire2.auth.settings"),zE=new g.OlP("angularfire2.auth.tenant-id"),Df=new g.OlP("angularfire2.auth.langugage-code"),HE=new g.OlP("angularfire2.auth.use-device-language"),Ty=new g.OlP("angularfire.auth.persistence"),Ug=(n,e,t,r,i,a,c,p)=>(0,_i.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const y=e.runOutsideAngular(()=>n.auth());if(t&&y.useEmulator(...t),r&&(y.tenantId=r),y.languageCode=i,a&&y.useDeviceLanguage(),c)for(const[b,x]of Object.entries(c))y.settings[b]=x;return p&&y.setPersistence(p),y},[t,r,i,a,c,p]);let Sf=(()=>{class n{constructor(t,r,i,a,c,p,y,b,x,R,B,G){const J=new os.x,xe=yt(void 0).pipe((0,_g.Q)(c.outsideAngular),Ir(()=>a.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,5881)))),(0,v.U)(()=>(0,_i.on)(t,a,r)),(0,v.U)(Ze=>Ug(Ze,a,p,b,x,R,y,B)),sy({bufferSize:1,refCount:!1}));if(ei(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=yt(null);else{xe.pipe(Su()).subscribe();const vt=xe.pipe(Ir(It=>It.getRedirectResult().then(gn=>gn,()=>null)),un.iC,sy({bufferSize:1,refCount:!1})),Mt=xe.pipe(Ir(It=>new ri.y(gn=>({unsubscribe:a.runOutsideAngular(()=>It.onAuthStateChanged(xn=>gn.next(xn),xn=>gn.error(xn),()=>gn.complete()))})))),At=xe.pipe(Ir(It=>new ri.y(gn=>({unsubscribe:a.runOutsideAngular(()=>It.onIdTokenChanged(xn=>gn.next(xn),xn=>gn.error(xn),()=>gn.complete()))}))));this.authState=vt.pipe(yg(Mt),(0,vg.R)(c.outsideAngular),(0,_g.Q)(c.insideAngular)),this.user=vt.pipe(yg(At),(0,vg.R)(c.outsideAngular),(0,_g.Q)(c.insideAngular)),this.idToken=this.user.pipe(Ir(It=>It?(0,Ln.D)(It.getIdToken()):yt(null))),this.idTokenResult=this.user.pipe(Ir(It=>It?(0,Ln.D)(It.getIdTokenResult()):yt(null))),this.credential=(0,Uc.T)(vt,J,this.authState.pipe(pr(It=>!It))).pipe((0,v.U)(It=>(null==It?void 0:It.user)?It:null),(0,vg.R)(c.outsideAngular),(0,_g.Q)(c.insideAngular))}return(0,_i.pX)(this,xe,a,{spy:{apply:(Ze,vt,Mt)=>{(Ze.startsWith("signIn")||Ze.startsWith("createUser"))&&Mt.then(At=>J.next(At))}}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(_i.Dh),g.LFG(_i.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(un.HU),g.LFG(Fg,8),g.LFG(jE,8),g.LFG(zE,8),g.LFG(Df,8),g.LFG(HE,8),g.LFG(Ty,8),g.LFG(zc,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();var Vg=O(4986);function Dy(n,e=f.y){return n=null!=n?n:ul,(0,fr.e)((t,r)=>{let i,a=!0;t.subscribe((0,de.x)(r,c=>{const p=e(c);(a||!n(i,p))&&(a=!1,i=p,r.next(c))}))})}function ul(n,e){return n===e}var Bg=O(5032);O(5881);var Af=O(3942);const Sy="@firebase/database";let Hc="";function $E(n){Hc=n}class Ay{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,z.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,z.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class GE{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,z.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const xy=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Ay(e)}}catch(e){}return new GE},Wl=xy("localStorage"),My=xy("sessionStorage"),ql=new Ja.Yd("@firebase/database"),WE=function(){let n=1;return function(){return n++}}(),qE=function(n){const e=(0,z.dS)(n),t=new z.gQ;t.update(e);const r=t.digest();return z.US.encodeByteArray(r)},Hd=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Hd.apply(null,r):e+="object"==typeof r?(0,z.Pz)(r):r,e+=" "}return e};let Da=null,Py=!0;const ZE=function(n,e){(0,z.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(ql.logLevel=Ja.in.VERBOSE,Da=ql.log.bind(ql),e&&My.set("logging_enabled",!0)):"function"==typeof n?Da=n:(Da=null,My.remove("logging_enabled"))},Gi=function(...n){if(!0===Py&&(Py=!1,null===Da&&!0===My.get("logging_enabled")&&ZE(!0)),Da){const e=Hd.apply(null,n);Da(e)}},Nu=function(n){return function(...e){Gi(n,...e)}},Ry=function(...n){const e="FIREBASE INTERNAL ERROR: "+Hd(...n);ql.error(e)},Ou=function(...n){const e=`FIREBASE FATAL ERROR: ${Hd(...n)}`;throw ql.error(e),new Error(e)},Is=function(...n){const e="FIREBASE WARNING: "+Hd(...n);ql.warn(e)},Zo=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Lu="[MIN_NAME]",Xa="[MAX_NAME]",Zl=function(n,e){if(n===e)return 0;if(n===Lu||e===Xa)return-1;if(e===Lu||n===Xa)return 1;{const t=$d(n),r=$d(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},KE=function(n,e){return n===e?0:n<e?-1:1},xf=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,z.Pz)(e))},Ny=function(n){if("object"!=typeof n||null===n)return(0,z.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,z.Pz)(e[r]),t+=":",t+=Ny(n[e[r]]);return t+="}",t},YE=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Wi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Oy=function(n){(0,z.hu)(!Zo(n),"Invalid JSON number");const r=1023;let i,a,c,p,y;0===n?(a=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(p=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=p+r,c=Math.round(n*Math.pow(2,52-p)-Math.pow(2,52))):(a=0,c=Math.round(n/Math.pow(2,-1074))));const b=[];for(y=52;y;y-=1)b.push(c%2?1:0),c=Math.floor(c/2);for(y=11;y;y-=1)b.push(a%2?1:0),a=Math.floor(a/2);b.push(i?1:0),b.reverse();const x=b.join("");let R="";for(y=0;y<64;y+=8){let B=parseInt(x.substr(y,8),2).toString(16);1===B.length&&(B="0"+B),R+=B}return R.toLowerCase()},iS=new RegExp("^-?(0*)\\d{1,10}$"),sS=-2147483648,JE=2147483647,$d=function(n){if(iS.test(n)){const e=Number(n);if(e>=sS&&e<=JE)return e}return null},Gd=function(n){try{n()}catch(e){setTimeout(()=>{throw Is("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Wd=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class _k{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Is(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class eu{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Gi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Is(e)}}let zg=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const oS=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,$g="websocket",tb="long_polling";class zy{constructor(e,t,r,i,a=!1,c="",p=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=c,this.includeNamespaceInQueryParams=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Wl.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Wl.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function nb(n,e,t){let r;if((0,z.hu)("string"==typeof e,"typeof type must == string"),(0,z.hu)("object"==typeof t,"typeof params must == object"),e===$g)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==tb)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function aS(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Wi(t,(a,c)=>{i.push(a+"="+c)}),r+i.join("&")}class uS{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,z.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,z.p$)(this.counters_)}}const Hy={},qd={};function Kl(n){const e=n.toString();return Hy[e]||(Hy[e]=new uS),Hy[e]}class Mf{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Gd(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Ko{constructor(e,t,r,i,a,c,p){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=c,this.lastSessionId=p,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Nu(e),this.stats_=Kl(t),this.urlFn=y=>(this.appCheckToken&&(y.ac=this.appCheckToken),nb(t,tb,y))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Mf(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,z.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ql((...a)=>{const[c,p,y,b,x]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=p,this.password=y;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);p?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(p,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[c,p]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(c,p)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&oS.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ko.forceAllow_=!0}static forceDisallow(){Ko.forceDisallow_=!0}static isAvailable(){return!((0,z.Yr)()||!Ko.forceAllow_&&(Ko.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,z.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,z.h$)(t),i=YE(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,z.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,z.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Ql{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,z.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=WE(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Ql.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(p){Gi("frame writing exception"),p.stack&&Gi(p.stack),Gi(p)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Gi("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,z.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Gi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let Pf=null;"undefined"!=typeof MozWebSocket?Pf=MozWebSocket:"undefined"!=typeof WebSocket&&(Pf=WebSocket);let Wc=(()=>{class n{constructor(t,r,i,a,c,p,y){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Nu(this.connId),this.stats_=Kl(r),this.connURL=n.connectionURL_(r,p,y,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,c){const p={v:"5"};return!(0,z.Yr)()&&"undefined"!=typeof location&&location.hostname&&oS.test(location.hostname)&&(p.r="f"),r&&(p.s=r),i&&(p.ls=i),a&&(p.ac=a),c&&(p.p=c),nb(t,$g,p)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Wl.set("previous_websocket_failure",!0);try{let i;if((0,z.Yr)()){const c={headers:{"User-Agent":`Firebase/5/${Hc}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(c.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(c.headers["X-Firebase-AppCheck"]=this.appCheckToken);const p=process.env,y=0===this.connURL.indexOf("wss://")?p.HTTPS_PROXY||p.https_proxy:p.HTTP_PROXY||p.http_proxy;y&&(c.proxy={origin:y})}this.mySock=new Pf(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==Pf&&!n.forceDisallow_}static previouslyFailed(){return Wl.isInMemoryStorage||!0===Wl.get("previous_websocket_failure")}markConnectionHealthy(){Wl.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,z.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,z.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,z.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=YE(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),Wy=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Ko,Wc]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Wc&&Wc.isAvailable();let i=r&&!Wc.previouslyFailed();if(t.webSocketOnly&&(r||Is("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Wc];else{const a=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&a.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class mb{constructor(e,t,r,i,a,c,p,y,b,x){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=c,this.onReady_=p,this.onDisconnect_=y,this.onKill_=b,this.lastSessionId=x,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Nu("c:"+this.id+":"),this.transportManager_=new Wy(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Wd(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=xf("t",e),r=xf("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=xf("t",e),r=xf("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=xf("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?Ry("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ry("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Is("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Wd(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Wd(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Wl.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class _b{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class hS{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,z.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,z.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Wg extends hS{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,z.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Wg}getInitialEvent(e){return(0,z.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Yn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Zn(){return new Yn("")}function Dn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function qc(n){return n.pieces_.length-n.pieceNum_}function cr(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Yn(n.pieces_,e)}function Kg(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Rf(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Zc(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Yn(e,0)}function Nr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Yn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Yn(t,0)}function En(n){return n.pieceNum_>=n.pieces_.length}function Ys(n,e){const t=Dn(n),r=Dn(e);if(null===t)return e;if(t===r)return Ys(cr(n),cr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function yb(n,e){const t=Rf(n,0),r=Rf(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=Zl(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function eh(n,e){if(qc(n)!==qc(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Aa(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(qc(n)>qc(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class vb{constructor(e,t){this.errorPrefix_=t,this.parts_=Rf(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,z.ug)(this.parts_[r]);wb(this)}}function wb(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Kc(n))}function Kc(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class Yy extends hS{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Yy}getInitialEvent(e){return(0,z.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const th=1e3;let rh,nh=(()=>{class n extends _b{constructor(t,r,i,a,c,p,y,b){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=c,this.authTokenProvider_=p,this.appCheckTokenProvider_=y,this.authOverride_=b,this.id=n.nextPersistentConnectionId_++,this.log_=Nu("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=th,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,b&&!(0,z.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Yy.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Wg.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,c={r:a,a:t,b:r};this.log_((0,z.Pz)(c)),(0,z.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new z.BH,i={p:t._path.toString(),q:t._queryObject},a={action:"g",request:i,onComplete:p=>{const y=p.d;"ok"===p.s?(this.onDataUpdate_(i.p,y,!1,null),r.resolve(y)):r.reject(y)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const p=this.outstandingGets_[c];void 0===p||a!==p||(delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+c+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(c),r.promise}listen(t,r,i,a){this.initConnection_();const c=t._queryIdentifier,p=t._path.toString();this.log_("Listen called for "+p+" "+c),this.listens.has(p)||this.listens.set(p,new Map),(0,z.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,z.hu)(!this.listens.get(p).has(c),"listen() called twice for same path/queryId.");const y={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(p).set(c,y),this.connected_&&this.sendListen_(y)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const c={p:i};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,y=>{const b=y.d,x=y.s;n.warnOnListenWarnings_(b,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",y),"ok"!==x&&this.removeListen_(i,a),t.onComplete&&t.onComplete(x,b))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,z.r3)(t,"w")){const i=(0,z.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();Is(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,z.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,z.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const c=a.s,p=a.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,p))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,z.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const c={p:t};a&&(c.q=i,c.t=a),this.sendRequest("n",c)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const c={p:r,d:i};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,p=>{a&&setTimeout(()=>{a(p.s,p.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,c){this.initConnection_();const p={p:r,d:i};void 0!==c&&(p.h=c),this.outstandingPuts_.push({action:t,request:p,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,z.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):Ry("Unrecognized action received from server: "+(0,z.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,z.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=th,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=th,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=th),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Oe.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,p=t.lastSessionId;let y=!1,b=null;const x=function(){b?b.close():(y=!0,a())};t.realtime_={close:x,sendRequest:function(G){(0,z.hu)(b,"sendRequest call when we're not connected not allowed."),b.sendRequest(G)}};const B=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[G,J]=yield Promise.all([t.authTokenProvider_.getToken(B),t.appCheckTokenProvider_.getToken(B)]);y?Gi("getToken() completed but was canceled"):(Gi("getToken() completed. Creating connection."),t.authToken_=G&&G.accessToken,t.appCheckToken_=J&&J.token,b=new mb(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,xe=>{Is(xe+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},p))}catch(G){t.log_("Failed to get token: "+G),y||(t.repoInfo_.nodeAdmin&&Is(G),x())}}})()}interrupt(t){Gi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Gi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,z.xb)(this.interruptReasons_)&&(this.reconnectDelay_=th,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(c=>Ny(c)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new Yn(t).toString();let a;if(this.listens.has(i)){const c=this.listens.get(i);a=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Gi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Gi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,z.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+Hc.replace(/\./g,"-")]=1,(0,z.uI)()?t["framework.cordova"]=1:(0,z.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Wg.getInstance().currentlyOnline();return(0,z.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class _n{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new _n(e,t)}}class kf{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new _n(Lu,e),i=new _n(Lu,t);return 0!==this.compare(r,i)}minPost(){return _n.MIN}}class Yg extends kf{static get __EMPTY_NODE(){return rh}static set __EMPTY_NODE(e){rh=e}compare(e,t){return Zl(e.name,t.name)}isDefinedOn(e){throw(0,z.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return _n.MIN}maxPost(){return new _n(Xa,rh)}makePost(e,t){return(0,z.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new _n(e,rh)}toString(){return".key"}}const Uu=new Yg;class Yc{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=t?r(e.key,t):1,i&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let Of,Co=(()=>{class n{constructor(t,r,i,a,c){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=a?a:Yo.EMPTY_NODE,this.right=null!=c?c:Yo.EMPTY_NODE}copy(t,r,i,a,c){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=a?a:this.left,null!=c?c:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const c=i(t,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===c?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Yo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Yo.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Yo{constructor(e,t=Yo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Yo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Co.BLACK,null,null))}remove(e){return new Yo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Co.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Yc(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Yc(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Yc(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Yc(this.root_,null,this.comparator_,!0,e)}}function mS(n,e){return Zl(n.name,e.name)}function Nf(n,e){return Zl(n,e)}Yo.EMPTY_NODE=new class ev{copy(e,t,r,i,a){return this}insert(e,t,r){return new Co(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const tv=function(n){return"number"==typeof n?"number:"+Oy(n):"string:"+n},Qg=function(n){if(n.isLeafNode()){const e=n.val();(0,z.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,z.r3)(e,".sv"),"Priority must be a string or number.")}else(0,z.hu)(n===Of||n.isEmpty(),"priority of unexpected type.");(0,z.hu)(n===Of||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let nv,Jg,rv,Qc=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,z.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Qg(this.priorityNode_)}static set __childrenNodeConstructor(t){nv=t}static get __childrenNodeConstructor(){return nv}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return En(t)?this:".priority"===Dn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Dn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,z.hu)(".priority"!==i||1===qc(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(cr(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+tv(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?Oy(this.value_):this.value_,this.lazyHash_=qE(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,z.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,z.hu)(a>=0,"Unknown leaf type: "+r),(0,z.hu)(c>=0,"Unknown leaf type: "+i),a===c?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const ir=new class Tb extends kf{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Zl(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return _n.MIN}maxPost(){return new _n(Xa,new Qc("[PRIORITY-POST]",rv))}makePost(e,t){const r=Jg(e);return new _n(t,new Qc("[PRIORITY-POST]",r))}toString(){return".priority"}},Db=Math.log(2);class yS{constructor(e){this.count=parseInt(Math.log(e+1)/Db,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Xg=function(n,e,t,r){n.sort(e);const i=function(y,b){const x=b-y;let R,B;if(0===x)return null;if(1===x)return R=n[y],B=t?t(R):R,new Co(B,R.node,Co.BLACK,null,null);{const G=parseInt(x/2,10)+y,J=i(y,G),xe=i(G+1,b);return R=n[G],B=t?t(R):R,new Co(B,R.node,Co.BLACK,J,xe)}},p=function(y){let b=null,x=null,R=n.length;const B=function(J,xe){const Ze=R-J,vt=R;R-=J;const Mt=i(Ze+1,vt),At=n[Ze],It=t?t(At):At;G(new Co(It,At.node,xe,null,Mt))},G=function(J){b?(b.left=J,b=J):(x=J,b=J)};for(let J=0;J<y.count;++J){const xe=y.nextBitIsOne(),Ze=Math.pow(2,y.count-(J+1));xe?B(Ze,Co.BLACK):(B(Ze,Co.BLACK),B(Ze,Co.RED))}return x}(new yS(n.length));return new Yo(r||e,p)};let iv;const Jc={};class tu{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,z.hu)(Jc&&ir,"ChildrenNode.ts has not been loaded"),iv=iv||new tu({".priority":Jc},{".priority":ir}),iv}get(e){const t=(0,z.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Yo?t:null}hasIndex(e){return(0,z.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,z.hu)(e!==Uu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(_n.Wrap);let p,c=a.getNext();for(;c;)i=i||e.isDefinedOn(c.node),r.push(c),c=a.getNext();p=i?Xg(r,e.getCompare()):Jc;const y=e.toString(),b=Object.assign({},this.indexSet_);b[y]=e;const x=Object.assign({},this.indexes_);return x[y]=p,new tu(x,b)}addToIndexes(e,t){const r=(0,z.UI)(this.indexes_,(i,a)=>{const c=(0,z.DV)(this.indexSet_,a);if((0,z.hu)(c,"Missing index implementation for "+a),i===Jc){if(c.isDefinedOn(e.node)){const p=[],y=t.getIterator(_n.Wrap);let b=y.getNext();for(;b;)b.name!==e.name&&p.push(b),b=y.getNext();return p.push(e),Xg(p,c.getCompare())}return Jc}{const p=t.get(e.name);let y=i;return p&&(y=y.remove(new _n(e.name,p))),y.insert(e,e.node)}});return new tu(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,z.UI)(this.indexes_,i=>{if(i===Jc)return i;{const a=t.get(e.name);return a?i.remove(new _n(e.name,a)):i}});return new tu(r,this.indexSet_)}}let ih,ln=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Qg(this.priorityNode_),this.children_.isEmpty()&&(0,z.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ih||(ih=new n(new Yo(Nf),null,tu.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ih}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?ih:r}}getChild(t){const r=Dn(t);return null===r?this:this.getImmediateChild(r).getChild(cr(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,z.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new _n(t,r);let a,c;r.isEmpty()?(a=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(i,this.children_));const p=a.isEmpty()?ih:this.priorityNode_;return new n(a,p,c)}}updateChild(t,r){const i=Dn(t);if(null===i)return r;{(0,z.hu)(".priority"!==Dn(t)||1===qc(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(cr(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,c=!0;if(this.forEachChild(ir,(p,y)=>{r[p]=y.val(t),i++,c&&n.INTEGER_REGEXP_.test(p)?a=Math.max(a,Number(p)):c=!1}),!t&&c&&a<2*i){const p=[];for(const y in r)p[y]=r[y];return p}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+tv(this.getPriority().val())+":"),this.forEachChild(ir,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":qE(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const c=a.getPredecessorKey(new _n(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new _n(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new _n(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,_n.Wrap);let c=a.peek();for(;null!=c&&r.compare(c,t)<0;)a.getNext(),c=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,_n.Wrap);let c=a.peek();for(;null!=c&&r.compare(c,t)>0;)a.getNext(),c=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===sh?-1:0}withIndex(t){if(t===Uu||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Uu||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(ir),a=r.getIterator(ir);let c=i.getNext(),p=a.getNext();for(;c&&p;){if(c.name!==p.name||!c.node.equals(p.node))return!1;c=i.getNext(),p=a.getNext()}return null===c&&null===p}return!1}return!1}}resolveIndex_(t){return t===Uu?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const sh=new class Sb extends ln{constructor(){super(new Yo(Nf),ln.EMPTY_NODE,tu.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ln.EMPTY_NODE}isEmpty(){return!1}};function Or(n,e=null){if(null===n)return ln.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,z.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Qc(n,Or(e));if(n instanceof Array){let t=ln.EMPTY_NODE;return Wi(n,(r,i)=>{if((0,z.r3)(n,r)&&"."!==r.substring(0,1)){const a=Or(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Or(e))}{const t=[];let r=!1;if(Wi(n,(c,p)=>{if("."!==c.substring(0,1)){const y=Or(p);y.isEmpty()||(r=r||!y.getPriority().isEmpty(),t.push(new _n(c,y)))}}),0===t.length)return ln.EMPTY_NODE;const a=Xg(t,mS,c=>c.name,Nf);if(r){const c=Xg(t,ir.getCompare());return new ln(a,Or(e),new tu({".priority":c},{".priority":ir}))}return new ln(a,Or(e),tu.Default)}}Object.defineProperties(_n,{MIN:{value:new _n(Lu,ln.EMPTY_NODE)},MAX:{value:new _n(Xa,sh)}}),Yg.__EMPTY_NODE=ln.EMPTY_NODE,Qc.__childrenNodeConstructor=ln,function Cb(n){Of=n}(sh),function Ib(n){rv=n}(sh),function _S(n){Jg=n}(Or);class em extends kf{constructor(e){super(),this.indexPath_=e,(0,z.hu)(!En(e)&&".priority"!==Dn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Zl(e.name,t.name):a}makePost(e,t){const r=Or(e),i=ln.EMPTY_NODE.updateChild(this.indexPath_,r);return new _n(t,i)}maxPost(){const e=ln.EMPTY_NODE.updateChild(this.indexPath_,sh);return new _n(Xa,e)}toString(){return Rf(this.indexPath_,0).join("/")}}const Mb=new class xb extends kf{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Zl(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return _n.MIN}maxPost(){return _n.MAX}makePost(e,t){const r=Or(e);return new _n(t,r)}toString(){return".value"}},oh="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ki=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=oh.charAt(t%64),t=Math.floor(t/64);(0,z.hu)(0===t,"Cannot push at time == 0");let c=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)c+=oh.charAt(e[i]);return(0,z.hu)(20===c.length,"nextPushId: Length should be 20."),c}}(),av=function(n){if(n===""+JE)return"-";const e=$d(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let c=0;c<t.length;c++)t[c]=n.charAt(c);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Xa;const a=oh.charAt(oh.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},Rb=function(n){if(n===""+sS)return Lu;const e=$d(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+JE:(delete t[t.length-1],t.join("")):(t[t.length-1]=oh.charAt(oh.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function kb(n){return{type:"value",snapshotNode:n}}function Xc(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Lf(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function ah(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Jl{constructor(e){this.index_=e}updateChild(e,t,r,i,a,c){(0,z.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const p=e.getImmediateChild(t);return p.getChild(i).equals(r.getChild(i))&&p.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?e.hasChild(t)?c.trackChildChange(Lf(t,p)):(0,z.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):p.isEmpty()?c.trackChildChange(Xc(t,r)):c.trackChildChange(ah(t,r,p))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(ir,(i,a)=>{t.hasChild(i)||r.trackChildChange(Lf(i,a))}),t.isLeafNode()||t.forEachChild(ir,(i,a)=>{if(e.hasChild(i)){const c=e.getImmediateChild(i);c.equals(a)||r.trackChildChange(ah(i,a,c))}else r.trackChildChange(Xc(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?ln.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Ff{constructor(e){this.indexedFilter_=new Jl(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Ff.getStartPost_(e),this.endPost_=Ff.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,c){return this.matches(new _n(t,r))||(r=ln.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,c)}updateFullNode(e,t,r){t.isLeafNode()&&(t=ln.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(ln.EMPTY_NODE);const a=this;return t.forEachChild(ir,(c,p)=>{a.matches(new _n(c,p))||(i=i.updateImmediateChild(c,ln.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class vS{constructor(e){this.rangedFilter_=new Ff(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,c){return this.rangedFilter_.matches(new _n(t,r))||(r=ln.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,c):this.fullLimitUpdateChild_(e,t,r,a,c)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=ln.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=ln.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;a.hasNext()&&c<this.limit_;){const p=a.getNext();let y;if(y=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),p)<=0:this.index_.compare(p,this.rangedFilter_.getEndPost())<=0,!y)break;i=i.updateImmediateChild(p.name,p.node),c++}}else{let a,c,p,y;if(i=t.withIndex(this.index_),i=i.updatePriority(ln.EMPTY_NODE),this.reverse_){y=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const R=this.index_.getCompare();p=(B,G)=>R(G,B)}else y=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),p=this.index_.getCompare();let b=0,x=!1;for(;y.hasNext();){const R=y.getNext();!x&&p(a,R)<=0&&(x=!0),x&&b<this.limit_&&p(R,c)<=0?b++:i=i.updateImmediateChild(R.name,ln.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let c;if(this.reverse_){const R=this.index_.getCompare();c=(B,G)=>R(G,B)}else c=this.index_.getCompare();const p=e;(0,z.hu)(p.numChildren()===this.limit_,"");const y=new _n(t,r),b=this.reverse_?p.getFirstChild(this.index_):p.getLastChild(this.index_),x=this.rangedFilter_.matches(y);if(p.hasChild(t)){const R=p.getImmediateChild(t);let B=i.getChildAfterChild(this.index_,b,this.reverse_);for(;null!=B&&(B.name===t||p.hasChild(B.name));)B=i.getChildAfterChild(this.index_,B,this.reverse_);const G=null==B?1:c(B,y);if(x&&!r.isEmpty()&&G>=0)return null!=a&&a.trackChildChange(ah(t,r,R)),p.updateImmediateChild(t,r);{null!=a&&a.trackChildChange(Lf(t,R));const xe=p.updateImmediateChild(t,ln.EMPTY_NODE);return null!=B&&this.rangedFilter_.matches(B)?(null!=a&&a.trackChildChange(Xc(B.name,B.node)),xe.updateImmediateChild(B.name,B.node)):xe}}return r.isEmpty()?e:x&&c(b,y)>=0?(null!=a&&(a.trackChildChange(Lf(b.name,b.node)),a.trackChildChange(Xc(t,r))),p.updateImmediateChild(t,r).updateImmediateChild(b.name,ln.EMPTY_NODE)):e}}class Uf{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ir}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,z.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,z.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Lu}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,z.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,z.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Xa}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,z.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ir}copy(){const e=new Uf;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function tm(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function xa(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function nm(n,e){const t=n.copy();return t.index_=e,t}function nu(n){const e={};if(n.isDefault())return e;let t;return n.index_===ir?t="$priority":n.index_===Mb?t="$value":n.index_===Uu?t="$key":((0,z.hu)(n.index_ instanceof em,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,z.Pz)(t),n.startSet_&&(e.startAt=(0,z.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,z.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,z.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,z.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Ma(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==ir&&(e.i=n.index_.toString()),e}class Io extends _b{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Nu("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,z.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const c=Io.getListenId_(e,r),p={};this.listens_[c]=p;const y=nu(e._queryParams);this.restRequest_(a+".json",y,(b,x)=>{let R=x;if(404===b&&(R=null,b=null),null===b&&this.onDataUpdate_(a,R,!1,r),(0,z.DV)(this.listens_,c)===p){let B;B=b?401===b?"permission_denied":"rest_error:"+b:"ok",i(B,null)}})}unlisten(e,t){const r=Io.getListenId_(e,t);delete this.listens_[r]}get(e){const t=nu(e._queryParams),r=e._path.toString(),i=new z.BH;return this.restRequest_(r+".json",t,(a,c)=>{let p=c;404===a&&(p=null,a=null),null===a?(this.onDataUpdate_(r,p,!1,null),i.resolve(p)):i.reject(new Error(p))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,z.xO)(t);this.log_("Sending REST request for "+c);const p=new XMLHttpRequest;p.onreadystatechange=()=>{if(r&&4===p.readyState){this.log_("REST Response for "+c+" received. status:",p.status,"response:",p.responseText);let y=null;if(p.status>=200&&p.status<300){try{y=(0,z.cI)(p.responseText)}catch(b){Is("Failed to parse JSON response for "+c+": "+p.responseText)}r(null,y)}else 401!==p.status&&404!==p.status&&Is("Got unsuccessful REST response for "+c+" Status: "+p.status),r(p.status);r=null}},p.open("GET",c,!0),p.send()})}}class Lb{constructor(){this.rootNode_=ln.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Vf(){return{value:null,children:new Map}}function uh(n,e,t){if(En(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Dn(e);n.children.has(r)||n.children.set(r,Vf()),uh(n.children.get(r),e=cr(e),t)}}function lv(n,e){if(En(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(ir,(r,i)=>{uh(n,new Yn(r),i)}),lv(n,e)}}if(n.children.size>0){const t=Dn(e);return e=cr(e),n.children.has(t)&&lv(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function cv(n,e,t){null!==n.value?t(e,n.value):function bS(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{cv(i,new Yn(e.toString()+"/"+r),t)})}class dv{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Wi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class IS{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new dv(e);const r=1e4+2e4*Math.random();Wd(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Wi(e,(i,a)=>{a>0&&(0,z.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),Wd(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Qo=(()=>{return(n=Qo||(Qo={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Qo;var n})();function hv(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class Bf{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Qo.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(En(this.path)){if(null!=this.affectedTree.value)return(0,z.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Yn(e));return new Bf(Zn(),t,this.revert)}}return(0,z.hu)(Dn(this.path)===e,"operationForChild called for unrelated child."),new Bf(cr(this.path),this.affectedTree,this.revert)}}class dh{constructor(e,t){this.source=e,this.path=t,this.type=Qo.LISTEN_COMPLETE}operationForChild(e){return En(this.path)?new dh(this.source,Zn()):new dh(this.source,cr(this.path))}}class ll{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Qo.OVERWRITE}operationForChild(e){return En(this.path)?new ll(this.source,Zn(),this.snap.getImmediateChild(e)):new ll(this.source,cr(this.path),this.snap)}}class cl{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Qo.MERGE}operationForChild(e){if(En(this.path)){const t=this.children.subtree(new Yn(e));return t.isEmpty()?null:t.value?new ll(this.source,Zn(),t.value):new cl(this.source,Zn(),t)}return(0,z.hu)(Dn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new cl(this.source,cr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class dl{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(En(e))return this.isFullyInitialized()&&!this.filtered_;const t=Dn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Ub{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function hh(n,e,t,r,i,a){const c=r.filter(p=>p.type===t);c.sort((p,y)=>function jb(n,e,t){if(null==e.childName||null==t.childName)throw(0,z.g5)("Should only compare child_ events.");const r=new _n(e.childName,e.snapshotNode),i=new _n(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,p,y)),c.forEach(p=>{const y=function Bb(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,p,a);i.forEach(b=>{b.respondsTo(p.type)&&e.push(b.createEvent(y,n.query_))})})}function jf(n,e){return{eventCache:n,serverCache:e}}function fh(n,e,t,r){return jf(new dl(e,t,r),n.serverCache)}function zb(n,e,t,r){return jf(n.eventCache,new dl(e,t,r))}function im(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function ed(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let fv;class _r{constructor(e,t=(()=>(fv||(fv=new Yo(KE)),fv))()){this.value=e,this.children=t}static fromObject(e){let t=new _r(null);return Wi(e,(r,i)=>{t=t.set(new Yn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Zn(),value:this.value};if(En(e))return null;{const r=Dn(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(cr(e),t);return null!=a?{path:Nr(new Yn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(En(e))return this;{const t=Dn(e),r=this.children.get(t);return null!==r?r.subtree(cr(e)):new _r(null)}}set(e,t){if(En(e))return new _r(t,this.children);{const r=Dn(e),a=(this.children.get(r)||new _r(null)).set(cr(e),t),c=this.children.insert(r,a);return new _r(this.value,c)}}remove(e){if(En(e))return this.children.isEmpty()?new _r(null):new _r(null,this.children);{const t=Dn(e),r=this.children.get(t);if(r){const i=r.remove(cr(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new _r(null):new _r(this.value,a)}return this}}get(e){if(En(e))return this.value;{const t=Dn(e),r=this.children.get(t);return r?r.get(cr(e)):null}}setTree(e,t){if(En(e))return t;{const r=Dn(e),a=(this.children.get(r)||new _r(null)).setTree(cr(e),t);let c;return c=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new _r(this.value,c)}}fold(e){return this.fold_(Zn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(Nr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Zn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(En(e))return null;{const a=Dn(e),c=this.children.get(a);return c?c.findOnPath_(cr(e),Nr(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Zn(),t)}foreachOnPath_(e,t,r){if(En(e))return this;{this.value&&r(t,this.value);const i=Dn(e),a=this.children.get(i);return a?a.foreachOnPath_(cr(e),Nr(t,i),r):new _r(null)}}foreach(e){this.foreach_(Zn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Nr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class ru{constructor(e){this.writeTree_=e}static empty(){return new ru(new _r(null))}}function zf(n,e,t){if(En(e))return new ru(new _r(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const c=Ys(i,e);return a=a.updateChild(c,t),new ru(n.writeTree_.set(i,a))}{const i=new _r(t),a=n.writeTree_.setTree(e,i);return new ru(a)}}}function pv(n,e,t){let r=n;return Wi(t,(i,a)=>{r=zf(r,Nr(e,i),a)}),r}function Hb(n,e){if(En(e))return ru.empty();{const t=n.writeTree_.setTree(e,new _r(null));return new ru(t)}}function gv(n,e){return null!=td(n,e)}function td(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Ys(t.path,e)):null}function $b(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(ir,(r,i)=>{e.push(new _n(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new _n(r,i.value))}),e}function Xl(n,e){if(En(e))return n;{const t=td(n,e);return new ru(null!=t?new _r(t):n.writeTree_.subtree(e))}}function mv(n){return n.writeTree_.isEmpty()}function ph(n,e){return Gb(Zn(),n.writeTree_,e)}function Gb(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,z.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=Gb(Nr(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Nr(n,".priority"),r)),t}}function sm(n,e){return rC(e,n)}function Yb(n,e){if(n.snap)return Aa(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Aa(Nr(n.path,t),e))return!0;return!1}function Jb(n){return n.visible}function _v(n,e,t){let r=ru.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const c=a.path;let p;if(a.snap)Aa(t,c)?(p=Ys(t,c),r=zf(r,p,a.snap)):Aa(c,t)&&(p=Ys(c,t),r=zf(r,Zn(),a.snap.getChild(p)));else{if(!a.children)throw(0,z.g5)("WriteRecord should have .snap or .children");if(Aa(t,c))p=Ys(t,c),r=pv(r,p,a.children);else if(Aa(c,t))if(p=Ys(c,t),En(p))r=pv(r,Zn(),a.children);else{const y=(0,z.DV)(a.children,Dn(p));if(y){const b=y.getChild(cr(p));r=zf(r,Zn(),b)}}}}}return r}function yv(n,e,t,r,i){if(r||i){const a=Xl(n.visibleWrites,e);return!i&&mv(a)?t:i||null!=t||gv(a,Zn())?ph(_v(n.allWrites,function(b){return(b.visible||i)&&(!r||!~r.indexOf(b.writeId))&&(Aa(b.path,e)||Aa(e,b.path))},e),t||ln.EMPTY_NODE):null}{const a=td(n.visibleWrites,e);if(null!=a)return a;{const c=Xl(n.visibleWrites,e);return mv(c)?t:null!=t||gv(c,Zn())?ph(c,t||ln.EMPTY_NODE):null}}}function vv(n,e,t,r){return yv(n.writeTree,n.treePath,e,t,r)}function Hf(n,e){return function Xb(n,e,t){let r=ln.EMPTY_NODE;const i=td(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ir,(a,c)=>{r=r.updateImmediateChild(a,c)}),r;if(t){const a=Xl(n.visibleWrites,e);return t.forEachChild(ir,(c,p)=>{const y=ph(Xl(a,new Yn(c)),p);r=r.updateImmediateChild(c,y)}),$b(a).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return $b(Xl(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function AS(n,e,t,r){return function eC(n,e,t,r,i){(0,z.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=Nr(e,t);if(gv(n.visibleWrites,a))return null;{const c=Xl(n.visibleWrites,a);return mv(c)?i.getChild(t):ph(c,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function $f(n,e){return function DS(n,e){return td(n.visibleWrites,e)}(n.writeTree,Nr(n.treePath,e))}function nC(n,e,t){return function nd(n,e,t,r){const i=Nr(e,t),a=td(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?ph(Xl(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function Bt(n,e){return rC(Nr(n.treePath,e),n.writeTree)}function rC(n,e){return{treePath:n,writeTree:e}}class xS{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,z.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,z.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,ah(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,Lf(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,Xc(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,z.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,ah(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const Gf=new class MS{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class wv{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new dl(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return nC(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ed(this.viewCache_),a=function tC(n,e,t,r,i,a){return function SS(n,e,t,r,i,a,c){let p;const y=Xl(n.visibleWrites,e),b=td(y,Zn());if(null!=b)p=b;else{if(null==t)return[];p=ph(y,t)}if(p=p.withIndex(c),p.isEmpty()||p.isLeafNode())return[];{const x=[],R=c.getCompare(),B=a?p.getReverseIteratorFrom(r,c):p.getIteratorFrom(r,c);let G=B.getNext();for(;G&&x.length<i;)0!==R(G,r)&&x.push(G),G=B.getNext();return x}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function Ev(n,e,t,r,i,a){const c=e.eventCache;if(null!=$f(r,t))return e;{let p,y;if(En(t))if((0,z.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const b=ed(e),R=Hf(r,b instanceof ln?b:ln.EMPTY_NODE);p=n.filter.updateFullNode(e.eventCache.getNode(),R,a)}else{const b=vv(r,ed(e));p=n.filter.updateFullNode(e.eventCache.getNode(),b,a)}else{const b=Dn(t);if(".priority"===b){(0,z.hu)(1===qc(t),"Can't have a priority with additional path components");const x=c.getNode();y=e.serverCache.getNode();const R=AS(r,t,x,y);p=null!=R?n.filter.updatePriority(x,R):c.getNode()}else{const x=cr(t);let R;if(c.isCompleteForChild(b)){y=e.serverCache.getNode();const B=AS(r,t,c.getNode(),y);R=null!=B?c.getNode().getImmediateChild(b).updateChild(x,B):c.getNode().getImmediateChild(b)}else R=nC(r,b,e.serverCache);p=null!=R?n.filter.updateChild(c.getNode(),b,R,x,i,a):c.getNode()}}return fh(e,p,c.isFullyInitialized()||En(t),n.filter.filtersNodes())}}function um(n,e,t,r,i,a,c,p){const y=e.serverCache;let b;const x=c?n.filter:n.filter.getIndexedFilter();if(En(t))b=x.updateFullNode(y.getNode(),r,null);else if(x.filtersNodes()&&!y.isFiltered()){const G=y.getNode().updateChild(t,r);b=x.updateFullNode(y.getNode(),G,null)}else{const G=Dn(t);if(!y.isCompleteForPath(t)&&qc(t)>1)return e;const J=cr(t),Ze=y.getNode().getImmediateChild(G).updateChild(J,r);b=".priority"===G?x.updatePriority(y.getNode(),Ze):x.updateChild(y.getNode(),G,Ze,J,Gf,null)}const R=zb(e,b,y.isFullyInitialized()||En(t),x.filtersNodes());return Ev(n,R,t,i,new wv(i,R,a),p)}function bv(n,e,t,r,i,a,c){const p=e.eventCache;let y,b;const x=new wv(i,e,a);if(En(t))b=n.filter.updateFullNode(e.eventCache.getNode(),r,c),y=fh(e,b,!0,n.filter.filtersNodes());else{const R=Dn(t);if(".priority"===R)b=n.filter.updatePriority(e.eventCache.getNode(),r),y=fh(e,b,p.isFullyInitialized(),p.isFiltered());else{const B=cr(t),G=p.getNode().getImmediateChild(R);let J;if(En(B))J=r;else{const xe=x.getCompleteChild(R);J=null!=xe?".priority"===Kg(B)&&xe.getChild(Zc(B)).isEmpty()?xe:xe.updateChild(B,r):ln.EMPTY_NODE}y=G.equals(J)?e:fh(e,n.filter.updateChild(p.getNode(),R,J,B,x,c),p.isFullyInitialized(),n.filter.filtersNodes())}}return y}function Cv(n,e){return n.eventCache.isCompleteForChild(e)}function Iv(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function lm(n,e,t,r,i,a,c,p){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let b,y=e;b=En(t)?r:new _r(null).setTree(t,r);const x=e.serverCache.getNode();return b.children.inorderTraversal((R,B)=>{if(x.hasChild(R)){const J=Iv(0,e.serverCache.getNode().getImmediateChild(R),B);y=um(n,y,new Yn(R),J,i,a,c,p)}}),b.children.inorderTraversal((R,B)=>{const G=!e.serverCache.isCompleteForChild(R)&&void 0===B.value;if(!x.hasChild(R)&&!G){const xe=Iv(0,e.serverCache.getNode().getImmediateChild(R),B);y=um(n,y,new Yn(R),xe,i,a,c,p)}}),y}class Wf{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Jl(r.getIndex()),a=function wS(n){return n.loadsAllData()?new Jl(n.getIndex()):n.hasLimit()?new vS(n):new Ff(n)}(r);this.processor_=function om(n){return{filter:n}}(a);const c=t.serverCache,p=t.eventCache,y=i.updateFullNode(ln.EMPTY_NODE,c.getNode(),null),b=a.updateFullNode(ln.EMPTY_NODE,p.getNode(),null),x=new dl(y,c.isFullyInitialized(),i.filtersNodes()),R=new dl(b,p.isFullyInitialized(),a.filtersNodes());this.viewCache_=jf(R,x),this.eventGenerator_=new Ub(this.query_)}get query(){return this.query_}}function LS(n,e){const t=ed(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!En(e)&&!t.getImmediateChild(Dn(e)).isEmpty())?t.getChild(e):null}function qf(n){return 0===n.eventRegistrations_.length}function Tv(n,e,t){const r=[];if(t){(0,z.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const c=a.createCancelEvent(t,i);c&&r.push(c)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const c=n.eventRegistrations_[a];if(c.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(c)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function Dv(n,e,t,r){e.type===Qo.MERGE&&null!==e.source.queryId&&((0,z.hu)(ed(n.viewCache_),"We should always have a full cache before handling merges"),(0,z.hu)(im(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function qr(n,e,t,r,i){const a=new xS;let c,p;if(t.type===Qo.OVERWRITE){const b=t;b.source.fromUser?c=bv(n,e,b.path,b.snap,r,i,a):((0,z.hu)(b.source.fromServer,"Unknown source."),p=b.source.tagged||e.serverCache.isFiltered()&&!En(b.path),c=um(n,e,b.path,b.snap,r,i,p,a))}else if(t.type===Qo.MERGE){const b=t;b.source.fromUser?c=function iC(n,e,t,r,i,a,c){let p=e;return r.foreach((y,b)=>{const x=Nr(t,y);Cv(e,Dn(x))&&(p=bv(n,p,x,b,i,a,c))}),r.foreach((y,b)=>{const x=Nr(t,y);Cv(e,Dn(x))||(p=bv(n,p,x,b,i,a,c))}),p}(n,e,b.path,b.children,r,i,a):((0,z.hu)(b.source.fromServer,"Unknown source."),p=b.source.tagged||e.serverCache.isFiltered(),c=lm(n,e,b.path,b.children,r,i,p,a))}else if(t.type===Qo.ACK_USER_WRITE){const b=t;c=b.revert?function kS(n,e,t,r,i,a){let c;if(null!=$f(r,t))return e;{const p=new wv(r,e,i),y=e.eventCache.getNode();let b;if(En(t)||".priority"===Dn(t)){let x;if(e.serverCache.isFullyInitialized())x=vv(r,ed(e));else{const R=e.serverCache.getNode();(0,z.hu)(R instanceof ln,"serverChildren would be complete if leaf node"),x=Hf(r,R)}x=x,b=n.filter.updateFullNode(y,x,a)}else{const x=Dn(t);let R=nC(r,x,e.serverCache);null==R&&e.serverCache.isCompleteForChild(x)&&(R=y.getImmediateChild(x)),b=null!=R?n.filter.updateChild(y,x,R,cr(t),p,a):e.eventCache.getNode().hasChild(x)?n.filter.updateChild(y,x,ln.EMPTY_NODE,cr(t),p,a):y,b.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=vv(r,ed(e)),c.isLeafNode()&&(b=n.filter.updateFullNode(b,c,a)))}return c=e.serverCache.isFullyInitialized()||null!=$f(r,Zn()),fh(e,b,c,n.filter.filtersNodes())}}(n,e,b.path,r,i,a):function PS(n,e,t,r,i,a,c){if(null!=$f(i,t))return e;const p=e.serverCache.isFiltered(),y=e.serverCache;if(null!=r.value){if(En(t)&&y.isFullyInitialized()||y.isCompleteForPath(t))return um(n,e,t,y.getNode().getChild(t),i,a,p,c);if(En(t)){let b=new _r(null);return y.getNode().forEachChild(Uu,(x,R)=>{b=b.set(new Yn(x),R)}),lm(n,e,t,b,i,a,p,c)}return e}{let b=new _r(null);return r.foreach((x,R)=>{const B=Nr(t,x);y.isCompleteForPath(B)&&(b=b.set(x,y.getNode().getChild(B)))}),lm(n,e,t,b,i,a,p,c)}}(n,e,b.path,b.affectedTree,r,i,a)}else{if(t.type!==Qo.LISTEN_COMPLETE)throw(0,z.g5)("Unknown operation type: "+t.type);c=function RS(n,e,t,r,i){const a=e.serverCache;return Ev(n,zb(e,a.getNode(),a.isFullyInitialized()||En(t),a.isFiltered()),t,r,Gf,i)}(n,e,t.path,r,a)}const y=a.getChanges();return function Ek(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=im(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(kb(im(e)))}}(e,c,y),{viewCache:c,changes:y}}(n.processor_,i,e,t,r);return function am(n,e){(0,z.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,z.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,z.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,mh(n,a.changes,a.viewCache.eventCache.getNode(),null)}function mh(n,e,t,r){return function Vb(n,e,t,r){const i=[],a=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(function Nb(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),hh(n,i,"child_removed",e,r,t),hh(n,i,"child_added",e,r,t),hh(n,i,"child_moved",a,r,t),hh(n,i,"child_changed",e,r,t),hh(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let ec,Zf;class oC{constructor(){this.views=new Map}}function cm(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,z.hu)(null!=a,"SyncTree gave us an op for an invalid query."),Dv(a,e,t,r)}{let a=[];for(const c of n.views.values())a=a.concat(Dv(c,e,t,r));return a}}function Sv(n,e,t,r,i){const c=n.views.get(e._queryIdentifier);if(!c){let p=vv(t,i?r:null),y=!1;p?y=!0:r instanceof ln?(p=Hf(t,r),y=!1):(p=ln.EMPTY_NODE,y=!1);const b=jf(new dl(p,y,!1),new dl(r,i,!1));return new Wf(e,b)}return c}function lC(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function tc(n,e){let t=null;for(const r of n.views.values())t=t||LS(r,e);return t}function jS(n,e){return e._queryParams.loadsAllData()?Av(n):n.views.get(e._queryIdentifier)}function zS(n,e){return null!=jS(n,e)}function rd(n){return null!=Av(n)}function Av(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let $S=1;class xv{constructor(e){this.listenProvider_=e,this.syncPointTree_=new _r(null),this.pendingWriteTree_=function gh(){return{visibleWrites:ru.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function id(n,e,t,r,i){return function Wb(n,e,t,r,i){(0,z.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=zf(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?sd(n,new ll({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function nc(n,e,t=!1){const r=function Zb(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function Kb(n,e){const t=n.allWrites.findIndex(p=>p.writeId===e);(0,z.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const p=n.allWrites[c];p.visible&&(c>=t&&Yb(p,r.path)?i=!1:Aa(r.path,p.path)&&(a=!0)),c--}return!!i&&(a?(function Qb(n){n.visibleWrites=_v(n.allWrites,Jb,Zn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=Hb(n.visibleWrites,r.path):Wi(r.children,y=>{n.visibleWrites=Hb(n.visibleWrites,Nr(r.path,y))}),!0))}(n.pendingWriteTree_,e)){let a=new _r(null);return null!=r.snap?a=a.set(Zn(),!0):Wi(r.children,c=>{a=a.set(new Yn(c),!0)}),sd(n,new Bf(r.path,a,t))}return[]}function Kf(n,e,t){return sd(n,new ll({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function Mv(n,e,t,r){const i=e._path,a=n.syncPointTree_.get(i);let c=[];if(a&&("default"===e._queryIdentifier||zS(a,e))){const p=function uC(n,e,t,r){const i=e._queryIdentifier,a=[];let c=[];const p=rd(n);if("default"===i)for(const[y,b]of n.views.entries())c=c.concat(Tv(b,t,r)),qf(b)&&(n.views.delete(y),b.query._queryParams.loadsAllData()||a.push(b.query));else{const y=n.views.get(i);y&&(c=c.concat(Tv(y,t,r)),qf(y)&&(n.views.delete(i),y.query._queryParams.loadsAllData()||a.push(y.query)))}return p&&!rd(n)&&a.push(new(function VS(){return(0,z.hu)(ec,"Reference.ts has not been loaded"),ec}())(e._repo,e._path)),{removed:a,events:c}}(a,e,t,r);(function aC(n){return 0===n.views.size})(a)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const y=p.removed;c=p.events;const b=-1!==y.findIndex(R=>R._queryParams.loadsAllData()),x=n.syncPointTree_.findOnPath(i,(R,B)=>rd(B));if(b&&!x){const R=n.syncPointTree_.subtree(i);if(!R.isEmpty()){const B=function YS(n){return n.fold((e,t,r)=>{if(t&&rd(t))return[Av(t)];{let i=[];return t&&(i=lC(t)),Wi(r,(a,c)=>{i=i.concat(c)}),i}})}(R);for(let G=0;G<B.length;++G){const J=B[G],xe=J.query,Ze=fC(n,J);n.listenProvider_.startListening(Qf(xe),yh(n,xe),Ze.hashFn,Ze.onComplete)}}}!x&&y.length>0&&!r&&(b?n.listenProvider_.stopListening(Qf(e),null):y.forEach(R=>{const B=n.queryToTagMap.get(hm(R));n.listenProvider_.stopListening(Qf(R),B)})),function kv(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=hm(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,y)}return c}function dC(n,e,t){const r=e._path;let i=null,a=!1;n.syncPointTree_.foreachOnPath(r,(R,B)=>{const G=Ys(R,r);i=i||tc(B,G),a=a||rd(B)});let p,c=n.syncPointTree_.get(r);c?(a=a||rd(c),i=i||tc(c,Zn())):(c=new oC,n.syncPointTree_=n.syncPointTree_.set(r,c)),null!=i?p=!0:(p=!1,i=ln.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((B,G)=>{const J=tc(G,Zn());J&&(i=i.updateImmediateChild(B,J))}));const y=zS(c,e);if(!y&&!e._queryParams.loadsAllData()){const R=hm(e);(0,z.hu)(!n.queryToTagMap.has(R),"View does not exist, but we have a tag");const B=function QS(){return $S++}();n.queryToTagMap.set(R,B),n.tagToQueryMap.set(B,R)}let x=function BS(n,e,t,r,i,a){const c=Sv(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function sC(n,e){n.eventRegistrations_.push(e)}(c,t),function FS(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(ir,(a,c)=>{r.push(Xc(a,c))}),t.isFullyInitialized()&&r.push(kb(t.getNode())),mh(n,r,t.getNode(),e)}(c,t)}(c,e,t,sm(n.pendingWriteTree_,r),i,p);if(!y&&!a){const R=jS(c,e);x=x.concat(function pC(n,e,t){const r=e._path,i=yh(n,e),a=fC(n,t),c=n.listenProvider_.startListening(Qf(e),i,a.hashFn,a.onComplete),p=n.syncPointTree_.subtree(r);if(i)(0,z.hu)(!rd(p.value),"If we're adding a query, it shouldn't be shadowed");else{const y=p.fold((b,x,R)=>{if(!En(b)&&x&&rd(x))return[Av(x).query];{let B=[];return x&&(B=B.concat(lC(x).map(G=>G.query))),Wi(R,(G,J)=>{B=B.concat(J)}),B}});for(let b=0;b<y.length;++b){const x=y[b];n.listenProvider_.stopListening(Qf(x),yh(n,x))}}return c}(n,e,R))}return x}function Yf(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(c,p)=>{const b=tc(p,Ys(c,e));if(b)return b});return yv(i,e,a,t,!0)}function sd(n,e){return hC(e,n.syncPointTree_,null,sm(n.pendingWriteTree_,Zn()))}function hC(n,e,t,r){if(En(n.path))return Pv(n,e,t,r);{const i=e.get(Zn());null==t&&null!=i&&(t=tc(i,Zn()));let a=[];const c=Dn(n.path),p=n.operationForChild(c),y=e.children.get(c);if(y&&p){const b=t?t.getImmediateChild(c):null,x=Bt(r,c);a=a.concat(hC(p,y,b,x))}return i&&(a=a.concat(cm(i,n,r,t))),a}}function Pv(n,e,t,r){const i=e.get(Zn());null==t&&null!=i&&(t=tc(i,Zn()));let a=[];return e.children.inorderTraversal((c,p)=>{const y=t?t.getImmediateChild(c):null,b=Bt(r,c),x=n.operationForChild(c);x&&(a=a.concat(Pv(x,p,y,b)))}),i&&(a=a.concat(cm(i,n,r,t))),a}function fC(n,e){const t=e.query,r=yh(n,t);return{hashFn:()=>(function NS(n){return n.viewCache_.serverCache.getNode()}(e)||ln.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function cC(n,e,t){const r=fm(n,t);if(r){const i=pm(r),a=i.path,c=i.queryId,p=Ys(a,e);return Rv(n,a,new dh(hv(c),p))}return[]}(n,t._path,r):function qS(n,e){return sd(n,new dh({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function rS(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return Mv(n,t,null,a)}}}}function yh(n,e){const t=hm(e);return n.queryToTagMap.get(t)}function hm(n){return n._path.toString()+"$"+n._queryIdentifier}function fm(n,e){return n.tagToQueryMap.get(e)}function pm(n){const e=n.indexOf("$");return(0,z.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Yn(n.substr(0,e))}}function Rv(n,e,t){const r=n.syncPointTree_.get(e);return(0,z.hu)(r,"Missing sync point for query tag that we're tracking"),cm(r,t,sm(n.pendingWriteTree_,e),null)}function Qf(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function HS(){return(0,z.hu)(Zf,"Reference.ts has not been loaded"),Zf}())(n._repo,n._path):n}class Nv{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Nv(t)}node(){return this.node_}}class Ov{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Nr(this.path_,e);return new Ov(this.syncTree_,t)}node(){return Yf(this.syncTree_,this.path_)}}const gC=function(n,e,t){return n&&"object"==typeof n?((0,z.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?XS(n[".sv"],e,t):"object"==typeof n[".sv"]?eA(n[".sv"],e):void(0,z.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},XS=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,z.hu)(!1,"Unexpected server value: "+n)},eA=function(n,e,t){n.hasOwnProperty("increment")||(0,z.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,z.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,z.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},mC=function(n,e,t,r){return gm(e,new Ov(t,n),r)},Lv=function(n,e,t){return gm(n,new Nv(e),t)};function gm(n,e,t){const r=n.getPriority().val(),i=gC(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const c=n,p=gC(c.getValue(),e,t);return p!==c.getValue()||i!==c.getPriority().val()?new Qc(p,Or(i)):n}{const c=n;return a=c,i!==c.getPriority().val()&&(a=a.updatePriority(new Qc(i))),c.forEachChild(ir,(p,y)=>{const b=gm(y,e.getImmediateChild(p),t);b!==y&&(a=a.updateImmediateChild(p,b))}),a}}class mm{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function _m(n,e){let t=e instanceof Yn?e:new Yn(e),r=n,i=Dn(t);for(;null!==i;){const a=(0,z.DV)(r.node.children,i)||{children:{},childCount:0};r=new mm(i,r,a),t=cr(t),i=Dn(t)}return r}function od(n){return n.node.value}function ym(n,e){n.node.value=e,Jf(n)}function _C(n){return n.node.childCount>0}function vm(n,e){Wi(n.node.children,(t,r)=>{e(new mm(t,n,r))})}function wm(n,e,t,r){t&&!r&&e(n),vm(n,i=>{wm(i,e,!0,r)}),t&&r&&e(n)}function vh(n){return new Yn(null===n.parent?n.name:vh(n.parent)+"/"+n.name)}function Jf(n){null!==n.parent&&function nA(n,e,t){const r=function tA(n){return void 0===od(n)&&!_C(n)}(t),i=(0,z.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,Jf(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,Jf(n))}(n.parent,n.name,n)}const rA=/[\[\].#$\/\u0000-\u001F\u007F]/,Uv=/[\[\].#$\u0000-\u001F\u007F]/,Vv=10485760,Xf=function(n){return"string"==typeof n&&0!==n.length&&!rA.test(n)},yC=function(n){return"string"==typeof n&&0!==n.length&&!Uv.test(n)},ep=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!Zo(n)||n&&"object"==typeof n&&(0,z.r3)(n,".sv")},iu=function(n,e,t,r){r&&void 0===e||Em((0,z.gK)(n,"value"),e,t)},Em=function(n,e,t){const r=t instanceof Yn?new vb(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Kc(r));if("function"==typeof e)throw new Error(n+"contains a function "+Kc(r)+" with contents = "+e.toString());if(Zo(e))throw new Error(n+"contains "+e.toString()+" "+Kc(r));if("string"==typeof e&&e.length>Vv/3&&(0,z.ug)(e)>Vv)throw new Error(n+"contains a string greater than "+Vv+" utf8 bytes "+Kc(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Wi(e,(c,p)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(a=!0,!Xf(c)))throw new Error(n+" contains an invalid key ("+c+") "+Kc(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function fS(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,z.ug)(e),wb(n)})(r,c),Em(n,p,r),function pS(n){const e=n.parts_.pop();n.byteLength_-=(0,z.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+Kc(r)+" in addition to actual children.")}},tp=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,z.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Wi(e,(c,p)=>{const y=new Yn(c);if(Em(i,p,Nr(t,y)),".priority"===Kg(y)&&!ep(p))throw new Error(i+"contains an invalid value for '"+y.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(y)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=Rf(r);for(let c=0;c<a.length;c++)if((".priority"!==a[c]||c!==a.length-1)&&!Xf(a[c]))throw new Error(n+"contains an invalid key ("+a[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(yb);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Aa(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},Bv=function(n,e,t){if(!t||void 0!==e){if(Zo(e))throw new Error((0,z.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ep(e))throw new Error((0,z.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Vu=function(n,e,t,r){if(!(r&&void 0===t||Xf(t)))throw new Error((0,z.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},hl=function(n,e,t,r){if(!(r&&void 0===t||yC(t)))throw new Error((0,z.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},su=function(n,e){if(".info"===Dn(e))throw new Error(n+" failed = Can't modify data under /.info/")},jv=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Xf(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),yC(n)}(t))throw new Error((0,z.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class oA{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function bm(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!eh(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function zv(n,e,t){bm(n,t),Hv(n,r=>eh(r,e))}function Pa(n,e,t){bm(n,t),Hv(n,r=>Aa(r,e)||Aa(e,r))}function Hv(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(wC(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function wC(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Da&&Gi("event: "+t.toString()),Gd(r)}}}const Cm="repo_interrupt";class np{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new oA,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Vf(),this.transactionQueueTree_=new mm,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function $v(n){const t=n.infoData_.getNode(new Yn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function wh(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:$v(n)})}function EC(n,e,t,r,i){n.dataUpdateCount++;const a=new Yn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(i)if(r){const y=(0,z.UI)(t,b=>Or(b));c=function _h(n,e,t,r){const i=fm(n,r);if(i){const a=pm(i),c=a.path,p=a.queryId,y=Ys(c,e),b=_r.fromObject(t);return Rv(n,c,new cl(hv(p),y,b))}return[]}(n.serverSyncTree_,a,y,i)}else{const y=Or(t);c=function ZS(n,e,t,r){const i=fm(n,r);if(null!=i){const a=pm(i),c=a.path,p=a.queryId,y=Ys(c,e);return Rv(n,c,new ll(hv(p),y,t))}return[]}(n.serverSyncTree_,a,y,i)}else if(r){const y=(0,z.UI)(t,b=>Or(b));c=function WS(n,e,t){const r=_r.fromObject(t);return sd(n,new cl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,y)}else{const y=Or(t);c=Kf(n.serverSyncTree_,a,y)}let p=a;c.length>0&&(p=Ch(n,a)),Pa(n.eventQueue_,p,c)}function bC(n,e){Wv(n,"connected",e),!1===e&&function CC(n){rc(n,"onDisconnectEvents");const e=wh(n),t=Vf();cv(n.onDisconnect_,Zn(),(i,a)=>{const c=mC(i,a,n.serverSyncTree_,e);uh(t,i,c)});let r=[];cv(t,Zn(),(i,a)=>{r=r.concat(Kf(n.serverSyncTree_,i,a));const c=Sm(n,i);Ch(n,c)}),n.onDisconnect_=Vf(),Pa(n.eventQueue_,Zn(),r)}(n)}function Wv(n,e,t){const r=new Yn("/.info/"+e),i=Or(t);n.infoData_.updateSnapshot(r,i);const a=Kf(n.infoSyncTree_,r,i);Pa(n.eventQueue_,r,a)}function qv(n){return n.nextWriteId_++}function Zv(n,e,t,r,i){rc(n,"set",{path:e.toString(),value:t,priority:r});const a=wh(n),c=Or(t,r),p=Yf(n.serverSyncTree_,e),y=Lv(c,p,a),b=qv(n),x=id(n.serverSyncTree_,e,y,b,!0);bm(n.eventQueue_,x),n.server_.put(e.toString(),c.val(!0),(B,G)=>{const J="ok"===B;J||Is("set at "+e+" failed: "+B);const xe=nc(n.serverSyncTree_,b,!J);Pa(n.eventQueue_,e,xe),ic(0,i,B,G)});const R=Sm(n,e);Ch(n,R),Pa(n.eventQueue_,R,[])}function bh(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&lv(n.onDisconnect_,e),ic(0,t,r,i)})}function lA(n,e,t,r){const i=Or(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,c)=>{"ok"===a&&uh(n.onDisconnect_,e,i),ic(0,r,a,c)})}function Tm(n,e,t){let r;r=".info"===Dn(e._path)?Mv(n.infoSyncTree_,e,t):Mv(n.serverSyncTree_,e,t),zv(n.eventQueue_,e._path,r)}function dA(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Cm)}function rc(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Gi(t,...e)}function ic(n,e,t,r){e&&Gd(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const c=new Error(a);c.code=i,e(c)}})}function Kv(n,e,t){return Yf(n.serverSyncTree_,e,t)||ln.EMPTY_NODE}function Dm(n,e=n.transactionQueueTree_){if(e||sc(n,e),od(e)){const t=SC(n,e);(0,z.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function fA(n,e,t){const r=t.map(b=>b.currentWriteId),i=Kv(n,e,r);let a=i;const c=i.hash();for(let b=0;b<t.length;b++){const x=t[b];(0,z.hu)(0===x.status,"tryToSendTransactionQueue_: items in queue should all be run."),x.status=1,x.retryCount++;const R=Ys(e,x.path);a=a.updateChild(R,x.currentOutputSnapshotRaw)}const p=a.val(!0),y=e;n.server_.put(y.toString(),p,b=>{rc(n,"transaction put response",{path:y.toString(),status:b});let x=[];if("ok"===b){const R=[];for(let B=0;B<t.length;B++)t[B].status=2,x=x.concat(nc(n.serverSyncTree_,t[B].currentWriteId)),t[B].onComplete&&R.push(()=>t[B].onComplete(null,!0,t[B].currentOutputSnapshotResolved)),t[B].unwatcher();sc(n,_m(n.transactionQueueTree_,e)),Dm(n,n.transactionQueueTree_),Pa(n.eventQueue_,e,x);for(let B=0;B<R.length;B++)Gd(R[B])}else{if("datastale"===b)for(let R=0;R<t.length;R++)t[R].status=3===t[R].status?4:0;else{Is("transaction at "+y.toString()+" failed: "+b);for(let R=0;R<t.length;R++)t[R].status=4,t[R].abortReason=b}Ch(n,e)}},c)}(n,vh(e),t)}else _C(e)&&vm(e,t=>{Dm(n,t)})}function Ch(n,e){const t=DC(n,e),r=vh(t);return function pA(n,e,t){if(0===e.length)return;const r=[];let i=[];const c=e.filter(p=>0===p.status).map(p=>p.currentWriteId);for(let p=0;p<e.length;p++){const y=e[p],b=Ys(t,y.path);let R,x=!1;if((0,z.hu)(null!==b,"rerunTransactionsUnderNode_: relativePath should not be null."),4===y.status)x=!0,R=y.abortReason,i=i.concat(nc(n.serverSyncTree_,y.currentWriteId,!0));else if(0===y.status)if(y.retryCount>=25)x=!0,R="maxretry",i=i.concat(nc(n.serverSyncTree_,y.currentWriteId,!0));else{const B=Kv(n,y.path,c);y.currentInputSnapshot=B;const G=e[p].update(B.val());if(void 0!==G){Em("transaction failed: Data returned ",G,y.path);let J=Or(G);"object"==typeof G&&null!=G&&(0,z.r3)(G,".priority")||(J=J.updatePriority(B.getPriority()));const Ze=y.currentWriteId,vt=wh(n),Mt=Lv(J,B,vt);y.currentOutputSnapshotRaw=J,y.currentOutputSnapshotResolved=Mt,y.currentWriteId=qv(n),c.splice(c.indexOf(Ze),1),i=i.concat(id(n.serverSyncTree_,y.path,Mt,y.currentWriteId,y.applyLocally)),i=i.concat(nc(n.serverSyncTree_,Ze,!0))}else x=!0,R="nodata",i=i.concat(nc(n.serverSyncTree_,y.currentWriteId,!0))}Pa(n.eventQueue_,t,i),i=[],x&&(e[p].status=2,setTimeout(e[p].unwatcher,Math.floor(0)),e[p].onComplete&&r.push("nodata"===R?()=>e[p].onComplete(null,!1,e[p].currentInputSnapshot):()=>e[p].onComplete(new Error(R),!1,null)))}sc(n,n.transactionQueueTree_);for(let p=0;p<r.length;p++)Gd(r[p]);Dm(n,n.transactionQueueTree_)}(n,SC(n,t),r),r}function DC(n,e){let t,r=n.transactionQueueTree_;for(t=Dn(e);null!==t&&void 0===od(r);)r=_m(r,t),t=Dn(e=cr(e));return r}function SC(n,e){const t=[];return AC(n,e,t),t.sort((r,i)=>r.order-i.order),t}function AC(n,e,t){const r=od(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);vm(e,i=>{AC(n,i,t)})}function sc(n,e){const t=od(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,ym(e,t.length>0?t:void 0)}vm(e,r=>{sc(n,r)})}function Sm(n,e){const t=vh(DC(n,e)),r=_m(n.transactionQueueTree_,e);return function Fv(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{Am(n,i)}),Am(n,r),wm(r,i=>{Am(n,i)}),t}function Am(n,e){const t=od(e);if(t){const r=[];let i=[],a=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,z.hu)(a===c-1,"All SENT items should be at beginning of queue."),a=c,t[c].status=3,t[c].abortReason="set"):((0,z.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),i=i.concat(nc(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===a?ym(e,void 0):t.length=a+1,Pa(n.eventQueue_,vh(e),i);for(let c=0;c<r.length;c++)Gd(r[c])}}const xm=function(n,e){const t=gA(n),r=t.namespace;return"firebase.com"===t.domain&&Ou(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Ou("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Is("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new zy(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Yn(t.pathString)}},gA=function(n){let e="",t="",r="",i="",a="",c=!0,p="https",y=443;if("string"==typeof n){let b=n.indexOf("//");b>=0&&(p=n.substring(0,b-1),n=n.substring(b+2));let x=n.indexOf("/");-1===x&&(x=n.length);let R=n.indexOf("?");-1===R&&(R=n.length),e=n.substring(0,Math.min(x,R)),x<R&&(i=function xC(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}e+="/"+i}return e}(n.substring(x,R)));const B=function MC(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Is(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,R)));b=e.indexOf(":"),b>=0?(c="https"===p||"wss"===p,y=parseInt(e.substring(b+1),10)):b=e.length;const G=e.slice(0,b);if("localhost"===G.toLowerCase())t="localhost";else if(G.split(".").length<=2)t=G;else{const J=e.indexOf(".");r=e.substring(0,J).toLowerCase(),t=e.substring(J+1),a=r}"ns"in B&&(a=B.ns)}return{host:e,port:y,domain:t,subdomain:r,secure:c,scheme:p,pathString:i,namespace:a}};class PC{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,z.Pz)(this.snapshot.exportVal())}}class RC{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class kC{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,z.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class NC{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new z.BH;return bh(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){su("OnDisconnect.remove",this._path);const e=new z.BH;return lA(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){su("OnDisconnect.set",this._path),iu("OnDisconnect.set",e,this._path,!1);const t=new z.BH;return lA(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){su("OnDisconnect.setWithPriority",this._path),iu("OnDisconnect.setWithPriority",e,this._path,!1),Bv("OnDisconnect.setWithPriority",t,!1);const r=new z.BH;return function IC(n,e,t,r,i){const a=Or(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(c,p)=>{"ok"===c&&uh(n.onDisconnect_,e,a),ic(0,i,c,p)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){su("OnDisconnect.update",this._path),tp("OnDisconnect.update",e,this._path,!1);const t=new z.BH;return function cA(n,e,t,r){if((0,z.xb)(t))return Gi("onDisconnect().update() called with empty data.  Don't do anything."),void ic(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Wi(t,(c,p)=>{const y=Or(p);uh(n.onDisconnect_,Nr(e,c),y)}),ic(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class To{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return En(this._path)?null:Kg(this._path)}get ref(){return new Do(this._repo,this._path)}get _queryIdentifier(){const e=Ma(this._queryParams),t=Ny(e);return"{}"===t?"default":t}get _queryObject(){return Ma(this._queryParams)}isEqual(e){if(!((e=(0,z.m9)(e))instanceof To))return!1;const t=this._repo===e._repo,r=eh(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function yk(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function Mm(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Ra(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Uu){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Lu)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Xa)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===ir){if(null!=e&&!ep(e)||null!=t&&!ep(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,z.hu)(n.getIndex()instanceof em||n.getIndex()===Mb,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Pm(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Do extends To{constructor(e,t){super(e,t,new Uf,!1)}get parent(){const e=Zc(this._path);return null===e?null:new Do(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Ts{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Yn(e),r=ou(this.ref,e);return new Ts(this._node.getChild(t),r,ir)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Ts(i,ou(this.ref,r),ir)))}hasChild(e){const t=new Yn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function OC(n,e){return(n=(0,z.m9)(n))._checkNotDeleted("ref"),void 0!==e?ou(n._root,e):n._root}function Rm(n,e){(n=(0,z.m9)(n))._checkNotDeleted("refFromURL");const t=xm(e,n._repo.repoInfo_.nodeAdmin);jv("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Ou("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),OC(n,t.path.toString())}function ou(n,e){return null===Dn((n=(0,z.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),hl("child","path",t,!1)):hl("child","path",e,!1),new Do(n._repo,Nr(n._path,e));var t}function Ih(n,e){n=(0,z.m9)(n),su("set",n._path),iu("set",e,n._path,!1);const t=new z.BH;return Zv(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function vA(n,e){tp("update",e,n._path,!1);const t=new z.BH;return function Eh(n,e,t,r){rc(n,"update",{path:e.toString(),value:t});let i=!0;const a=wh(n),c={};if(Wi(t,(p,y)=>{i=!1,c[p]=mC(Nr(e,p),Or(y),n.serverSyncTree_,a)}),i)Gi("update() called with empty data.  Don't do anything."),ic(0,r,"ok",void 0);else{const p=qv(n),y=function GS(n,e,t,r){!function qb(n,e,t,r){(0,z.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=pv(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=_r.fromObject(t);return sd(n,new cl({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,c,p);bm(n.eventQueue_,y),n.server_.merge(e.toString(),t,(b,x)=>{const R="ok"===b;R||Is("update at "+e+" failed: "+b);const B=nc(n.serverSyncTree_,p,!R),G=B.length>0?Ch(n,e):e;Pa(n.eventQueue_,G,B),ic(0,r,b,x)}),Wi(t,b=>{const x=Sm(n,Nr(e,b));Ch(n,x)}),Pa(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function LC(n){return function uA(n,e){const t=function KS(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(b,x)=>{const R=Ys(b,t);r=r||tc(x,R)});let i=n.syncPointTree_.get(t);i?r=r||tc(i,Zn()):(i=new oC,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,c=a?new dl(r,!0,!1):null;return function OS(n){return im(n.viewCache_)}(Sv(i,e,sm(n.pendingWriteTree_,e._path),a?c.getNode():ln.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=Or(r).withIndex(e._queryParams.getIndex()),a=Kf(n.serverSyncTree_,e._path,i);return zv(n.eventQueue_,e._path,a),Promise.resolve(i)},r=>(rc(n,"get for query "+(0,z.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,z.m9)(n))._repo,n).then(e=>new Ts(e,new Do(n._repo,n._path),n._queryParams.getIndex()))}class rp{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new PC("value",this,new Ts(e.snapshotNode,new Do(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new RC(this,e,t):null}matches(e){return e instanceof rp&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Th{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new RC(this,e,t):null}createEvent(e,t){(0,z.hu)(null!=e.childName,"Child events should have a childName.");const r=ou(new Do(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new PC(e.type,this,new Ts(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Th&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Dh(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const y=t,b=(x,R)=>{Tm(n._repo,n,p),y(x,R)};b.userCallback=t.userCallback,b.context=t.context,t=b}const c=new kC(t,a||void 0),p="value"===e?new rp(c):new Th(e,c);return function bk(n,e,t){let r;r=".info"===Dn(e._path)?dC(n.infoSyncTree_,e,t):dC(n.serverSyncTree_,e,t),zv(n.eventQueue_,e._path,r)}(n._repo,n,p),()=>Tm(n._repo,n,p)}function Yv(n,e,t,r){return Dh(n,"value",e,t,r)}function FC(n,e,t,r){return Dh(n,"child_added",e,t,r)}function wA(n,e,t,r){return Dh(n,"child_changed",e,t,r)}function Nm(n,e,t,r){return Dh(n,"child_moved",e,t,r)}function Om(n,e,t,r){return Dh(n,"child_removed",e,t,r)}function Qv(n,e,t){let r=null;const i=t?new kC(t):null;"value"===e?r=new rp(i):e&&(r=new Th(e,i)),Tm(n._repo,n,r)}class Jo{}class Lm extends Jo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){iu("endAt",this._value,e._path,!0);const t=xa(e._queryParams,this._value,this._key);if(Pm(t),Ra(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new To(e._repo,e._path,t,e._orderByCalled)}}class bA extends Jo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){iu("endBefore",this._value,e._path,!1);const t=function ES(n,e,t){let r,i;return n.index_===Uu?("string"==typeof e&&(e=Rb(e)),i=xa(n,e,t)):(r=null==t?Lu:Rb(t),i=xa(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(Pm(t),Ra(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new To(e._repo,e._path,t,e._orderByCalled)}}class UC extends Jo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){iu("startAt",this._value,e._path,!0);const t=tm(e._queryParams,this._value,this._key);if(Pm(t),Ra(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new To(e._repo,e._path,t,e._orderByCalled)}}class Jv extends Jo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){iu("startAfter",this._value,e._path,!1);const t=function uv(n,e,t){let r;if(n.index_===Uu)"string"==typeof e&&(e=av(e)),r=tm(n,e,t);else{let i;i=null==t?Xa:av(t),r=tm(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(Pm(t),Ra(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new To(e._repo,e._path,t,e._orderByCalled)}}class IA extends Jo{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new To(e._repo,e._path,function Ob(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class zC extends Jo{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new To(e._repo,e._path,function wk(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class HC extends Jo{constructor(e){super(),this._path=e}_apply(e){Mm(e,"orderByChild");const t=new Yn(this._path);if(En(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new em(t),i=nm(e._queryParams,r);return Ra(i),new To(e._repo,e._path,i,!0)}}class DA extends Jo{_apply(e){Mm(e,"orderByKey");const t=nm(e._queryParams,Uu);return Ra(t),new To(e._repo,e._path,t,!0)}}class SA extends Jo{_apply(e){Mm(e,"orderByPriority");const t=nm(e._queryParams,ir);return Ra(t),new To(e._repo,e._path,t,!0)}}class Sh extends Jo{_apply(e){Mm(e,"orderByValue");const t=nm(e._queryParams,Mb);return Ra(t),new To(e._repo,e._path,t,!0)}}class xA extends Jo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(iu("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Lm(this._value,this._key)._apply(new UC(this._value,this._key)._apply(e))}}function Js(n,...e){let t=(0,z.m9)(n);for(const r of e)t=r._apply(t);return t}(function US(n){(0,z.hu)(!ec,"__referenceConstructor has already been defined"),ec=n})(Do),function dm(n){(0,z.hu)(!Zf,"__referenceConstructor has already been defined"),Zf=n}(Do);const ip={};function ZC(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||Ou("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Gi("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let y,b,c=xm(a,i),p=c.repoInfo;"undefined"!=typeof process&&process.env&&(b=process.env.FIREBASE_DATABASE_EMULATOR_HOST),b?(y=!0,a=`http://${b}?ns=${p.namespace}`,c=xm(a,i),p=c.repoInfo):y=!c.repoInfo.secure;const x=i&&y?new zg(zg.OWNER):new eu(n.name,n.options,e);jv("Invalid Firebase Database URL",c),En(c.path)||Ou("Database URL must point to the root of a Firebase Database (not including a child path).");const R=function Xv(n,e,t,r){let i=ip[e.name];i||(i={},ip[e.name]=i);let a=i[n.toURLString()];return a&&Ou("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new np(n,false,t,r),i[n.toURLString()]=a,a}(p,n,x,new _k(n.name,t));return new YC(R,n)}class YC{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function aA(n,e,t){if(n.stats_=Kl(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new Io(n.repoInfo_,(r,i,a,c)=>{EC(n,r,i,a,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>bC(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,z.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new nh(n.repoInfo_,e,(r,i,a,c)=>{EC(n,r,i,a,c)},r=>{bC(n,r)},r=>{!function Gv(n,e){Wi(e,(t,r)=>{Wv(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function lS(n,e){const t=n.toString();return qd[t]||(qd[t]=e()),qd[t]}(n.repoInfo_,()=>new IS(n.stats_,n.server_)),n.infoData_=new Lb,n.infoSyncTree_=new xv({startListening:(r,i,a,c)=>{let p=[];const y=n.infoData_.getNode(r._path);return y.isEmpty()||(p=Kf(n.infoSyncTree_,r._path,y),setTimeout(()=>{c("ok")},0)),p},stopListening:()=>{}}),Wv(n,"connected",!1),n.serverSyncTree_=new xv({startListening:(r,i,a,c)=>(n.server_.listen(r,a,i,(p,y)=>{const b=c(p,y);Pa(n.eventQueue_,r._path,b)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Do(this._repo,Zn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function PA(n,e){const t=ip[e];(!t||t[n.key]!==n)&&Ou(`Database ${e}(${n.repoInfo_}) has already been deleted.`),dA(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Ou("Cannot call "+e+" on a deleted database.")}}function sp(){Wy.IS_TRANSPORT_INITIALIZED&&Is("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function e0(){sp(),Ko.forceDisallow()}function Tk(){sp(),Wc.forceDisallow(),Ko.forceAllow()}function QC(n=(0,yi.getApp)(),e){return(0,yi._getProvider)(n,"database").getImmediate({identifier:e})}function XC(n,e){ZE(n,e)}const t0={".sv":"timestamp"};class NA{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}nh.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},nh.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function kA(n){$E(yi.SDK_VERSION),(0,yi._registerComponent)(new ai.wA("database",(e,{instanceIdentifier:t})=>ZC(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,yi.registerVersion)(Sy,"0.13.0",n),(0,yi.registerVersion)(Sy,"0.13.0","esm2017")}();const tI=new Ja.Yd("@firebase/database-compat"),nI=function(n){tI.warn("FIREBASE WARNING: "+n)};class BA{constructor(e){this._delegate=e}cancel(e){(0,z.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,z.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,z.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,z.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,z.Dv)("OnDisconnect.set",1,2,arguments.length),(0,z.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,z.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,z.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,z.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,nI("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,z.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class iI{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,z.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class fl{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,z.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,z.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,z.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,z.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,z.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),hl("DataSnapshot.child","path",e,!1),new fl(this._database,this._delegate.child(e))}hasChild(e){return(0,z.Dv)("DataSnapshot.hasChild",1,1,arguments.length),hl("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,z.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,z.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,z.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new fl(this._database,t)))}hasChildren(){return(0,z.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,z.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,z.Dv)("DataSnapshot.ref",0,0,arguments.length),new So(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class qi{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,z.Dv)("Query.on",2,4,arguments.length),(0,z.Wj)("Query.on","callback",t,!1);const c=qi.getCancelAndContextArgs_("Query.on",r,i),p=(b,x)=>{t.call(c.context,new fl(this.database,b),x)};p.userCallback=t,p.context=c.context;const y=null===(a=c.cancel)||void 0===a?void 0:a.bind(c.context);switch(e){case"value":return Yv(this._delegate,p,y),t;case"child_added":return FC(this._delegate,p,y),t;case"child_removed":return Om(this._delegate,p,y),t;case"child_changed":return wA(this._delegate,p,y),t;case"child_moved":return Nm(this._delegate,p,y),t;default:throw new Error((0,z.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,z.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,z.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,z.Wj)("Query.off","callback",t,!0),(0,z.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,Qv(this._delegate,e,i)}else Qv(this._delegate,e)}get(){return LC(this._delegate).then(e=>new fl(this.database,e))}once(e,t,r,i){(0,z.Dv)("Query.once",1,4,arguments.length),(0,z.Wj)("Query.once","callback",t,!0);const a=qi.getCancelAndContextArgs_("Query.once",r,i),c=new z.BH,p=(b,x)=>{const R=new fl(this.database,b);t&&t.call(a.context,R,x),c.resolve(R)};p.userCallback=t,p.context=a.context;const y=b=>{a.cancel&&a.cancel.call(a.context,b),c.reject(b)};switch(e){case"value":Yv(this._delegate,p,y,{onlyOnce:!0});break;case"child_added":FC(this._delegate,p,y,{onlyOnce:!0});break;case"child_removed":Om(this._delegate,p,y,{onlyOnce:!0});break;case"child_changed":wA(this._delegate,p,y,{onlyOnce:!0});break;case"child_moved":Nm(this._delegate,p,y,{onlyOnce:!0});break;default:throw new Error((0,z.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,z.Dv)("Query.limitToFirst",1,1,arguments.length),new qi(this.database,Js(this._delegate,function jC(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new IA(n)}(e)))}limitToLast(e){return(0,z.Dv)("Query.limitToLast",1,1,arguments.length),new qi(this.database,Js(this._delegate,function TA(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new zC(n)}(e)))}orderByChild(e){return(0,z.Dv)("Query.orderByChild",1,1,arguments.length),new qi(this.database,Js(this._delegate,function $C(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return hl("orderByChild","path",n,!1),new HC(n)}(e)))}orderByKey(){return(0,z.Dv)("Query.orderByKey",0,0,arguments.length),new qi(this.database,Js(this._delegate,function GC(){return new DA}()))}orderByPriority(){return(0,z.Dv)("Query.orderByPriority",0,0,arguments.length),new qi(this.database,Js(this._delegate,function Qs(){return new SA}()))}orderByValue(){return(0,z.Dv)("Query.orderByValue",0,0,arguments.length),new qi(this.database,Js(this._delegate,function AA(){return new Sh}()))}startAt(e=null,t){return(0,z.Dv)("Query.startAt",0,2,arguments.length),new qi(this.database,Js(this._delegate,function VC(n=null,e){return Vu("startAt","key",e,!0),new UC(n,e)}(e,t)))}startAfter(e=null,t){return(0,z.Dv)("Query.startAfter",0,2,arguments.length),new qi(this.database,Js(this._delegate,function BC(n,e){return Vu("startAfter","key",e,!0),new Jv(n,e)}(e,t)))}endAt(e=null,t){return(0,z.Dv)("Query.endAt",0,2,arguments.length),new qi(this.database,Js(this._delegate,function EA(n,e){return Vu("endAt","key",e,!0),new Lm(n,e)}(e,t)))}endBefore(e=null,t){return(0,z.Dv)("Query.endBefore",0,2,arguments.length),new qi(this.database,Js(this._delegate,function CA(n,e){return Vu("endBefore","key",e,!0),new bA(n,e)}(e,t)))}equalTo(e,t){return(0,z.Dv)("Query.equalTo",1,2,arguments.length),new qi(this.database,Js(this._delegate,function Ik(n,e){return Vu("equalTo","key",e,!0),new xA(n,e)}(e,t)))}toString(){return(0,z.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,z.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,z.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof qi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,z.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,z.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,z.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new So(this.database,new Do(this._delegate._repo,this._delegate._path))}}class So extends qi{constructor(e,t){super(e,new To(t._repo,t._path,new Uf,!1)),this.database=e,this._delegate=t}getKey(){return(0,z.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,z.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new So(this.database,ou(this._delegate,e))}getParent(){(0,z.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new So(this.database,e):null}getRoot(){return(0,z.Dv)("Reference.root",0,0,arguments.length),new So(this.database,this._delegate.root)}set(e,t){(0,z.Dv)("Reference.set",1,2,arguments.length),(0,z.Wj)("Reference.set","onComplete",t,!0);const r=Ih(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,z.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,nI("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}su("Reference.update",this._delegate._path),(0,z.Wj)("Reference.update","onComplete",t,!0);const r=vA(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,z.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,z.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function yA(n,e,t){if(su("setWithPriority",n._path),iu("setWithPriority",e,n._path,!1),Bv("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new z.BH;return Zv(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,z.Dv)("Reference.remove",0,1,arguments.length),(0,z.Wj)("Reference.remove","onComplete",e,!0);const t=function _A(n){return su("remove",n._path),Ih(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,z.Dv)("Reference.transaction",1,3,arguments.length),(0,z.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,z.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,z.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function OA(n,e,t){var r;if(n=(0,z.m9)(n),su("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,a=new z.BH,p=Yv(n,()=>{});return function hA(n,e,t,r,i,a){rc(n,"transaction on "+e);const c={path:e,update:t,onComplete:r,status:null,order:WE(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},p=Kv(n,e,void 0);c.currentInputSnapshot=p;const y=c.update(p.val());if(void 0===y)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{Em("transaction failed: Data returned ",y,c.path),c.status=0;const b=_m(n.transactionQueueTree_,e),x=od(b)||[];let R;x.push(c),ym(b,x),"object"==typeof y&&null!==y&&(0,z.r3)(y,".priority")?(R=(0,z.DV)(y,".priority"),(0,z.hu)(ep(R),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):R=(Yf(n.serverSyncTree_,e)||ln.EMPTY_NODE).getPriority().val();const B=wh(n),G=Or(y,R),J=Lv(G,p,B);c.currentOutputSnapshotRaw=G,c.currentOutputSnapshotResolved=J,c.currentWriteId=qv(n);const xe=id(n.serverSyncTree_,e,J,c.currentWriteId,c.applyLocally);Pa(n.eventQueue_,e,xe),Dm(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(y,b,x)=>{let R=null;y?a.reject(y):(R=new Ts(x,new Do(n._repo,n._path),ir),a.resolve(new NA(b,R)))},p,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new iI(a.committed,new fl(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,z.Dv)("Reference.setPriority",1,2,arguments.length),(0,z.Wj)("Reference.setPriority","onComplete",t,!0);const r=function km(n,e){n=(0,z.m9)(n),su("setPriority",n._path),Bv("setPriority",e,!1);const t=new z.BH;return Zv(n._repo,Nr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,z.Dv)("Reference.push",0,2,arguments.length),(0,z.Wj)("Reference.push","onComplete",t,!0);const r=function mA(n,e){n=(0,z.m9)(n),su("push",n._path),iu("push",e,n._path,!0);const t=$v(n._repo),r=ki(t),i=ou(n,r),a=ou(n,r);let c;return c=null!=e?Ih(a,e).then(()=>a):Promise.resolve(a),i.then=c.then.bind(c),i.catch=c.then.bind(c,void 0),i}(this._delegate,e),i=r.then(c=>new So(this.database,c));t&&i.then(()=>t(null),c=>t(c));const a=new So(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return su("Reference.onDisconnect",this._delegate._path),new BA(new NC(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class op{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:e0,forceLongPolling:Tk}}useEmulator(e,t,r={}){!function RA(n,e,t,r={}){(n=(0,z.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Ou("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ou('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new zg(zg.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,z.Sg)(r.mockUserToken,n.app.options.projectId);a=new zg(c)}!function qC(n,e,t,r){n.repoInfo_=new zy(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,z.Dv)("database.ref",0,1,arguments.length),e instanceof So){const t=Rm(this._delegate,e.toString());return new So(this,t)}{const t=OC(this._delegate,e);return new So(this,t)}}refFromURL(e){(0,z.Dv)("database.refFromURL",1,1,arguments.length);const r=Rm(this._delegate,e);return new So(this,r)}goOffline(){return(0,z.Dv)("database.goOffline",0,0,arguments.length),function JC(n){(n=(0,z.m9)(n))._checkNotDeleted("goOffline"),dA(n._repo)}(this._delegate)}goOnline(){return(0,z.Dv)("database.goOnline",0,0,arguments.length),function Fm(n){(n=(0,z.m9)(n))._checkNotDeleted("goOnline"),function TC(n){n.persistentConnection_&&n.persistentConnection_.resume(Cm)}(n._repo)}(this._delegate)}}op.ServerValue={TIMESTAMP:function n0(){return t0}(),increment:n=>function Dk(n){return{".sv":{increment:n}}}(n)};var Sk=Object.freeze({__proto__:null,initStandalone:function jA({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){$E(t);const c=new ai.zt("auth-internal",new ai.H0("database-standalone"));return c.setComponent(new ai.wA("auth-internal",()=>r,"PRIVATE")),{instance:new op(ZC(n,c,void 0,e,a),n),namespace:i}}});const sI=op.ServerValue;function zA(n){return null==n}function HA(n){return"function"==typeof n.set}function $A(n,e){return HA(e)?e:n.ref(e)}function GA(n,e){if(function xk(n){return"string"==typeof n}(n))return e.stringCase();if(HA(n))return e.firebaseCase();if(function Mk(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Um(n,e,t="on",r=Vg.z){return new ri.y(i=>{let a=null;return a=n[t](e,(c,p)=>{r.schedule(()=>{i.next({snapshot:c,prevKey:p})}),"once"===t&&r.schedule(()=>i.complete())},c=>{r.schedule(()=>i.error(c))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,v.U)(i=>{const{snapshot:a,prevKey:c}=i;let p=null;return a.exists()&&(p=a.key),{type:e,payload:a,prevKey:c,key:p}}),(0,wE.B)())}function WA(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function r0(n,e){const{payload:t,prevKey:r,key:i}=e,a=WA(n,i),c=function oI(n,e){if(zA(e))return 0;{const t=WA(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let p=null;e.payload.forEach(y=>{const b={payload:y,type:"value",prevKey:p,key:y.key};return p=y.key,n=[...n,b],!1})}return n;case"child_added":if(a>-1){const p=n[a-1];(p&&p.key||null)!==r&&(n=n.filter(y=>y.payload.key!==t.key)).splice(c,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(p=>p.payload.key!==t.key);case"child_changed":return n.map(p=>p.payload.key===i?e:p);case"child_moved":if(a>-1){const p=n.splice(a,1)[0];return(n=n.slice()).splice(c,0,p),n}return n;default:return n}}function s0(n){return(zA(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function o0(n,e,t){return function Vm(n,e,t){return Um(n,"value","once",t).pipe(Ir(r=>{const i=[yt(r)];return e.forEach(a=>i.push(Um(n,a,"on",t))),(0,Uc.T)(...i).pipe(Ai(r0,[]))}),Dy())}(n,e=s0(e),t)}function qA(n,e,t){const r=(e=s0(e)).map(i=>Um(n,i,"on",t));return(0,Uc.T)(...r)}function u0(n,e){return function(r,i){return GA(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function Pk(n){return function(t){return t?GA(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function uI(n,e){return function(){return Um(n,"value","on",e)}}!function Ak(n){n.INTERNAL.registerComponent(new ai.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new op(i,r)},"PUBLIC").setServiceProps({Reference:So,Query:qi,Database:op,DataSnapshot:fl,enableLogging:XC,INTERNAL:Sk,ServerValue:sI}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.0")}(Af.Z);const YA=new g.OlP("angularfire2.realtimeDatabaseURL"),Rk=new g.OlP("angularfire2.database.use-emulator");let Ah=(()=>{class n{constructor(t,r,i,a,c,p,y,b,x,R,B,G,J,xe,Ze){this.schedulers=p;const vt=y,Mt=(0,_i.on)(t,c,r);b&&Ug(Mt,c,x,B,G,J,R,xe),this.database=(0,_i.cc)(`${Mt.name}.database.${i}`,"AngularFireDatabase",Mt.name,()=>{const At=c.runOutsideAngular(()=>Mt.database(i||void 0));return vt&&At.useEmulator(...vt),At},[vt])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>$A(this.database,t));let a=i;return r&&(a=r(i)),function KA(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:u0(r,"update"),set:u0(r,"set"),push:i=>r.push(i),remove:Pk(r),snapshotChanges:i=>o0(n,i,t).pipe(un.iC),stateChanges:i=>qA(n,i,t).pipe(un.iC),auditTrail:i=>function a0(n,e,t){return function ZA(n,e,t){return function aI(n,e){return Um(n,"value","on",e).pipe((0,v.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function eS(...n){const e=(0,Wa.jO)(n);return(0,fr.e)((t,r)=>{const i=n.length,a=new Array(i);let c=n.map(()=>!1),p=!1;for(let y=0;y<i;y++)(0,Iu.Xf)(n[y]).subscribe((0,de.x)(r,b=>{a[y]=b,!p&&!c[y]&&(c[y]=!0,(p=c.every(f.y))&&(c=null))},Bg.Z));t.subscribe((0,de.x)(r,y=>{if(p){const b=[y,...a];r.next(e?e(...b):b)}}))})}(e),(0,v.U)(([i,a])=>{const c=i.lastKeyToLoad,p=a.map(y=>y.key);return{actions:a,lastKeyToLoad:c,loadedKeys:p}}),function tS(n){return(0,fr.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,de.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,v.U)(i=>i.actions))}(n,qA(n,e).pipe(Ai((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(un.iC),valueChanges:(i,a)=>o0(n,i,t).pipe((0,v.U)(p=>p.map(y=>a&&a.idField?Object.assign(Object.assign({},y.payload.val()),{[a.idField]:y.key}):y.payload.val())),un.iC)}}(a,this)}object(t){return function l0(n,e){return{query:n,snapshotChanges:()=>uI(n,e.schedulers.outsideAngular)().pipe(un.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>uI(n,e.schedulers.outsideAngular)().pipe(un.iC,(0,v.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>$A(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(_i.Dh),g.LFG(_i.xv,8),g.LFG(YA,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(un.HU),g.LFG(Rk,8),g.LFG(Sf,8),g.LFG(Fg,8),g.LFG(jE,8),g.LFG(zE,8),g.LFG(Df,8),g.LFG(HE,8),g.LFG(Ty,8),g.LFG(zc,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),kk=(()=>{class n{constructor(){Tf.Z.registerVersion("angularfire",un.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[Ah]}),n})(),c0=(()=>{class n{constructor(t,r,i){this.fireauth=t,this.router=r,this.db=i}login(t,r){return this.fireauth.signInWithEmailAndPassword(t,r).then(()=>{localStorage.setItem("token","true");const i=t.toLowerCase().replace(/\./g,"EMAIL_IDENTIFIER");localStorage.setItem("email",i),this.router.navigate(["/"]);const a=document.getElementById("errorText_home");null!==a&&(a.innerHTML="")},i=>{const a=document.getElementById("email"),c=document.getElementById("email_input"),p=document.getElementById("password"),y=document.getElementById("password_input");null!==a&&null!==c&&null!==p&&null!==y&&(a.style.color="red",c.style.borderColor="red",p.style.color="red",y.style.borderColor="red");const b=document.getElementById("errorText");null!==b&&(b.style.display="block")})}register(t,r,i,a){this.userdata={name:t,portrait:r,email:i};let c=i;if(void 0!==i&&(c=i.replace(/\./g,"EMAIL_IDENTIFIER")),void 0===t||""===t){const p=document.getElementById("name"),y=document.getElementById("name_input");if(null!==y&&null!==p){console.log(t),p.style.color="red",y.style.border="1px solid red";const b=document.getElementById("errorText");null!==b&&(b.style.display="block")}}if(void 0===r||""===r){const p=document.getElementById("portrait"),y=document.getElementById("portrait_input");if(null!==y&&null!==p){p.style.color="red",y.style.border="1px solid red";const b=document.getElementById("errorText");null!==b&&(b.style.display="block")}}if(void 0===i||""===i){const p=document.getElementById("email"),y=document.getElementById("email_input");if(null!==y&&null!==p){p.style.color="red",y.style.border="1px solid red";const b=document.getElementById("errorText");null!==b&&(b.style.display="block")}}if(void 0===a||""===a){const p=document.getElementById("password"),y=document.getElementById("password_input");if(null!==y&&null!==p){p.style.color="red",y.style.border="1px solid red";const b=document.getElementById("errorText");null!==b&&(b.style.display="block")}}if(""!=t&&""!=r&&""!=i&&""!=a)return this.fireauth.createUserWithEmailAndPassword(i,a).then(()=>{this.db.object(c).set(this.userdata),this.router.navigate(["/login"]);const p=document.getElementById("errorText_home");null!==p&&(p.innerHTML="")},p=>{if("auth/email-already-in-use"==p.code){console.log("Email already in use");const y=document.getElementById("email"),b=document.getElementById("email_input");if(null!==b&&null!==y){y.style.color="red",b.style.border="1px solid red";const x=document.getElementById("errorText");null!==x&&(x.innerHTML="Es existiert bereits ein Account mit dieser E-Mail",x.style.display="block")}}if("auth/invalid-email"==p.code){console.log("Invalid email");const y=document.getElementById("email"),b=document.getElementById("email_input");if(null!==b&&null!==y){y.style.color="red",b.style.border="1px solid red";const x=document.getElementById("errorText");null!==x&&(x.innerHTML="Ung\xfcltige Email",x.style.display="block")}}if("auth/weak-password"==p.code){console.log("Weak password");const y=document.getElementById("password"),b=document.getElementById("password_input");if(null!==b&&null!==y){y.style.color="red",b.style.border="1px solid red";const x=document.getElementById("errorText");null!==x&&(x.innerHTML="Das Passwort muss mindestens 6 Zeichen lang sein",x.style.display="block")}}})}logout(){this.fireauth.signOut().then(()=>{localStorage.removeItem("token"),localStorage.removeItem("email"),this.router.navigate(["/"])},t=>{alert(t.message)})}autologin(){"true"==localStorage.getItem("token")&&this.router.navigate(["/"])}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Sf),g.LFG(Ar),g.LFG(Ah))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),lI=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq))},n.\u0275dir=g.lG2({type:n}),n})(),xh=(()=>{class n extends lI{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,features:[g.qOj]}),n})();const Bu=new g.OlP("NgValueAccessor"),au={provide:Bu,useExisting:(0,g.Gpc)(()=>Mh),multi:!0},h0=new g.OlP("CompositionEventMode");let Mh=(()=>{class n extends lI{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function JA(){const n=j()?j().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(h0,8))},n.\u0275dir=g.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&g.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[g._Bn([au]),g.qOj]}),n})();const ls=new g.OlP("NgValidators"),pl=new g.OlP("NgAsyncValidators");function gI(n){return null!=n}function mI(n){const e=(0,g.QGY)(n)?(0,Ln.D)(n):n;return(0,g.CqO)(e),e}function _I(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function m0(n,e){return e.map(t=>t(n))}function yI(n){return n.map(e=>function tx(n){return!n.validate}(e)?e:t=>e.validate(t))}function ap(n){return null!=n?function nx(n){if(!n)return null;const e=n.filter(gI);return 0==e.length?null:function(t){return _I(m0(t,e))}}(yI(n)):null}function y0(n){return null!=n?function _0(n){if(!n)return null;const e=n.filter(gI);return 0==e.length?null:function(t){return function QA(...n){const e=(0,Wa.jO)(n),{args:t,keys:r}=Tl(n),i=new ri.y(a=>{const{length:c}=t;if(!c)return void a.complete();const p=new Array(c);let y=c,b=c;for(let x=0;x<c;x++){let R=!1;(0,Iu.Xf)(t[x]).subscribe((0,de.x)(a,B=>{R||(R=!0,b--),p[x]=B},()=>y--,void 0,()=>{(!y||!R)&&(b||a.next(r?Y(r,p):p),a.complete())}))}});return e?i.pipe(V(e)):i}(m0(t,e).map(mI)).pipe((0,v.U)(_I))}}(yI(n)):null}function vI(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function up(n){return n?Array.isArray(n)?n:[n]:[]}function lp(n,e){return Array.isArray(n)?n.includes(e):n===e}function wI(n,e){const t=up(e);return up(n).forEach(i=>{lp(t,i)||t.push(i)}),t}function w0(n,e){return up(e).filter(t=>!lp(n,t))}class E0{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=ap(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=y0(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class uc extends E0{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Xs extends E0{get formDirective(){return null}get path(){return null}}class rx{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let Hm=(()=>{class n extends rx{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(uc,2))},n.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[g.qOj]}),n})(),cp=(()=>{class n extends rx{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Xs,10))},n.\u0275dir=g.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[g.qOj]}),n})();function ud(n,e){bI(n,e),e.valueAccessor.writeValue(n.value),function CI(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&II(n,e)})}(n,e),function ux(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function ax(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&II(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Vk(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function A0(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function bI(n,e){const t=function v0(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(vI(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function zm(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(vI(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();A0(e._rawValidators,i),A0(e._rawAsyncValidators,i)}function II(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function dp(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Wm="VALID",R0="INVALID",Rh="PENDING",hp="DISABLED";function xI(n){return(qm(n)?n.validators:n)||null}function dx(n){return Array.isArray(n)?ap(n):n||null}function MI(n,e){return(qm(e)?e.asyncValidators:n)||null}function hx(n){return Array.isArray(n)?y0(n):n||null}function qm(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const PI=n=>n instanceof h;function px(n){return(n=>n instanceof d)(n)?n.value:n.getRawValue()}function s(n,e){const t=PI(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new g.vHH(1e3,"");if(!r[e])throw new g.vHH(1001,"")}function o(n,e){PI(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new g.vHH(1002,"")})}class u{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=dx(this._rawValidators),this._composedAsyncValidatorFn=hx(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Wm}get invalid(){return this.status===R0}get pending(){return this.status==Rh}get disabled(){return this.status===hp}get enabled(){return this.status!==hp}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=dx(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=hx(e)}addValidators(e){this.setValidators(wI(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(wI(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(w0(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(w0(e,this._rawAsyncValidators))}hasValidator(e){return lp(this._rawValidators,e)}hasAsyncValidator(e){return lp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Rh,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=hp,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Wm,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Wm||this.status===Rh)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?hp:Wm}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Rh,this._hasOwnPendingAsyncValidator=!0;const t=mI(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function zk(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=PI(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:(n=>n instanceof m)(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?hp:this.errors?R0:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Rh)?Rh:this._anyControlsHaveStatus(R0)?R0:Wm}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){qm(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class d extends u{constructor(e=null,t,r){super(xI(t),MI(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),qm(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){dp(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){dp(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class h extends u{constructor(e,t,r){super(xI(t),MI(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){o(this,e),Object.keys(e).forEach(r=>{s(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=px(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class m extends u{constructor(e,t,r){super(xI(t),MI(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){o(this,e),e.forEach((r,i)=>{s(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>px(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const E={provide:Xs,useExisting:(0,g.Gpc)(()=>S)},I=(()=>Promise.resolve(null))();let S=(()=>{class n extends Xs{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new g.vpe,this.form=new h({},ap(t),y0(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){I.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),ud(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){I.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){I.then(()=>{const r=this._findContainer(t.path),i=new h({});(function TI(n,e){bI(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){I.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){I.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function cx(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(ls,10),g.Y36(pl,10))},n.\u0275dir=g.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&g.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([E]),g.qOj]}),n})();const ct={provide:uc,useExisting:(0,g.Gpc)(()=>Be)},wt=(()=>Promise.resolve(null))();let Be=(()=>{class n extends uc{constructor(t,r,i,a,c){super(),this._changeDetectorRef=c,this.control=new d,this._registered=!1,this.update=new g.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Gm(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===Mh?t=a:function M0(n){return Object.getPrototypeOf(n.constructor)===xh}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function $m(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ud(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){wt.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=""===r||r&&"false"!==r;wt.then(()=>{var a;i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),null===(a=this._changeDetectorRef)||void 0===a||a.markForCheck()})}_getPath(t){return this._parent?function Ph(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Xs,9),g.Y36(ls,10),g.Y36(pl,10),g.Y36(Bu,10),g.Y36(g.sBO,8))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[g._Bn([ct]),g.qOj,g.TTD]}),n})(),Pt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=g.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Zm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();const fp=new g.OlP("NgModelWithFormControlWarning");let rN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[Zm]]}),n})(),sV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[rN]}),n})(),oV=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:fp,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[rN]}),n})(),aV=(()=>{class n{constructor(t,r){this.auth=t,this.router=r}ngOnInit(){}login(){this.auth.login(this.email,this.password),"/login"!==this.router.url&&(this.email="",this.password="")}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(c0),g.Y36(Ar))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-login"]],decls:19,vars:2,consts:[[1,"login"],[1,"general-input"],[1,"input"],["id","email"],["id","email_input","type","text","name","email",3,"ngModel","ngModelChange"],["id","password"],["id","password_input","type","password","name","password",3,"ngModel","ngModelChange"],["id","errorText",1,"errorText"],["type","submit","value","Login",3,"click"],["routerLink","signup",1,"text"],["href","/signup"]],template:function(t,r){1&t&&(g.TgZ(0,"form",0)(1,"h1"),g._uU(2,"Login"),g.qZA(),g.TgZ(3,"div",1)(4,"div",2)(5,"p",3),g._uU(6,"Email-Adresse"),g.qZA(),g.TgZ(7,"input",4),g.NdJ("ngModelChange",function(a){return r.email=a}),g.qZA()(),g.TgZ(8,"div",2)(9,"p",5),g._uU(10,"Passwort"),g.qZA(),g.TgZ(11,"input",6),g.NdJ("ngModelChange",function(a){return r.password=a}),g.qZA()(),g.TgZ(12,"div",7),g._uU(13,"Email oder Passwort inkorrekt"),g.qZA(),g.TgZ(14,"div",2)(15,"input",8),g.NdJ("click",function(){return r.login()}),g.qZA()(),g.TgZ(16,"div",9)(17,"a",10),g._uU(18,"Sie haben noch keinen Account?"),g.qZA()()()()),2&t&&(g.xp6(7),g.Q6J("ngModel",r.email),g.xp6(4),g.Q6J("ngModel",r.password))},directives:[Pt,cp,S,Mh,Hm,Be,Vd],styles:['.login[_ngcontent-%COMP%]{margin:auto;background-color:#f0f8ff;width:15%;padding:20px 50px 50px;border-radius:30px;box-shadow:5px 5px 5px #000}.general-input[_ngcontent-%COMP%]{text-align:center;display:grid}.input[_ngcontent-%COMP%]{padding:1rem}h1[_ngcontent-%COMP%]{text-align:center}.b1[_ngcontent-%COMP%]{background-color:"#fffff";padding:7px;margin:15px;border-radius:5px;border:none}.errorText[_ngcontent-%COMP%]{color:red;font-size:.8rem;display:none}']}),n})(),uV=(()=>{class n{constructor(t,r){this.auth=t,this.router=r}ngOnInit(){}signup(){this.auth.register(this.name,this.portrait,this.email,this.password),"/signup"!==this.router.url&&(this.name="",this.email="",this.password="",this.portrait="")}changeName(t){const r=document.getElementById("name"),i=document.getElementById("name_input");null!==r&&null!==i&&(r.style.color="#000000",i.style.border="1px solid #000000")}changePortrait(t){const r=document.getElementById("portrait"),i=document.getElementById("portrait_input");null!==r&&null!==i&&(r.style.color="#000000",i.style.border="1px solid #000000")}changeEmail(t){const r=document.getElementById("email"),i=document.getElementById("email_input");null!==r&&null!==i&&(r.style.color="#000000",i.style.border="1px solid #000000")}changePassword(t){const r=document.getElementById("password"),i=document.getElementById("password_input");null!==r&&null!==i&&(r.style.color="#000000",i.style.border="1px solid #000000")}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(c0),g.Y36(Ar))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-signup"]],decls:27,vars:4,consts:[[1,"signup"],[1,"general-signup"],[1,"input"],["id","name"],["id","name_input","type","text","name","email",3,"ngModel","ngModelChange","focusout"],["id","portrait"],["id","portrait_input","type","text","name","portrait",1,"portrait",3,"ngModel","ngModelChange","focusout"],["id","email"],["id","email_input","type","text","name","email",3,"ngModel","ngModelChange","focusout"],["id","password"],["id","password_input","type","password","name","password",3,"ngModel","ngModelChange","focusout"],["id","errorText",1,"errorText"],["type","submit","value","Signup",3,"click"],["routerLink","signup",1,"text"],["href","/login"]],template:function(t,r){1&t&&(g.TgZ(0,"form",0)(1,"h1"),g._uU(2,"Signup"),g.qZA(),g.TgZ(3,"div",1)(4,"div",2)(5,"p",3),g._uU(6,"Name"),g.qZA(),g.TgZ(7,"input",4),g.NdJ("ngModelChange",function(a){return r.name=a})("focusout",function(a){return r.changeName(a)}),g.qZA()(),g.TgZ(8,"div",2)(9,"p",5),g._uU(10,"Kurzbeschreibung"),g.qZA(),g.TgZ(11,"textarea",6),g.NdJ("ngModelChange",function(a){return r.portrait=a})("focusout",function(a){return r.changePortrait(a)}),g.qZA()(),g.TgZ(12,"div",2)(13,"p",7),g._uU(14,"E-Mail-Adresse"),g.qZA(),g.TgZ(15,"input",8),g.NdJ("ngModelChange",function(a){return r.email=a})("focusout",function(a){return r.changeEmail(a)}),g.qZA()(),g.TgZ(16,"div",2)(17,"p",9),g._uU(18,"Passwort"),g.qZA(),g.TgZ(19,"input",10),g.NdJ("ngModelChange",function(a){return r.password=a})("focusout",function(a){return r.changePassword(a)}),g.qZA()(),g.TgZ(20,"div",11),g._uU(21,"Bitte f\xfcllen Sie alle Felder aus"),g.qZA(),g.TgZ(22,"div",2)(23,"input",12),g.NdJ("click",function(){return r.signup()}),g.qZA()(),g.TgZ(24,"div",13)(25,"a",14),g._uU(26,"Sie haben bereits einen Account?"),g.qZA()()()()),2&t&&(g.xp6(7),g.Q6J("ngModel",r.name),g.xp6(4),g.Q6J("ngModel",r.portrait),g.xp6(4),g.Q6J("ngModel",r.email),g.xp6(4),g.Q6J("ngModel",r.password))},directives:[Pt,cp,S,Mh,Hm,Be,Vd],styles:['.signup[_ngcontent-%COMP%]{margin:auto;background-color:#f0f8ff;width:15%;padding:20px 50px 50px;border-radius:30px;box-shadow:5px 5px 5px #000}.general-signup[_ngcontent-%COMP%]{text-align:center;display:grid}.input[_ngcontent-%COMP%]{padding:1rem}.portrait[_ngcontent-%COMP%]{padding:1rem;height:200px;text-align:left;resize:none}.errorText[_ngcontent-%COMP%]{color:red;font-size:.8rem;display:none}h1[_ngcontent-%COMP%]{text-align:center}.b1[_ngcontent-%COMP%]{background-color:"#fffff";padding:7px;margin:15px;border-radius:5px;border:none}']}),n})();var RI=O(8407);function Ex(){return(0,fr.e)((n,e)=>{let t,r=!1;n.subscribe((0,de.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}var Ct,lV="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},cd={},bx=bx||{},pn=lV||self;function kI(){}function Cx(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function F0(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Ix="closure_uid_"+(1e9*Math.random()>>>0),dV=0;function hV(n,e,t){return n.call.apply(n.bind,arguments)}function fV(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function eo(n,e,t){return(eo=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?hV:fV).apply(null,arguments)}function NI(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function to(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var c=Array(arguments.length-2),p=2;p<arguments.length;p++)c[p-2]=arguments[p];return e.prototype[i].apply(r,c)}}function Nh(){this.s=this.s,this.o=this.o}var gV={};Nh.prototype.s=!1,Nh.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function cV(n){return Object.prototype.hasOwnProperty.call(n,Ix)&&n[Ix]||(n[Ix]=++dV)}(this);delete gV[n]}},Nh.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const iN=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},sN=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function oN(n){return Array.prototype.concat.apply([],arguments)}function Tx(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function OI(n){return/^[\s\xa0]*$/.test(n)}var ta,aN=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function ea(n,e){return-1!=n.indexOf(e)}function Dx(n,e){return n<e?-1:n>e?1:0}e:{var uN=pn.navigator;if(uN){var lN=uN.userAgent;if(lN){ta=lN;break e}}ta=""}function Sx(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function cN(n){const e={};for(const t in n)e[t]=n[t];return e}var dN="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function hN(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<dN.length;a++)t=dN[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Ax(n){return Ax[" "](n),n}Ax[" "]=kI;var LI,n,yV=ea(ta,"Opera"),Jm=ea(ta,"Trident")||ea(ta,"MSIE"),fN=ea(ta,"Edge"),xx=fN||Jm,pN=ea(ta,"Gecko")&&!(ea(ta.toLowerCase(),"webkit")&&!ea(ta,"Edge"))&&!(ea(ta,"Trident")||ea(ta,"MSIE"))&&!ea(ta,"Edge"),vV=ea(ta.toLowerCase(),"webkit")&&!ea(ta,"Edge");function gN(){var n=pn.document;return n?n.documentMode:void 0}e:{var Mx="",Px=(n=ta,pN?/rv:([^\);]+)(\)|;)/.exec(n):fN?/Edge\/([\d\.]+)/.exec(n):Jm?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):vV?/WebKit\/(\S+)/.exec(n):yV?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Px&&(Mx=Px?Px[1]:""),Jm){var Rx=gN();if(null!=Rx&&Rx>parseFloat(Mx)){LI=String(Rx);break e}}LI=Mx}var wV={};var bV=pn.document&&Jm&&(gN()||parseInt(LI,10))||void 0,CV=function(){if(!pn.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{pn.addEventListener("test",kI,e),pn.removeEventListener("test",kI,e)}catch(t){}return n}();function Ao(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function U0(n,e){if(Ao.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(pN){e:{try{Ax(e.nodeName);var i=!0;break e}catch(a){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:IV[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&U0.Z.h.call(this)}}Ao.prototype.h=function(){this.defaultPrevented=!0},to(U0,Ao);var IV={2:"touch",3:"pen",4:"mouse"};U0.prototype.h=function(){U0.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var V0="closure_listenable_"+(1e6*Math.random()|0),TV=0;function DV(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++TV,this.ca=this.fa=!1}function FI(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function UI(n){this.src=n,this.g={},this.h=0}function Nx(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=iN(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(FI(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Ox(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}UI.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var c=Ox(n,e,r,i);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new DV(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var Lx="closure_lm_"+(1e6*Math.random()|0),Fx={};function _N(n,e,t,r,i){if(r&&r.once)return vN(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)_N(n,e[a],t,r,i);return null}return t=jx(t),n&&n[V0]?n.N(e,t,F0(r)?!!r.capture:!!r,i):yN(n,e,t,!1,r,i)}function yN(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var c=F0(i)?!!i.capture:!!i,p=Vx(n);if(p||(n[Lx]=p=new UI(n)),(t=p.add(e,t,r,c,a)).proxy)return t;if(r=function SV(){var e=AV;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)CV||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(EN(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function vN(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)vN(n,e[a],t,r,i);return null}return t=jx(t),n&&n[V0]?n.O(e,t,F0(r)?!!r.capture:!!r,i):yN(n,e,t,!0,r,i)}function wN(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)wN(n,e[a],t,r,i);else r=F0(r)?!!r.capture:!!r,t=jx(t),n&&n[V0]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Ox(a=n.g[e],t,r,i))&&(FI(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=Vx(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Ox(e,t,r,i)),(t=-1<n?e[n]:null)&&Ux(t))}function Ux(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[V0])Nx(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(EN(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Vx(e))?(Nx(t,n),0==t.h&&(t.src=null,e[Lx]=null)):FI(n)}}}function EN(n){return n in Fx?Fx[n]:Fx[n]="on"+n}function AV(n,e){if(n.ca)n=!0;else{e=new U0(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Ux(n),n=t.call(r,e)}return n}function Vx(n){return(n=n[Lx])instanceof UI?n:null}var Bx="__closure_events_fn_"+(1e9*Math.random()>>>0);function jx(n){return"function"==typeof n?n:(n[Bx]||(n[Bx]=function(e){return n.handleEvent(e)}),n[Bx])}function Ds(){Nh.call(this),this.i=new UI(this),this.P=this,this.I=null}function no(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Ao(e,n);else if(e instanceof Ao)e.target=e.target||n;else{var i=e;hN(e=new Ao(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var c=e.g=t[a];i=VI(c,r,!0,e)&&i}if(i=VI(c=e.g=n,r,!0,e)&&i,i=VI(c,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=VI(c=e.g=t[a],r,!1,e)&&i}function VI(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var c=e[a];if(c&&!c.ca&&c.capture==t){var p=c.listener,y=c.ia||c.src;c.fa&&Nx(n.i,c),i=!1!==p.call(y,r)&&i}}return i&&!r.defaultPrevented}to(Ds,Nh),Ds.prototype[V0]=!0,Ds.prototype.removeEventListener=function(n,e,t,r){wN(this,n,e,t,r)},Ds.prototype.M=function(){if(Ds.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)FI(t[r]);delete n.g[e],n.h--}}this.I=null},Ds.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ds.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var zx=pn.JSON.stringify;function xV(){var n=CN;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var $x,bN=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new PV,n=>n.reset());class PV{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function RV(n){pn.setTimeout(()=>{throw n},0)}function Hx(n,e){$x||function kV(){var n=pn.Promise.resolve(void 0);$x=function(){n.then(NV)}}(),Gx||($x(),Gx=!0),CN.add(n,e)}var Gx=!1,CN=new class MV{constructor(){this.h=this.g=null}add(e,t){const r=bN.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function NV(){for(var n;n=xV();){try{n.h.call(n.g)}catch(t){RV(t)}var e=bN;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Gx=!1}function BI(n,e){Ds.call(this),this.h=n||1,this.g=e||pn,this.j=eo(this.kb,this),this.l=Date.now()}function Wx(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function qx(n,e,t){if("function"==typeof n)t&&(n=eo(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=eo(n.handleEvent,n)}return 2147483647<Number(e)?-1:pn.setTimeout(n,e||0)}function IN(n){n.g=qx(()=>{n.g=null,n.i&&(n.i=!1,IN(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}to(BI,Ds),(Ct=BI.prototype).da=!1,Ct.S=null,Ct.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),no(this,"tick"),this.da&&(Wx(this),this.start()))}},Ct.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ct.M=function(){BI.Z.M.call(this),Wx(this),delete this.g};class OV extends Nh{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:IN(this)}M(){super.M(),this.g&&(pn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function B0(n){Nh.call(this),this.h=n,this.g={}}to(B0,Nh);var TN=[];function DN(n,e,t,r){Array.isArray(t)||(t&&(TN[0]=t.toString()),t=TN);for(var i=0;i<t.length;i++){var a=_N(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function SN(n){Sx(n.g,function(e,t){this.g.hasOwnProperty(t)&&Ux(e)},n),n.g={}}function jI(){this.g=!0}function Xm(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function VV(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var c=1;c<i.length;c++)i[c]=""}}}return zx(t)}catch(p){return e}}(n,t)+(r?" "+r:"")})}B0.prototype.M=function(){B0.Z.M.call(this),SN(this)},B0.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},jI.prototype.Aa=function(){this.g=!1},jI.prototype.info=function(){};var gp={},AN=null;function zI(){return AN=AN||new Ds}function xN(n){Ao.call(this,gp.Ma,n)}function j0(n){const e=zI();no(e,new xN(e,n))}function MN(n,e){Ao.call(this,gp.STAT_EVENT,n),this.stat=e}function na(n){const e=zI();no(e,new MN(e,n))}function PN(n,e){Ao.call(this,gp.Na,n),this.size=e}function z0(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return pn.setTimeout(function(){n()},e)}gp.Ma="serverreachability",to(xN,Ao),gp.STAT_EVENT="statevent",to(MN,Ao),gp.Na="timingevent",to(PN,Ao);var HI={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},RN={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Zx(){}function NN(){}Zx.prototype.h=null;var Qx,H0={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Kx(){Ao.call(this,"d")}function Yx(){Ao.call(this,"c")}function $I(){}function $0(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new B0(this),this.P=BV,this.W=new BI(n=xx?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new ON}function ON(){this.i=null,this.g="",this.h=!1}to(Kx,Ao),to(Yx,Ao),to($I,Zx),$I.prototype.g=function(){return new XMLHttpRequest},$I.prototype.i=function(){return{}},Qx=new $I;var BV=45e3,Jx={},GI={};function Xx(n,e,t){n.K=1,n.v=YI(dd(e)),n.s=t,n.U=!0,LN(n,null)}function LN(n,e){n.F=Date.now(),G0(n),n.A=dd(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),GN(t.h,"t",r),n.C=0,t=n.l.H,n.h=new ON,n.g=pO(n.l,t?e:null,!n.s),0<n.O&&(n.L=new OV(eo(n.Ia,n,n.g),n.O)),DN(n.V,n.g,"readystatechange",n.gb),e=n.H?cN(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),j0(1),function LV(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var c="",p=a.split("&"),y=0;y<p.length;y++){var b=p[y].split("=");if(1<b.length){var x=b[0];b=b[1];var R=x.split("_");c=2<=R.length&&"type"==R[1]?c+(x+"=")+b+"&":c+(x+"=redacted&")}}else c=null;else c=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function FN(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function UN(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=jV(n,t),i==GI){4==e&&(n.o=4,na(14),r=!1),Xm(n.j,n.m,null,"[Incomplete Response]");break}if(i==Jx){n.o=4,na(15),Xm(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Xm(n.j,n.m,i,null),eM(n,i)}FN(n)&&i!=GI&&i!=Jx&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,na(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),dM(e),e.L=!0,na(11))):(Xm(n.j,n.m,t,"[Invalid Chunked Response]"),mp(n),W0(n))}function jV(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?GI:(t=Number(e.substring(t,r)),isNaN(t)?Jx:(r+=1)+t>e.length?GI:(e=e.substr(r,t),n.C=r+t,e))}function G0(n){n.Y=Date.now()+n.P,VN(n,n.P)}function VN(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=z0(eo(n.eb,n),e)}function WI(n){n.B&&(pn.clearTimeout(n.B),n.B=null)}function W0(n){0==n.l.G||n.I||cO(n.l,n)}function mp(n){WI(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Wx(n.W),SN(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function eM(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||rM(t.i,n)))if(t.I=n.N,!n.J&&rM(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(b){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=z0(eo(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;nT(t),eT(t)}cM(t),na(18)}if(1>=ZN(t.i)&&t.ka){try{t.ka()}catch(b){}t.ka=void 0}}else vp(t,11)}else if((n.J||t.g==n)&&nT(t),!OI(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let b=i[e];if(t.U=b[0],b=b[1],2==t.G)if("c"==b[0]){t.J=b[1],t.la=b[2];const x=b[3];null!=x&&(t.ma=x,t.h.info("VER="+t.ma));const R=b[4];null!=R&&(t.za=R,t.h.info("SVER="+t.za));const B=b[5];null!=B&&"number"==typeof B&&0<B&&(t.K=r=1.5*B,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const G=n.g;if(G){const J=G.g?G.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(J){var a=r.i;!a.g&&(ea(J,"spdy")||ea(J,"quic")||ea(J,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(iM(a,a.h),a.h=null))}if(r.D){const xe=G.g?G.g.getResponseHeader("X-HTTP-Session-Id"):null;xe&&(r.sa=xe,Zr(r.F,r.D,xe))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=fO(r,r.H?r.la:null,r.W),c.J){KN(r.i,c);var p=c,y=r.K;y&&p.setTimeout(y),p.B&&(WI(p),G0(p)),r.g=c}else uO(r);0<t.l.length&&tT(t)}else"stop"!=b[0]&&"close"!=b[0]||vp(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?vp(t,7):uM(t):"noop"!=b[0]&&t.j&&t.j.wa(b),t.A=0)}j0(4)}catch(b){}}function tM(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Cx(n)||"string"==typeof n)sN(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Cx(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function zV(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Cx(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function e_(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof e_)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function nM(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];_p(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)_p(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function _p(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Ct=$0.prototype).setTimeout=function(n){this.P=n},Ct.gb=function(n){n=n.target;const e=this.L;e&&3==hd(n)?e.l():this.Ia(n)},Ct.Ia=function(n){try{if(n==this.g)e:{const x=hd(this.g);var e=this.g.Da();const R=this.g.ba();if(!(3>x)&&(3!=x||xx||this.g&&(this.h.h||this.g.ga()||rO(this.g)))){this.I||4!=x||7==e||j0(8==e||0>=R?3:2),WI(this);var t=this.g.ba();this.N=t;t:if(FN(this)){var r=rO(this.g);n="";var i=r.length,a=4==hd(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){mp(this),W0(this);var c="";break t}this.h.i=new pn.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function FV(n,e,t,r,i,a,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+c})}(this.j,this.u,this.A,this.m,this.X,x,t),this.i){if(this.$&&!this.J){t:{if(this.g){var p,y=this.g;if((p=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!OI(p)){var b=p;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,na(12),mp(this),W0(this);break e}Xm(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,eM(this,t)}this.U?(UN(this,x,c),xx&&this.i&&3==x&&(DN(this.V,this.W,"tick",this.fb),this.W.start())):(Xm(this.j,this.m,c,null),eM(this,c)),4==x&&mp(this),this.i&&!this.I&&(4==x?cO(this.l,this):(this.i=!1,G0(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,na(12)):(this.o=0,na(13)),mp(this),W0(this)}}}catch(x){}},Ct.fb=function(){if(this.g){var n=hd(this.g),e=this.g.ga();this.C<e.length&&(WI(this),UN(this,n,e),this.i&&4!=n&&G0(this))}},Ct.cancel=function(){this.I=!0,mp(this)},Ct.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function UV(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(j0(3),na(17)),mp(this),this.o=2,W0(this)):VN(this,this.Y-n)},(Ct=e_.prototype).R=function(){nM(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Ct.T=function(){return nM(this),this.g.concat()},Ct.get=function(n,e){return _p(this.h,n)?this.h[n]:e},Ct.set=function(n,e){_p(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Ct.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var BN=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function yp(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof yp){this.g=void 0!==e?e:n.g,qI(this,n.j),this.s=n.s,ZI(this,n.i),KI(this,n.m),this.l=n.l,e=n.h;var t=new K0;t.i=e.i,e.g&&(t.g=new e_(e.g),t.h=e.h),jN(this,t),this.o=n.o}else n&&(t=String(n).match(BN))?(this.g=!!e,qI(this,t[1]||"",!0),this.s=q0(t[2]||""),ZI(this,t[3]||"",!0),KI(this,t[4]),this.l=q0(t[5]||"",!0),jN(this,t[6]||"",!0),this.o=q0(t[7]||"")):(this.g=!!e,this.h=new K0(null,this.g))}function dd(n){return new yp(n)}function qI(n,e,t){n.j=t?q0(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function ZI(n,e,t){n.i=t?q0(e,!0):e}function KI(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function jN(n,e,t){e instanceof K0?(n.h=e,function QV(n,e){e&&!n.j&&(Oh(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(HN(this,r),GN(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Z0(e,KV)),n.h=new K0(e,n.g))}function Zr(n,e,t){n.h.set(e,t)}function YI(n){return Zr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function q0(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Z0(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,WV),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function WV(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}yp.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Z0(e,zN,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Z0(e,zN,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Z0(t,"/"==t.charAt(0)?ZV:qV,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Z0(t,YV)),n.join("")};var zN=/[#\/\?@]/g,qV=/[#\?:]/g,ZV=/[#\?]/g,KV=/[#\?@]/g,YV=/#/g;function K0(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Oh(n){n.g||(n.g=new e_,n.h=0,n.i&&function HV(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function HN(n,e){Oh(n),e=t_(n,e),_p(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,_p((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&nM(n)))}function $N(n,e){return Oh(n),e=t_(n,e),_p(n.g.h,e)}function GN(n,e,t){HN(n,e),0<t.length&&(n.i=null,n.g.set(t_(n,e),Tx(t)),n.h+=t.length)}function t_(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function WN(n){this.l=n||XV,n=pn.PerformanceNavigationTiming?0<(n=pn.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(pn.g&&pn.g.Ea&&pn.g.Ea()&&pn.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ct=K0.prototype).add=function(n,e){Oh(this),this.i=null,n=t_(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ct.forEach=function(n,e){Oh(this),this.g.forEach(function(t,r){sN(t,function(i){n.call(e,i,r,this)},this)},this)},Ct.T=function(){Oh(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},Ct.R=function(n){Oh(this);var e=[];if("string"==typeof n)$N(this,n)&&(e=oN(e,this.g.get(t_(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=oN(e,n[t])}return e},Ct.set=function(n,e){return Oh(this),this.i=null,$N(this,n=t_(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ct.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Ct.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var c=i;""!==r[a]&&(c+="="+encodeURIComponent(String(r[a]))),n.push(c)}}return this.i=n.join("&")};var XV=10;function qN(n){return!!n.h||!!n.g&&n.g.size>=n.j}function ZN(n){return n.h?1:n.g?n.g.size:0}function rM(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function iM(n,e){n.g?n.g.add(e):n.h=e}function KN(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function YN(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Tx(n.i)}function sM(){}function eB(){this.g=new sM}function tB(n,e,t){const r=t||"";try{tM(n,function(i,a){let c=i;F0(i)&&(c=zx(i)),e.push(r+a+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function QI(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(a){}}function Y0(n){this.l=n.$b||null,this.j=n.ib||!1}function JI(n,e){Ds.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=oM,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}WN.prototype.cancel=function(){if(this.i=YN(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},sM.prototype.stringify=function(n){return pn.JSON.stringify(n,void 0)},sM.prototype.parse=function(n){return pn.JSON.parse(n,void 0)},to(Y0,Zx),Y0.prototype.g=function(){return new JI(this.l,this.j)},Y0.prototype.i=function(n){return function(){return n}}({}),to(JI,Ds);var oM=0;function QN(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Q0(n){n.readyState=4,n.l=null,n.j=null,n.A=null,J0(n)}function J0(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ct=JI.prototype).open=function(n,e){if(this.readyState!=oM)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,J0(this)},Ct.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||pn).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Ct.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Q0(this)),this.readyState=oM},Ct.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,J0(this)),this.g&&(this.readyState=3,J0(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==pn.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;QN(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Ct.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Q0(this):J0(this),3==this.readyState&&QN(this)}},Ct.Ua=function(n){this.g&&(this.response=this.responseText=n,Q0(this))},Ct.Ta=function(n){this.g&&(this.response=n,Q0(this))},Ct.ha=function(){this.g&&Q0(this)},Ct.setRequestHeader=function(n,e){this.v.append(n,e)},Ct.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ct.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(JI.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var rB=pn.JSON.parse;function Zi(n){Ds.call(this),this.headers=new e_,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=JN,this.K=this.L=!1}to(Zi,Ds);var JN="",iB=/^https?$/i,sB=["POST","PUT"];function aB(n){return"content-type"==n.toLowerCase()}function XN(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,eO(n),XI(n)}function eO(n){n.D||(n.D=!0,no(n,"complete"),no(n,"error"))}function tO(n){if(n.h&&void 0!==bx&&(!n.C[1]||4!=hd(n)||2!=n.ba()))if(n.v&&4==hd(n))qx(n.Fa,0,n);else if(no(n,"readystatechange"),4==hd(n)){n.h=!1;try{const p=n.ba();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===p){var i=String(n.H).match(BN)[1]||null;if(!i&&pn.self&&pn.self.location){var a=pn.self.location.protocol;i=a.substr(0,a.length-1)}r=!iB.test(i?i.toLowerCase():"")}t=r}if(t)no(n,"complete"),no(n,"success");else{n.m=6;try{var c=2<hd(n)?n.g.statusText:""}catch(y){c=""}n.j=c+" ["+n.ba()+"]",eO(n)}}finally{XI(n)}}}function XI(n,e){if(n.g){nO(n);const t=n.g,r=n.C[0]?kI:null;n.g=null,n.C=null,e||no(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function nO(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(pn.clearTimeout(n.A),n.A=null)}function hd(n){return n.g?n.g.readyState:0}function rO(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case JN:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function aM(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function uB(n){let e="";return Sx(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Zr(n,e,t))}function X0(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function iO(n){this.za=0,this.l=[],this.h=new jI,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=X0("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=X0("baseRetryDelayMs",5e3,n),this.$a=X0("retryDelaySeedMs",1e4,n),this.Ya=X0("forwardChannelMaxRetries",2,n),this.ra=X0("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new WN(n&&n.concurrentRequestLimit),this.Ca=new eB,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function uM(n){if(sO(n),3==n.G){var e=n.V++,t=dd(n.F);Zr(t,"SID",n.J),Zr(t,"RID",e),Zr(t,"TYPE","terminate"),ew(n,t),(e=new $0(n,n.h,e,void 0)).K=2,e.v=YI(dd(t)),t=!1,pn.navigator&&pn.navigator.sendBeacon&&(t=pn.navigator.sendBeacon(e.v.toString(),"")),!t&&pn.Image&&((new Image).src=e.v,t=!0),t||(e.g=pO(e.l,null),e.g.ea(e.v)),e.F=Date.now(),G0(e)}hO(n)}function eT(n){n.g&&(dM(n),n.g.cancel(),n.g=null)}function sO(n){eT(n),n.u&&(pn.clearTimeout(n.u),n.u=null),nT(n),n.i.cancel(),n.m&&("number"==typeof n.m&&pn.clearTimeout(n.m),n.m=null)}function lM(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&tT(n)}function tT(n){qN(n.i)||n.m||(n.m=!0,Hx(n.Ha,n),n.C=0)}function oO(n,e){var t;t=e?e.m:n.V++;const r=dd(n.F);Zr(r,"SID",n.J),Zr(r,"RID",t),Zr(r,"AID",n.U),ew(n,r),n.o&&n.s&&aM(r,n.o,n.s),t=new $0(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=aO(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),iM(n.i,t),Xx(t,r,e)}function ew(n,e){n.j&&tM({},function(t,r){Zr(e,r,t)})}function aO(n,e,t){t=Math.min(n.l.length,t);var r=n.j?eo(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const c=["count="+t];-1==a?0<t?(a=i[0].h,c.push("ofs="+a)):a=0:c.push("ofs="+a);let p=!0;for(let y=0;y<t;y++){let b=i[y].h;const x=i[y].g;if(b-=a,0>b)a=Math.max(0,i[y].h-100),p=!1;else try{tB(x,c,"req"+b+"_")}catch(R){r&&r(x)}}if(p){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function uO(n){n.g||n.u||(n.Y=1,Hx(n.Ga,n),n.A=0)}function cM(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=z0(eo(n.Ga,n),dO(n,n.A)),n.A++,0))}function dM(n){null!=n.B&&(pn.clearTimeout(n.B),n.B=null)}function lO(n){n.g=new $0(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=dd(n.oa);Zr(e,"RID","rpc"),Zr(e,"SID",n.J),Zr(e,"CI",n.N?"0":"1"),Zr(e,"AID",n.U),ew(n,e),Zr(e,"TYPE","xmlhttp"),n.o&&n.s&&aM(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=YI(dd(e)),t.s=null,t.U=!0,LN(t,n)}function nT(n){null!=n.v&&(pn.clearTimeout(n.v),n.v=null)}function cO(n,e){var t=null;if(n.g==e){nT(n),dM(n),n.g=null;var r=2}else{if(!rM(n.i,e))return;t=e.D,KN(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;no(r=zI(),new PN(r,t,e,i)),tT(n)}else uO(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function lB(n,e){return!(ZN(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=z0(eo(n.Ha,n,e),dO(n,n.C)),n.C++,0)))}(n,e)||2==r&&cM(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:vp(n,5);break;case 4:vp(n,10);break;case 3:vp(n,6);break;default:vp(n,2)}}function dO(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function vp(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=eo(n.jb,n);t||(t=new yp("//www.google.com/images/cleardot.gif"),pn.location&&"http"==pn.location.protocol||qI(t,"https"),YI(t)),function nB(n,e){const t=new jI;if(pn.Image){const r=new Image;r.onload=NI(QI,t,r,"TestLoadImage: loaded",!0,e),r.onerror=NI(QI,t,r,"TestLoadImage: error",!1,e),r.onabort=NI(QI,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=NI(QI,t,r,"TestLoadImage: timeout",!1,e),pn.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else na(2);n.G=0,n.j&&n.j.va(e),hO(n),sO(n)}function hO(n){n.G=0,n.I=-1,n.j&&((0!=YN(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Tx(n.l),n.l.length=0),n.j.ua())}function fO(n,e,t){let r=function $V(n){return n instanceof yp?dd(n):new yp(n,void 0)}(t);if(""!=r.i)e&&ZI(r,e+"."+r.i),KI(r,r.m);else{const i=pn.location;r=function GV(n,e,t,r){var i=new yp(null,void 0);return n&&qI(i,n),e&&ZI(i,e),t&&KI(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&Sx(n.aa,function(i,a){Zr(r,a,i)}),t=n.sa,(e=n.D)&&t&&Zr(r,e,t),Zr(r,"VER",n.ma),ew(n,r),r}function pO(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Zi(t&&n.Ba&&!n.qa?new Y0({ib:!0}):n.qa)).L=n.H,e}function gO(){}function rT(){if(Jm&&!(10<=Number(bV)))throw Error("Environmental error: no available transport.")}function uu(n,e){Ds.call(this),this.g=new iO(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!OI(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!OI(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new n_(this)}function mO(n){Kx.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function _O(){Yx.call(this),this.status=1}function n_(n){this.g=n}(Ct=Zi.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Qx.g(),this.C=function kN(n){return n.h||(n.h=n.i())}(this.u?this.u:Qx),this.g.onreadystatechange=eo(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void XN(this,a)}n=t||"";const i=new e_(this.headers);r&&tM(r,function(a,c){i.set(c,a)}),r=function mV(n){e:{var e=aB;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=pn.FormData&&n instanceof pn.FormData,!(0<=iN(sB,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,c){this.g.setRequestHeader(c,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{nO(this),0<this.B&&((this.K=function oB(n){return Jm&&function EV(){return function _V(n){var e=wV;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=aN(String(LI)).split("."),t=aN("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",a=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=Dx(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||Dx(0==i[2].length,0==a[2].length)||Dx(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=eo(this.pa,this)):this.A=qx(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){XN(this,a)}},Ct.pa=function(){void 0!==bx&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,no(this,"timeout"),this.abort(8))},Ct.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,no(this,"complete"),no(this,"abort"),XI(this))},Ct.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),XI(this,!0)),Zi.Z.M.call(this)},Ct.Fa=function(){this.s||(this.F||this.v||this.l?tO(this):this.cb())},Ct.cb=function(){tO(this)},Ct.ba=function(){try{return 2<hd(this)?this.g.status:-1}catch(n){return-1}},Ct.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Ct.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),rB(e)}},Ct.Da=function(){return this.m},Ct.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ct=iO.prototype).ma=8,Ct.G=1,Ct.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Ct.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new $0(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=cN(a),hN(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=aO(this,i,e),Zr(t=dd(this.F),"RID",n),Zr(t,"CVER",22),this.D&&Zr(t,"X-HTTP-Session-Id",this.D),ew(this,t),this.o&&a&&aM(t,this.o,a),iM(this.i,i),this.Ra&&Zr(t,"TYPE","init"),this.ja?(Zr(t,"$req",e),Zr(t,"SID","null"),i.$=!0,Xx(i,t,null)):Xx(i,t,e),this.G=2}}else 3==this.G&&(n?oO(this,n):0==this.l.length||qN(this.i)||oO(this))},Ct.Ga=function(){if(this.u=null,lO(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=z0(eo(this.bb,this),n)}},Ct.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,na(10),eT(this),lO(this))},Ct.ab=function(){null!=this.v&&(this.v=null,eT(this),cM(this),na(19))},Ct.jb=function(n){n?(this.h.info("Successfully pinged google.com"),na(2)):(this.h.info("Failed to ping google.com"),na(1))},(Ct=gO.prototype).xa=function(){},Ct.wa=function(){},Ct.va=function(){},Ct.ua=function(){},Ct.Oa=function(){},rT.prototype.g=function(n,e){return new uu(n,e)},to(uu,Ds),uu.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Hx(eo(n.hb,n,e))),na(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=fO(n,null,n.W),tT(n)},uu.prototype.close=function(){uM(this.g)},uu.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,lM(this.g,e)}else this.v?((e={}).__data__=zx(n),lM(this.g,e)):lM(this.g,n)},uu.prototype.M=function(){this.g.j=null,delete this.j,uM(this.g),delete this.g,uu.Z.M.call(this)},to(mO,Kx),to(_O,Yx),to(n_,gO),n_.prototype.xa=function(){no(this.g,"a")},n_.prototype.wa=function(n){no(this.g,new mO(n))},n_.prototype.va=function(n){no(this.g,new _O(n))},n_.prototype.ua=function(){no(this.g,"b")},rT.prototype.createWebChannel=rT.prototype.g,uu.prototype.send=uu.prototype.u,uu.prototype.open=uu.prototype.m,uu.prototype.close=uu.prototype.close,HI.NO_ERROR=0,HI.TIMEOUT=8,HI.HTTP_ERROR=6,RN.COMPLETE="complete",NN.EventType=H0,H0.OPEN="a",H0.CLOSE="b",H0.ERROR="c",H0.MESSAGE="d",Ds.prototype.listen=Ds.prototype.N,Zi.prototype.listenOnce=Zi.prototype.O,Zi.prototype.getLastError=Zi.prototype.La,Zi.prototype.getLastErrorCode=Zi.prototype.Da,Zi.prototype.getStatus=Zi.prototype.ba,Zi.prototype.getResponseJson=Zi.prototype.Qa,Zi.prototype.getResponseText=Zi.prototype.ga,Zi.prototype.send=Zi.prototype.ea;var cB=cd.createWebChannelTransport=function(){return new rT},dB=cd.getStatEventTarget=function(){return zI()},hM=cd.ErrorCode=HI,hB=cd.EventType=RN,fB=cd.Event=gp,yO=cd.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},pB=cd.FetchXmlHttpFactory=Y0,iT=cd.WebChannel=NN,gB=cd.XhrIo=Zi;const vO="@firebase/firestore";class ro{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ro.UNAUTHENTICATED=new ro(null),ro.GOOGLE_CREDENTIALS=new ro("google-credentials-uid"),ro.FIRST_PARTY=new ro("first-party-uid"),ro.MOCK_USER=new ro("mock-user");let r_="9.8.0";const Lh=new Ja.Yd("@firebase/firestore");function fM(){return Lh.logLevel}function st(n,...e){if(Lh.logLevel<=Ja.in.DEBUG){const t=e.map(pM);Lh.debug(`Firestore (${r_}): ${n}`,...t)}}function Ki(n,...e){if(Lh.logLevel<=Ja.in.ERROR){const t=e.map(pM);Lh.error(`Firestore (${r_}): ${n}`,...t)}}function tw(n,...e){if(Lh.logLevel<=Ja.in.WARN){const t=e.map(pM);Lh.warn(`Firestore (${r_}): ${n}`,...t)}}function pM(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function Dt(n="Unexpected state"){const e=`FIRESTORE (${r_}) INTERNAL ASSERTION FAILED: `+n;throw Ki(e),new Error(e)}function rn(n,e){n||Dt()}function gt(n,e){return n}const Ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ye extends z.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ss{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class wO{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yB{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ro.UNAUTHENTICATED))}shutdown(){}}class vB{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class wB{constructor(e){this.t=e,this.currentUser=ro.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=b=>this.i!==i?(i=this.i,t(b)):Promise.resolve();let c=new Ss;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Ss,e.enqueueRetryable(()=>a(this.currentUser))};const p=()=>{const b=c;e.enqueueRetryable((0,Oe.Z)(function*(){yield b.promise,yield a(r.currentUser)}))},y=b=>{st("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(b=>y(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?y(b):(st("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Ss)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(st("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(rn("string"==typeof r.accessToken),new wO(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return rn(null===e||"string"==typeof e),new ro(e)}}class EB{constructor(e,t,r){this.type="FirstParty",this.user=ro.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class bB{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new EB(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ro.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class EO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class CB{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=a=>{null!=a.error&&st("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.p;return this.p=a.token,st("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{st("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?i(a):st("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(rn("string"==typeof t.token),this.p=t.token,new EO(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class lu{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function IB(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}lu.A=-1;class bO{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=IB(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function bn(n,e){return n<e?-1:n>e?1:0}function i_(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function CO(n){return n+"\0"}class Ni{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ye(Ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ye(Ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ye(Ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ye(Ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ni.fromMillis(Date.now())}static fromDate(e){return Ni.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Ni(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?bn(this.nanoseconds,e.nanoseconds):bn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Yt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Yt(e)}static min(){return new Yt(new Ni(0,0))}static max(){return new Yt(new Ni(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function IO(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function wp(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function TO(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class nw{constructor(e,t,r){void 0===t?t=0:t>e.length&&Dt(),void 0===r?r=e.length-t:r>e.length-t&&Dt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===nw.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof nw?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),c=t.get(i);if(a<c)return-1;if(a>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class jn extends nw{construct(e,t,r){return new jn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ye(Ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new jn(t)}static emptyPath(){return new jn([])}}const TB=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cs extends nw{construct(e,t,r){return new cs(e,t,r)}static isValidIdentifier(e){return TB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cs.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new cs(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Ye(Ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const p=e[i];if("\\"===p){if(i+1===e.length)throw new Ye(Ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[i+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new Ye(Ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,i+=2}else"`"===p?(c=!c,i++):"."!==p||c?(r+=p,i++):(a(),i++)}if(a(),c)throw new Ye(Ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new cs(t)}static emptyPath(){return new cs([])}}class s_{constructor(e){this.fields=e,e.sort(cs.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return i_(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class ds{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new ds(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new ds(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return bn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ds.EMPTY_BYTE_STRING=new ds("");const SB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fh(n){if(rn(!!n),"string"==typeof n){let e=0;const t=SB.exec(n);if(rn(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:vi(n.seconds),nanos:vi(n.nanos)}}function vi(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ep(n){return"string"==typeof n?ds.fromBase64String(n):ds.fromUint8Array(n)}function gM(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function DO(n){const e=n.mapValue.fields.__previous_value__;return gM(e)?DO(e):e}function rw(n){const e=Fh(n.mapValue.fields.__local_write_time__.timestampValue);return new Ni(e.seconds,e.nanos)}class AB{constructor(e,t,r,i,a,c,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=p,this.useFetchStreams=y}}class fd{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new fd("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof fd&&e.projectId===this.projectId&&e.database===this.database}}function iw(n){return null==n}function sw(n){return 0===n&&1/n==-1/0}function SO(n){return"number"==typeof n&&Number.isInteger(n)&&!sw(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class ft{constructor(e){this.path=e}static fromPath(e){return new ft(jn.fromString(e))}static fromName(e){return new ft(jn.fromString(e).popFirst(5))}static empty(){return new ft(jn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===jn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return jn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ft(new jn(e.slice()))}}const Uh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},sT={nullValue:"NULL_VALUE"};function bp(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?gM(n)?4:PO(n)?9007199254740991:10:Dt()}function lc(n,e){if(n===e)return!0;const t=bp(n);if(t!==bp(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return rw(n).isEqual(rw(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=Fh(r.timestampValue),c=Fh(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Ep(n.bytesValue).isEqual(Ep(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return vi(r.geoPointValue.latitude)===vi(i.geoPointValue.latitude)&&vi(r.geoPointValue.longitude)===vi(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return vi(r.integerValue)===vi(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=vi(r.doubleValue),c=vi(i.doubleValue);return a===c?sw(a)===sw(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return i_(n.arrayValue.values||[],e.arrayValue.values||[],lc);case 10:return function(r,i){const a=r.mapValue.fields||{},c=i.mapValue.fields||{};if(IO(a)!==IO(c))return!1;for(const p in a)if(a.hasOwnProperty(p)&&(void 0===c[p]||!lc(a[p],c[p])))return!1;return!0}(n,e);default:return Dt()}var i}function ow(n,e){return void 0!==(n.values||[]).find(t=>lc(t,e))}function Vh(n,e){if(n===e)return 0;const t=bp(n),r=bp(e);if(t!==r)return bn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return bn(n.booleanValue,e.booleanValue);case 2:return function(i,a){const c=vi(i.integerValue||i.doubleValue),p=vi(a.integerValue||a.doubleValue);return c<p?-1:c>p?1:c===p?0:isNaN(c)?isNaN(p)?0:-1:1}(n,e);case 3:return AO(n.timestampValue,e.timestampValue);case 4:return AO(rw(n),rw(e));case 5:return bn(n.stringValue,e.stringValue);case 6:return function(i,a){const c=Ep(i),p=Ep(a);return c.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),p=a.split("/");for(let y=0;y<c.length&&y<p.length;y++){const b=bn(c[y],p[y]);if(0!==b)return b}return bn(c.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const c=bn(vi(i.latitude),vi(a.latitude));return 0!==c?c:bn(vi(i.longitude),vi(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const c=i.values||[],p=a.values||[];for(let y=0;y<c.length&&y<p.length;++y){const b=Vh(c[y],p[y]);if(b)return b}return bn(c.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===Uh.mapValue&&a===Uh.mapValue)return 0;if(i===Uh.mapValue)return 1;if(a===Uh.mapValue)return-1;const c=i.fields||{},p=Object.keys(c),y=a.fields||{},b=Object.keys(y);p.sort(),b.sort();for(let x=0;x<p.length&&x<b.length;++x){const R=bn(p[x],b[x]);if(0!==R)return R;const B=Vh(c[p[x]],y[b[x]]);if(0!==B)return B}return bn(p.length,b.length)}(n.mapValue,e.mapValue);default:throw Dt()}}function AO(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return bn(n,e);const t=Fh(n),r=Fh(e),i=bn(t.seconds,r.seconds);return 0!==i?i:bn(t.nanos,r.nanos)}function o_(n){return mM(n)}function mM(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Fh(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ep(n.bytesValue).toBase64():"referenceValue"in n?ft.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const c of r.values||[])a?a=!1:i+=",",i+=mM(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",c=!0;for(const p of i)c?c=!1:a+=",",a+=`${p}:${mM(r.fields[p])}`;return a+"}"}(n.mapValue):Dt();var e}function Cp(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function _M(n){return!!n&&"integerValue"in n}function aw(n){return!!n&&"arrayValue"in n}function xO(n){return!!n&&"nullValue"in n}function MO(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function oT(n){return!!n&&"mapValue"in n}function uw(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return wp(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=uw(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=uw(n.arrayValue.values[t]);return e}return Object.assign({},n)}function PO(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function xB(n){return"nullValue"in n?sT:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Cp(fd.empty(),ft.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Dt()}function MB(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Cp(fd.empty(),ft.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Uh:Dt()}function RO(n,e){const t=Vh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function kO(n,e){const t=Vh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class xo{constructor(e){this.value=e}static empty(){return new xo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!oT(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=uw(t)}setAll(e){let t=cs.emptyPath(),r={},i=[];e.forEach((c,p)=>{if(!t.isImmediateParentOf(p)){const y=this.getFieldsMap(t);this.applyChanges(y,r,i),r={},i=[],t=p.popLast()}c?r[p.lastSegment()]=uw(c):i.push(p.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());oT(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return lc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];oT(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){wp(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new xo(uw(this.value))}}function NO(n){const e=[];return wp(n.fields,(t,r)=>{const i=new cs([t]);if(oT(r)){const a=NO(r.mapValue).fields;if(0===a.length)e.push(i);else for(const c of a)e.push(i.child(c))}else e.push(i)}),new s_(e)}class Vr{constructor(e,t,r,i,a,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=c}static newInvalidDocument(e){return new Vr(e,0,Yt.min(),Yt.min(),xo.empty(),0)}static newFoundDocument(e,t,r){return new Vr(e,1,t,Yt.min(),r,0)}static newNoDocument(e,t){return new Vr(e,2,t,Yt.min(),xo.empty(),0)}static newUnknownDocument(e,t){return new Vr(e,3,t,Yt.min(),xo.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Vr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class aT{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function yM(n){return n.fields.find(e=>2===e.kind)}function Ip(n){return n.fields.filter(e=>2!==e.kind)}aT.UNKNOWN_ID=-1;class uT{constructor(e,t){this.fieldPath=e,this.kind=t}}class lw{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new lw(0,gl.min())}}function OO(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Yt.fromTimestamp(1e9===r?new Ni(t+1,0):new Ni(t,r));return new gl(i,ft.empty(),e)}function PB(n){return new gl(n.readTime,n.key,-1)}class gl{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new gl(Yt.min(),ft.empty(),-1)}static max(){return new gl(Yt.max(),ft.empty(),-1)}}function LO(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=ft.comparator(n.documentKey,e.documentKey),0!==t?t:bn(n.largestBatchId,e.largestBatchId))}class Oi{constructor(e,t){this.comparator=e,this.root=t||io.EMPTY}insert(e,t){return new Oi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,io.BLACK,null,null))}remove(e){return new Oi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,io.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lT(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lT(this.root,e,this.comparator,!1)}getReverseIterator(){return new lT(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lT(this.root,e,this.comparator,!0)}}class lT{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class io{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=null!=r?r:io.RED,this.left=null!=i?i:io.EMPTY,this.right=null!=a?a:io.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new io(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return io.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return io.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,io.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,io.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Dt();const e=this.left.check();if(e!==this.right.check())throw Dt();return e+(this.isRed()?0:1)}}io.EMPTY=null,io.RED=!0,io.BLACK=!1,io.EMPTY=new class{constructor(){this.size=0}get key(){throw Dt()}get value(){throw Dt()}get color(){throw Dt()}get left(){throw Dt()}get right(){throw Dt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new io(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Lr{constructor(e){this.comparator=e,this.data=new Oi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new FO(this.data.getIterator())}getIteratorFrom(e){return new FO(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Lr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Lr(this.comparator);return t.data=e,t}}class FO{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function a_(n){return n.hasNext()?n.getNext():void 0}class RB{constructor(e,t=null,r=[],i=[],a=null,c=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=c,this.endAt=p,this.P=null}}function UO(n,e=null,t=[],r=[],i=null,a=null,c=null){return new RB(n,e,t,r,i,a,c)}function Tp(n){const e=gt(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+o_(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),iw(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>o_(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>o_(r)).join(",")),e.P=t}return e.P}function cw(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!jB(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!lc(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!HO(n.startAt,e.startAt)&&HO(n.endAt,e.endAt)}function cT(n){return ft.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function dT(n,e){return n.filters.filter(t=>t instanceof so&&t.field.isEqual(e))}function VO(n,e,t){let r=sT,i=!0;for(const a of dT(n,e)){let c=sT,p=!0;switch(a.op){case"<":case"<=":c=xB(a.value);break;case"==":case"in":case">=":c=a.value;break;case">":c=a.value,p=!1;break;case"!=":case"not-in":c=sT}RO({value:r,inclusive:i},{value:c,inclusive:p})<0&&(r=c,i=p)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const c=t.position[a];RO({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function BO(n,e,t){let r=Uh,i=!0;for(const a of dT(n,e)){let c=Uh,p=!0;switch(a.op){case">=":case">":c=MB(a.value),p=!1;break;case"==":case"in":case"<=":c=a.value;break;case"<":c=a.value,p=!1;break;case"!=":case"not-in":c=Uh}kO({value:r,inclusive:i},{value:c,inclusive:p})>0&&(r=c,i=p)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const c=t.position[a];kO({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class so extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new NB(e,t,r):"array-contains"===t?new FB(e,r):"in"===t?new UB(e,r):"not-in"===t?new VB(e,r):"array-contains-any"===t?new BB(e,r):new so(e,t,r)}static V(e,t,r){return"in"===t?new OB(e,r):new LB(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Vh(t,this.value)):null!==t&&bp(this.value)===bp(t)&&this.v(Vh(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Dt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class NB extends so{constructor(e,t,r){super(e,t,r),this.key=ft.fromName(r.referenceValue)}matches(e){const t=ft.comparator(e.key,this.key);return this.v(t)}}class OB extends so{constructor(e,t){super(e,"in",t),this.keys=jO(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class LB extends so{constructor(e,t){super(e,"not-in",t),this.keys=jO(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function jO(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>ft.fromName(r.referenceValue))}class FB extends so{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return aw(t)&&ow(t.arrayValue,this.value)}}class UB extends so{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ow(this.value.arrayValue,t)}}class VB extends so{constructor(e,t){super(e,"not-in",t)}matches(e){if(ow(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!ow(this.value.arrayValue,t)}}class BB extends so{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!aw(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ow(this.value.arrayValue,r))}}class Bh{constructor(e,t){this.position=e,this.inclusive=t}}class u_{constructor(e,t="asc"){this.field=e,this.dir=t}}function jB(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function zO(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],c=n.position[i];if(r=a.field.isKeyField()?ft.comparator(ft.fromName(c.referenceValue),t.key):Vh(c,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function HO(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!lc(n.position[t],e.position[t]))return!1;return!0}class pd{constructor(e,t=null,r=[],i=[],a=null,c="F",p=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=c,this.startAt=p,this.endAt=y,this.D=null,this.C=null}}function $O(n,e,t,r,i,a,c,p){return new pd(n,e,t,r,i,a,c,p)}function l_(n){return new pd(n)}function vM(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function wM(n){for(const e of n.filters)if(e.S())return e.field;return null}function EM(n){return null!==n.collectionGroup}function c_(n){const e=gt(n);if(null===e.D){e.D=[];const t=wM(e),r=vM(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new u_(t)),e.D.push(new u_(cs.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.D.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new u_(cs.keyField(),a))}}}return e.D}function ju(n){const e=gt(n);if(!e.C)if("F"===e.limitType)e.C=UO(e.path,e.collectionGroup,c_(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of c_(e))t.push(new u_(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Bh(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Bh(e.startAt.position,e.startAt.inclusive):null;e.C=UO(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function GO(n,e,t){return new pd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function dw(n,e){return cw(ju(n),ju(e))&&n.limitType===e.limitType}function WO(n){return`${Tp(ju(n))}|lt:${n.limitType}`}function bM(n){return`Query(target=${function kB(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${o_(r.value)}`;var r}).join(", ")}]`),iw(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>o_(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>o_(t)).join(",")),`Target(${e})`}(ju(n))}; limitType=${n.limitType})`}function CM(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):ft.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,c){const p=zO(i,a,c);return i.inclusive?p<=0:p<0}(t.startAt,c_(t),r)||t.endAt&&!function(i,a,c){const p=zO(i,a,c);return i.inclusive?p>=0:p>0}(t.endAt,c_(t),r)));var t,r}function qO(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function ZO(n){return(e,t)=>{let r=!1;for(const i of c_(n)){const a=HB(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function HB(n,e,t){const r=n.field.isKeyField()?ft.comparator(e.key,t.key):function(i,a,c){const p=a.data.field(i),y=c.data.field(i);return null!==p&&null!==y?Vh(p,y):Dt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Dt()}}function KO(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sw(e)?"-0":e}}function YO(n){return{integerValue:""+n}}function QO(n,e){return SO(e)?YO(e):KO(n,e)}class hT{constructor(){this._=void 0}}function $B(n,e,t){return n instanceof d_?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Dp?XO(n,e):n instanceof Sp?e1(n,e):function(r,i){const a=JO(r,i),c=t1(a)+t1(r.k);return _M(a)&&_M(r.k)?YO(c):KO(r.M,c)}(n,e)}function GB(n,e,t){return n instanceof Dp?XO(n,e):n instanceof Sp?e1(n,e):t}function JO(n,e){return n instanceof h_?_M(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class d_ extends hT{}class Dp extends hT{constructor(e){super(),this.elements=e}}function XO(n,e){const t=n1(e);for(const r of n.elements)t.some(i=>lc(i,r))||t.push(r);return{arrayValue:{values:t}}}class Sp extends hT{constructor(e){super(),this.elements=e}}function e1(n,e){let t=n1(e);for(const r of n.elements)t=t.filter(i=>!lc(i,r));return{arrayValue:{values:t}}}class h_ extends hT{constructor(e,t){super(),this.M=e,this.k=t}}function t1(n){return vi(n.integerValue||n.doubleValue)}function n1(n){return aw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class hw{constructor(e,t){this.field=e,this.transform=t}}class qB{constructor(e,t){this.version=e,this.transformResults=t}}class Yi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Yi}static exists(e){return new Yi(void 0,e)}static updateTime(e){return new Yi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fT(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class pT{}function ZB(n,e,t){n instanceof fw?function(r,i,a){const c=r.value.clone(),p=o1(r.fieldTransforms,i,a.transformResults);c.setAll(p),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Ap?function(r,i,a){if(!fT(r.precondition,i))return void i.convertToUnknownDocument(a.version);const c=o1(r.fieldTransforms,i,a.transformResults),p=i.data;p.setAll(s1(r)),p.setAll(c),i.convertToFoundDocument(a.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function IM(n,e,t){var i;n instanceof fw?function(r,i,a){if(!fT(r.precondition,i))return;const c=r.value.clone(),p=a1(r.fieldTransforms,a,i);c.setAll(p),i.convertToFoundDocument(i1(i),c).setHasLocalMutations()}(n,e,t):n instanceof Ap?function(r,i,a){if(!fT(r.precondition,i))return;const c=a1(r.fieldTransforms,a,i),p=i.data;p.setAll(s1(r)),p.setAll(c),i.convertToFoundDocument(i1(i),p).setHasLocalMutations()}(n,e,t):fT(n.precondition,i=e)&&i.convertToNoDocument(Yt.min())}function KB(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=JO(r.transform,i||null);null!=a&&(null==t&&(t=xo.empty()),t.set(r.field,a))}return t||null}function r1(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&i_(t,r,(i,a)=>function WB(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Dp&&r instanceof Dp||t instanceof Sp&&r instanceof Sp?i_(t.elements,r.elements,lc):t instanceof h_&&r instanceof h_?lc(t.k,r.k):t instanceof d_&&r instanceof d_);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function i1(n){return n.isFoundDocument()?n.version:Yt.min()}class fw extends pT{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class Ap extends pT{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}}function s1(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function o1(n,e,t){const r=new Map;rn(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],c=a.transform,p=e.data.field(a.field);r.set(a.field,GB(c,p,t[i]))}return r}function a1(n,e,t){const r=new Map;for(const i of n){const a=i.transform,c=t.data.field(i.field);r.set(i.field,$B(a,c,e))}return r}class pw extends pT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class TM extends pT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class YB{constructor(e){this.count=e}}var Qi,zn;function u1(n){switch(n){default:return Dt();case Ae.CANCELLED:case Ae.UNKNOWN:case Ae.DEADLINE_EXCEEDED:case Ae.RESOURCE_EXHAUSTED:case Ae.INTERNAL:case Ae.UNAVAILABLE:case Ae.UNAUTHENTICATED:return!1;case Ae.INVALID_ARGUMENT:case Ae.NOT_FOUND:case Ae.ALREADY_EXISTS:case Ae.PERMISSION_DENIED:case Ae.FAILED_PRECONDITION:case Ae.ABORTED:case Ae.OUT_OF_RANGE:case Ae.UNIMPLEMENTED:case Ae.DATA_LOSS:return!0}}function l1(n){if(void 0===n)return Ki("GRPC error has no .code"),Ae.UNKNOWN;switch(n){case Qi.OK:return Ae.OK;case Qi.CANCELLED:return Ae.CANCELLED;case Qi.UNKNOWN:return Ae.UNKNOWN;case Qi.DEADLINE_EXCEEDED:return Ae.DEADLINE_EXCEEDED;case Qi.RESOURCE_EXHAUSTED:return Ae.RESOURCE_EXHAUSTED;case Qi.INTERNAL:return Ae.INTERNAL;case Qi.UNAVAILABLE:return Ae.UNAVAILABLE;case Qi.UNAUTHENTICATED:return Ae.UNAUTHENTICATED;case Qi.INVALID_ARGUMENT:return Ae.INVALID_ARGUMENT;case Qi.NOT_FOUND:return Ae.NOT_FOUND;case Qi.ALREADY_EXISTS:return Ae.ALREADY_EXISTS;case Qi.PERMISSION_DENIED:return Ae.PERMISSION_DENIED;case Qi.FAILED_PRECONDITION:return Ae.FAILED_PRECONDITION;case Qi.ABORTED:return Ae.ABORTED;case Qi.OUT_OF_RANGE:return Ae.OUT_OF_RANGE;case Qi.UNIMPLEMENTED:return Ae.UNIMPLEMENTED;case Qi.DATA_LOSS:return Ae.DATA_LOSS;default:return Dt()}}(zn=Qi||(Qi={}))[zn.OK=0]="OK",zn[zn.CANCELLED=1]="CANCELLED",zn[zn.UNKNOWN=2]="UNKNOWN",zn[zn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zn[zn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zn[zn.NOT_FOUND=5]="NOT_FOUND",zn[zn.ALREADY_EXISTS=6]="ALREADY_EXISTS",zn[zn.PERMISSION_DENIED=7]="PERMISSION_DENIED",zn[zn.UNAUTHENTICATED=16]="UNAUTHENTICATED",zn[zn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zn[zn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zn[zn.ABORTED=10]="ABORTED",zn[zn.OUT_OF_RANGE=11]="OUT_OF_RANGE",zn[zn.UNIMPLEMENTED=12]="UNIMPLEMENTED",zn[zn.INTERNAL=13]="INTERNAL",zn[zn.UNAVAILABLE=14]="UNAVAILABLE",zn[zn.DATA_LOSS=15]="DATA_LOSS";class jh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){wp(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return TO(this.inner)}size(){return this.innerSize}}const QB=new Oi(ft.comparator);function zu(){return QB}const JB=new Oi(ft.comparator);function DM(...n){let e=JB;for(const t of n)e=e.insert(t.key,t);return e}function gw(){return new jh(n=>n.toString(),(n,e)=>n.isEqual(e))}const XB=new Oi(ft.comparator),e2=new Lr(ft.comparator);function sr(...n){let e=e2;for(const t of n)e=e.add(t);return e}const t2=new Lr(bn);function gT(){return t2}class mw{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,_w.createSynthesizedTargetChangeForCurrentChange(e,t)),new mw(Yt.min(),r,gT(),zu(),sr())}}class _w{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new _w(ds.EMPTY_BYTE_STRING,t,sr(),sr(),sr())}}class mT{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class c1{constructor(e,t){this.targetId=e,this.$=t}}class d1{constructor(e,t,r=ds.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class h1{constructor(){this.B=0,this.L=p1(),this.U=ds.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=sr(),t=sr(),r=sr();return this.L.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Dt()}}),new _w(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=p1()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class n2{constructor(e){this.nt=e,this.st=new Map,this.it=zu(),this.rt=f1(),this.ot=new Lr(bn)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:Dt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const a=i.target;if(cT(a))if(0===r){const c=new ft(a.path);this.ct(t,c,Vr.newNoDocument(c,Yt.min()))}else rn(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((a,c)=>{const p=this.wt(c);if(p){if(a.current&&cT(p.target)){const y=new ft(p.target.path);null!==this.it.get(y)||this.It(c,y)||this.ct(c,y,Vr.newNoDocument(y,e))}a.j&&(t.set(c,a.H()),a.J())}});let r=sr();this.rt.forEach((a,c)=>{let p=!0;c.forEachWhile(y=>{const b=this.wt(y);return!b||2===b.purpose||(p=!1,!1)}),p&&(r=r.add(a))}),this.it.forEach((a,c)=>c.setReadTime(e));const i=new mw(e,t,this.ot,this.it,r);return this.it=zu(),this.rt=f1(),this.ot=new Lr(bn),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new h1,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Lr(bn),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||st("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new h1),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function f1(){return new Oi(ft.comparator)}function p1(){return new Oi(ft.comparator)}const r2={asc:"ASCENDING",desc:"DESCENDING"},i2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class s2{constructor(e,t){this.databaseId=e,this.N=t}}function yw(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function g1(n,e){return n.N?e.toBase64():e.toUint8Array()}function o2(n,e){return yw(n,e.toTimestamp())}function As(n){return rn(!!n),Yt.fromTimestamp(function(e){const t=Fh(e);return new Ni(t.seconds,t.nanos)}(n))}function SM(n,e){return(t=n,new jn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function m1(n){const e=jn.fromString(n);return rn(T1(e)),e}function vw(n,e){return SM(n.databaseId,e.path)}function cc(n,e){const t=m1(e);if(t.get(1)!==n.databaseId.projectId)throw new Ye(Ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ye(Ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ft(y1(t))}function AM(n,e){return SM(n.databaseId,e)}function _1(n){const e=m1(n);return 4===e.length?jn.emptyPath():y1(e)}function ww(n){return new jn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function y1(n){return rn(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function v1(n,e,t){return{name:vw(n,e),fields:t.value.mapValue.fields}}function w1(n,e,t){const r=cc(n,e.name),i=As(e.updateTime),a=new xo({mapValue:{fields:e.fields}}),c=Vr.newFoundDocument(r,i,a);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function Ew(n,e){let t;if(e instanceof fw)t={update:v1(n,e.key,e.value)};else if(e instanceof pw)t={delete:vw(n,e.key)};else if(e instanceof Ap)t={update:v1(n,e.key,e.data),updateMask:g2(e.fieldMask)};else{if(!(e instanceof TM))return Dt();t={verify:vw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof d_)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Dp)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Sp)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof h_)return{fieldPath:a.field.canonicalString(),increment:c.k};throw Dt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:o2(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:Dt()),t;var i}function xM(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Yi.updateTime(As(i.updateTime)):void 0!==i.exists?Yi.exists(i.exists):Yi.none():Yi.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,c){let p=null;"setToServerValue"in c?(rn("REQUEST_TIME"===c.setToServerValue),p=new d_):"appendMissingElements"in c?p=new Dp(c.appendMissingElements.values||[]):"removeAllFromArray"in c?p=new Sp(c.removeAllFromArray.values||[]):"increment"in c?p=new h_(a,c.increment):Dt();const y=cs.fromServerFormat(c.fieldPath);return new hw(y,p)}(n,i)):[];var i;if(e.update){const i=cc(n,e.update.name),a=new xo({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new s_((e.updateMask.fieldPaths||[]).map(b=>cs.fromServerFormat(b)));return new Ap(i,a,c,t,r)}return new fw(i,a,t,r)}if(e.delete){const i=cc(n,e.delete);return new pw(i,t)}if(e.verify){const i=cc(n,e.verify);return new TM(i,t)}return Dt()}function E1(n,e){return{documents:[AM(n,e.path)]}}function b1(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=AM(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=AM(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(y){if(0===y.length)return;const b=y.map(x=>function(R){if("=="===R.op){if(MO(R.value))return{unaryFilter:{field:f_(R.field),op:"IS_NAN"}};if(xO(R.value))return{unaryFilter:{field:f_(R.field),op:"IS_NULL"}}}else if("!="===R.op){if(MO(R.value))return{unaryFilter:{field:f_(R.field),op:"IS_NOT_NAN"}};if(xO(R.value))return{unaryFilter:{field:f_(R.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:f_(R.field),op:h2(R.op),value:R.value}}}(x));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(y){if(0!==y.length)return y.map(b=>{return{field:f_((x=b).field),direction:d2(x.dir)};var x})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=(b=e.limit,n.N||iw(b)?b:{value:b});var b,p,y;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(t.structuredQuery.endAt={before:!(y=e.endAt).inclusive,values:y.position}),t}function C1(n){let e=_1(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){rn(1===r);const x=t.from[0];x.allDescendants?i=x.collectionId:e=e.child(x.collectionId)}let a=[];t.where&&(a=I1(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(x=>{return new u_(p_((R=x).field),function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction));var R}));let p=null;t.limit&&(p=function(x){let R;return R="object"==typeof x?x.value:x,iw(R)?null:R}(t.limit));let y=null;var x;t.startAt&&(y=new Bh((x=t.startAt).values||[],!!x.before));let b=null;return t.endAt&&(b=function(x){return new Bh(x.values||[],!x.before)}(t.endAt)),$O(e,i,c,a,p,"F",y,b)}function I1(n){return n?void 0!==n.unaryFilter?[p2(n)]:void 0!==n.fieldFilter?[f2(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>I1(e)).reduce((e,t)=>e.concat(t)):Dt():[]}function d2(n){return r2[n]}function h2(n){return i2[n]}function f_(n){return{fieldPath:n.canonicalString()}}function p_(n){return cs.fromServerFormat(n.fieldPath)}function f2(n){return so.create(p_(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Dt()}}(n.fieldFilter.op),n.fieldFilter.value)}function p2(n){switch(n.unaryFilter.op){case"IS_NAN":const e=p_(n.unaryFilter.field);return so.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=p_(n.unaryFilter.field);return so.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=p_(n.unaryFilter.field);return so.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=p_(n.unaryFilter.field);return so.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Dt()}}function g2(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function T1(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function ra(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=D1(e)),e=m2(n.get(t),e);return D1(e)}function m2(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function D1(n){return n+"\x01\x01"}function dc(n){const e=n.length;if(rn(e>=2),2===e)return rn("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),jn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const c=n.indexOf("\x01",a);switch((c<0||c>t)&&Dt(),n.charAt(c+1)){case"\x01":const p=n.substring(a,c);let y;0===i.length?y=p:(i+=p,y=i,i=""),r.push(y);break;case"\x10":i+=n.substring(a,c),i+="\0";break;case"\x11":i+=n.substring(a,c+1);break;default:Dt()}a=c+2}return new jn(r)}const S1=["userId","batchId"];function _T(n,e){return[n,ra(e)]}function A1(n,e,t){return[n,ra(e),t]}const _2={},y2=["prefixPath","collectionGroup","readTime","documentId"],v2=["prefixPath","collectionGroup","documentId"],w2=["collectionGroup","readTime","prefixPath","documentId"],E2=["canonicalId","targetId"],b2=["targetId","path"],C2=["path","targetId"],I2=["collectionId","parent"],T2=["indexId","uid"],D2=["uid","sequenceNumber"],S2=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],A2=["indexId","uid","orderedDocumentKey"],x2=["userId","collectionPath","documentId"],M2=["userId","collectionPath","largestBatchId"],P2=["userId","collectionGroup","largestBatchId"],x1=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],R2=[...x1,"documentOverlays"],M1=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],k2=[...M1,"indexConfiguration","indexState","indexEntries"],P1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class R1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class Me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Dt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Me((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Me?t:Me.resolve(t)}catch(t){return Me.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Me.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Me.reject(t)}static resolve(e){return new Me((t,r)=>{t(e)})}static reject(e){return new Me((t,r)=>{r(e)})}static waitFor(e){return new Me((t,r)=>{let i=0,a=0,c=!1;e.forEach(p=>{++i,p.next(()=>{++a,c&&a===i&&t()},y=>r(y))}),c=!0,a===i&&t()})}static or(e){let t=Me.resolve(!1);for(const r of e)t=t.next(i=>i?Me.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}}class yT{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Ss,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new bw(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=MM(r.target.error);this.At.reject(new bw(e,i))}}static open(e,t,r,i){try{return new yT(t,e.transaction(i,r))}catch(a){throw new bw(t,a)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(st("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new O2(t)}}class ml{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===ml.Vt((0,z.z$)())&&Ki("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return st("SimpleDb","Removing database:",e),Mp(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,z.hl)())return!1;if(ml.St())return!0;const e=(0,z.z$)(),t=ml.Vt(e),r=0<t&&t<10,i=ml.Dt(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,Oe.Z)(function*(){return t.db||(st("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=c=>{r(c.target.result)},a.onblocked=()=>{i(new bw(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=c=>{const p=c.target.error;i("VersionError"===p.name?new Ye(Ae.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new Ye(Ae.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new bw(e,p))},a.onupgradeneeded=c=>{st("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.Pt.kt(c.target.result,a.transaction,c.oldVersion,t.version).next(()=>{st("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,Oe.Z)(function*(){const c="readonly"===t;let p=0;for(;;){++p;try{a.db=yield a.Nt(e);const y=yT.open(a.db,e,c?"readonly":"readwrite",r),b=i(y).next(x=>(y.bt(),x)).catch(x=>(y.abort(x),Me.reject(x))).toPromise();return b.catch(()=>{}),yield y.Rt,b}catch(y){const b="FirebaseError"!==y.name&&p<3;if(st("SimpleDb","Transaction failed with error:",y.message,"Retrying:",b),a.close(),!b)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class N2{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Mp(this.Ft.delete())}}class bw extends Ye{constructor(e,t){super(Ae.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function xp(n){return"IndexedDbTransactionError"===n.name}class O2{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(st("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(st("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Mp(r)}add(e){return st("SimpleDb","ADD",this.store.name,e,e),Mp(this.store.add(e))}get(e){return Mp(this.store.get(e)).next(t=>(void 0===t&&(t=null),st("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return st("SimpleDb","DELETE",this.store.name,e),Mp(this.store.delete(e))}count(){return st("SimpleDb","COUNT",this.store.name),Mp(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.Kt(i,(c,p)=>{a.push(p)}).next(()=>a)}{const i=this.store.getAll(r.range);return new Me((a,c)=>{i.onerror=p=>{c(p.target.error)},i.onsuccess=p=>{a(p.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new Me((i,a)=>{r.onerror=c=>{a(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Qt(e,t){st("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(a,c,p)=>p.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Kt(i,t)}zt(e){const t=this.cursor({});return new Me((r,i)=>{t.onerror=a=>{const c=MM(a.target.error);i(c)},t.onsuccess=a=>{const c=a.target.result;c?e(c.primaryKey,c.value).next(p=>{p?c.continue():r()}):r()}})}Kt(e,t){const r=[];return new Me((i,a)=>{e.onerror=c=>{a(c.target.error)},e.onsuccess=c=>{const p=c.target.result;if(!p)return void i();const y=new N2(p),b=t(p.primaryKey,p.value,y);if(b instanceof Me){const x=b.catch(R=>(y.done(),Me.reject(R)));r.push(x)}y.isDone?i():null===y.Lt?p.continue():p.continue(y.Lt)}}).next(()=>Me.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Mp(n){return new Me((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=MM(r.target.error);t(i)}})}let k1=!1;function MM(n){const e=ml.Vt((0,z.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ye("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return k1||(k1=!0,setTimeout(()=>{throw r},0)),r}}return n}class N1 extends R1{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function xs(n,e){const t=gt(n);return ml.xt(t.Ht,e)}class PM{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&ZB(a,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&IM(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&IM(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Yt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),sr())}isEqual(e){return this.batchId===e.batchId&&i_(this.mutations,e.mutations,(t,r)=>r1(t,r))&&i_(this.baseMutations,e.baseMutations,(t,r)=>r1(t,r))}}class RM{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){rn(e.mutations.length===r.length);let i=XB;const a=e.mutations;for(let c=0;c<a.length;c++)i=i.insert(a[c].key,r[c].version);return new RM(e,t,r,i)}}class kM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class zh{constructor(e,t,r,i,a=Yt.min(),c=Yt.min(),p=ds.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=p}withSequenceNumber(e){return new zh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new zh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new zh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class O1{constructor(e){this.Jt=e}}function L1(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:vT(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:vw(i=n.Jt,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:yw(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Pp(e.version)};else{if(!e.isUnknownDocument())return Dt();r.unknownDocument={path:t.path.toArray(),version:Pp(e.version)}}var i,a;return r}function vT(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Pp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Rp(n){const e=new Ni(n.seconds,n.nanoseconds);return Yt.fromTimestamp(e)}function g_(n,e){const t=(e.baseMutations||[]).map(a=>xM(n.Jt,a));for(let a=0;a<e.mutations.length-1;++a){const c=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(c.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>xM(n.Jt,a)),i=Ni.fromMillis(e.localWriteTimeMs);return new PM(e.batchId,i,t,r)}function Cw(n){const e=Rp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Rp(n.lastLimboFreeSnapshotVersion):Yt.min();let r;var i;return void 0!==n.query.documents?(rn(1===(i=n.query).documents.length),r=ju(l_(_1(i.documents[0])))):r=ju(C1(n.query)),new zh(r,n.targetId,0,n.lastListenSequenceNumber,e,t,ds.fromBase64String(n.resumeToken))}function F1(n,e){const t=Pp(e.snapshotVersion),r=Pp(e.lastLimboFreeSnapshotVersion);let i;i=cT(e.target)?E1(n.Jt,e.target):b1(n.Jt,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Tp(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function NM(n){const e=C1({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?GO(e,e.limit,"L"):e}function OM(n,e){return new kM(e.largestBatchId,xM(n.Jt,e.overlayMutation))}function U1(n,e){const t=e.path.lastSegment();return[n,ra(e.path.popLast()),t]}class F2{getBundleMetadata(e,t){return V1(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Rp(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return V1(e).put({bundleId:(r=t).id,createTime:Pp(As(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return B1(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:NM(i.bundledQuery),readTime:Rp(i.readTime)};var i})}saveNamedQuery(e,t){return B1(e).put({name:(r=t).name,readTime:Pp(As(r.readTime)),bundledQuery:r.bundledQuery});var r}}function V1(n){return xs(n,"bundles")}function B1(n){return xs(n,"namedQueries")}class LM{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new LM(e,t.uid||"")}getOverlay(e,t){return Iw(e).get(U1(this.userId,t)).next(r=>r?OM(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((a,c)=>{const p=new kM(t,c);i.push(this.Xt(e,p))}),Me.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(ra(c.getCollectionPath())));const a=[];return i.forEach(c=>{const p=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);a.push(Iw(e).Qt("collectionPathOverlayIndex",p))}),Me.waitFor(a)}getOverlaysForCollection(e,t,r){const i=gw(),a=ra(t),c=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Iw(e).qt("collectionPathOverlayIndex",c).next(p=>{for(const y of p){const b=OM(this.M,y);i.set(b.getKey(),b)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=gw();let c;const p=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Iw(e).Wt({index:"collectionGroupOverlayIndex",range:p},(y,b,x)=>{const R=OM(this.M,b);a.size()<i||R.largestBatchId===c?(a.set(R.getKey(),R),c=R.largestBatchId):x.done()}).next(()=>a)}Xt(e,t){return Iw(e).put(function(r,i,a){const[c,p,y]=U1(i,a.mutation.key);return{userId:i,collectionPath:p,documentId:y,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Ew(r.Jt,a.mutation)}}(this.M,this.userId,t))}}function Iw(n){return xs(n,"documentOverlays")}class kp{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(vi(e.integerValue));else if("doubleValue"in e){const r=vi(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),sw(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Ep(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?PO(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):Dt()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),ft.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function U2(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function j1(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=U2(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}kp.fe=new kp;class V2{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=j1(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=j1(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class B2{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class j2{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Tw{constructor(){this.De=new V2,this.Ce=new B2(this.De),this.xe=new j2(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Np{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Np(this.indexId,this.documentKey,this.arrayValue,r)}}function Op(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=z1(n.arrayValue,e.arrayValue),0!==t?t:(t=z1(n.directionalValue,e.directionalValue),0!==t?t:ft.comparator(n.documentKey,e.documentKey)))}function z1(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class z2{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=yM(e);if(void 0!==t&&!this.Be(t))return!1;const r=Ip(e);let i=0,a=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const c=r[i];if(!this.Le(this.Fe,c)||!this.Ue(this.Me[a++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(a>=this.Me.length||!this.Ue(this.Me[a++],c))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class H2{constructor(){this.qe=new FM}addToCollectionParentIndex(e,t){return this.qe.add(t),Me.resolve()}getCollectionParents(e,t){return Me.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return Me.resolve()}deleteFieldIndex(e,t){return Me.resolve()}getDocumentsMatchingTarget(e,t){return Me.resolve(null)}getIndexType(e,t){return Me.resolve(0)}getFieldIndexes(e,t){return Me.resolve([])}getNextCollectionGroupToUpdate(e){return Me.resolve(null)}getMinOffset(e,t){return Me.resolve(gl.min())}updateCollectionGroup(e,t,r){return Me.resolve()}updateIndexEntries(e,t){return Me.resolve()}}class FM{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Lr(jn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Lr(jn.comparator)).toArray()}}const wT=new Uint8Array(0);class $2{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new FM,this.Ge=new jh(r=>Tp(r),(r,i)=>cw(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const a={collectionId:r,parent:ra(i)};return H1(e).put(a)}return Me.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[CO(t),""],!1,!0);return H1(e).qt(i).next(a=>{for(const c of a){if(c.collectionId!==t)break;r.push(dc(c.parent))}return r})}addFieldIndex(e,t){const r=ET(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var a;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=ET(e),i=bT(e),a=Dw(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Dw(e);let i=!0;const a=new Map;return Me.forEach(this.Qe(t),c=>this.je(e,c).next(p=>{i&&(i=!!p),a.set(c,p)})).next(()=>{if(i){let c=sr();const p=[];return Me.forEach(a,(y,b)=>{var x;st("IndexedDbIndexManager",`Using index ${x=y,`id=${x.indexId}|cg=${x.collectionGroup}|f=${x.fields.map(At=>`${At.fieldPath}:${At.kind}`).join(",")}`} to execute ${Tp(t)}`);const R=function(At,It){const gn=yM(It);if(void 0===gn)return null;for(const xn of dT(At,gn.fieldPath))switch(xn.op){case"array-contains-any":return xn.value.arrayValue.values||[];case"array-contains":return[xn.value]}return null}(b,y),B=function(At,It){const gn=new Map;for(const xn of Ip(It))for(const es of dT(At,xn.fieldPath))switch(es.op){case"==":case"in":gn.set(xn.fieldPath.canonicalString(),es.value);break;case"not-in":case"!=":return gn.set(xn.fieldPath.canonicalString(),es.value),Array.from(gn.values())}return null}(b,y),G=function(At,It){const gn=[];let xn=!0;for(const es of Ip(It)){const yl=0===es.kind?VO(At,es.fieldPath,At.startAt):BO(At,es.fieldPath,At.startAt);gn.push(yl.value),xn&&(xn=yl.inclusive)}return new Bh(gn,xn)}(b,y),J=function(At,It){const gn=[];let xn=!0;for(const es of Ip(It)){const yl=0===es.kind?BO(At,es.fieldPath,At.endAt):VO(At,es.fieldPath,At.endAt);gn.push(yl.value),xn&&(xn=yl.inclusive)}return new Bh(gn,xn)}(b,y),xe=this.We(y,b,G),Ze=this.We(y,b,J),vt=this.ze(y,b,B),Mt=this.He(y.indexId,R,xe,G.inclusive,Ze,J.inclusive,vt);return Me.forEach(Mt,At=>r.Gt(At,t.limit).next(It=>{It.forEach(gn=>{const xn=ft.fromSegments(gn.documentKey);c.has(xn)||(c=c.add(xn),p.push(xn))})}))}).next(()=>p)}return Me.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,i,a,c,p){const y=(null!=t?t.length:1)*Math.max(r.length,a.length),b=y/(null!=t?t.length:1),x=[];for(let R=0;R<y;++R){const B=t?this.Je(t[R/b]):wT,G=this.Ye(e,B,r[R%b],i),J=this.Xe(e,B,a[R%b],c),xe=p.map(Ze=>this.Ye(e,B,Ze,!0));x.push(...this.createRange(G,J,xe))}return x}Ye(e,t,r,i){const a=new Np(e,ft.empty(),t,r);return i?a:a.ke()}Xe(e,t,r,i){const a=new Np(e,ft.empty(),t,r);return i?a.ke():a}je(e,t){const r=new z2(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let c=null;for(const p of a)r.$e(p)&&(!c||p.fields.length>c.fields.length)&&(c=p);return c})}getIndexType(e,t){let r=2;return Me.forEach(this.Qe(t),i=>this.je(e,i).next(a=>{a?0!==r&&a.fields.length<function(c){let p=new Lr(cs.comparator),y=!1;for(const b of c.filters){const x=b;x.field.isKeyField()||("array-contains"===x.op||"array-contains-any"===x.op?y=!0:p=p.add(x.field))}for(const b of c.orderBy)b.field.isKeyField()||(p=p.add(b.field));return p.size+(y?1:0)}(i)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new Tw;for(const i of Ip(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const c=r.Ne(i.kind);kp.fe.Zt(a,c)}return r.Se()}Je(e){const t=new Tw;return kp.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new Tw;return kp.fe.Zt(Cp(this.databaseId,t),r.Ne(function(i){const a=Ip(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let i=[];i.push(new Tw);let a=0;for(const c of Ip(e)){const p=r[a++];for(const y of i)if(this.en(t,c.fieldPath)&&aw(p))i=this.nn(i,c,p);else{const b=y.Ne(c.kind);kp.fe.Zt(p,b)}}return this.sn(i)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const i=[...e],a=[];for(const c of r.arrayValue.values||[])for(const p of i){const y=new Tw;y.seed(p.Se()),kp.fe.Zt(c,y.Ne(t.kind)),a.push(y)}return a}en(e,t){return!!e.filters.find(r=>r instanceof so&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=ET(e),i=bT(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(a=>{const c=[];return Me.forEach(a,p=>i.get([p.indexId,this.uid]).next(y=>{c.push(function(b,x){const R=x?new lw(x.sequenceNumber,new gl(Rp(x.readTime),new ft(dc(x.documentKey)),x.largestBatchId)):lw.empty(),B=b.fields.map(([G,J])=>new uT(cs.fromServerFormat(G),J));return new aT(b.indexId,b.collectionGroup,B,R)}(p,y))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:bn(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=ET(e),a=bT(e);return this.rn(e).next(c=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(p=>Me.forEach(p,y=>{return a.put({indexId:y.indexId,uid:this.user.uid||"",sequenceNumber:c,readTime:Pp((B=r).readTime),documentKey:ra(B.documentKey.path),largestBatchId:B.largestBatchId});var B})))}updateIndexEntries(e,t){const r=new Map;return Me.forEach(t,(i,a)=>{const c=r.get(i.collectionGroup);return(c?Me.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(p=>(r.set(i.collectionGroup,p),Me.forEach(p,y=>this.on(e,i,y).next(b=>{const x=this.un(a,y);return b.isEqual(x)?Me.resolve():this.an(e,a,y,b,x)}))))})}cn(e,t,r,i){return Dw(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,i){return Dw(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const i=Dw(e);let a=new Lr(Op);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(c,p)=>{a=a.add(new Np(r.indexId,t,p.arrayValue,p.directionalValue))}).next(()=>a)}un(e,t){let r=new Lr(Op);const i=this.Ze(t,e);if(null==i)return r;const a=yM(t);if(null!=a){const c=e.data.field(a.fieldPath);if(aw(c))for(const p of c.arrayValue.values||[])r=r.add(new Np(t.indexId,e.key,this.Je(p),i))}else r=r.add(new Np(t.indexId,e.key,wT,i));return r}an(e,t,r,i,a){st("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(p,y,b,x,R){const B=p.getIterator(),G=y.getIterator();let J=a_(B),xe=a_(G);for(;J||xe;){let Ze=!1,vt=!1;if(J&&xe){const Mt=b(J,xe);Mt<0?vt=!0:Mt>0&&(Ze=!0)}else null!=J?vt=!0:Ze=!0;Ze?(x(xe),xe=a_(G)):vt?(R(J),J=a_(B)):(J=a_(B),xe=a_(G))}}(i,a,Op,p=>{c.push(this.cn(e,t,r,p))},p=>{c.push(this.hn(e,t,r,p))}),Me.waitFor(c)}rn(e){let t=1;return bT(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,p)=>Op(c,p)).filter((c,p,y)=>!p||0!==Op(c,y[p-1]));const i=[];i.push(e);for(const c of r){const p=Op(c,e),y=Op(c,t);if(0===p)i[0]=e.ke();else if(p>0&&y<0)i.push(c),i.push(c.ke());else if(y>0)break}i.push(t);const a=[];for(let c=0;c<i.length;c+=2)a.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,wT,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,wT,[]]));return a}getMinOffset(e,t){let r;return Me.forEach(this.Qe(t),i=>this.je(e,i).next(a=>{a?(!r||LO(a.indexState.offset,r)<0)&&(r=a.indexState.offset):r=gl.min()})).next(()=>r)}}function H1(n){return xs(n,"collectionParents")}function Dw(n){return xs(n,"indexEntries")}function ET(n){return xs(n,"indexConfiguration")}function bT(n){return xs(n,"indexState")}const $1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ka{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ka(e,ka.DEFAULT_COLLECTION_PERCENTILE,ka.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function G1(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],c=IDBKeyRange.only(t.batchId);let p=0;const y=r.Wt({range:c},(x,R,B)=>(p++,B.delete()));a.push(y.next(()=>{rn(1===p)}));const b=[];for(const x of t.mutations){const R=A1(e,x.key.path,t.batchId);a.push(i.delete(R)),b.push(x.key)}return Me.waitFor(a).next(()=>b)}function CT(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Dt();e=n.noDocument}return JSON.stringify(e).length}ka.DEFAULT_COLLECTION_PERCENTILE=10,ka.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ka.DEFAULT=new ka(41943040,ka.DEFAULT_COLLECTION_PERCENTILE,ka.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ka.DISABLED=new ka(-1,0,0);class UM{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.ln={}}static Yt(e,t,r,i){rn(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new UM(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Hh(e).Wt({index:"userMutationsIndex",range:r},(i,a,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=m_(e),c=Hh(e);return c.add({}).next(p=>{rn("number"==typeof p);const y=new PM(p,t,r,i),b=function(B,G,J){const xe=J.baseMutations.map(vt=>Ew(B.Jt,vt)),Ze=J.mutations.map(vt=>Ew(B.Jt,vt));return{userId:G,batchId:J.batchId,localWriteTimeMs:J.localWriteTime.toMillis(),baseMutations:xe,mutations:Ze}}(this.M,this.userId,y),x=[];let R=new Lr((B,G)=>bn(B.canonicalString(),G.canonicalString()));for(const B of i){const G=A1(this.userId,B.key.path,p);R=R.add(B.key.path.popLast()),x.push(c.put(b)),x.push(a.put(G,_2))}return R.forEach(B=>{x.push(this.indexManager.addToCollectionParentIndex(e,B))}),e.addOnCommittedListener(()=>{this.ln[p]=y.keys()}),Me.waitFor(x).next(()=>y)})}lookupMutationBatch(e,t){return Hh(e).get(t).next(r=>r?(rn(r.userId===this.userId),g_(this.M,r)):null)}fn(e,t){return this.ln[t]?Me.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.ln[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Hh(e).Wt({index:"userMutationsIndex",range:i},(c,p,y)=>{p.userId===this.userId&&(rn(p.batchId>=r),a=g_(this.M,p)),y.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Hh(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,a,c)=>{r=a.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Hh(e).qt("userMutationsIndex",t).next(r=>r.map(i=>g_(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=_T(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return m_(e).Wt({range:i},(c,p,y)=>{const[b,x,R]=c,B=dc(x);if(b===this.userId&&t.path.isEqual(B))return Hh(e).get(R).next(G=>{if(!G)throw Dt();rn(G.userId===this.userId),a.push(g_(this.M,G))});y.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Lr(bn);const i=[];return t.forEach(a=>{const c=_T(this.userId,a.path),p=IDBKeyRange.lowerBound(c),y=m_(e).Wt({range:p},(b,x,R)=>{const[B,G,J]=b,xe=dc(G);B===this.userId&&a.path.isEqual(xe)?r=r.add(J):R.done()});i.push(y)}),Me.waitFor(i).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=_T(this.userId,r),c=IDBKeyRange.lowerBound(a);let p=new Lr(bn);return m_(e).Wt({range:c},(y,b,x)=>{const[R,B,G]=y,J=dc(B);R===this.userId&&r.isPrefixOf(J)?J.length===i&&(p=p.add(G)):x.done()}).next(()=>this.dn(e,p))}dn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Hh(e).get(a).next(c=>{if(null===c)throw Dt();rn(c.userId===this.userId),r.push(g_(this.M,c))}))}),Me.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return G1(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),Me.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Me.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return m_(e).Wt({range:r},(a,c,p)=>{if(a[0]===this.userId){const y=dc(a[1]);i.push(y)}else p.done()}).next(()=>{rn(0===i.length)})})}containsKey(e,t){return W1(e,this.userId,t)}wn(e){return q1(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function W1(n,e,t){const r=_T(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let c=!1;return m_(n).Wt({range:a,jt:!0},(p,y,b)=>{const[x,R,B]=p;x===e&&R===i&&(c=!0),b.done()}).next(()=>c)}function Hh(n){return xs(n,"mutations")}function m_(n){return xs(n,"documentMutations")}function q1(n){return xs(n,"mutationQueues")}class Lp{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new Lp(0)}static yn(){return new Lp(-1)}}class G2{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new Lp(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>Yt.fromTimestamp(new Ni(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.In(e,i)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>__(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(rn(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return __(e).Wt((c,p)=>{const y=Cw(p);y.sequenceNumber<=t&&null===r.get(y.targetId)&&(i++,a.push(this.removeTargetData(e,y)))}).next(()=>Me.waitFor(a)).next(()=>i)}forEachTarget(e,t){return __(e).Wt((r,i)=>{const a=Cw(i);t(a)})}pn(e){return Z1(e).get("targetGlobalKey").next(t=>(rn(null!==t),t))}In(e,t){return Z1(e).put("targetGlobalKey",t)}Tn(e,t){return __(e).put(F1(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Tp(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return __(e).Wt({range:i,index:"queryTargetsIndex"},(c,p,y)=>{const b=Cw(p);cw(t,b.target)&&(a=b,y.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=$h(e);return t.forEach(c=>{const p=ra(c.path);i.push(a.put({targetId:r,path:p})),i.push(this.referenceDelegate.addReference(e,r,c))}),Me.waitFor(i)}removeMatchingKeys(e,t,r){const i=$h(e);return Me.forEach(t,a=>{const c=ra(a.path);return Me.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=$h(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=$h(e);let a=sr();return i.Wt({range:r,jt:!0},(c,p,y)=>{const b=dc(c[1]),x=new ft(b);a=a.add(x)}).next(()=>a)}containsKey(e,t){const r=ra(t.path),i=IDBKeyRange.bound([r],[CO(r)],!1,!0);let a=0;return $h(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([c,p],y,b)=>{0!==c&&(a++,b.done())}).next(()=>a>0)}Et(e,t){return __(e).get(t).next(r=>r?Cw(r):null)}}function __(n){return xs(n,"targets")}function Z1(n){return xs(n,"targetGlobal")}function $h(n){return xs(n,"targetDocuments")}function Fp(n){return VM.apply(this,arguments)}function VM(){return VM=(0,Oe.Z)(function*(n){if(n.code!==Ae.FAILED_PRECONDITION||n.message!==P1)throw n;st("LocalStore","Unexpectedly lost primary lease")}),VM.apply(this,arguments)}function K1([n,e],[t,r]){const i=bn(n,t);return 0===i?bn(e,r):i}class W2{constructor(e){this.An=e,this.buffer=new Lr(K1),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();K1(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class q2{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;st("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,Oe.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){xp(i)?st("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Fp(i)}yield t.Sn(e)}))}}class Z2{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Me.resolve(lu.A);const r=new W2(t);return this.Dn.forEachTarget(e,i=>r.Pn(i.sequenceNumber)).next(()=>this.Dn.xn(e,i=>r.Pn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(st("LruGarbageCollector","Garbage collection skipped; disabled"),Me.resolve($1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(st("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$1):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,i,a,c,p,y,b;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(R=>(R>this.params.maximumSequenceNumbersToCollect?(st("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),i=this.params.maximumSequenceNumbersToCollect):i=R,c=Date.now(),this.nthSequenceNumber(e,i))).next(R=>(r=R,p=Date.now(),this.removeTargets(e,r,t))).next(R=>(a=R,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(R=>(b=Date.now(),fM()<=Ja.in.DEBUG&&st("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-x}ms\n\tDetermined least recently used ${i} in `+(p-c)+`ms\n\tRemoved ${a} targets in `+(y-p)+`ms\n\tRemoved ${R} documents in `+(b-y)+`ms\nTotal Duration: ${b-x}ms`),Me.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:R})))}}class K2{constructor(e,t){this.db=e,this.garbageCollector=new Z2(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,i)=>t(i))}addReference(e,t,r){return IT(e,r)}removeReference(e,t,r){return IT(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return IT(e,t)}On(e,t){return function(r,i){let a=!1;return q1(r).zt(c=>W1(r,c,i).next(p=>(p&&(a=!0),Me.resolve(!p)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Mn(e,(c,p)=>{if(p<=t){const y=this.On(e,c).next(b=>{if(!b)return a++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Yt.min()),$h(e).delete([0,ra(c.path)])))});i.push(y)}}).next(()=>Me.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return IT(e,t)}Mn(e,t){const r=$h(e);let i,a=lu.A;return r.Wt({index:"documentTargetsIndex"},([c,p],{path:y,sequenceNumber:b})=>{0===c?(a!==lu.A&&t(new ft(dc(i)),a),a=b,i=y):a=lu.A}).next(()=>{a!==lu.A&&t(new ft(dc(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function IT(n,e){return $h(n).put((r=n.currentSequenceNumber,{targetId:0,path:ra(e.path),sequenceNumber:r}));var r}class Y1{constructor(){this.changes=new jh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Vr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Me.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Y2{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Up(e).put(r)}removeEntry(e,t,r){return Up(e).delete(function(i,a){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],vT(a),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=Vr.newInvalidDocument(t);return Up(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Sw(t))},(i,a)=>{r=this.$n(t,a)}).next(()=>r)}Bn(e,t){let r={size:0,document:Vr.newInvalidDocument(t)};return Up(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Sw(t))},(i,a)=>{r={document:this.$n(t,a),size:CT(a)}}).next(()=>r)}getEntries(e,t){let r=zu();return this.Ln(e,t,(i,a)=>{const c=this.$n(i,a);r=r.insert(i,c)}).next(()=>r)}Un(e,t){let r=zu(),i=new Oi(ft.comparator);return this.Ln(e,t,(a,c)=>{const p=this.$n(a,c);r=r.insert(a,p),i=i.insert(a,CT(c))}).next(()=>({documents:r,qn:i}))}Ln(e,t,r){if(t.isEmpty())return Me.resolve();let i=new Lr(X1);t.forEach(y=>i=i.add(y));const a=IDBKeyRange.bound(Sw(i.first()),Sw(i.last())),c=i.getIterator();let p=c.getNext();return Up(e).Wt({index:"documentKeyIndex",range:a},(y,b,x)=>{const R=ft.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;p&&X1(p,R)<0;)r(p,null),p=c.getNext();p&&p.isEqual(R)&&(r(p,b),p=c.hasNext()?c.getNext():null),p?x.Ut(Sw(p)):x.done()}).next(()=>{for(;p;)r(p,null),p=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),vT(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Up(e).qt(IDBKeyRange.bound(i,a,!0)).next(c=>{let p=zu();for(const y of c){const b=this.$n(ft.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);p=p.insert(b.key,b)}return p})}getAllFromCollectionGroup(e,t,r,i){let a=zu();const c=J1(t,r),p=J1(t,gl.max());return Up(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,p,!0)},(y,b,x)=>{const R=this.$n(ft.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);a=a.insert(R.key,R),a.size===i&&x.done()}).next(()=>a)}newChangeBuffer(e){return new Q2(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Q1(e).get("remoteDocumentGlobalKey").next(t=>(rn(!!t),t))}Fn(e,t){return Q1(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function L2(n,e){let t;if(e.document)t=w1(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ft.fromSegments(e.noDocument.path),i=Rp(e.noDocument.readTime);t=Vr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Dt();{const r=ft.fromSegments(e.unknownDocument.path),i=Rp(e.unknownDocument.version);t=Vr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Ni(r[0],r[1]);return Yt.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(Yt.min()))return r}return Vr.newInvalidDocument(e)}}class Q2 extends Y1{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new jh(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Lr((a,c)=>bn(a.canonicalString(),c.canonicalString()));return this.changes.forEach((a,c)=>{const p=this.Gn.get(a);if(t.push(this.Kn.removeEntry(e,a,p.readTime)),c.isValidDocument()){const y=L1(this.Kn.M,c);i=i.add(a.path.popLast()),r+=CT(y)-p.size,t.push(this.Kn.addEntry(e,a,y))}else if(r-=p.size,this.trackRemovals){const y=L1(this.Kn.M,c.convertToNoDocument(Yt.min()));t.push(this.Kn.addEntry(e,a,y))}}),i.forEach(a=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Kn.updateMetadata(e,r)),Me.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:i})=>(i.forEach((a,c)=>{this.Gn.set(a,{size:c,readTime:r.get(a).readTime})}),r))}}function Q1(n){return xs(n,"remoteDocumentGlobal")}function Up(n){return xs(n,"remoteDocumentsV14")}function Sw(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function J1(n,e){const t=e.documentKey.path.toArray();return[n,vT(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function X1(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=bn(t[a],r[a]),i)return i;return i=bn(t.length,r.length),i||(i=bn(t[t.length-2],r[r.length-2]),i||bn(t[t.length-1],r[r.length-1]))}class J2{constructor(e){this.M=e}kt(e,t,r,i){const a=new yT("createOrUpgrade",t);var p;r<1&&i>=1&&(e.createObjectStore("owner"),(p=e).createObjectStore("mutationQueues",{keyPath:"userId"}),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",S1,{unique:!0}),p.createObjectStore("documentMutations"),eL(e),function(p){p.createObjectStore("remoteDocuments")}(e));let c=Me.resolve();return r<3&&i>=3&&(0!==r&&(function(p){p.deleteObjectStore("targetDocuments"),p.deleteObjectStore("targets"),p.deleteObjectStore("targetGlobal")}(e),eL(e)),c=c.next(()=>function(p){const y=p.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Yt.min().toTimestamp(),targetCount:0};return y.put("targetGlobalKey",b)}(a))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(p,y){return y.store("mutations").qt().next(b=>{p.deleteObjectStore("mutations"),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",S1,{unique:!0});const x=y.store("mutations"),R=b.map(B=>x.put(B));return Me.waitFor(R)})}(e,a))),c=c.next(()=>{!function(p){p.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Qn(a))),r<6&&i>=6&&(c=c.next(()=>(function(p){p.createObjectStore("remoteDocumentGlobal")}(e),this.jn(a)))),r<7&&i>=7&&(c=c.next(()=>this.Wn(a))),r<8&&i>=8&&(c=c.next(()=>this.zn(e,a))),r<9&&i>=9&&(c=c.next(()=>{!function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.Hn(a))),r<11&&i>=11&&(c=c.next(()=>{(function(p){p.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(p){p.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(p){const y=p.createObjectStore("documentOverlays",{keyPath:x2});y.createIndex("collectionPathOverlayIndex",M2,{unique:!1}),y.createIndex("collectionGroupOverlayIndex",P2,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(p){const y=p.createObjectStore("remoteDocumentsV14",{keyPath:y2});y.createIndex("documentKeyIndex",v2),y.createIndex("collectionGroupIndex",w2)}(e)).next(()=>this.Jn(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>{!function(p){p.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),p.createObjectStore("indexState",{keyPath:T2}).createIndex("sequenceNumberIndex",D2,{unique:!1}),p.createObjectStore("indexEntries",{keyPath:S2}).createIndex("documentKeyIndex",A2,{unique:!1})}(e)})),c}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=CT(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>Me.forEach(i,a=>{const c=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",c).next(p=>Me.forEach(p,y=>{rn(y.userId===a.userId);const b=g_(this.M,y);return G1(e,a.userId,b).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Wt((c,p)=>{const y=new jn(c),b=[0,ra(y)];a.push(t.get(b).next(x=>x?Me.resolve():t.put({targetId:0,path:ra(y),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>Me.waitFor(a))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:I2});const r=t.store("collectionParents"),i=new FM,a=c=>{if(i.add(c)){const p=c.lastSegment(),y=c.popLast();return r.put({collectionId:p,parent:ra(y)})}};return t.store("remoteDocuments").Wt({jt:!0},(c,p)=>{const y=new jn(c);return a(y.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([c,p,y],b)=>{const x=dc(p);return a(x.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,i)=>{const a=Cw(i),c=F1(this.M,a);return t.put(c)})}Jn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((a,c)=>{const p=t.store("remoteDocumentsV14"),y=(b=c,b.document?new ft(jn.fromString(b.document.name).popFirst(5)):b.noDocument?ft.fromSegments(b.noDocument.path):b.unknownDocument?ft.fromSegments(b.unknownDocument.path):Dt()).path.toArray();var b;const x={prefixPath:y.slice(0,y.length-2),collectionGroup:y[y.length-2],documentId:y[y.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(p.put(x))}).next(()=>Me.waitFor(i))}}function eL(n){n.createObjectStore("targetDocuments",{keyPath:b2}).createIndex("documentTargetsIndex",C2,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",E2,{unique:!0}),n.createObjectStore("targetGlobal")}const BM="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class jM{constructor(e,t,r,i,a,c,p,y,b,x,R=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=a,this.window=c,this.document=p,this.Xn=b,this.Zn=x,this.ts=R,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=B=>Promise.resolve(),!jM.vt())throw new Ye(Ae.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new K2(this,i),this.hs=t+"main",this.M=new O1(y),this.ls=new ml(this.hs,this.ts,new J2(this.M)),this.fs=new G2(this.referenceDelegate,this.M),this.ds=new Y2(this.M),this._s=new F2,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===x&&Ki("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ye(Ae.FAILED_PRECONDITION,BM);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new lu(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,Oe.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,Oe.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,Oe.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>TT(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(xp(e))return st("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return st("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return Aw(e).get("owner").next(t=>Me.resolve(this.Ps(t)))}Vs(e){return TT(e).delete(this.clientId)}vs(){var e=this;return(0,Oe.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=xs(r,"clientMetadata");return i.qt().next(a=>{const c=e.Ds(a,18e5),p=a.filter(y=>-1===c.indexOf(y));return Me.forEach(p,y=>i.delete(y.clientId)).next(()=>p)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?Me.resolve(!0):Aw(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new Ye(Ae.FAILED_PRECONDITION,BM);return!1}}return!(!this.networkEnabled||!this.inForeground)||TT(e).qt().next(r=>void 0===this.Ds(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,p=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&p)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&st("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Oe.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new N1(t,lu.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>TT(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return UM.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new $2(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return LM.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){st("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=14===(c=this.ts)?k2:13===c?M1:12===c?R2:11===c?x1:void Dt();var c;let p;return this.ls.runTransaction(e,i,a,y=>(p=new N1(y,this.es?this.es.next():lu.A),"readwrite-primary"===t?this.Es(p).next(b=>!!b||this.As(p)).next(b=>{if(!b)throw Ki(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Ye(Ae.FAILED_PRECONDITION,P1);return r(p)}).next(b=>this.bs(p).next(()=>b)):this.$s(p).next(()=>r(p)))).then(y=>(p.raiseOnCommittedEvent(),y))}$s(e){return Aw(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ye(Ae.FAILED_PRECONDITION,BM)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Aw(e).put("owner",t)}static vt(){return ml.vt()}Rs(e){const t=Aw(e);return t.get("owner").next(r=>this.Ps(r)?(st("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Me.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(Ki(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,z.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return st("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ki("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){Ki("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Aw(n){return xs(n,"owner")}function TT(n){return xs(n,"clientMetadata")}function zM(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class X2{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(i=>{for(const a of r)a.applyToLocalView(i);return i})}qs(e,t){e.forEach((r,i)=>{for(const a of t)a.applyToLocalView(i)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return ft.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.js(e,t.path):EM(t)?this.Ws(e,t,r):this.zs(e,t,r);var i}js(e,t){return this.Ls(e,new ft(t)).next(r=>{let i=DM();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ws(e,t,r){const i=t.collectionGroup;let a=DM();return this.indexManager.getCollectionParents(e,i).next(c=>Me.forEach(c,p=>{const y=(b=t,x=p.child(i),new pd(x,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,x;return this.zs(e,y,r).next(b=>{b.forEach((x,R)=>{a=a.insert(x,R)})})}).next(()=>a))}zs(e,t,r){let i;return this.ds.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(a=>{for(const c of a)for(const p of c.mutations){const y=p.key;let b=i.get(y);null==b&&(b=Vr.newInvalidDocument(y),i=i.insert(y,b)),IM(p,b,c.localWriteTime),b.isFoundDocument()||(i=i.remove(y))}}).next(()=>(i.forEach((a,c)=>{CM(t,c)||(i=i.remove(a))}),i))}}class HM{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=i}static Ys(e,t){let r=sr(),i=sr();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new HM(e,t.fromCache,r,i)}}class tL{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,i){return this.ti(e,t).next(a=>a||this.ei(e,t,i,r)).next(a=>a||this.ni(e,t))}ti(e,t){return Me.resolve(null)}ei(e,t,r,i){return function zB(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||i.isEqual(Yt.min())?this.ni(e,t):this.Zs.Ks(e,r).next(a=>{const c=this.si(t,a);return this.ii(t,c,r,i)?this.ni(e,t):(fM()<=Ja.in.DEBUG&&st("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),bM(t)),this.ri(e,c,t,OO(i,-1)))})}si(e,t){let r=new Lr(ZO(e));return t.forEach((i,a)=>{CM(e,a)&&(r=r.add(a))}),r}ii(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ni(e,t){return fM()<=Ja.in.DEBUG&&st("QueryEngine","Using full collection scan to execute query:",bM(t)),this.Zs.Qs(e,t,gl.min())}ri(e,t,r,i){return this.Zs.Qs(e,r,i).next(a=>(t.forEach(c=>{a=a.insert(c.key,c)}),a))}}class ej{constructor(e,t,r,i){this.persistence=e,this.oi=t,this.M=i,this.ui=new Oi(bn),this.ai=new jh(a=>Tp(a),cw),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new X2(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function nL(n,e,t,r){return new ej(n,e,t,r)}function rL(n,e){return $M.apply(this,arguments)}function $M(){return $M=(0,Oe.Z)(function*(n,e){const t=gt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.Bs.getAllMutationBatches(r).next(a=>(i=a,t.li(e),t.Bs.getAllMutationBatches(r))).next(a=>{const c=[],p=[];let y=sr();for(const b of i){c.push(b.batchId);for(const x of b.mutations)y=y.add(x.key)}for(const b of a){p.push(b.batchId);for(const x of b.mutations)y=y.add(x.key)}return t.fi.Ks(r,y).next(b=>({di:b,removedBatchIds:c,addedBatchIds:p}))})})}),$M.apply(this,arguments)}function tj(n,e){const t=gt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.hi.newChangeBuffer({trackRemovals:!0});return function(c,p,y,b){const x=y.batch,R=x.keys();let B=Me.resolve();return R.forEach(G=>{B=B.next(()=>b.getEntry(p,G)).next(J=>{const xe=y.docVersions.get(G);rn(null!==xe),J.version.compareTo(xe)<0&&(x.applyToRemoteDocument(J,y),J.isValidDocument()&&(J.setReadTime(y.commitVersion),b.addEntry(J)))})}),B.next(()=>c.Bs.removeMutationBatch(p,x))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,i))})}function iL(n){const e=gt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function nj(n,e){const t=gt(n),r=e.snapshotVersion;let i=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.hi.newChangeBuffer({trackRemovals:!0});i=t.ui;const p=[];e.targetChanges.forEach((b,x)=>{const R=i.get(x);if(!R)return;p.push(t.fs.removeMatchingKeys(a,b.removedDocuments,x).next(()=>t.fs.addMatchingKeys(a,b.addedDocuments,x)));let B=R.withSequenceNumber(a.currentSequenceNumber);var G,J,xe;e.targetMismatches.has(x)?B=B.withResumeToken(ds.EMPTY_BYTE_STRING,Yt.min()).withLastLimboFreeSnapshotVersion(Yt.min()):b.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(b.resumeToken,r)),i=i.insert(x,B),J=B,xe=b,(0===(G=R).resumeToken.approximateByteSize()||J.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=3e8||xe.addedDocuments.size+xe.modifiedDocuments.size+xe.removedDocuments.size>0)&&p.push(t.fs.updateTargetData(a,B))});let y=zu();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(a,b))}),p.push(sL(a,c,e.documentUpdates).next(b=>{y=b})),!r.isEqual(Yt.min())){const b=t.fs.getLastRemoteSnapshotVersion(a).next(x=>t.fs.setTargetsMetadata(a,a.currentSequenceNumber,r));p.push(b)}return Me.waitFor(p).next(()=>c.apply(a)).next(()=>t.fi.Gs(a,y)).next(()=>y)}).then(a=>(t.ui=i,a))}function sL(n,e,t){let r=sr();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let a=zu();return t.forEach((c,p)=>{const y=i.get(c);p.isNoDocument()&&p.version.isEqual(Yt.min())?(e.removeEntry(c,p.readTime),a=a.insert(c,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||0===p.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(p),a=a.insert(c,p)):st("LocalStore","Ignoring outdated watch update for ",c,". Current version:",y.version," Watch version:",p.version)}),a})}function rj(n,e){const t=gt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function y_(n,e){const t=gt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.fs.getTargetData(r,e).next(a=>a?(i=a,Me.resolve(i)):t.fs.allocateTargetId(r).next(c=>(i=new zh(e,c,0,r.currentSequenceNumber),t.fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function v_(n,e,t){return GM.apply(this,arguments)}function GM(){return GM=(0,Oe.Z)(function*(n,e,t){const r=gt(n),i=r.ui.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!xp(c))throw c;st("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.ui=r.ui.remove(e),r.ai.delete(i.target)}),GM.apply(this,arguments)}function DT(n,e,t){const r=gt(n);let i=Yt.min(),a=sr();return r.persistence.runTransaction("Execute query","readonly",c=>function(p,y,b){const x=gt(p),R=x.ai.get(b);return void 0!==R?Me.resolve(x.ui.get(R)):x.fs.getTargetData(y,b)}(r,c,ju(e)).next(p=>{if(p)return i=p.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(c,p.targetId).next(y=>{a=y})}).next(()=>r.oi.Qs(c,e,t?i:Yt.min(),t?a:sr())).next(p=>(uL(r,qO(e),p),{documents:p,_i:a})))}function oL(n,e){const t=gt(n),r=gt(t.fs),i=t.ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.Et(a,e).next(c=>c?c.target:null))}function aL(n,e){const t=gt(n),r=t.ci.get(e)||Yt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.hi.getAllFromCollectionGroup(i,e,OO(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(uL(t,e,i),i))}function uL(n,e,t){let r=Yt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.ci.set(e,r)}function WM(){return WM=(0,Oe.Z)(function*(n,e,t,r){const i=gt(n);let a=sr(),c=zu();for(const b of t){const x=e.wi(b.metadata.name);b.document&&(a=a.add(x));const R=e.mi(b);R.setReadTime(e.gi(b.metadata.readTime)),c=c.insert(x,R)}const p=i.hi.newChangeBuffer({trackRemovals:!0}),y=yield y_(i,(b=r,ju(l_(jn.fromString(`__bundle__/docs/${b}`)))));var b;return i.persistence.runTransaction("Apply bundle documents","readwrite",b=>sL(b,p,c).next(x=>(p.apply(b),x)).next(x=>i.fs.removeMatchingKeysForTargetId(b,y.targetId).next(()=>i.fs.addMatchingKeys(b,a,y.targetId)).next(()=>i.fi.Gs(b,x)).next(()=>x)))}),WM.apply(this,arguments)}function sj(n,e){return qM.apply(this,arguments)}function qM(){return qM=(0,Oe.Z)(function*(n,e,t=sr()){const r=yield y_(n,ju(NM(e.bundledQuery))),i=gt(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const c=As(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i._s.saveNamedQuery(a,e);const p=r.withResumeToken(ds.EMPTY_BYTE_STRING,c);return i.ui=i.ui.insert(p.targetId,p),i.fs.updateTargetData(a,p).next(()=>i.fs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.fs.addMatchingKeys(a,t,r.targetId)).next(()=>i._s.saveNamedQuery(a,e))})}),qM.apply(this,arguments)}class oj{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return Me.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:As(r.createTime)}),Me.resolve()}getNamedQuery(e,t){return Me.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:NM(r.bundledQuery),readTime:As(r.readTime)}),Me.resolve();var r}}class aj{constructor(){this.overlays=new Oi(ft.comparator),this.Ii=new Map}getOverlay(e,t){return Me.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.Xt(e,t,a)}),Me.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ii.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ii.delete(r)),Me.resolve()}getOverlaysForCollection(e,t,r){const i=gw(),a=t.length+1,c=new ft(t.child("")),p=this.overlays.getIteratorFrom(c);for(;p.hasNext();){const y=p.getNext().value,b=y.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===a&&y.largestBatchId>r&&i.set(y.getKey(),y)}return Me.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Oi((b,x)=>b-x);const c=this.overlays.getIterator();for(;c.hasNext();){const b=c.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let x=a.get(b.largestBatchId);null===x&&(x=gw(),a=a.insert(b.largestBatchId,x)),x.set(b.getKey(),b)}}const p=gw(),y=a.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((b,x)=>p.set(b,x)),!(p.size()>=i)););return Me.resolve(p)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const c=this.Ii.get(i.largestBatchId).delete(r.key);this.Ii.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new kM(t,r));let a=this.Ii.get(t);void 0===a&&(a=sr(),this.Ii.set(t,a)),this.Ii.set(t,a.add(r.key))}}class ZM{constructor(){this.Ti=new Lr(Ms.Ei),this.Ai=new Lr(Ms.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new Ms(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new Ms(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new ft(new jn([])),r=new Ms(t,e),i=new Ms(t,e+1),a=[];return this.Ai.forEachInRange([r,i],c=>{this.Pi(c),a.push(c.key)}),a}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new ft(new jn([])),r=new Ms(t,e),i=new Ms(t,e+1);let a=sr();return this.Ai.forEachInRange([r,i],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new Ms(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ms{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return ft.comparator(e.key,t.key)||bn(e.Ci,t.Ci)}static Ri(e,t){return bn(e.Ci,t.Ci)||ft.comparator(e.key,t.key)}}class uj{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new Lr(Ms.Ei)}checkEmpty(e){return Me.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,i){const a=this.xi;this.xi++;const c=new PM(a,t,r,i);this.Bs.push(c);for(const p of i)this.Ni=this.Ni.add(new Ms(p.key,a)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return Me.resolve(c)}lookupMutationBatch(e,t){return Me.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Mi(t+1),a=i<0?0:i;return Me.resolve(this.Bs.length>a?this.Bs[a]:null)}getHighestUnacknowledgedBatchId(){return Me.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return Me.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ms(t,0),i=new Ms(t,Number.POSITIVE_INFINITY),a=[];return this.Ni.forEachInRange([r,i],c=>{const p=this.ki(c.Ci);a.push(p)}),Me.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Lr(bn);return t.forEach(i=>{const a=new Ms(i,0),c=new Ms(i,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([a,c],p=>{r=r.add(p.Ci)})}),Me.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;ft.isDocumentKey(a)||(a=a.child(""));const c=new Ms(new ft(a),0);let p=new Lr(bn);return this.Ni.forEachWhile(y=>{const b=y.key.path;return!!r.isPrefixOf(b)&&(b.length===i&&(p=p.add(y.Ci)),!0)},c),Me.resolve(this.Oi(p))}Oi(e){const t=[];return e.forEach(r=>{const i=this.ki(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){rn(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return Me.forEach(t.mutations,i=>{const a=new Ms(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new Ms(t,0),i=this.Ni.firstAfterOrEqual(r);return Me.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return Me.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class lj{constructor(e){this.$i=e,this.docs=new Oi(ft.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,c=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Me.resolve(r?r.document.mutableCopy():Vr.newInvalidDocument(t))}getEntries(e,t){let r=zu();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Vr.newInvalidDocument(i))}),Me.resolve(r)}getAllFromCollection(e,t,r){let i=zu();const a=new ft(t.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:p,value:{document:y}}=c.getNext();if(!t.isPrefixOf(p.path))break;p.path.length>t.length+1||LO(PB(y),r)<=0||(i=i.insert(y.key,y.mutableCopy()))}return Me.resolve(i)}getAllFromCollectionGroup(e,t,r,i){Dt()}Bi(e,t){return Me.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new cj(this)}getSize(e){return Me.resolve(this.size)}}class cj extends Y1{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Kn.addEntry(e,i)):this.Kn.removeEntry(r)}),Me.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class dj{constructor(e){this.persistence=e,this.Li=new jh(t=>Tp(t),cw),this.lastRemoteSnapshotVersion=Yt.min(),this.highestTargetId=0,this.Ui=0,this.qi=new ZM,this.targetCount=0,this.Ki=Lp.gn()}forEachTarget(e,t){return this.Li.forEach((r,i)=>t(i)),Me.resolve()}getLastRemoteSnapshotVersion(e){return Me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Me.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),Me.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),Me.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new Lp(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,Me.resolve()}updateTargetData(e,t){return this.Tn(t),Me.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,Me.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Li.forEach((c,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.Li.delete(c),a.push(this.removeMatchingKeysForTargetId(e,p.targetId)),i++)}),Me.waitFor(a).next(()=>i)}getTargetCount(e){return Me.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return Me.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),Me.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(c=>{a.push(i.markPotentiallyOrphaned(e,c))}),Me.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),Me.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return Me.resolve(r)}containsKey(e,t){return Me.resolve(this.qi.containsKey(t))}}class hj{constructor(e,t){this.Gi={},this.overlays={},this.es=new lu(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new dj(this),this.indexManager=new H2,this.ds=new lj(r=>this.referenceDelegate.Qi(r)),this.M=new O1(t),this._s=new oj(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new aj,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new uj(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){st("MemoryPersistence","Starting transaction:",e);const i=new fj(this.es.next());return this.referenceDelegate.ji(),r(i).next(a=>this.referenceDelegate.Wi(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}zi(e,t){return Me.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class fj extends R1{constructor(e){super(),this.currentSequenceNumber=e}}class KM{constructor(e){this.persistence=e,this.Hi=new ZM,this.Ji=null}static Yi(e){return new KM(e)}get Xi(){if(this.Ji)return this.Ji;throw Dt()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),Me.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),Me.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),Me.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(i=>this.Xi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Xi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Me.forEach(this.Xi,r=>{const i=ft.fromPath(r);return this.Zi(e,i).next(a=>{a||t.removeEntry(i,Yt.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return Me.or([()=>Me.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function lL(n,e){return`firestore_clients_${n}_${e}`}function cL(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function YM(n,e){return`firestore_targets_${n}_${e}`}class ST{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static tr(e,t,r){const i=JSON.parse(r);let a,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(a=new Ye(i.error.code,i.error.message))),c?new ST(e,t,i.state,a):(Ki("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class xw{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Ye(r.error.code,r.error.message))),a?new xw(e,r.state,i):(Ki("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class AT{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=gT();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=SO(r.activeTargetIds[c]),a=a.add(r.activeTargetIds[c]);return i?new AT(e,a):(Ki("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class QM{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new QM(t.clientId,t.onlineState):(Ki("SharedClientState",`Failed to parse online state: ${e}`),null)}}class JM{constructor(){this.activeTargetIds=gT()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class XM{constructor(e,t,r,i,a){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Oi(bn),this.started=!1,this.cr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.hr=lL(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new JM),this.dr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(p){return`firestore_bundle_loaded_v2_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Oe.Z)(function*(){const t=yield e.syncEngine.Fs();for(const i of t){if(i===e.ir)continue;const a=e.getItem(lL(e.persistenceKey,i));if(a){const c=AT.tr(i,a);c&&(e.ar=e.ar.insert(c.clientId,c))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const i=e.pr(r);i&&e.Ir(i)}for(const i of e.cr)e.ur(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(YM(this.persistenceKey,e));if(r){const i=xw.tr(e,r);i&&(t=i.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(YM(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ar(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return st("SharedClientState","READ",e,t),t}setItem(e,t){st("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){st("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if(st("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void Ki("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,Oe.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Sr(i,null)}{const i=t.Dr(r.key,r.newValue);if(i)return t.Sr(i.clientId,i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Cr(r.key,r.newValue);if(i)return t.Nr(i)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const i=t.kr(r.key,r.newValue);if(i)return t.Mr(i)}}else if(r.key===t.mr){if(null!==r.newValue){const i=t.pr(r.newValue);if(i)return t.Ir(i)}}else if(r.key===t.lr){const i=function(a){let c=lu.A;if(null!=a)try{const p=JSON.parse(a);rn("number"==typeof p),c=p}catch(p){Ki("SharedClientState","Failed to read sequence number from WebStorage",p)}return c}(r.newValue);i!==lu.A&&t.sequenceNumberHandler(i)}else if(r.key===t.gr){const i=t.Or(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Fr(a)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const i=new ST(this.currentUser,e,t,r),a=cL(this.persistenceKey,this.currentUser,e);this.setItem(a,i.er())}Ar(e){const t=cL(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const i=YM(this.persistenceKey,e),a=new xw(e,t,r);this.setItem(i,a.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return AT.tr(r,t)}Cr(e,t){const r=this._r.exec(e),i=Number(r[1]);return ST.tr(new ro(void 0!==r[2]?r[2]:null),i,t)}kr(e,t){const r=this.wr.exec(e),i=Number(r[1]);return xw.tr(i,t)}pr(e){return QM.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,Oe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);st("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Tr(this.ar),a=this.Tr(r),c=[],p=[];return a.forEach(y=>{i.has(y)||c.push(y)}),i.forEach(y=>{a.has(y)||p.push(y)}),this.syncEngine.Lr(c,p).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=gT();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class dL{constructor(){this.Ur=new JM,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new JM,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class pj{Kr(e){}shutdown(){}}class hL{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){st("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){st("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const gj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class mj{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class _j extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,i,a){const c=this.ho(e,t);st("RestConnection","Sending: ",c,r);const p={};return this.lo(p,i,a),this.fo(e,c,p,r).then(y=>(st("RestConnection","Received: ",y),y),y=>{throw tw("RestConnection",`${e} failed with error: `,y,"url: ",c,"request:",r),y})}_o(e,t,r,i,a){return this.co(e,t,r,i,a)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+r_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}ho(e,t){return`${this.uo}/v1/${t}:${gj[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((a,c)=>{const p=new gB;p.listenOnce(hB.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case hM.NO_ERROR:const b=p.getResponseJson();st("Connection","XHR received:",JSON.stringify(b)),a(b);break;case hM.TIMEOUT:st("Connection",'RPC "'+e+'" timed out'),c(new Ye(Ae.DEADLINE_EXCEEDED,"Request time out"));break;case hM.HTTP_ERROR:const x=p.getStatus();if(st("Connection",'RPC "'+e+'" failed with status:',x,"response text:",p.getResponseText()),x>0){const R=p.getResponseJson().error;if(R&&R.status&&R.message){const B=function(G){const J=G.toLowerCase().replace(/_/g,"-");return Object.values(Ae).indexOf(J)>=0?J:Ae.UNKNOWN}(R.status);c(new Ye(B,R.message))}else c(new Ye(Ae.UNKNOWN,"Server responded with status "+p.getStatus()))}else c(new Ye(Ae.UNAVAILABLE,"Connection failed."));break;default:Dt()}}finally{st("Connection",'RPC "'+e+'" completed.')}});const y=JSON.stringify(i);p.send(t,"POST",y,r,15)})}wo(e,t,r){const i=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=cB(),c=dB(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new pB({})),this.lo(p.initMessageHeaders,t,r),(0,z.uI)()||(0,z.b$)()||(0,z.d)()||(0,z.w1)()||(0,z.Mn)()||(0,z.ru)()||(p.httpHeadersOverwriteParam="$httpHeaders");const y=i.join("");st("Connection","Creating WebChannel: "+y,p);const b=a.createWebChannel(y,p);let x=!1,R=!1;const B=new mj({Jr:J=>{R?st("Connection","Not sending because WebChannel is closed:",J):(x||(st("Connection","Opening WebChannel transport."),b.open(),x=!0),st("Connection","WebChannel sending:",J),b.send(J))},Yr:()=>b.close()}),G=(J,xe,Ze)=>{J.listen(xe,vt=>{try{Ze(vt)}catch(Mt){setTimeout(()=>{throw Mt},0)}})};return G(b,iT.EventType.OPEN,()=>{R||st("Connection","WebChannel transport opened.")}),G(b,iT.EventType.CLOSE,()=>{R||(R=!0,st("Connection","WebChannel transport closed"),B.ro())}),G(b,iT.EventType.ERROR,J=>{R||(R=!0,tw("Connection","WebChannel transport errored:",J),B.ro(new Ye(Ae.UNAVAILABLE,"The operation could not be completed")))}),G(b,iT.EventType.MESSAGE,J=>{var xe;if(!R){const Ze=J.data[0];rn(!!Ze);const vt=Ze,Mt=vt.error||(null===(xe=vt[0])||void 0===xe?void 0:xe.error);if(Mt){st("Connection","WebChannel received error:",Mt);const At=Mt.status;let It=function(xn){const es=Qi[xn];if(void 0!==es)return l1(es)}(At),gn=Mt.message;void 0===It&&(It=Ae.INTERNAL,gn="Unknown error status: "+At+" with message "+Mt.message),R=!0,B.ro(new Ye(It,gn)),b.close()}else st("Connection","WebChannel received:",Ze),B.oo(Ze)}}),G(c,fB.STAT_EVENT,J=>{J.stat===yO.PROXY?st("Connection","Detected buffering proxy"):J.stat===yO.NOPROXY&&st("Connection","Detected no buffering proxy")}),setTimeout(()=>{B.io()},0),B}}function fL(){return"undefined"!=typeof window?window:null}function xT(){return"undefined"!=typeof document?document:null}function Mw(n){return new s2(n,!0)}class eP{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&st("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class pL{constructor(e,t,r,i,a,c,p,y){this.Yn=e,this.Vo=r,this.vo=i,this.So=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=p,this.listener=y,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new eP(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Oe.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,Oe.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,Oe.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===Ae.RESOURCE_EXHAUSTED?(Ki(t.toString()),Ki("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===Ae.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Do===t&&this.Qo(r,i)},r=>{e(()=>{const i=new Ye(Ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(i)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(i=>{r(()=>this.jo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.No.Ro((0,Oe.Z)(function*(){e.state=0,e.start()}))}jo(e){return st("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(st("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class yj extends pL{constructor(e,t,r,i,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.M=a}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function u2(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:Dt(),i=e.targetChange.targetIds||[],a=function(y,b){return y.N?(rn(void 0===b||"string"==typeof b),ds.fromBase64String(b||"")):(rn(void 0===b||b instanceof Uint8Array),ds.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,p=c&&function(y){const b=void 0===y.code?Ae.UNKNOWN:l1(y.code);return new Ye(b,y.message||"")}(c);t=new d1(r,i,a,p||null)}else if("documentChange"in e){const r=e.documentChange,i=cc(n,r.document.name),a=As(r.document.updateTime),c=new xo({mapValue:{fields:r.document.fields}}),p=Vr.newFoundDocument(i,a,c);t=new mT(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,i=cc(n,r.document),a=r.readTime?As(r.readTime):Yt.min(),c=Vr.newNoDocument(i,a);t=new mT([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=cc(n,r.document);t=new mT([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Dt();{const r=e.filter,a=new YB(r.count||0);t=new c1(r.targetId,a)}}var y;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return Yt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Yt.min():a.readTime?As(a.readTime):Yt.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=ww(this.M),t.addTarget=function(i,a){let c;const p=a.target;return c=cT(p)?{documents:E1(i,p)}:{query:b1(i,p)},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?c.resumeToken=g1(i,a.resumeToken):a.snapshotVersion.compareTo(Yt.min())>0&&(c.readTime=yw(i,a.snapshotVersion.toTimestamp())),c}(this.M,e);const r=function c2(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Dt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=ww(this.M),t.removeTarget=e,this.Lo(t)}}class vj extends pL{constructor(e,t,r,i,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.M=a,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(rn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function l2(n,e){return n&&n.length>0?(rn(void 0!==e),n.map(t=>function(r,i){let a=As(r.updateTime?r.updateTime:i);return a.isEqual(Yt.min())&&(a=As(i)),new qB(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=As(e.commitTime);return this.listener.tu(r,t)}return rn(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=ww(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Ew(this.M,r))};this.Lo(t)}}class wj extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=i,this.su=!1}iu(){if(this.su)throw new Ye(Ae.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.So.co(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===Ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ye(Ae.UNKNOWN,i.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.So._o(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===Ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ye(Ae.UNKNOWN,i.toString())})}terminate(){this.su=!0}}class Ej{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(Ki(t),this.uu=!1):st("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class bj{constructor(e,t,r,i,a){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=a,this.gu.Kr(p=>{r.enqueueAndForget((0,Oe.Z)(function*(){var y;Gh(c)&&(st("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,Oe.Z)(function*(b){const x=gt(b);x.wu.add(4),yield w_(x),x.yu.set("Unknown"),x.wu.delete(4),yield Pw(x)}),function(b){return y.apply(this,arguments)})(c))}))}),this.yu=new Ej(r,i)}}function Pw(n){return tP.apply(this,arguments)}function tP(){return tP=(0,Oe.Z)(function*(n){if(Gh(n))for(const e of n.mu)yield e(!0)}),tP.apply(this,arguments)}function w_(n){return nP.apply(this,arguments)}function nP(){return nP=(0,Oe.Z)(function*(n){for(const e of n.mu)yield e(!1)}),nP.apply(this,arguments)}function MT(n,e){const t=gt(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),sP(t)?iP(t):b_(t).Mo()&&rP(t,e))}function Rw(n,e){const t=gt(n),r=b_(t);t._u.delete(e),r.Mo()&&gL(t,e),0===t._u.size&&(r.Mo()?r.$o():Gh(t)&&t.yu.set("Unknown"))}function rP(n,e){n.pu.Z(e.targetId),b_(n).Ho(e)}function gL(n,e){n.pu.Z(e),b_(n).Jo(e)}function iP(n){n.pu=new n2({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),b_(n).start(),n.yu.au()}function sP(n){return Gh(n)&&!b_(n).ko()&&n._u.size>0}function Gh(n){return 0===gt(n).wu.size}function mL(n){n.pu=void 0}function Cj(n){return oP.apply(this,arguments)}function oP(){return oP=(0,Oe.Z)(function*(n){n._u.forEach((e,t)=>{rP(n,e)})}),oP.apply(this,arguments)}function Ij(n,e){return aP.apply(this,arguments)}function aP(){return aP=(0,Oe.Z)(function*(n,e){mL(n),sP(n)?(n.yu.lu(e),iP(n)):n.yu.set("Unknown")}),aP.apply(this,arguments)}function Tj(n,e,t){return uP.apply(this,arguments)}function uP(){return uP=(0,Oe.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof d1&&2===e.state&&e.cause)try{yield(r=(0,Oe.Z)(function*(i,a){const c=a.cause;for(const p of a.targetIds)i._u.has(p)&&(yield i.remoteSyncer.rejectListen(p,c),i._u.delete(p),i.pu.removeTarget(p))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){st("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield PT(n,r)}else if(e instanceof mT?n.pu.ut(e):e instanceof c1?n.pu._t(e):n.pu.ht(e),!t.isEqual(Yt.min()))try{const r=yield iL(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const c=i.pu.yt(a);return c.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const b=i._u.get(y);b&&i._u.set(y,b.withResumeToken(p.resumeToken,a))}}),c.targetMismatches.forEach(p=>{const y=i._u.get(p);if(!y)return;i._u.set(p,y.withResumeToken(ds.EMPTY_BYTE_STRING,y.snapshotVersion)),gL(i,p);const b=new zh(y.target,p,1,y.sequenceNumber);rP(i,b)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){st("RemoteStore","Failed to raise snapshot:",r),yield PT(n,r)}var r}),uP.apply(this,arguments)}function PT(n,e,t){return lP.apply(this,arguments)}function lP(){return lP=(0,Oe.Z)(function*(n,e,t){if(!xp(e))throw e;n.wu.add(1),yield w_(n),n.yu.set("Offline"),t||(t=()=>iL(n.localStore)),n.asyncQueue.enqueueRetryable((0,Oe.Z)(function*(){st("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield Pw(n)}))}),lP.apply(this,arguments)}function _L(n,e){return e().catch(t=>PT(n,t,e))}function E_(n){return cP.apply(this,arguments)}function cP(){return cP=(0,Oe.Z)(function*(n){const e=gt(n),t=Wh(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;Dj(e);)try{const i=yield rj(e.localStore,r);if(null===i){0===e.du.length&&t.$o();break}r=i.batchId,Sj(e,i)}catch(i){yield PT(e,i)}yL(e)&&vL(e)}),cP.apply(this,arguments)}function Dj(n){return Gh(n)&&n.du.length<10}function Sj(n,e){n.du.push(e);const t=Wh(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function yL(n){return Gh(n)&&!Wh(n).ko()&&n.du.length>0}function vL(n){Wh(n).start()}function Aj(n){return dP.apply(this,arguments)}function dP(){return dP=(0,Oe.Z)(function*(n){Wh(n).nu()}),dP.apply(this,arguments)}function xj(n){return hP.apply(this,arguments)}function hP(){return hP=(0,Oe.Z)(function*(n){const e=Wh(n);for(const t of n.du)e.Zo(t.mutations)}),hP.apply(this,arguments)}function Mj(n,e,t){return fP.apply(this,arguments)}function fP(){return fP=(0,Oe.Z)(function*(n,e,t){const r=n.du.shift(),i=RM.from(r,e,t);yield _L(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield E_(n)}),fP.apply(this,arguments)}function Pj(n,e){return pP.apply(this,arguments)}function pP(){return pP=(0,Oe.Z)(function*(n,e){var t;e&&Wh(n).Xo&&(yield(t=(0,Oe.Z)(function*(r,i){if(u1(a=i.code)&&a!==Ae.ABORTED){const c=r.du.shift();Wh(r).Fo(),yield _L(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield E_(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),yL(n)&&vL(n)}),pP.apply(this,arguments)}function wL(n,e){return gP.apply(this,arguments)}function gP(){return gP=(0,Oe.Z)(function*(n,e){const t=gt(n);t.asyncQueue.verifyOperationInProgress(),st("RemoteStore","RemoteStore received new credentials");const r=Gh(t);t.wu.add(3),yield w_(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield Pw(t)}),gP.apply(this,arguments)}function mP(n,e){return _P.apply(this,arguments)}function _P(){return _P=(0,Oe.Z)(function*(n,e){const t=gt(n);e?(t.wu.delete(2),yield Pw(t)):e||(t.wu.add(2),yield w_(t),t.yu.set("Unknown"))}),_P.apply(this,arguments)}function b_(n){return n.Iu||(n.Iu=function(e,t,r){const i=gt(e);return i.iu(),new yj(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:Cj.bind(null,n),eo:Ij.bind(null,n),zo:Tj.bind(null,n)}),n.mu.push(function(){var e=(0,Oe.Z)(function*(t){t?(n.Iu.Fo(),sP(n)?iP(n):n.yu.set("Unknown")):(yield n.Iu.stop(),mL(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function Wh(n){return n.Tu||(n.Tu=function(e,t,r){const i=gt(e);return i.iu(),new vj(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:Aj.bind(null,n),eo:Pj.bind(null,n),eu:xj.bind(null,n),tu:Mj.bind(null,n)}),n.mu.push(function(){var e=(0,Oe.Z)(function*(t){t?(n.Tu.Fo(),yield E_(n)):(yield n.Tu.stop(),n.du.length>0&&(st("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class yP{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Ss,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,a){const c=Date.now()+r,p=new yP(e,t,c,i,a);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ye(Ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function C_(n,e){if(Ki("AsyncQueue",`${e}: ${n}`),xp(n))return new Ye(Ae.UNAVAILABLE,`${e}: ${n}`);throw n}class I_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ft.comparator(t.key,r.key):(t,r)=>ft.comparator(t.key,r.key),this.keyedMap=DM(),this.sortedSet=new Oi(this.comparator)}static emptySet(e){return new I_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof I_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new I_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class EL{constructor(){this.Eu=new Oi(ft.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):Dt():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class T_{constructor(e,t,r,i,a,c,p,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=p,this.excludesMetadataChanges=y}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(c=>{a.push({type:0,doc:c})}),new T_(e,t,I_.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class Rj{constructor(){this.Ru=void 0,this.listeners=[]}}class kj{constructor(){this.queries=new jh(e=>WO(e),dw),this.onlineState="Unknown",this.bu=new Set}}function vP(n,e){return wP.apply(this,arguments)}function wP(){return wP=(0,Oe.Z)(function*(n,e){const t=gt(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new Rj),i)try{a.Ru=yield t.onListen(r)}catch(c){const p=C_(c,`Initialization of query '${bM(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,a),a.listeners.push(e),e.Pu(t.onlineState),a.Ru&&e.Vu(a.Ru)&&CP(t)}),wP.apply(this,arguments)}function EP(n,e){return bP.apply(this,arguments)}function bP(){return bP=(0,Oe.Z)(function*(n,e){const t=gt(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const c=a.listeners.indexOf(e);c>=0&&(a.listeners.splice(c,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),bP.apply(this,arguments)}function Nj(n,e){const t=gt(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const p of c.listeners)p.Vu(i)&&(r=!0);c.Ru=i}}r&&CP(t)}function Oj(n,e,t){const r=gt(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function CP(n){n.bu.forEach(e=>{e.next()})}class IP{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new T_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=T_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class Lj{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class bL{constructor(e){this.M=e}wi(e){return cc(this.M,e)}mi(e){return e.metadata.exists?w1(this.M,e.document,!1):Vr.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return As(e)}}class Fj{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=CL(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=jn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new bL(this.M);for(const i of e)if(i.metadata.queries){const a=r.wi(i.metadata.name);for(const c of i.metadata.queries){const p=(t.get(c)||sr()).add(a);t.set(c,p)}}return t}complete(){var e=this;return(0,Oe.Z)(function*(){const t=yield function ij(n,e,t,r){return WM.apply(this,arguments)}(e.localStore,new bL(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const i of e.queries)yield sj(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function CL(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class IL{constructor(e){this.key=e}}class TL{constructor(e){this.key=e}}class DL{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=sr(),this.mutatedKeys=sr(),this.Gu=ZO(e),this.Qu=new I_(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new EL,i=t?t.Qu:this.Qu;let a=t?t.mutatedKeys:this.mutatedKeys,c=i,p=!1;const y="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,b="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((x,R)=>{const B=i.get(x),G=CM(this.query,R)?R:null,J=!!B&&this.mutatedKeys.has(B.key),xe=!!G&&(G.hasLocalMutations||this.mutatedKeys.has(G.key)&&G.hasCommittedMutations);let Ze=!1;B&&G?B.data.isEqual(G.data)?J!==xe&&(r.track({type:3,doc:G}),Ze=!0):this.Hu(B,G)||(r.track({type:2,doc:G}),Ze=!0,(y&&this.Gu(G,y)>0||b&&this.Gu(G,b)<0)&&(p=!0)):!B&&G?(r.track({type:0,doc:G}),Ze=!0):B&&!G&&(r.track({type:1,doc:B}),Ze=!0,(y||b)&&(p=!0)),Ze&&(G?(c=c.add(G),a=xe?a.add(x):a.delete(x)):(c=c.delete(x),a=a.delete(x)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const x="F"===this.query.limitType?c.last():c.first();c=c.delete(x.key),a=a.delete(x.key),r.track({type:1,doc:x})}return{Qu:c,zu:r,ii:p,mutatedKeys:a}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const a=e.zu.Au();a.sort((b,x)=>function(R,B){const G=J=>{switch(J){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Dt()}};return G(R)-G(B)}(b.type,x.type)||this.Gu(b.doc,x.doc)),this.Ju(r);const c=t?this.Yu():[],p=0===this.Ku.size&&this.current?1:0,y=p!==this.qu;return this.qu=p,0!==a.length||y?{snapshot:new T_(this.query,e.Qu,i,a,e.mutatedKeys,0===p,y,!1),Xu:c}:{Xu:c}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new EL,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=sr(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new TL(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new IL(r))}),t}ta(e){this.Uu=e._i,this.Ku=sr();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return T_.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class Uj{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Vj{constructor(e){this.key=e,this.na=!1}}class Bj{constructor(e,t,r,i,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.sa={},this.ia=new jh(p=>WO(p),dw),this.ra=new Map,this.oa=new Set,this.ua=new Oi(ft.comparator),this.aa=new Map,this.ca=new ZM,this.ha={},this.la=new Map,this.fa=Lp.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function jj(n,e){return TP.apply(this,arguments)}function TP(){return TP=(0,Oe.Z)(function*(n,e){const t=ZP(n);let r,i;const a=t.ia.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.ea();else{const c=yield y_(t.localStore,ju(e));t.isPrimaryClient&&MT(t.remoteStore,c);const p=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield DP(t,e,r,"current"===p)}return i}),TP.apply(this,arguments)}function DP(n,e,t,r){return SP.apply(this,arguments)}function SP(){return SP=(0,Oe.Z)(function*(n,e,t,r){n._a=(x,R,B)=>{return(G=(0,Oe.Z)(function*(J,xe,Ze,vt){let Mt=xe.view.Wu(Ze);Mt.ii&&(Mt=yield DT(J.localStore,xe.query,!1).then(({documents:gn})=>xe.view.Wu(gn,Mt)));const At=vt&&vt.targetChanges.get(xe.targetId),It=xe.view.applyChanges(Mt,J.isPrimaryClient,At);return FP(J,xe.targetId,It.Xu),It.snapshot}),function(J,xe,Ze,vt){return G.apply(this,arguments)})(n,x,R,B);var G};const i=yield DT(n.localStore,e,!0),a=new DL(e,i._i),c=a.Wu(i.documents),p=_w.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),y=a.applyChanges(c,n.isPrimaryClient,p);FP(n,t,y.Xu);const b=new Uj(e,t,a);return n.ia.set(e,b),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),y.snapshot}),SP.apply(this,arguments)}function zj(n,e){return AP.apply(this,arguments)}function AP(){return AP=(0,Oe.Z)(function*(n,e){const t=gt(n),r=t.ia.get(e),i=t.ra.get(r.targetId);if(i.length>1)return t.ra.set(r.targetId,i.filter(a=>!dw(a,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield v_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Rw(t.remoteStore,r.targetId),D_(t,r.targetId)}).catch(Fp))):(D_(t,r.targetId),yield v_(t.localStore,r.targetId,!0))}),AP.apply(this,arguments)}function xP(){return xP=(0,Oe.Z)(function*(n,e,t){const r=KP(n);try{const i=yield function(a,c){const p=gt(a),y=Ni.now(),b=c.reduce((R,B)=>R.add(B.key),sr());let x;return p.persistence.runTransaction("Locally write mutations","readwrite",R=>p.fi.Ks(R,b).next(B=>{x=B;const G=[];for(const J of c){const xe=KB(J,x.get(J.key));null!=xe&&G.push(new Ap(J.key,xe,NO(xe.value.mapValue),Yi.exists(!0)))}return p.Bs.addMutationBatch(R,y,G,c)})).then(R=>(R.applyToLocalDocumentSet(x),{batchId:R.batchId,changes:x}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,p){let y=a.ha[a.currentUser.toKey()];y||(y=new Oi(bn)),y=y.insert(c,p),a.ha[a.currentUser.toKey()]=y}(r,i.batchId,t),yield gd(r,i.changes),yield E_(r.remoteStore)}catch(i){const a=C_(i,"Failed to persist write");t.reject(a)}}),xP.apply(this,arguments)}function SL(n,e){return MP.apply(this,arguments)}function MP(){return MP=(0,Oe.Z)(function*(n,e){const t=gt(n);try{const r=yield nj(t.localStore,e);e.targetChanges.forEach((i,a)=>{const c=t.aa.get(a);c&&(rn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.na=!0:i.modifiedDocuments.size>0?rn(c.na):i.removedDocuments.size>0&&(rn(c.na),c.na=!1))}),yield gd(t,r,e)}catch(r){yield Fp(r)}}),MP.apply(this,arguments)}function AL(n,e,t){const r=gt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ia.forEach((a,c)=>{const p=c.view.Pu(e);p.snapshot&&i.push(p.snapshot)}),function(a,c){const p=gt(a);p.onlineState=c;let y=!1;p.queries.forEach((b,x)=>{for(const R of x.listeners)R.Pu(c)&&(y=!0)}),y&&CP(p)}(r.eventManager,e),i.length&&r.sa.zo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function $j(n,e,t){return PP.apply(this,arguments)}function PP(){return PP=(0,Oe.Z)(function*(n,e,t){const r=gt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.aa.get(e),a=i&&i.key;if(a){let c=new Oi(ft.comparator);c=c.insert(a,Vr.newNoDocument(a,Yt.min()));const p=sr().add(a),y=new mw(Yt.min(),new Map,new Lr(bn),c,p);yield SL(r,y),r.ua=r.ua.remove(a),r.aa.delete(e),UP(r)}else yield v_(r.localStore,e,!1).then(()=>D_(r,e,t)).catch(Fp)}),PP.apply(this,arguments)}function Gj(n,e){return RP.apply(this,arguments)}function RP(){return RP=(0,Oe.Z)(function*(n,e){const t=gt(n),r=e.batch.batchId;try{const i=yield tj(t.localStore,e);LP(t,r,null),OP(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield gd(t,i)}catch(i){yield Fp(i)}}),RP.apply(this,arguments)}function Wj(n,e,t){return kP.apply(this,arguments)}function kP(){return kP=(0,Oe.Z)(function*(n,e,t){const r=gt(n);try{const i=yield function(a,c){const p=gt(a);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let b;return p.Bs.lookupMutationBatch(y,c).next(x=>(rn(null!==x),b=x.keys(),p.Bs.removeMutationBatch(y,x))).next(()=>p.Bs.performConsistencyCheck(y)).next(()=>p.fi.Ks(y,b))})}(r.localStore,e);LP(r,e,t),OP(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield gd(r,i)}catch(i){yield Fp(i)}}),kP.apply(this,arguments)}function NP(){return NP=(0,Oe.Z)(function*(n,e){const t=gt(n);Gh(t.remoteStore)||st("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const c=gt(a);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>c.Bs.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const i=t.la.get(r)||[];i.push(e),t.la.set(r,i)}catch(r){const i=C_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),NP.apply(this,arguments)}function OP(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function LP(n,e,t){const r=gt(n);let i=r.ha[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.ha[r.currentUser.toKey()]=i}}function D_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||xL(n,r)})}function xL(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(Rw(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),UP(n))}function FP(n,e,t){for(const r of t)r instanceof IL?(n.ca.addReference(r.key,e),Zj(n,r)):r instanceof TL?(st("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||xL(n,r.key)):Dt()}function Zj(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||(st("SyncEngine","New document in limbo: "+t),n.oa.add(r),UP(n))}function UP(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new ft(jn.fromString(e)),r=n.fa.next();n.aa.set(r,new Vj(t)),n.ua=n.ua.insert(t,r),MT(n.remoteStore,new zh(ju(l_(t.path)),r,2,lu.A))}}function gd(n,e,t){return VP.apply(this,arguments)}function VP(){return VP=(0,Oe.Z)(function*(n,e,t){const r=gt(n),i=[],a=[],c=[];var p;r.ia.isEmpty()||(r.ia.forEach((p,y)=>{c.push(r._a(y,e,t).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(y.targetId,b.fromCache?"not-current":"current"),i.push(b);const x=HM.Ys(y.targetId,b);a.push(x)}}))}),yield Promise.all(c),r.sa.zo(i),yield(p=(0,Oe.Z)(function*(y,b){const x=gt(y);try{yield x.persistence.runTransaction("notifyLocalViewChanges","readwrite",R=>Me.forEach(b,B=>Me.forEach(B.Hs,G=>x.persistence.referenceDelegate.addReference(R,B.targetId,G)).next(()=>Me.forEach(B.Js,G=>x.persistence.referenceDelegate.removeReference(R,B.targetId,G)))))}catch(R){if(!xp(R))throw R;st("LocalStore","Failed to update sequence numbers: "+R)}for(const R of b){const B=R.targetId;if(!R.fromCache){const G=x.ui.get(B),xe=G.withLastLimboFreeSnapshotVersion(G.snapshotVersion);x.ui=x.ui.insert(B,xe)}}}),function(y,b){return p.apply(this,arguments)})(r.localStore,a))}),VP.apply(this,arguments)}function Kj(n,e){return BP.apply(this,arguments)}function BP(){return BP=(0,Oe.Z)(function*(n,e){const t=gt(n);if(!t.currentUser.isEqual(e)){st("SyncEngine","User change. New user:",e.toKey());const r=yield rL(t.localStore,e);t.currentUser=e,(i=t).la.forEach(c=>{c.forEach(p=>{p.reject(new Ye(Ae.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield gd(t,r.di)}var i}),BP.apply(this,arguments)}function Yj(n,e){const t=gt(n),r=t.aa.get(e);if(r&&r.na)return sr().add(r.key);{let i=sr();const a=t.ra.get(e);if(!a)return i;for(const c of a){const p=t.ia.get(c);i=i.unionWith(p.view.ju)}return i}}function Qj(n,e){return jP.apply(this,arguments)}function jP(){return jP=(0,Oe.Z)(function*(n,e){const t=gt(n),r=yield DT(t.localStore,e.query,!0),i=e.view.ta(r);return t.isPrimaryClient&&FP(t,e.targetId,i.Xu),i}),jP.apply(this,arguments)}function Jj(n,e){return zP.apply(this,arguments)}function zP(){return zP=(0,Oe.Z)(function*(n,e){const t=gt(n);return aL(t.localStore,e).then(r=>gd(t,r))}),zP.apply(this,arguments)}function Xj(n,e,t,r){return HP.apply(this,arguments)}function HP(){return HP=(0,Oe.Z)(function*(n,e,t,r){const i=gt(n),a=yield function(c,p){const y=gt(c),b=gt(y.Bs);return y.persistence.runTransaction("Lookup mutation documents","readonly",x=>b.fn(x,p).next(R=>R?y.fi.Ks(x,R):Me.resolve(null)))}(i.localStore,e);var p;null!==a?("pending"===t?yield E_(i.remoteStore):"acknowledged"===t||"rejected"===t?(LP(i,e,r||null),OP(i,e),p=e,gt(gt(i.localStore).Bs)._n(p)):Dt(),yield gd(i,a)):st("SyncEngine","Cannot apply mutation batch with id: "+e)}),HP.apply(this,arguments)}function $P(){return $P=(0,Oe.Z)(function*(n,e){const t=gt(n);if(ZP(t),KP(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield ML(t,r.toArray());t.da=!0,yield mP(t.remoteStore,!0);for(const a of i)MT(t.remoteStore,a)}else if(!1===e&&!1!==t.da){const r=[];let i=Promise.resolve();t.ra.forEach((a,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(D_(t,c),v_(t.localStore,c,!0))),Rw(t.remoteStore,c)}),yield i,yield ML(t,r),function(a){const c=gt(a);c.aa.forEach((p,y)=>{Rw(c.remoteStore,y)}),c.ca.Si(),c.aa=new Map,c.ua=new Oi(ft.comparator)}(t),t.da=!1,yield mP(t.remoteStore,!1)}}),$P.apply(this,arguments)}function ML(n,e,t){return GP.apply(this,arguments)}function GP(){return GP=(0,Oe.Z)(function*(n,e,t){const r=gt(n),i=[],a=[];for(const c of e){let p;const y=r.ra.get(c);if(y&&0!==y.length){p=yield y_(r.localStore,ju(y[0]));for(const b of y){const x=r.ia.get(b),R=yield Qj(r,x);R.snapshot&&a.push(R.snapshot)}}else{const b=yield oL(r.localStore,c);p=yield y_(r.localStore,b),yield DP(r,PL(b),c,!1)}i.push(p)}return r.sa.zo(a),i}),GP.apply(this,arguments)}function PL(n){return $O(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function tz(n){const e=gt(n);return gt(gt(e.localStore).persistence).Fs()}function nz(n,e,t,r){return WP.apply(this,arguments)}function WP(){return WP=(0,Oe.Z)(function*(n,e,t,r){const i=gt(n);if(i.da)return void st("SyncEngine","Ignoring unexpected query state notification.");const a=i.ra.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const c=yield aL(i.localStore,qO(a[0])),p=mw.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield gd(i,c,p);break}case"rejected":yield v_(i.localStore,e,!0),D_(i,e,r);break;default:Dt()}}),WP.apply(this,arguments)}function rz(n,e,t){return qP.apply(this,arguments)}function qP(){return qP=(0,Oe.Z)(function*(n,e,t){const r=ZP(n);if(r.da){for(const i of e){if(r.ra.has(i)){st("SyncEngine","Adding an already active target "+i);continue}const a=yield oL(r.localStore,i),c=yield y_(r.localStore,a);yield DP(r,PL(a),c.targetId,!1),MT(r.remoteStore,c)}for(const i of t)r.ra.has(i)&&(yield v_(r.localStore,i,!1).then(()=>{Rw(r.remoteStore,i),D_(r,i)}).catch(Fp))}}),qP.apply(this,arguments)}function ZP(n){const e=gt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=SL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Yj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$j.bind(null,e),e.sa.zo=Nj.bind(null,e.eventManager),e.sa.wa=Oj.bind(null,e.eventManager),e}function KP(n){const e=gt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Gj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Wj.bind(null,e),e}class RL{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Oe.Z)(function*(){t.M=Mw(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return nL(this.persistence,new tL,e.initialUser,this.M)}ya(e){return new hj(KM.Yi,this.M)}ga(e){return new dL}terminate(){var e=this;return(0,Oe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class kL extends RL{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Oe.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield KP(r.Ta.syncEngine),yield E_(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return nL(this.persistence,new tL,e.initialUser,this.M)}pa(e){return new q2(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=zM(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ka.withCacheSize(this.cacheSizeBytes):ka.DEFAULT;return new jM(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,fL(),xT(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new dL}}class sz extends kL{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Oe.Z)(function*(){yield t().call(r,e);const i=r.Ta.syncEngine;r.sharedClientState instanceof XM&&(r.sharedClientState.syncEngine={$r:Xj.bind(null,i),Br:nz.bind(null,i),Lr:rz.bind(null,i),Fs:tz.bind(null,i),Fr:Jj.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var a=(0,Oe.Z)(function*(c){yield function ez(n,e){return $P.apply(this,arguments)}(r.Ta.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):c||r.gcScheduler.stop())});return function(c){return a.apply(this,arguments)}}())})()}ga(e){const t=fL();if(!XM.vt(t))throw new Ye(Ae.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=zM(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new XM(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class YP{initialize(e,t){var r=this;return(0,Oe.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>AL(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=Kj.bind(null,r.syncEngine),yield mP(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new kj}createDatastore(e){const t=Mw(e.databaseInfo.databaseId),r=new _j(e.databaseInfo);return new wj(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=p=>AL(this.syncEngine,p,0),c=hL.vt()?new hL:new pj,new bj(t,r,i,a,c);var t,r,i,a,c}createSyncEngine(e,t){return function(r,i,a,c,p,y,b){const x=new Bj(r,i,a,c,p,y);return b&&(x.da=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Oe.Z)(function*(t){const r=gt(t);st("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield w_(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function NL(n,e=10240){let t=0;return{read:()=>(0,Oe.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Oe.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class RT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class oz{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new Ss,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,Oe.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,Oe.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,Oe.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),i=Number(r);isNaN(i)&&e.va(`length string (${r}) is not valid number`);const a=yield e.Sa(i);return new Lj(JSON.parse(a),t.length+i)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,Oe.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,Oe.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,Oe.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class az{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Oe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ye(Ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Oe.Z)(function*(a,c){const p=gt(a),y=ww(p.M)+"/documents",b={documents:c.map(G=>vw(p.M,G))},x=yield p._o("BatchGetDocuments",y,b),R=new Map;x.forEach(G=>{const J=function a2(n,e){return"found"in e?function(t,r){rn(!!r.found);const i=cc(t,r.found.name),a=As(r.found.updateTime),c=new xo({mapValue:{fields:r.found.fields}});return Vr.newFoundDocument(i,a,c)}(n,e):"missing"in e?function(t,r){rn(!!r.missing),rn(!!r.readTime);const i=cc(t,r.missing),a=As(r.readTime);return Vr.newNoDocument(i,a)}(n,e):Dt()}(p.M,G);R.set(J.key.toString(),J)});const B=[];return c.forEach(G=>{const J=R.get(G.toString());rn(!!J),B.push(J)}),B}),function(a,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new pw(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Oe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=ft.fromPath(i);e.mutations.push(new TM(a,e.precondition(a)))}),yield(r=(0,Oe.Z)(function*(i,a){const c=gt(i),p=ww(c.M)+"/documents",y={writes:a.map(b=>Ew(c.M,b))};yield c.co("Commit",p,y)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Dt();t=Yt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ye(Ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Yi.updateTime(t):Yi.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Yt.min()))throw new Ye(Ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Yi.updateTime(t)}return Yi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class uz{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.xa=r.maxAttempts,this.No=new eP(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,Oe.Z)(function*(){const t=new az(e.datastore),r=e.ka(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Ma(a)}))}).catch(i=>{e.Ma(i)})}))}ka(e){try{const t=this.updateFunction(e);return!iw(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!u1(t)}return!1}}class lz{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ro.UNAUTHENTICATED,this.clientId=bO.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,Oe.Z)(function*(p){st("FirestoreClient","Received user=",p.uid),yield a.authCredentialListener(p),a.user=p});return function(p){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(st("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,Oe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ye(Ae.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ss;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Oe.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=C_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function OL(n,e){return QP.apply(this,arguments)}function QP(){return QP=(0,Oe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),st("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Oe.Z)(function*(a){r.isEqual(a)||(yield rL(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),QP.apply(this,arguments)}function LL(n,e){return JP.apply(this,arguments)}function JP(){return JP=(0,Oe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield XP(n);st("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>wL(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>wL(e.remoteStore,a)),n.onlineComponents=e}),JP.apply(this,arguments)}function XP(n){return eR.apply(this,arguments)}function eR(){return eR=(0,Oe.Z)(function*(n){return n.offlineComponents||(st("FirestoreClient","Using default OfflineComponentProvider"),yield OL(n,new RL)),n.offlineComponents}),eR.apply(this,arguments)}function kT(n){return tR.apply(this,arguments)}function tR(){return tR=(0,Oe.Z)(function*(n){return n.onlineComponents||(st("FirestoreClient","Using default OnlineComponentProvider"),yield LL(n,new YP)),n.onlineComponents}),tR.apply(this,arguments)}function FL(n){return XP(n).then(e=>e.persistence)}function nR(n){return XP(n).then(e=>e.localStore)}function UL(n){return kT(n).then(e=>e.remoteStore)}function rR(n){return kT(n).then(e=>e.syncEngine)}function S_(n){return iR.apply(this,arguments)}function iR(){return iR=(0,Oe.Z)(function*(n){const e=yield kT(n),t=e.eventManager;return t.onListen=jj.bind(null,e.syncEngine),t.onUnlisten=zj.bind(null,e.syncEngine),t}),iR.apply(this,arguments)}function VL(n,e,t={}){const r=new Ss;return n.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return function(i,a,c,p,y){const b=new RT({next:R=>{a.enqueueAndForget(()=>EP(i,x));const B=R.docs.has(c);!B&&R.fromCache?y.reject(new Ye(Ae.UNAVAILABLE,"Failed to get document because the client is offline.")):B&&R.fromCache&&p&&"server"===p.source?y.reject(new Ye(Ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(R)},error:R=>y.reject(R)}),x=new IP(l_(c.path),b,{includeMetadataChanges:!0,ku:!0});return vP(i,x)}(yield S_(n),n.asyncQueue,e,t,r)})),r.promise}function BL(n,e,t={}){const r=new Ss;return n.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return function(i,a,c,p,y){const b=new RT({next:R=>{a.enqueueAndForget(()=>EP(i,x)),R.fromCache&&"server"===p.source?y.reject(new Ye(Ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(R)},error:R=>y.reject(R)}),x=new IP(c,b,{includeMetadataChanges:!0,ku:!0});return vP(i,x)}(yield S_(n),n.asyncQueue,e,t,r)})),r.promise}const jL=new Map;function sR(n,e,t){if(!t)throw new Ye(Ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function zL(n,e,t,r){if(!0===e&&!0===r)throw new Ye(Ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function HL(n){if(!ft.isDocumentKey(n))throw new Ye(Ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function $L(n){if(ft.isDocumentKey(n))throw new Ye(Ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function NT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Dt()}function Un(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ye(Ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=NT(n);throw new Ye(Ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function GL(n,e){if(e<=0)throw new Ye(Ae.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class WL{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ye(Ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ye(Ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,zL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kw{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new WL({}),this._settingsFrozen=!1,e instanceof fd?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Ye(Ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fd(i.options.projectId)}(e))}get app(){if(!this._app)throw new Ye(Ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ye(Ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new WL(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new yB;switch(t.type){case"gapi":const r=t.client;return rn(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new bB(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ye(Ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=jL.get(e);t&&(st("ComponentProvider","Removing Datastore"),jL.delete(e),t.terminate())}(this),Promise.resolve()}}class Br{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Br(this.firestore,e,this._key)}}class Mo{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Mo(this.firestore,e,this._query)}}class hc extends Mo{constructor(e,t,r){super(e,t,l_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Br(this.firestore,null,new ft(e))}withConverter(e){return new hc(this.firestore,e,this._path)}}function qL(n,e,...t){if(n=(0,z.m9)(n),sR("collection","path",e),n instanceof kw){const r=jn.fromString(e,...t);return $L(r),new hc(n,null,r)}{if(!(n instanceof Br||n instanceof hc))throw new Ye(Ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(jn.fromString(e,...t));return $L(r),new hc(n.firestore,null,r)}}function OT(n,e,...t){if(n=(0,z.m9)(n),1===arguments.length&&(e=bO.R()),sR("doc","path",e),n instanceof kw){const r=jn.fromString(e,...t);return HL(r),new Br(n,null,new ft(r))}{if(!(n instanceof Br||n instanceof hc))throw new Ye(Ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(jn.fromString(e,...t));return HL(r),new Br(n.firestore,n instanceof hc?n.converter:null,new ft(r))}}function ZL(n,e){return n=(0,z.m9)(n),e=(0,z.m9)(e),(n instanceof Br||n instanceof hc)&&(e instanceof Br||e instanceof hc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function KL(n,e){return n=(0,z.m9)(n),e=(0,z.m9)(e),n instanceof Mo&&e instanceof Mo&&n.firestore===e.firestore&&dw(n._query,e._query)&&n.converter===e.converter}class wz{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new eP(this,"async_queue_retry"),this.Qa=()=>{const t=xT();t&&st("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=xT();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=xT();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new Ss;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,Oe.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!xp(t))throw t;st("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,Ki("INTERNAL UNHANDLED ERROR: ",function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),c}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const i=yP.createAndSchedule(this,e,t,r,a=>this.Ha(a));return this.La.push(i),i}ja(){this.Ua&&Dt()}verifyOperationInProgress(){}Ja(){var e=this;return(0,Oe.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function oR(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class Ez{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ss,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Kr extends kw{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new wz,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||YL(this),this._firestoreClient.terminate()}}function Ji(n){return n._firestoreClient||YL(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function YL(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new AB(n._databaseId,a,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var a,p;n._firestoreClient=new lz(n._authCredentials,n._appCheckCredentials,n._queue,r)}function QL(n,e,t){const r=new Ss;return n.asyncQueue.enqueue((0,Oe.Z)(function*(){try{yield OL(n,t),yield LL(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(a=i).name?a.code===Ae.FAILED_PRECONDITION||a.code===Ae.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var a})).then(()=>r.promise)}function JL(n){if(n._initialized||n._terminated)throw new Ye(Ae.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class md{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ye(Ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cs(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class fc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fc(ds.fromBase64String(e))}catch(t){throw new Ye(Ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new fc(ds.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Vp{constructor(e){this._methodName=e}}class LT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ye(Ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ye(Ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return bn(this._lat,e._lat)||bn(this._long,e._long)}}const Pz=/^__.*__$/;class Rz{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ap(e,this.data,this.fieldMask,t,this.fieldTransforms):new fw(e,this.data,t,this.fieldTransforms)}}class XL{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ap(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function eF(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Dt()}}class FT{constructor(e,t,r,i,a,c){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.tc(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new FT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.rc(e),i}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.tc(),i}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return BT(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(eF(this.ec)&&Pz.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class kz{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||Mw(e)}lc(e,t,r,i=!1){return new FT({ec:e,methodName:t,hc:r,path:cs.emptyPath(),ic:!1,cc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Bp(n){const e=n._freezeSettings(),t=Mw(n._databaseId);return new kz(n._databaseId,!!e.ignoreUndefinedProperties,t)}function UT(n,e,t,r,i,a={}){const c=n.lc(a.merge||a.mergeFields?2:0,e,t,i);cR("Data must be an object, but it was:",c,r);const p=rF(r,c);let y,b;if(a.merge)y=new s_(c.fieldMask),b=c.fieldTransforms;else if(a.mergeFields){const x=[];for(const R of a.mergeFields){const B=dR(e,R,t);if(!c.contains(B))throw new Ye(Ae.INVALID_ARGUMENT,`Field '${B}' is specified in your field mask but missing from your input data.`);sF(x,B)||x.push(B)}y=new s_(x),b=c.fieldTransforms.filter(R=>y.covers(R.field))}else y=null,b=c.fieldTransforms;return new Rz(new xo(p),y,b)}class Nw extends Vp{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Nw}}function tF(n,e,t){return new FT({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class aR extends Vp{_toFieldTransform(e){return new hw(e.path,new d_)}isEqual(e){return e instanceof aR}}class Nz extends Vp{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=tF(this,e,!0),r=this.fc.map(a=>jp(a,t)),i=new Dp(r);return new hw(e.path,i)}isEqual(e){return this===e}}class Oz extends Vp{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=tF(this,e,!0),r=this.fc.map(a=>jp(a,t)),i=new Sp(r);return new hw(e.path,i)}isEqual(e){return this===e}}class Lz extends Vp{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new h_(e.M,QO(e.M,this.dc));return new hw(e.path,t)}isEqual(e){return this===e}}function uR(n,e,t,r){const i=n.lc(1,e,t);cR("Data must be an object, but it was:",i,r);const a=[],c=xo.empty();wp(r,(y,b)=>{const x=VT(e,y,t);b=(0,z.m9)(b);const R=i.oc(x);if(b instanceof Nw)a.push(x);else{const B=jp(b,R);null!=B&&(a.push(x),c.set(x,B))}});const p=new s_(a);return new XL(c,p,i.fieldTransforms)}function lR(n,e,t,r,i,a){const c=n.lc(1,e,t),p=[dR(e,r,t)],y=[i];if(a.length%2!=0)throw new Ye(Ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let B=0;B<a.length;B+=2)p.push(dR(e,a[B])),y.push(a[B+1]);const b=[],x=xo.empty();for(let B=p.length-1;B>=0;--B)if(!sF(b,p[B])){const G=p[B];let J=y[B];J=(0,z.m9)(J);const xe=c.oc(G);if(J instanceof Nw)b.push(G);else{const Ze=jp(J,xe);null!=Ze&&(b.push(G),x.set(G,Ze))}}const R=new s_(b);return new XL(x,R,c.fieldTransforms)}function nF(n,e,t,r=!1){return jp(t,n.lc(r?4:3,e))}function jp(n,e){if(iF(n=(0,z.m9)(n)))return cR("Unsupported field value:",e,n),rF(n,e);if(n instanceof Vp)return function(t,r){if(!eF(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const c of t){let p=jp(c,r.uc(a));null==p&&(p={nullValue:"NULL_VALUE"}),i.push(p),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,z.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return QO(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Ni.fromDate(t);return{timestampValue:yw(r.M,i)}}if(t instanceof Ni){const i=new Ni(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:yw(r.M,i)}}if(t instanceof LT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof fc)return{bytesValue:g1(r.M,t._byteString)};if(t instanceof Br){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.ac(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:SM(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${NT(t)}`)}(n,e)}function rF(n,e){const t={};return TO(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wp(n,(r,i)=>{const a=jp(i,e.sc(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function iF(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Ni||n instanceof LT||n instanceof fc||n instanceof Br||n instanceof Vp)}function cR(n,e,t){if(!iF(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=NT(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function dR(n,e,t){if((e=(0,z.m9)(e))instanceof md)return e._internalPath;if("string"==typeof e)return VT(n,e);throw BT("Field path arguments must be of type string or ",n,!1,void 0,t)}const Fz=new RegExp("[~\\*/\\[\\]]");function VT(n,e,t){if(e.search(Fz)>=0)throw BT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new md(...e.split("."))._internalPath}catch(r){throw BT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function BT(n,e,t,r,i){const a=r&&!r.isEmpty(),c=void 0!==i;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let y="";return(a||c)&&(y+=" (found",a&&(y+=` in field ${r}`),c&&(y+=` in document ${i}`),y+=")"),new Ye(Ae.INVALID_ARGUMENT,p+n+y)}function sF(n,e){return n.some(t=>t.isEqual(e))}class Ow{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Br(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Uz(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(jT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Uz extends Ow{data(){return super.data()}}function jT(n,e){return"string"==typeof e?VT(n,e):e instanceof md?e._internalPath:e._delegate._internalPath}class zp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _d extends Ow{constructor(e,t,r,i,a,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Lw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(jT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Lw extends _d{data(e={}){return super.data(e)}}class qh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new zp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Lw(this._firestore,this._userDataWriter,r.key,r,new zp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ye(Ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new Lw(r._firestore,r._userDataWriter,c.doc.key,c.doc,new zp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const p=new Lw(r._firestore,r._userDataWriter,c.doc.key,c.doc,new zp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let y=-1,b=-1;return 0!==c.type&&(y=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),1!==c.type&&(a=a.add(c.doc),b=a.indexOf(c.doc.key)),{type:Vz(c.type),doc:p,oldIndex:y,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Vz(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Dt()}}function oF(n,e){return n instanceof _d&&e instanceof _d?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof qh&&e instanceof qh&&n._firestore===e._firestore&&KL(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function aF(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ye(Ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Fw{}function Zh(n,...e){for(const t of e)n=t._apply(n);return n}class Bz extends Fw{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=Bp(e.firestore),r=function(i,a,c,p,y,b,x){let R;if(y.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Ye(Ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){fF(x,b);const G=[];for(const J of x)G.push(hF(p,i,J));R={arrayValue:{values:G}}}else R=hF(p,i,x)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||fF(x,b),R=nF(c,"where",x,"in"===b||"not-in"===b);const B=so.create(y,b,R);return function(G,J){if(J.S()){const Ze=wM(G);if(null!==Ze&&!Ze.isEqual(J.field))throw new Ye(Ae.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ze.toString()}' and '${J.field.toString()}'`);const vt=vM(G);null!==vt&&pF(0,J.field,vt)}const xe=function(Ze,vt){for(const Mt of Ze.filters)if(vt.indexOf(Mt.op)>=0)return Mt.op;return null}(G,function(Ze){switch(Ze){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(J.op));if(null!==xe)throw new Ye(Ae.INVALID_ARGUMENT,xe===J.op?`Invalid query. You cannot use more than one '${J.op.toString()}' filter.`:`Invalid query. You cannot use '${J.op.toString()}' filters with '${xe.toString()}' filters.`)}(i,B),B}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new Mo(e.firestore,e.converter,function(i,a){const c=i.filters.concat([a]);return new pd(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class zz extends Fw{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Ye(Ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ye(Ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new u_(i,a);return function(p,y){if(null===vM(p)){const b=wM(p);null!==b&&pF(0,b,y.field)}}(r,c),c}(e._query,this._c,this.gc);return new Mo(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new pd(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class uF extends Fw{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new Mo(e.firestore,e.converter,GO(e._query,this.yc,this.Ic))}}class lF extends Fw{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=dF(e,this.type,this.Tc,this.Ec);return new Mo(e.firestore,e.converter,(i=t,new pd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class cF extends Fw{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=dF(e,this.type,this.Tc,this.Ec);return new Mo(e.firestore,e.converter,(i=t,new pd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function dF(n,e,t,r){if(t[0]=(0,z.m9)(t[0]),t[0]instanceof Ow)return function(i,a,c,p,y){if(!p)throw new Ye(Ae.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const b=[];for(const x of c_(i))if(x.field.isKeyField())b.push(Cp(a,p.key));else{const R=p.data.field(x.field);if(gM(R))throw new Ye(Ae.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+x.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===R){const B=x.field.canonicalString();throw new Ye(Ae.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${B}' (used as the orderBy) does not exist.`)}b.push(R)}return new Bh(b,y)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Bp(n.firestore);return function(a,c,p,y,b,x){const R=a.explicitOrderBy;if(b.length>R.length)throw new Ye(Ae.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const B=[];for(let G=0;G<b.length;G++){const J=b[G];if(R[G].field.isKeyField()){if("string"!=typeof J)throw new Ye(Ae.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof J}`);if(!EM(a)&&-1!==J.indexOf("/"))throw new Ye(Ae.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${J}' contains a slash.`);const xe=a.path.child(jn.fromString(J));if(!ft.isDocumentKey(xe))throw new Ye(Ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${xe}' is not because it contains an odd number of segments.`);const Ze=new ft(xe);B.push(Cp(c,Ze))}else{const xe=nF(p,y,J);B.push(xe)}}return new Bh(B,x)}(n._query,n.firestore._databaseId,i,e,t,r)}}function hF(n,e,t){if("string"==typeof(t=(0,z.m9)(t))){if(""===t)throw new Ye(Ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!EM(e)&&-1!==t.indexOf("/"))throw new Ye(Ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(jn.fromString(t));if(!ft.isDocumentKey(r))throw new Ye(Ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Cp(n,new ft(r))}if(t instanceof Br)return Cp(n,t._key);throw new Ye(Ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${NT(t)}.`)}function fF(n,e){if(!Array.isArray(n)||0===n.length)throw new Ye(Ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ye(Ae.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function pF(n,e,t){if(!t.isEqual(e))throw new Ye(Ae.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const Yz={maxAttempts:5};class hR{convertValue(e,t="none"){switch(bp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ep(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Dt()}}convertObject(e,t){const r={};return wp(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new LT(vi(e.latitude),vi(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=DO(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(rw(e));default:return null}}convertTimestamp(e){const t=Fh(e);return new Ni(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=jn.fromString(e);rn(T1(r));const i=new fd(r.get(1),r.get(3)),a=new ft(r.popFirst(5));return i.isEqual(t)||Ki(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function zT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Qz extends hR{constructor(e){super(),this.firestore=e}convertBytes(e){return new fc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Br(this.firestore,null,t)}}class gF{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Bp(e)}set(e,t,r){this._verifyNotCommitted();const i=Kh(e,this._firestore),a=zT(i.converter,t,r),c=UT(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,Yi.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Kh(e,this._firestore);let c;return c="string"==typeof(t=(0,z.m9)(t))||t instanceof md?lR(this._dataReader,"WriteBatch.update",a._key,t,r,i):uR(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(c.toMutation(a._key,Yi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Kh(e,this._firestore);return this._mutations=this._mutations.concat(new pw(t._key,Yi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ye(Ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Kh(n,e){if((n=(0,z.m9)(n)).firestore!==e)throw new Ye(Ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Hp extends hR{constructor(e){super(),this.firestore=e}convertBytes(e){return new fc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Br(this.firestore,null,t)}}function mF(n,e,t){n=Un(n,Br);const r=Un(n.firestore,Kr),i=zT(n.converter,e,t);return A_(r,[UT(Bp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Yi.none())])}function _F(n,e,t,...r){n=Un(n,Br);const i=Un(n.firestore,Kr),a=Bp(i);let c;return c="string"==typeof(e=(0,z.m9)(e))||e instanceof md?lR(a,"updateDoc",n._key,e,t,r):uR(a,"updateDoc",n._key,e),A_(i,[c.toMutation(n._key,Yi.exists(!0))])}function yF(n,...e){var t,r,i;n=(0,z.m9)(n);let a={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||oR(e[c])||(a=e[c],c++);const p={includeMetadataChanges:a.includeMetadataChanges};if(oR(e[c])){const R=e[c];e[c]=null===(t=R.next)||void 0===t?void 0:t.bind(R),e[c+1]=null===(r=R.error)||void 0===r?void 0:r.bind(R),e[c+2]=null===(i=R.complete)||void 0===i?void 0:i.bind(R)}let y,b,x;if(n instanceof Br)b=Un(n.firestore,Kr),x=l_(n._key.path),y={next:R=>{e[c]&&e[c](fR(b,n,R))},error:e[c+1],complete:e[c+2]};else{const R=Un(n,Mo);b=Un(R.firestore,Kr),x=R._query;const B=new Hp(b);y={next:G=>{e[c]&&e[c](new qh(b,B,R,G))},error:e[c+1],complete:e[c+2]},aF(n._query)}return function(R,B,G,J){const xe=new RT(J),Ze=new IP(B,xe,G);return R.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return vP(yield S_(R),Ze)})),()=>{xe.Aa(),R.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return EP(yield S_(R),Ze)}))}}(Ji(b),x,p,y)}function A_(n,e){return function(t,r){const i=new Ss;return t.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return function Hj(n,e,t){return xP.apply(this,arguments)}(yield rR(t),r,i)})),i.promise}(Ji(n),e)}function fR(n,e,t){const r=t.docs.get(e._key),i=new Hp(n);return new _d(n,i,e._key,r,new zp(t.hasPendingWrites,t.fromCache),e.converter)}class aH extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Bp(e)}get(e){const t=Kh(e,this._firestore),r=new Qz(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return Dt();const a=i[0];if(a.isFoundDocument())return new Ow(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new Ow(this._firestore,r,t._key,null,t.converter);throw Dt()})}set(e,t,r){const i=Kh(e,this._firestore),a=zT(i.converter,t,r),c=UT(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const a=Kh(e,this._firestore);let c;return c="string"==typeof(t=(0,z.m9)(t))||t instanceof md?lR(this._dataReader,"Transaction.update",a._key,t,r,i):uR(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,c),this}delete(e){const t=Kh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Kh(e,this._firestore),r=new Hp(this._firestore);return super.get(e).then(i=>new _d(this._firestore,r,t._key,i._document,new zp(!1,!1),t.converter))}}function pR(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ye("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function wF(){if("undefined"==typeof Uint8Array)throw new Ye("unimplemented","Uint8Arrays are not available in this environment.")}function EF(){if(!function DB(){return"undefined"!=typeof atob}())throw new Ye("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){r_=yi.SDK_VERSION,(0,yi._registerComponent)(new ai.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),a=new Kr(i,new wB(t.getProvider("auth-internal")),new CB(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),(0,yi.registerVersion)(vO,"3.4.9",n),(0,yi.registerVersion)(vO,"3.4.9","esm2017")}();class Uw{constructor(e){this._delegate=e}static fromBase64String(e){return EF(),new Uw(fc.fromBase64String(e))}static fromUint8Array(e){return wF(),new Uw(fc.fromUint8Array(e))}toBase64(){return EF(),this._delegate.toBase64()}toUint8Array(){return wF(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function gR(n){return function mH(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class _H{enableIndexedDbPersistence(e,t){return function Cz(n,e){JL(n=Un(n,Kr));const t=Ji(n),r=n._freezeSettings(),i=new YP;return QL(t,i,new kL(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Iz(n){JL(n=Un(n,Kr));const e=Ji(n),t=n._freezeSettings(),r=new YP;return QL(e,r,new sz(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Tz(n){if(n._initialized&&!n._terminated)throw new Ye(Ae.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ss;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Oe.Z)(function*(){try{yield(t=(0,Oe.Z)(function*(r){if(!ml.vt())return Promise.resolve();const i=r+"main";yield ml.delete(i)}),function(r){return t.apply(this,arguments)})(zM(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class bF{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof fd||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&tw("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function yz(n,e,t,r={}){var i;const a=(n=Un(n,kw))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&tw("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,p;if("string"==typeof r.mockUserToken)c=r.mockUserToken,p=ro.MOCK_USER;else{c=(0,z.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Ye(Ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new ro(y)}n._authCredentials=new vB(new wO(c,p))}}(this._delegate,e,t,r)}enableNetwork(){return function Sz(n){return function cz(n){return n.asyncQueue.enqueue((0,Oe.Z)(function*(){const e=yield FL(n),t=yield UL(n);return e.setNetworkEnabled(!0),function(r){const i=gt(r);return i.wu.delete(0),Pw(i)}(t)}))}(Ji(n=Un(n,Kr)))}(this._delegate)}disableNetwork(){return function Az(n){return function dz(n){return n.asyncQueue.enqueue((0,Oe.Z)(function*(){const e=yield FL(n),t=yield UL(n);return e.setNetworkEnabled(!1),(r=(0,Oe.Z)(function*(i){const a=gt(i);a.wu.add(0),yield w_(a),a.yu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Ji(n=Un(n,Kr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,zL("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Dz(n){return function(e){const t=new Ss;return e.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return function qj(n,e){return NP.apply(this,arguments)}(yield rR(e),t)})),t.promise}(Ji(n=Un(n,Kr)))}(this._delegate)}onSnapshotsInSync(e){return function oH(n,e){return function pz(n,e){const t=new RT(e);return n.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return r=yield S_(n),i=t,gt(r).bu.add(i),void i.next();var r,i})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return r=yield S_(n),i=t,void gt(r).bu.delete(i);var r,i}))}}(Ji(n=Un(n,Kr)),oR(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ye("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new x_(this,qL(this._delegate,e))}catch(t){throw ia(t,"collection()","Firestore.collection()")}}doc(e){try{return new Hu(this,OT(this._delegate,e))}catch(t){throw ia(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new sa(this,function vz(n,e){if(n=Un(n,kw),sR("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ye(Ae.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Mo(n,null,(t=e,new pd(jn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ia(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function uH(n,e,t){n=Un(n,Kr);const r=Object.assign(Object.assign({},Yz),t);return function(i){if(i.maxAttempts<1)throw new Ye(Ae.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function gz(n,e,t){const r=new Ss;return n.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){const i=yield(a=n,kT(a).then(c=>c.datastore));var a;new uz(n.asyncQueue,i,t,e,r).run()})),r.promise}(Ji(n),i=>e(new aH(n,i)),r)}(this._delegate,t=>e(new CF(this,t)))}batch(){return Ji(this._delegate),new IF(new gF(this._delegate,e=>A_(this._delegate,e)))}loadBundle(e){return function xz(n,e){const t=Ji(n=Un(n,Kr)),r=new Ez;return function mz(n,e,t,r){const i=function(a,c){let p;return p="string"==typeof a?(new TextEncoder).encode(a):a,y=function(y,b){if(y instanceof Uint8Array)return NL(y,b);if(y instanceof ArrayBuffer)return NL(new Uint8Array(y),b);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new oz(y,c);var y}(t,Mw(e));n.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){!function iz(n,e,t){const r=gt(n);var i;(i=(0,Oe.Z)(function*(a,c,p){try{const y=yield c.getMetadata();if(yield function(B,G){const J=gt(B),xe=As(G.createTime);return J.persistence.runTransaction("hasNewerBundle","readonly",Ze=>J._s.getBundleMetadata(Ze,G.id)).then(Ze=>!!Ze&&Ze.createTime.compareTo(xe)>=0)}(a.localStore,y))return yield c.close(),p._completeWith({taskState:"Success",documentsLoaded:(B=y).totalDocuments,bytesLoaded:B.totalBytes,totalDocuments:B.totalDocuments,totalBytes:B.totalBytes}),Promise.resolve(new Set);p._updateProgress(CL(y));const b=new Fj(y,a.localStore,c.M);let x=yield c.ma();for(;x;){const B=yield b.Fu(x);B&&p._updateProgress(B),x=yield c.ma()}const R=yield b.complete();return yield gd(a,R.Lu,void 0),yield function(B,G){const J=gt(B);return J.persistence.runTransaction("Save bundle","readwrite",xe=>J._s.saveBundleMetadata(xe,G))}(a.localStore,y),p._completeWith(R.progress),Promise.resolve(R.Bu)}catch(y){return tw("SyncEngine",`Loading bundle failed with ${y}`),p._failWith(y),Promise.resolve(new Set)}var B}),function(a,c,p){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield rR(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Mz(n,e){return function _z(n,e){return n.asyncQueue.enqueue((0,Oe.Z)(function*(){return function(t,r){const i=gt(t);return i.persistence.runTransaction("Get named query","readonly",a=>i._s.getNamedQuery(a,r))}(yield nR(n),e)}))}(Ji(n=Un(n,Kr)),e).then(t=>t?new Mo(n,null,t.query):null)}(this._delegate,e).then(t=>t?new sa(this,t):null)}}class HT extends hR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Uw(new fc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Hu.forKey(t,this.firestore,null)}}class CF{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new HT(e)}get(e){const t=Gp(e);return this._delegate.get(t).then(r=>new Vw(this._firestore,new _d(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Gp(e);return r?(pR("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Gp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Gp(e);return this._delegate.delete(t),this}}class IF{constructor(e){this._delegate=e}set(e,t,r){const i=Gp(e);return r?(pR("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Gp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Gp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class $p{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Lw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Bw(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=$p.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new $p(e,new HT(e),t),i.set(t,a)),a}}$p.INSTANCES=new WeakMap;class Hu{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new HT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ye("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Hu(t,new Br(t._delegate,r,new ft(e)))}static forKey(e,t,r){return new Hu(t,new Br(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new x_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new x_(this.firestore,qL(this._delegate,e))}catch(t){throw ia(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,z.m9)(e))instanceof Br&&ZL(this._delegate,e)}set(e,t){t=pR("DocumentReference.set",t);try{return t?mF(this._delegate,e,t):mF(this._delegate,e)}catch(r){throw ia(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?_F(this._delegate,e):_F(this._delegate,e,t,...r)}catch(i){throw ia(i,"updateDoc()","DocumentReference.update()")}}delete(){return function iH(n){return A_(Un(n.firestore,Kr),[new pw(n._key,Yi.none())])}(this._delegate)}onSnapshot(...e){const t=TF(e),r=DF(e,i=>new Vw(this.firestore,new _d(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return yF(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Xz(n){n=Un(n,Br);const e=Un(n.firestore,Kr),t=Ji(e),r=new Hp(e);return function hz(n,e){const t=new Ss;return n.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return(r=(0,Oe.Z)(function*(i,a,c){try{const p=yield function(y,b){const x=gt(y);return x.persistence.runTransaction("read document","readonly",R=>x.fi.Ls(R,b))}(i,a);p.isFoundDocument()?c.resolve(p):p.isNoDocument()?c.resolve(null):c.reject(new Ye(Ae.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const y=C_(p,`Failed to get document '${a} from cache`);c.reject(y)}}),function(i,a,c){return r.apply(this,arguments)})(yield nR(n),e,t);var r})),t.promise}(t,n._key).then(i=>new _d(e,r,n._key,i,new zp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function eH(n){n=Un(n,Br);const e=Un(n.firestore,Kr);return VL(Ji(e),n._key,{source:"server"}).then(t=>fR(e,n,t))}(this._delegate):function Jz(n){n=Un(n,Br);const e=Un(n.firestore,Kr);return VL(Ji(e),n._key).then(t=>fR(e,n,t))}(this._delegate),t.then(r=>new Vw(this.firestore,new _d(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Hu(this.firestore,this._delegate.withConverter(e?$p.getInstance(this.firestore,e):null))}}function ia(n,e,t){return n.message=n.message.replace(e,t),n}function TF(n){for(const e of n)if("object"==typeof e&&!gR(e))return e;return{}}function DF(n,e){var t,r;let i;return i=gR(n[0])?n[0]:gR(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Vw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Hu(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return oF(this._delegate,e._delegate)}}class Bw extends Vw{data(e){const t=this._delegate.data(e);return function _B(n,e){n||Dt()}(void 0!==t),t}}class sa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new HT(e)}where(e,t,r){try{return new sa(this.firestore,Zh(this._delegate,function jz(n,e,t){const r=e,i=jT("where",n);return new Bz(i,r,t)}(e,t,r)))}catch(i){throw ia(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new sa(this.firestore,Zh(this._delegate,function Hz(n,e="asc"){const t=e,r=jT("orderBy",n);return new zz(r,t)}(e,t)))}catch(r){throw ia(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new sa(this.firestore,Zh(this._delegate,function $z(n){return GL("limit",n),new uF("limit",n,"F")}(e)))}catch(t){throw ia(t,"limit()","Query.limit()")}}limitToLast(e){try{return new sa(this.firestore,Zh(this._delegate,function Gz(n){return GL("limitToLast",n),new uF("limitToLast",n,"L")}(e)))}catch(t){throw ia(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new sa(this.firestore,Zh(this._delegate,function Wz(...n){return new lF("startAt",n,!0)}(...e)))}catch(t){throw ia(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new sa(this.firestore,Zh(this._delegate,function qz(...n){return new lF("startAfter",n,!1)}(...e)))}catch(t){throw ia(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new sa(this.firestore,Zh(this._delegate,function Zz(...n){return new cF("endBefore",n,!1)}(...e)))}catch(t){throw ia(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new sa(this.firestore,Zh(this._delegate,function Kz(...n){return new cF("endAt",n,!0)}(...e)))}catch(t){throw ia(t,"endAt()","Query.endAt()")}}isEqual(e){return KL(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function nH(n){n=Un(n,Mo);const e=Un(n.firestore,Kr),t=Ji(e),r=new Hp(e);return function fz(n,e){const t=new Ss;return n.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return(r=(0,Oe.Z)(function*(i,a,c){try{const p=yield DT(i,a,!0),y=new DL(a,p._i),b=y.Wu(p.documents),x=y.applyChanges(b,!1);c.resolve(x.snapshot)}catch(p){const y=C_(p,`Failed to execute query '${a} against cache`);c.reject(y)}}),function(i,a,c){return r.apply(this,arguments)})(yield nR(n),e,t);var r})),t.promise}(t,n._query).then(i=>new qh(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function rH(n){n=Un(n,Mo);const e=Un(n.firestore,Kr),t=Ji(e),r=new Hp(e);return BL(t,n._query,{source:"server"}).then(i=>new qh(e,r,n,i))}(this._delegate):function tH(n){n=Un(n,Mo);const e=Un(n.firestore,Kr),t=Ji(e),r=new Hp(e);return aF(n._query),BL(t,n._query).then(i=>new qh(e,r,n,i))}(this._delegate),t.then(r=>new mR(this.firestore,new qh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=TF(e),r=DF(e,i=>new mR(this.firestore,new qh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return yF(this._delegate,t,r)}withConverter(e){return new sa(this.firestore,this._delegate.withConverter(e?$p.getInstance(this.firestore,e):null))}}class vH{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Bw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class mR{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new sa(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Bw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new vH(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Bw(this._firestore,r))})}isEqual(e){return oF(this._delegate,e._delegate)}}class x_ extends sa{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Hu(this.firestore,e):null}doc(e){try{return new Hu(this.firestore,void 0===e?OT(this._delegate):OT(this._delegate,e))}catch(t){throw ia(t,"doc()","CollectionReference.doc()")}}add(e){return function sH(n,e){const t=Un(n.firestore,Kr),r=OT(n),i=zT(n.converter,e);return A_(t,[UT(Bp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Yi.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Hu(this.firestore,t))}isEqual(e){return ZL(this._delegate,e._delegate)}withConverter(e){return new x_(this.firestore,this._delegate.withConverter(e?$p.getInstance(this.firestore,e):null))}}function Gp(n){return Un(n,Br)}class _R{constructor(...e){this._delegate=new md(...e)}static documentId(){return new _R(cs.keyField().canonicalString())}isEqual(e){return(e=(0,z.m9)(e))instanceof md&&this._delegate._internalPath.isEqual(e._internalPath)}}class Wp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function cH(){return new aR("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Wp(e)}static delete(){const e=function lH(){return new Nw("deleteField")}();return e._methodName="FieldValue.delete",new Wp(e)}static arrayUnion(...e){const t=function dH(...n){return new Nz("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Wp(t)}static arrayRemove(...e){const t=function hH(...n){return new Oz("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Wp(t)}static increment(e){const t=function fH(n){return new Lz("increment",n)}(e);return t._methodName="FieldValue.increment",new Wp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const wH={Firestore:bF,GeoPoint:LT,Timestamp:Ni,Blob:Uw,Transaction:CF,WriteBatch:IF,DocumentReference:Hu,DocumentSnapshot:Vw,Query:sa,QueryDocumentSnapshot:Bw,QuerySnapshot:mR,CollectionReference:x_,FieldPath:_R,FieldValue:Wp,setLogLevel:function yH(n){!function mB(n){Lh.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function SF(n,e){return function CH(n,e=Vg.z){return new ri.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function yR(n,e){return SF(n,e).pipe((0,v.U)(t=>({payload:t,type:"query"})))}function $T(n,e){return yR(n,e).pipe(Ho(void 0),Ex(),(0,v.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,p)=>{const y=i.find(x=>x.doc.ref.isEqual(c.ref)),b=null==t?void 0:t.payload.docs.find(x=>x.ref.isEqual(c.ref));y&&JSON.stringify(y.doc.metadata)===JSON.stringify(c.metadata)||!y&&b&&JSON.stringify(b.metadata)===JSON.stringify(c.metadata)||a.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:c}})}),a}))}function AF(n,e,t){return $T(n,t).pipe(Ai((r,i)=>function TH(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function DH(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return vR(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return vR(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return vR(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),Dy(),(0,v.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function vR(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function xF(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function bH(n){(function EH(n,e){n.INTERNAL.registerComponent(new ai.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},wH)))})(n,(e,t)=>new bF(e,t,new _H)),n.registerVersion("@firebase/firestore-compat","0.1.18")}(Af.Z);class MF{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=$T(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,v.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Ho(void 0),Ex(),pr(([r,i])=>i.length>0||!r),(0,v.U)(([r,i])=>i),un.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ai((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=xF(e);return AF(this.query,t,this.afs.schedulers.outsideAngular).pipe(un.iC)}valueChanges(e={}){return yR(this.query,this.afs.schedulers.outsideAngular).pipe((0,v.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),un.iC)}get(e){return(0,Ln.D)(this.query.get(e)).pipe(un.iC)}add(e){return this.ref.add(e)}doc(e){return new PF(this.ref.doc(e),this.afs)}}class PF{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=NF(r,t);return new MF(i,a,this.afs)}snapshotChanges(){return function IH(n,e){return SF(n,e).pipe(Ho(void 0),Ex(),(0,v.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(un.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,v.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Ln.D)(this.ref.get(e)).pipe(un.iC)}}class SH{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?$T(this.query,this.afs.schedulers.outsideAngular).pipe((0,v.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),pr(t=>t.length>0),un.iC):$T(this.query,this.afs.schedulers.outsideAngular).pipe(un.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ai((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=xF(e);return AF(this.query,t,this.afs.schedulers.outsideAngular).pipe(un.iC)}valueChanges(e={}){return yR(this.query,this.afs.schedulers.outsideAngular).pipe((0,v.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),un.iC)}get(e){return(0,Ln.D)(this.query.get(e)).pipe(un.iC)}}const RF=new g.OlP("angularfire2.enableFirestorePersistence"),kF=new g.OlP("angularfire2.firestore.persistenceSettings"),AH=new g.OlP("angularfire2.firestore.settings"),xH=new g.OlP("angularfire2.firestore.use-emulator");function NF(n,e=(t=>t)){return{query:e(n),ref:n}}let GT=(()=>{class n{constructor(t,r,i,a,c,p,y,b,x,R,B,G,J,xe,Ze,vt,Mt){this.schedulers=y;const At=(0,_i.on)(t,p,r),It=x;R&&Ug(At,p,B,J,xe,Ze,G,vt),[this.firestore,this.persistenceEnabled$]=(0,_i.cc)(`${At.name}.firestore`,"AngularFirestore",At.name,()=>{const gn=p.runOutsideAngular(()=>At.firestore());if(a&&gn.settings(a),It&&gn.useEmulator(...It),i&&!ei(c)){const xn=()=>{try{return(0,Ln.D)(gn.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(es){return"undefined"!=typeof console&&console.warn(es),yt(!1)}};return[gn,p.runOutsideAngular(xn)]}return[gn,yt(!1)]},[a,It,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:c}=NF(i,r),p=this.schedulers.ngZone.run(()=>a);return new MF(p,c,this)}collectionGroup(t,r){const i=r||(c=>c),a=this.firestore.collectionGroup(t);return new SH(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new PF(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(_i.Dh),g.LFG(_i.xv,8),g.LFG(RF,8),g.LFG(AH,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(un.HU),g.LFG(kF,8),g.LFG(xH,8),g.LFG(Sf,8),g.LFG(Fg,8),g.LFG(jE,8),g.LFG(zE,8),g.LFG(Df,8),g.LFG(HE,8),g.LFG(Ty,8),g.LFG(zc,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),MH=(()=>{class n{constructor(){Tf.Z.registerVersion("angularfire",un.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:RF,useValue:!0},{provide:kF,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[GT]}),n})(),M_=(()=>{class n{constructor(t,r){this.afs=t,this.router=r,this.markerCollection=this.afs.collection("Marker"),this.bikeMarkers=this.afs.collection("Marker").snapshotChanges().pipe((0,v.U)(i=>i.map(a=>{const c=a.payload.doc.data();return c.id=a.payload.doc.id,c})))}getMarkers(){return this.bikeMarkers}addMarker(t){this.markerCollection.add(t),this.router.navigate(["/"])}deleteMarker(t){console.log(t),this.itemDoc=this.afs.doc(`Marker/${t}`),this.itemDoc.delete()}addRent(t){if(null!==localStorage.getItem("email")){var r=localStorage.getItem("email")+"Rent";this.afs.collection(r).add(t)}}addLend(t){if(null!==localStorage.getItem("email")){var r=localStorage.getItem("email")+"Lend";this.afs.collection(r).add(t)}}getRentMarkers(){if(null!==localStorage.getItem("email")){var t=localStorage.getItem("email")+"Rent";this.rentMarkers=this.afs.collection(t).snapshotChanges().pipe((0,v.U)(r=>r.map(i=>{const a=i.payload.doc.data();return a.id=i.payload.doc.id,a})))}return this.rentMarkers}getLendMarkers(){if(null!==localStorage.getItem("email")){var t=localStorage.getItem("email")+"Lend";this.lendMarkers=this.afs.collection(t).snapshotChanges().pipe((0,v.U)(r=>r.map(i=>{const a=i.payload.doc.data();return a.id=i.payload.doc.id,a})))}return this.lendMarkers}deleteLendMarker(){var t,r;null!==localStorage.getItem("lendID")&&void 0!==localStorage.getItem("lendID")&&(t=localStorage.getItem("lendID"),this.afs.collection("Marker").doc(t).ref.get().then(i=>{console.log(i.data()),void 0!==(r=i.data()).Email&&(console.log("hier"),this.deleteMarker(t),this.addRent(r),this.router.navigate(["/"]))}))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(GT),g.LFG(Ar))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),PH=(()=>{class n{constructor(t){this.ms=t,this.update=new g.vpe,this.centroid=[49.0092096,8.4040173]}initMap(){this.map=RI.map("map",{center:this.centroid,zoom:16});const t=RI.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:30,minZoom:10,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'});this.map.on("click",r=>{null!==localStorage.getItem("email")&&(localStorage.setItem("lat",r.latlng.lat.toString()),localStorage.setItem("lng",r.latlng.lng.toString()));var i=r.latlng;RI.popup().setLatLng(i).setContent("<p>M\xf6chten Sie ein Fahrrad ausleihen oder verleihen?</p>").openOn(this.map)});for(let r=0;r<this.markers.length;r++)RI.marker([this.markers[r].Lat,this.markers[r].Lng]).addTo(this.map);t.addTo(this.map)}ngOnInit(){this.ms.getMarkers().subscribe(t=>{this.markers=t,this.initMap()})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(M_))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-map"]],outputs:{update:"update"},decls:4,vars:0,consts:[["rel","stylesheet","href","https://unpkg.com/leaflet@1.8.0/dist/leaflet.css","integrity","sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ==","crossorigin",""],[1,"map-container"],[1,"map-frame"],["id","map"]],template:function(t,r){1&t&&(g._UZ(0,"link",0),g.TgZ(1,"div",1)(2,"div",2),g._UZ(3,"div",3),g.qZA()())},styles:[".map-container[_ngcontent-%COMP%]{position:absolute;top:17rem;left:0;right:0;bottom:0;margin:30px}.map-frame[_ngcontent-%COMP%]{margin:0 auto;border:2px solid black;height:50%;z-index:1}#map[_ngcontent-%COMP%]{height:100%;width:100%}.leaflet-popup-content-wrapper[_ngcontent-%COMP%]{min-width:350px}"]}),n})(),RH=(()=>{class n{constructor(t,r,i){this.router=t,this.db=r,this.route=i}ngOnInit(){localStorage.setItem("lat",""),localStorage.setItem("lng",""),this.changeName()}changeName(){if(null!==localStorage.getItem("email")){const t=localStorage.getItem("email");this.db.database.ref(t||"").get().then(function(r){const a="Willkommen "+r.val().name;console.log(a);const c=document.getElementById("changeName");null!==c&&(c.innerHTML=a)})}}navigateRent(){if("true"===localStorage.getItem("token")&&""!==localStorage.getItem("lat")&&""!==localStorage.getItem("lng"))this.router.navigate(["/rent"],{relativeTo:this.route});else{const t=document.getElementById("errorText_home");null!==t&&"true"!==localStorage.getItem("token")?t.style.color="red":null!==t&&(""===localStorage.getItem("lat")||""===localStorage.getItem("lng"))&&(t.innerHTML="W\xe4hlen Sie einen Punkt auf der Karte aus.",t.style.color="red")}}navigateLend(){if("true"===localStorage.getItem("token")&&""!==localStorage.getItem("lat")&&""!==localStorage.getItem("lng"))this.router.navigate(["/lend"],{relativeTo:this.route});else{const t=document.getElementById("errorText_home");null!==t&&"true"!==localStorage.getItem("token")?t.style.color="red":null!==t&&(""===localStorage.getItem("lat")||""===localStorage.getItem("lng"))&&(t.innerHTML="W\xe4hlen Sie einen Punkt auf der Karte aus.",t.style.color="red")}}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Ar),g.Y36(Ah),g.Y36(el))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-home"]],decls:93,vars:0,consts:[[1,"header"],[2,"margin","30px"],[2,"padding-bottom","10px"],[1,"map"],[1,"wrapper"],[1,"actions",3,"click"],["id","errorText_home",1,"errorText"],[1,"container"],[1,"topleft"],[1,"topright"],[1,"bottomright"],[1,"bottomleft"],[1,"footer"],[2,"margin-bottom","15px"],["id","email_newsletter","type","email","name","nf_email","placeholder","Ihre E-Mail-Adresse","maxlength","50"],["type","submit"]],template:function(t,r){1&t&&(g.TgZ(0,"header",0)(1,"h1",1),g._uU(2,"Bikescout25"),g.qZA(),g.TgZ(3,"p",2)(4,"em"),g._uU(5,' "Mobilit\xe4t einfach gemacht." '),g.qZA(),g._UZ(6,"br")(7,"br"),g._uU(8," Jetzt "),g.TgZ(9,"b"),g._uU(10," NEU "),g.qZA(),g._uU(11," im Raum Karlsruhe testen! "),g.qZA()(),g.TgZ(12,"div",3),g._UZ(13,"router-outlet"),g.qZA(),g.TgZ(14,"div",4),g._UZ(15,"app-map"),g.TgZ(16,"button",5),g.NdJ("click",function(){return r.navigateRent()}),g._uU(17,"Fahrrad ausleihen"),g.qZA(),g.TgZ(18,"button",5),g.NdJ("click",function(){return r.navigateLend()}),g._uU(19,"Fahrrad verleihen"),g.qZA(),g.TgZ(20,"div",6),g._uU(21,"Bitte logge dich ein, um diese Funktion zu nutzen."),g.qZA()(),g.TgZ(22,"div",7)(23,"div",8)(24,"h2"),g._uU(25," Unsere Mission "),g.qZA(),g.TgZ(26,"p"),g._uU(27," Egal ob Sie ein Citybike, Touren, Trecking, Mountain -oder E-bike mieten m\xf6chten: wir von Bikescout25 haben das passende Rad. Ob mit der Famile oder Freunden oder mit Ihrem Unternehmen einen Betriebsausflug planen. Wir m\xf6chten, dass Sie Karlsruhe so unkompliziert wie m\xf6glich mit dem Fahrrad entdecken k\xf6nnen. Daf\xfcr bieten wir mit unserem einfachen Verleihmodell verschiedene R\xe4der f\xfcr Gro\xdf und Klein an, die von anderen Nutzern zur Verf\xfcgung gestellt werden. "),g._UZ(28,"br")(29,"br"),g._uU(30," Abbonieren Sie gerne unseren "),g.TgZ(31,"b"),g._uU(32," Newsletter "),g.qZA(),g._uU(33," , um nichts \xfcber den kommenden Start zu verpassen! "),g.qZA()(),g.TgZ(34,"div",9)(35,"h2"),g._uU(36," Standorte "),g.qZA(),g.TgZ(37,"p"),g._uU(38," Zum baldigen Start von Bikescout25 stehen Ihnen zahlreiche Fahrr\xe4der f\xfcr den Verleih im "),g.TgZ(39,"b"),g._uU(40," Raum Karlsruhe "),g.qZA(),g._uU(41," zur Verf\xfcgung. "),g._UZ(42,"br"),g._uU(43," In Zukunft planen wir unser Angebot auszuweiten und auch in anderen St\xe4dten anzubieten. "),g._UZ(44,"br")(45,"br"),g._uU(46," In Planung f\xfcr die Erweiterung unseres Angebots sind die St\xe4dte: Hamburg, Berlin, K\xf6ln und Stuttgart. "),g.qZA()(),g.TgZ(47,"div",10)(48,"h2"),g._uU(49," News "),g.qZA(),g.TgZ(50,"p"),g._uU(51," Bikescout25 befindet sich zum gegenw\xe4rtigen Zeitpunkt noch in der Testphase. "),g._UZ(52,"br"),g._uU(53," Wir freuen uns \xfcber jegliches Feedback und \xfcber Helfer, die uns bei der Weiterentwicklung unterst\xfctzen. "),g._UZ(54,"br")(55,"br"),g._uU(56," Melden Sie sich bei interesse gerne unter: "),g.TgZ(57,"b"),g._uU(58," support@bikescout25.de "),g.qZA(),g._UZ(59,"br")(60,"br"),g._uU(61," Das n\xe4chste Event zur Pr\xe4sentation zum Stand der Testphase findet am "),g.TgZ(62,"b"),g._uU(63," 15.07.2022 um 17 Uhr "),g.qZA(),g._uU(64," statt. "),g._UZ(65,"br"),g._uU(66," Nehmen Sie gerne unter www.bikescout25.de/live teil und erfahren Sie alles \xfcber zuk\xfcnftige Features. "),g.qZA()(),g.TgZ(67,"div",11)(68,"h2"),g._uU(69," So funktioniert Bikescout25 "),g.qZA(),g.TgZ(70,"p"),g._uU(71," Bikescout25 soll so einfach gestaltet sein wie nur m\xf6glich, sodass jung und alt bequem zugreifen k\xf6nnen um Karlsruhe auf dem Fahrrad zu erkunden. Sie m\xf6chten ein Fahrrad ausleihen? Das ist in 4 einfachen Schritten m\xf6glich. "),g._UZ(72,"br")(73,"br"),g._uU(74," 1. Legen Sie ein Nutzerkonto an, indem Sie sich auf unserer Webseite registrieren. "),g._UZ(75,"br")(76,"br"),g._uU(77,' 2. W\xe4hlen Sie auf der Karte das gew\xfcnschte Fahrrad aus und bet\xe4tigen Sie den Knopf "Fahrrad ausleihen". '),g._UZ(78,"br")(79,"br"),g._uU(80," 3. W\xe4hlen Sie das n\xe4chstgelegene Fahrrad in der \xdcbersicht und bet\xe4tigen sie die Leihe. "),g._UZ(81,"br")(82,"br"),g._uU(83," 4. Pr\xfcfen Sie Ihre Bestellung im Kundenkonto und machen Sie sich bereit f\xfcr Ihre fahrt! "),g.qZA()()(),g.TgZ(84,"div",12)(85,"p"),g._uU(86,"Bikescout25 - Jetzt zum Newsletter anmelden! "),g._UZ(87,"br"),g.qZA(),g.TgZ(88,"form",13),g._UZ(89,"input",14),g.TgZ(90,"button",15)(91,"span"),g._uU(92,"Anmelden"),g.qZA()()()())},directives:[jl,PH,Pt,cp,S],styles:['body[_ngcontent-%COMP%]{margin:0;padding:0}h1[_ngcontent-%COMP%]{text-align:center;font-size:3rem;color:#eb8613}h2[_ngcontent-%COMP%]{text-align:center;font-size:2rem;color:#eb8613}p[_ngcontent-%COMP%]{text-align:center;font-size:1rem}.header[_ngcontent-%COMP%]{margin:auto;background-color:#fff;width:35%;border-radius:30px;box-shadow:5px 5px 5px #000}.wrapper[_ngcontent-%COMP%]{margin:auto;text-align:center;padding:30px;width:80%;height:100%}.map[_ngcontent-%COMP%]{border:none}.errorText[_ngcontent-%COMP%]{color:#daf5d1;font-size:1rem;margin:10px;position:relative}.actions[_ngcontent-%COMP%]{position:relative;top:25rem;margin-bottom:25em;text-align:center;background-color:#fff;box-shadow:2px 2px 2px #000;padding:7px;margin-right:50px;margin-left:50px;border-radius:5px;font-size:medium;z-index:1000}.actions[_ngcontent-%COMP%]:hover{background-color:#eb8613}.container[_ngcontent-%COMP%]{display:grid;margin-bottom:8em;grid-template-columns:1fr 1fr;grid-template-rows:1fr 1fr;grid-gap:15px 15px;gap:15px 15px;grid-auto-flow:row;grid-template-areas:"topleft topright" "bottomleft bottomright"}.topleft[_ngcontent-%COMP%]{grid-area:topleft;align-items:center;justify-content:center;border-radius:15px;background:white;padding:5px}.topright[_ngcontent-%COMP%]{grid-area:topright;align-items:center;justify-content:center;border-radius:15px;background:white;padding:5px}.bottomright[_ngcontent-%COMP%]{grid-area:bottomright;align-items:center;justify-content:center;border-radius:15px;background:white;padding:5px}.bottomleft[_ngcontent-%COMP%]{grid-area:bottomleft;align-items:center;justify-content:center;border-radius:15px;background:white;padding:5px}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]{height:100%}.footer[_ngcontent-%COMP%]{position:fixed;left:0;bottom:0;width:100%;background-color:#eb8613;color:#fff;text-align:center}']}),n})();function kH(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"ul",2)(1,"div",3),g.NdJ("click",function(i){const c=g.CHM(t).$implicit;return g.oxw(2).setLendUser(i,c)}),g.TgZ(2,"div",4),g._uU(3),g.qZA(),g.TgZ(4,"div",5),g._uU(5),g.qZA(),g.TgZ(6,"div",5),g._uU(7),g.qZA(),g.TgZ(8,"div",5),g._uU(9),g.qZA(),g.TgZ(10,"div",5),g._uU(11),g.qZA()()()}if(2&n){const t=e.$implicit,r=g.oxw(2);g.xp6(3),g.Oqu(t.bikename),g.xp6(2),g.Oqu(t.portrait),g.xp6(2),g.Oqu(t.colour),g.xp6(2),g.Oqu(t.size),g.xp6(2),g.Oqu(r.getDistanceString(t.Lat,t.Lng))}}function NH(n,e){if(1&n&&(g.TgZ(0,"div"),g.YNc(1,kH,12,5,"ul",1),g.qZA()),2&n){const t=g.oxw();g.xp6(1),g.Q6J("ngForOf",t.markers)}}let OH=(()=>{class n{constructor(t,r,i){this.ms=t,this.router=r,this.db=i,this.showButton=!1}ngOnInit(){this.ms.getMarkers().subscribe(t=>{this.markers=t,this.markers.sort((r,i)=>this.getDistance(r)-this.getDistance(i))})}getDistance(t){if(null!==localStorage.getItem("lat")&&null!==localStorage.getItem("lng")&&void 0!==t.Lat&&void 0!==t.Lng){const r=Number(localStorage.getItem("lat")),i=Number(localStorage.getItem("lng")),c=t.Lng;return Math.sqrt(Math.pow(r-t.Lat,2)+Math.pow(i-c,2))}return 0}showItems(){return this.markers.length>0}getDistanceString(t,r){if(null!==localStorage.getItem("lat")&&null!==localStorage.getItem("lng")&&void 0!==t&&void 0!==r){const i=Number(localStorage.getItem("lat")),p=71.44*(r-Number(localStorage.getItem("lng"))),y=Number(Math.sqrt(Math.pow(111.13*(t-i),2)+Math.pow(p,2)).toFixed(2));return y>=1?y+"km entfernt":Math.round(1e3*y)+"m entfernt"}return""}setLendUser(t,r){null!=r.Email&&null!=r.id&&(localStorage.setItem("lendUser",r.Email),localStorage.setItem("lendID",r.id),this.router.navigate(["/lend-bike-overview"]))}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(M_),g.Y36(Ar),g.Y36(Ah))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-rent"]],decls:1,vars:1,consts:[[4,"ngIf"],["class","collection",4,"ngFor","ngForOf"],[1,"collection"],[1,"collection-head",3,"click"],[1,"collection-title"],[1,"collection-subtitle"]],template:function(t,r){1&t&&g.YNc(0,NH,2,1,"div",0),2&t&&g.Q6J("ngIf",r.showItems())},directives:[mn,Gn],styles:[".collection-head[_ngcontent-%COMP%]{margin:auto;background-color:#f0f8ff;width:15%;padding:10px 30px;border-radius:10px;box-shadow:5px 5px 5px #000;text-align:center}.collection-head[_ngcontent-%COMP%]:hover{background-color:#cecece}.collection-title[_ngcontent-%COMP%]{font-size:medium;font-weight:700}.collection-subtitle[_ngcontent-%COMP%]{font-size:small;width:100%}.button-container[_ngcontent-%COMP%]{position:relative}.button[_ngcontent-%COMP%]{margin:0;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}"]}),n})(),LH=(()=>{class n{constructor(t,r){this.ms=t,this.router=r}ngOnInit(){}lend(){if(void 0===this.bikeName||""===this.bikeName){const r=document.getElementById("bikeName"),i=document.getElementById("bikeName_input");if(null!==i&&null!==r){r.style.color="red",i.style.border="1px solid red";const a=document.getElementById("bikeErrorText");null!==a&&(a.style.display="block")}}if(void 0===this.portrait||""===this.portrait){const r=document.getElementById("bikePortrait"),i=document.getElementById("bikePortrait_input");if(null!==i&&null!==r){r.style.color="red",i.style.border="1px solid red";const a=document.getElementById("bikeErrorText");null!==a&&(a.style.display="block")}}if(""!==this.portrait&&""!==this.bikeName){null!==localStorage.getItem("lat")&&null!==localStorage.getItem("lng")&&(this.lat=Number(localStorage.getItem("lat")),this.lng=Number(localStorage.getItem("lng")));var t={Email:localStorage.getItem("email"),Lat:this.lat,Lng:this.lng,bikename:this.bikeName,portrait:this.portrait,colour:this.bikeColour,size:this.bikeSize};this.ms.addLend(t),this.ms.addMarker(t)}}changeBike(t){const r=document.getElementById("bikeName"),i=document.getElementById("bikeName_input");null!==r&&null!==i&&(r.style.color="#000000",i.style.border="1px solid #000000")}changePortrait(t){const r=document.getElementById("bikePortrait"),i=document.getElementById("bikePortrait_input");null!==r&&null!==i&&(r.style.color="#000000",i.style.border="1px solid #000000")}changeColour(t){const r=document.getElementById("bikeColour"),i=document.getElementById("bikeColour_input");null!==r&&null!==i&&(r.style.color="#000000",i.style.border="1px solid #000000")}changeSize(t){const r=document.getElementById("bikeSize"),i=document.getElementById("bikeSize_input");null!==r&&null!==i&&(r.style.color="#000000",i.style.border="1px solid #000000")}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(M_),g.Y36(Ar))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-lend"]],decls:24,vars:4,consts:[[1,"lend"],[1,"general-lend"],[1,"input"],["id","bikeName"],["id","bikeName_input","type","text","name","email",3,"ngModel","ngModelChange","focusout"],["id","bikePortrait"],["id","bikePortrait_input","type","text","name","portrait",1,"portrait",3,"ngModel","ngModelChange","focusout"],["id","bikeColour"],["id","bikeColour_input","type","text","name","bikeColour",3,"ngModel","ngModelChange","focusout"],["id","bikeSize"],["id","bikeSize_input","type","text","name","bikeSize",3,"ngModel","ngModelChange","focusout"],["id","bikeErrorText",1,"errorText"],["type","submit","value","Verleihen",3,"click"]],template:function(t,r){1&t&&(g.TgZ(0,"form",0)(1,"h1"),g._uU(2,"Fahrrad verleihen"),g.qZA(),g.TgZ(3,"div",1)(4,"div",2)(5,"p",3),g._uU(6,"Bezeichung des Fahrrads"),g.qZA(),g.TgZ(7,"input",4),g.NdJ("ngModelChange",function(a){return r.bikeName=a})("focusout",function(a){return r.changeBike(a)}),g.qZA()(),g.TgZ(8,"div",2)(9,"p",5),g._uU(10,"Kurzbeschreibung"),g.qZA(),g.TgZ(11,"textarea",6),g.NdJ("ngModelChange",function(a){return r.portrait=a})("focusout",function(a){return r.changePortrait(a)}),g.qZA()(),g.TgZ(12,"div",2)(13,"p",7),g._uU(14,"Farbe"),g.qZA(),g.TgZ(15,"input",8),g.NdJ("ngModelChange",function(a){return r.bikeColour=a})("focusout",function(a){return r.changeColour(a)}),g.qZA()(),g.TgZ(16,"div",2)(17,"p",9),g._uU(18,"Rahmengr\xf6\xdfe"),g.qZA(),g.TgZ(19,"input",10),g.NdJ("ngModelChange",function(a){return r.bikeSize=a})("focusout",function(a){return r.changeSize(a)}),g.qZA()(),g.TgZ(20,"div",11),g._uU(21,"Bitte f\xfcllen Sie alle Felder aus"),g.qZA(),g.TgZ(22,"div",2)(23,"input",12),g.NdJ("click",function(){return r.lend()}),g.qZA()()()()),2&t&&(g.xp6(7),g.Q6J("ngModel",r.bikeName),g.xp6(4),g.Q6J("ngModel",r.portrait),g.xp6(4),g.Q6J("ngModel",r.bikeColour),g.xp6(4),g.Q6J("ngModel",r.bikeSize))},directives:[Pt,cp,S,Mh,Hm,Be],styles:['.lend[_ngcontent-%COMP%]{margin:auto;background-color:#f0f8ff;width:15%;padding:20px 50px 50px;border-radius:30px;box-shadow:5px 5px 5px #000}.general-lend[_ngcontent-%COMP%]{text-align:center;display:grid}.input[_ngcontent-%COMP%]{padding:1rem}.portrait[_ngcontent-%COMP%]{padding:1rem;height:200px;text-align:left;resize:none}.errorText[_ngcontent-%COMP%]{color:red;font-size:.8rem;display:none}h1[_ngcontent-%COMP%]{text-align:center}.b1[_ngcontent-%COMP%]{background-color:"#fffff";padding:7px;margin:15px;border-radius:5px;border:none}']}),n})();function FH(n,e){if(1&n&&(g.TgZ(0,"ul",5)(1,"div",6)(2,"div",7),g._uU(3),g.qZA(),g.TgZ(4,"div",8),g._uU(5),g.qZA()()()),2&n){const t=e.$implicit;g.xp6(3),g.Oqu(t.bikename),g.xp6(2),g.Oqu(t.portrait)}}function UH(n,e){if(1&n&&(g.TgZ(0,"div"),g.YNc(1,FH,6,2,"ul",4),g.qZA()),2&n){const t=g.oxw();g.xp6(1),g.Q6J("ngForOf",t.lendMarkers)}}function VH(n,e){if(1&n&&(g.TgZ(0,"ul",5)(1,"div",6)(2,"div",7),g._uU(3),g.qZA(),g.TgZ(4,"div",8),g._uU(5),g.qZA()()()),2&n){const t=e.$implicit;g.xp6(3),g.Oqu(t.bikename),g.xp6(2),g.Oqu(t.portrait)}}function BH(n,e){if(1&n&&(g.TgZ(0,"div"),g.YNc(1,VH,6,2,"ul",4),g.qZA()),2&n){const t=g.oxw();g.xp6(1),g.Q6J("ngForOf",t.rentMarkers)}}const jH=[{path:"",component:RH},{path:"rent",component:OH},{path:"lend",component:LH},{path:"login",component:aV},{path:"signup",component:uV},{path:"user",component:(()=>{class n{constructor(t,r,i,a){this.afs=t,this.ms=r,this.router=i,this.db=a,this.rentMarkerCollection=this.afs.collection(localStorage.getItem("email")+"Rent"),this.lendMarkerCollection=this.afs.collection(localStorage.getItem("email")+"Lend")}ngOnInit(){this.ms.getLendMarkers().subscribe(t=>{this.lendMarkers=t}),this.ms.getRentMarkers().subscribe(t=>{this.rentMarkers=t})}showItemsLend(){return this.lendMarkers.length>0}showItemsRent(){return this.rentMarkers.length>0}getName(){if(null!==localStorage.getItem("email")){const t=localStorage.getItem("email");null!==t&&this.db.database.ref(t||"").get().then(function(r){const a="Name:  "+r.val().name,c=document.getElementById("userName");null!==c&&(c.innerHTML=a)})}}getPortrait(){if(null!==localStorage.getItem("email")){const t=localStorage.getItem("email");null!==t&&this.db.database.ref(t||"").get().then(function(r){const a=r.val().portrait,c=document.getElementById("userPortrait");null!==c&&(c.innerHTML=a)})}}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(GT),g.Y36(M_),g.Y36(Ar),g.Y36(Ah))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-user"]],decls:17,vars:4,consts:[["id","userName"],["id","userPortrait"],[1,"head"],[4,"ngIf"],["class","collection",4,"ngFor","ngForOf"],[1,"collection"],[1,"collection-head"],[1,"collection-title"],[1,"collection-subtitle"]],template:function(t,r){1&t&&(g.TgZ(0,"div")(1,"h1",0),g._uU(2),g.qZA(),g.TgZ(3,"p"),g._uU(4," Ihr \xf6ffentliches Nutzerprofil: "),g.qZA(),g.TgZ(5,"div",1),g._uU(6),g.qZA()(),g.TgZ(7,"h1",2),g._uU(8,"Angebotene Fahrr\xe4der"),g.qZA(),g.TgZ(9,"p"),g._uU(10," Hier sind die von Ihnen zur Leihe angebotenen Fahrr\xe4der aufgelistet. "),g.qZA(),g.YNc(11,UH,2,1,"div",3),g.TgZ(12,"h1",2),g._uU(13,"Ausgeliehene Fahrr\xe4der"),g.qZA(),g.TgZ(14,"p"),g._uU(15," Hier sind die von Ihnen gebuchten Fahrr\xe4der aufgelistet. "),g.qZA(),g.YNc(16,BH,2,1,"div",3)),2&t&&(g.xp6(2),g.Oqu(r.getName()),g.xp6(4),g.hij(" ",r.getPortrait()," "),g.xp6(5),g.Q6J("ngIf",r.showItemsLend()),g.xp6(5),g.Q6J("ngIf",r.showItemsRent()))},directives:[mn,Gn],styles:[".collection-head[_ngcontent-%COMP%]{background-color:#f0f8ff;width:15%;padding:10px 30px;border-radius:10px;box-shadow:5px 5px 5px #000}.collection-head[_ngcontent-%COMP%]:hover{background-color:#cecece}.collection-title[_ngcontent-%COMP%]{font-size:medium;font-weight:700}.collection-subtitle[_ngcontent-%COMP%]{font-size:small;width:100%}"]}),n})()},{path:"lend-bike-overview",component:(()=>{class n{constructor(t,r,i,a){this.ms=t,this.router=r,this.db=i,this.fs=a}ngOnInit(){}getLendUser(){if(null!==localStorage.getItem("lendUser")&&void 0!==localStorage.getItem("lendUser")){var t=localStorage.getItem("lendUser");this.db.database.ref(t||"").get().then(function(r){const a=r.val().name,c=document.getElementById("lendUserName");null!==c&&(c.innerHTML="M\xf6chten Sie das Fahrrad von "+a+" ausleihen?")})}}lendBike(){this.ms.deleteLendMarker()}navigateBack(){localStorage.setItem("lendUser",""),localStorage.setItem("lendID",""),this.router.navigate(["/rent"])}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(M_),g.Y36(Ar),g.Y36(Ah),g.Y36(GT))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-lend-bike-overview"]],decls:7,vars:1,consts:[[1,"container"],["id","lendUserName",1,"text"],[1,"actions",3,"click"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0)(1,"div",1),g._uU(2),g.qZA(),g.TgZ(3,"button",2),g.NdJ("click",function(){return r.navigateBack()}),g._uU(4,"Abbrechen"),g.qZA(),g.TgZ(5,"button",2),g.NdJ("click",function(){return r.lendBike()}),g._uU(6,"Fahrrad ausleihen"),g.qZA()()),2&t&&(g.xp6(2),g.Oqu(r.getLendUser()))},styles:[".container[_ngcontent-%COMP%]{margin:auto;top:17rem;background-color:#f0f8ff;width:25%;padding:20px 50px 50px;border-radius:30px;box-shadow:5px 5px 5px #000;text-align:center}.text[_ngcontent-%COMP%]{text-align:center;font-size:medium}.actions[_ngcontent-%COMP%]{margin:20px 10px 0;width:30%}"]}),n})()}];let zH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[hE.forRoot(jH)],hE]}),n})();function HH(n,e){1&n&&(g.TgZ(0,"div",5)(1,"button",6),g._uU(2,"Login"),g.qZA(),g.TgZ(3,"button",7),g._uU(4,"Sign up"),g.qZA()())}function $H(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"div",5),g._UZ(1,"label",8)(2,"img",9),g.TgZ(3,"button",10),g.NdJ("click",function(){return g.CHM(t),g.oxw().logout()}),g._uU(4,"Logout"),g.qZA()()}}let GH=(()=>{class n{constructor(t,r,i){this.auth=t,this.router=r,this.db=i,this.title="bikescout25",this.clickcount=0}ngOnInit(){this.clickcount=0,this.auth.autologin()}showNavbar(){return"true"==localStorage.getItem("token")}logout(){this.auth.logout()}changeName(){if(null!==localStorage.getItem("email")){const t=localStorage.getItem("email");null!==t&&this.db.database.ref(t||"").get().then(function(r){const a="Willkommen "+r.val().name,c=document.getElementById("changeName");null!==c&&(c.innerHTML=a)})}}easterEgg(){this.clickcount++,25==this.clickcount&&(window.location.href="https://www.youtube.com/watch?v=dQw4w9WgXcQ")}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(c0),g.Y36(Ar),g.Y36(Ah))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-root"]],decls:7,vars:2,consts:[["role","banner",1,"toolbar"],["height","50","alt","Bikescout25 Logo","src","/assets/Logo_full.png","routerLink","",1,"img",3,"click"],[1,"spacer"],["class","navbar",4,"ngIf"],["role","main",1,"content"],[1,"navbar"],["routerLink","login","tabindex","1",1,"auth"],["routerLink","signup","tabindex","1",1,"auth"],["id","changeName"],["alt","Profile","src","/assets/profile-user-white.png","routerLink","user",1,"icon"],["tabindex","1",1,"auth",3,"click"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0)(1,"img",1),g.NdJ("click",function(){return r.easterEgg()}),g.qZA(),g._UZ(2,"div",2),g.YNc(3,HH,5,0,"div",3),g.YNc(4,$H,5,0,"div",3),g.qZA(),g._UZ(5,"div",4)(6,"router-outlet")),2&t&&(g.xp6(3),g.Q6J("ngIf",!r.showNavbar()),g.xp6(1),g.Q6J("ngIf",r.showNavbar()))},directives:[Vd,mn,jl],styles:['[_nghost-%COMP%]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol;font-size:14px;color:#333;box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{margin:8px 0}p[_ngcontent-%COMP%]{margin:0}.spacer[_ngcontent-%COMP%]{flex:1}.toolbar[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;height:60px;display:flex;justify-content:center;align-items:center;background-color:#eb8613;color:#fff;font-weight:600;border-bottom:black solid 3px}.navbar[_ngcontent-%COMP%]{top:0;left:0;right:0;height:60px;display:flex;justify-content:center;align-items:center;background-color:#eb8613;color:#fff;font-weight:600}.img[_ngcontent-%COMP%]{height:40px;margin:10px}.img[_ngcontent-%COMP%]:hover{background-color:#d67e0e}.icon[_ngcontent-%COMP%]{height:30px;margin:10px}.auth[_ngcontent-%COMP%]{background-color:#fff;padding:7px;margin:15px;border-radius:5px;border:none;box-shadow:2px 2px 2px #000}.auth[_ngcontent-%COMP%]:hover{background-color:#bdbdbd}.auth[_ngcontent-%COMP%]:active{background-color:#999;transform:translateY(4px)}.toolbar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:0 16px}.toolbar[_ngcontent-%COMP%]   #twitter-logo[_ngcontent-%COMP%]{height:40px;margin:0 8px}.toolbar[_ngcontent-%COMP%]   #youtube-logo[_ngcontent-%COMP%]{height:40px;margin:0 16px}.toolbar[_ngcontent-%COMP%]   #twitter-logo[_ngcontent-%COMP%]:hover, .toolbar[_ngcontent-%COMP%]   #youtube-logo[_ngcontent-%COMP%]:hover{opacity:.8}.content[_ngcontent-%COMP%]{display:flex;margin:82px auto 32px;padding:0 16px;max-width:960px;flex-direction:column;align-items:center}svg.material-icons[_ngcontent-%COMP%]{height:24px;width:auto}svg.material-icons[_ngcontent-%COMP%]:not(:last-child){margin-right:8px}.card[_ngcontent-%COMP%]   svg.material-icons[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#888}.card-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;margin-top:16px}.card[_ngcontent-%COMP%]{all:unset;border-radius:4px;border:1px solid #eee;background-color:#fafafa;height:40px;width:200px;margin:0 8px 16px;padding:16px;display:flex;flex-direction:row;justify-content:center;align-items:center;transition:all .2s ease-in-out;line-height:24px}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(:last-child){margin-right:0}.card.card-small[_ngcontent-%COMP%]{height:16px;width:168px}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card){cursor:pointer}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card):hover{transform:translateY(-3px);box-shadow:0 4px 17px #00000059}html[_ngcontent-%COMP%]{background-color:#000}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card):hover   .material-icons[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#696767}.card.highlight-card[_ngcontent-%COMP%]{background-color:#1976d2;color:#fff;font-weight:600;border:none;width:auto;min-width:30%;position:relative}.card.card.highlight-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:60px}svg#rocket[_ngcontent-%COMP%]{width:80px;position:absolute;left:-10px;top:-24px}svg#rocket-smoke[_ngcontent-%COMP%]{height:calc(100vh - 95px);position:absolute;top:10px;right:180px;z-index:-10}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:visited, a[_ngcontent-%COMP%]:hover{color:#1976d2;text-decoration:none}a[_ngcontent-%COMP%]:hover{color:#125699}.terminal[_ngcontent-%COMP%]{position:relative;width:80%;max-width:600px;border-radius:6px;padding-top:45px;margin-top:8px;overflow:hidden;background-color:#0f0f10}.terminal[_ngcontent-%COMP%]:before{content:"\\2022\\2022\\2022";position:absolute;top:0;left:0;height:4px;background:rgb(58,58,58);color:#c2c3c4;width:100%;font-size:2rem;line-height:0;padding:14px 0;text-indent:4px}.terminal[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;color:#fff;padding:0 1rem 1rem;margin:0}.circle-link[_ngcontent-%COMP%]{height:40px;width:40px;border-radius:40px;margin:8px;background-color:#fff;border:1px solid #eeeeee;display:flex;justify-content:center;align-items:center;cursor:pointer;box-shadow:0 1px 3px #0000001f,0 1px 2px #0000003d;transition:1s ease-out}.circle-link[_ngcontent-%COMP%]:hover{transform:translateY(-.25rem);box-shadow:0 3px 15px #0003}footer[_ngcontent-%COMP%]{margin-top:8px;display:flex;align-items:center;line-height:20px}footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center}.github-star-badge[_ngcontent-%COMP%]{color:#24292e;display:flex;align-items:center;font-size:12px;padding:3px 10px;border:1px solid rgba(27,31,35,.2);border-radius:3px;background-image:linear-gradient(-180deg,#fafbfc,#eff3f6 90%);margin-left:4px;font-weight:600}.github-star-badge[_ngcontent-%COMP%]:hover{background-image:linear-gradient(-180deg,#f0f3f6,#e6ebf1 90%);border-color:#1b1f2359;background-position:-.5em}.github-star-badge[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{height:16px;width:16px;margin-right:4px}svg#clouds[_ngcontent-%COMP%]{position:fixed;bottom:-160px;left:-230px;z-index:-10;width:1920px}@media screen and (max-width: 767px){.card-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(.circle-link), .terminal[_ngcontent-%COMP%]{width:100%}.card[_ngcontent-%COMP%]:not(.highlight-card){height:16px;margin:8px 0}.card.highlight-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:72px}svg#rocket-smoke[_ngcontent-%COMP%]{right:120px;transform:rotate(-5deg)}}@media screen and (max-width: 575px){svg#rocket-smoke[_ngcontent-%COMP%]{display:none;visibility:hidden}}']}),n})();const wR_firebase={projectId:"bikescout25",appId:"1:810290748025:web:aa3e46ec2430b1e06192a8",databaseURL:"https://bikescout25-default-rtdb.europe-west1.firebasedatabase.app",storageBucket:"bikescout25.appspot.com",locationId:"europe-west",apiKey:"AIzaSyAfmcjRwNJbhDRdr1TgQe4H4nlyL9wveKM",authDomain:"bikescout25.firebaseapp.com",messagingSenderId:"810290748025",measurementId:"G-7M4HJZ7HK1"};var WH=O(198);class ER{constructor(e){return e}}class LF{constructor(){return(0,un.vb)("auth")}}const bR=new g.OlP("angularfire2.auth-instances");function ZH(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new ER(r)}}const KH={provide:LF,deps:[[new g.FiY,bR]]},YH={provide:ER,useFactory:function qH(n,e){const t=(0,un.JM)("auth",n,e);return t&&new ER(t)},deps:[[new g.FiY,bR],Vc]};let QH=(()=>{class n{constructor(){(0,$l.KN)("angularfire",un.q4.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[YH,KH]}),n})();function JH(n,...e){return{ngModule:QH,providers:[{provide:bR,useFactory:ZH(n),multi:!0,deps:[g.R0b,g.zs3,un.HU,oy,[new g.FiY,zc],...e]}]}}const XH=(0,un.u3)(WH.n,!0);class CR{constructor(e){return e}}const FF="database",IR=new g.OlP("angularfire2.database-instances");function n$(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new CR(r)}}const r$={provide:class e${constructor(){return(0,un.vb)(FF)}},deps:[[new g.FiY,IR]]},i$={provide:CR,useFactory:function t$(n,e){const t=(0,un.JM)(FF,n,e);return t&&new CR(t)},deps:[[new g.FiY,IR],Vc]};let s$=(()=>{class n{constructor(){(0,$l.KN)("angularfire",un.q4.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[i$,r$]}),n})();function o$(n,...e){return{ngModule:s$,providers:[{provide:IR,useFactory:n$(n),multi:!0,deps:[g.R0b,g.zs3,un.HU,oy,[new g.FiY,LF],[new g.FiY,zc],...e]}]}}const a$=(0,un.u3)(QC,!0);class UF{}class VF{}class yd{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),c=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(c):this.headers.set(a,[c])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof yd?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new yd;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof yd?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let c=this.headers.get(t);if(!c)return;c=c.filter(p=>-1===a.indexOf(p)),0===c.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class u${encodeKey(e){return BF(e)}encodeValue(e){return BF(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const c$=/%(\d[a-f0-9])/gi,d$={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function BF(n){return encodeURIComponent(n).replace(c$,(e,t)=>{var r;return null!==(r=d$[t])&&void 0!==r?r:e})}function jF(n){return`${n}`}class Yh{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new u$,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function l$(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[c,p]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],y=t.get(c)||[];y.push(p),t.set(c,y)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Yh({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(jF(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(jF(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class h${constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function zF(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function HF(n){return"undefined"!=typeof Blob&&n instanceof Blob}function $F(n){return"undefined"!=typeof FormData&&n instanceof FormData}class jw{constructor(e,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function f$(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new yd),this.context||(this.context=new h$),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=t;else{const p=t.indexOf("?");this.urlWithParams=t+(-1===p?"?":p<t.length-1?"&":"")+c}}else this.params=new Yh,this.urlWithParams=t}serializeBody(){return null===this.body?null:zF(this.body)||HF(this.body)||$F(this.body)||function p$(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Yh?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||$F(this.body)?null:HF(this.body)?this.body.type||null:zF(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Yh?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,a=e.responseType||this.responseType,c=void 0!==e.body?e.body:this.body,p=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,y=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let b=e.headers||this.headers,x=e.params||this.params;const R=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(b=Object.keys(e.setHeaders).reduce((B,G)=>B.set(G,e.setHeaders[G]),b)),e.setParams&&(x=Object.keys(e.setParams).reduce((B,G)=>B.set(G,e.setParams[G]),x)),new jw(r,i,c,{params:x,headers:b,context:R,reportProgress:y,responseType:a,withCredentials:p})}}var Xi=(()=>((Xi=Xi||{})[Xi.Sent=0]="Sent",Xi[Xi.UploadProgress=1]="UploadProgress",Xi[Xi.ResponseHeader=2]="ResponseHeader",Xi[Xi.DownloadProgress=3]="DownloadProgress",Xi[Xi.Response=4]="Response",Xi[Xi.User=5]="User",Xi))();class TR{constructor(e,t=200,r="OK"){this.headers=e.headers||new yd,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class DR extends TR{constructor(e={}){super(e),this.type=Xi.ResponseHeader}clone(e={}){return new DR({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class WT extends TR{constructor(e={}){super(e),this.type=Xi.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new WT({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class GF extends TR{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function SR(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let g$=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof jw)a=t;else{let y,b;y=i.headers instanceof yd?i.headers:new yd(i.headers),i.params&&(b=i.params instanceof Yh?i.params:new Yh({fromObject:i.params})),a=new jw(t,r,void 0!==i.body?i.body:null,{headers:y,context:i.context,params:b,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const c=yt(a).pipe(Gs(y=>this.handler.handle(y)));if(t instanceof jw||"events"===i.observe)return c;const p=c.pipe(pr(y=>y instanceof WT));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return p.pipe((0,v.U)(y=>{if(null!==y.body&&!(y.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return y.body}));case"blob":return p.pipe((0,v.U)(y=>{if(null!==y.body&&!(y.body instanceof Blob))throw new Error("Response is not a Blob.");return y.body}));case"text":return p.pipe((0,v.U)(y=>{if(null!==y.body&&"string"!=typeof y.body)throw new Error("Response is not a string.");return y.body}));default:return p.pipe((0,v.U)(y=>y.body))}case"response":return p;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Yh).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,SR(i,r))}post(t,r,i={}){return this.request("POST",t,SR(i,r))}put(t,r,i={}){return this.request("PUT",t,SR(i,r))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(UF))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class WF{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const qF=new g.OlP("HTTP_INTERCEPTORS");let m$=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const _$=/^\)\]\}',?\n/;let ZF=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ri.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((G,J)=>i.setRequestHeader(G,J.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const G=t.detectContentTypeHeader();null!==G&&i.setRequestHeader("Content-Type",G)}if(t.responseType){const G=t.responseType.toLowerCase();i.responseType="json"!==G?G:"text"}const a=t.serializeBody();let c=null;const p=()=>{if(null!==c)return c;const G=i.statusText||"OK",J=new yd(i.getAllResponseHeaders()),xe=function y$(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return c=new DR({headers:J,status:i.status,statusText:G,url:xe}),c},y=()=>{let{headers:G,status:J,statusText:xe,url:Ze}=p(),vt=null;204!==J&&(vt=void 0===i.response?i.responseText:i.response),0===J&&(J=vt?200:0);let Mt=J>=200&&J<300;if("json"===t.responseType&&"string"==typeof vt){const At=vt;vt=vt.replace(_$,"");try{vt=""!==vt?JSON.parse(vt):null}catch(It){vt=At,Mt&&(Mt=!1,vt={error:It,text:vt})}}Mt?(r.next(new WT({body:vt,headers:G,status:J,statusText:xe,url:Ze||void 0})),r.complete()):r.error(new GF({error:vt,headers:G,status:J,statusText:xe,url:Ze||void 0}))},b=G=>{const{url:J}=p(),xe=new GF({error:G,status:i.status||0,statusText:i.statusText||"Unknown Error",url:J||void 0});r.error(xe)};let x=!1;const R=G=>{x||(r.next(p()),x=!0);let J={type:Xi.DownloadProgress,loaded:G.loaded};G.lengthComputable&&(J.total=G.total),"text"===t.responseType&&!!i.responseText&&(J.partialText=i.responseText),r.next(J)},B=G=>{let J={type:Xi.UploadProgress,loaded:G.loaded};G.lengthComputable&&(J.total=G.total),r.next(J)};return i.addEventListener("load",y),i.addEventListener("error",b),i.addEventListener("timeout",b),i.addEventListener("abort",b),t.reportProgress&&(i.addEventListener("progress",R),null!==a&&i.upload&&i.upload.addEventListener("progress",B)),i.send(a),r.next({type:Xi.Sent}),()=>{i.removeEventListener("error",b),i.removeEventListener("abort",b),i.removeEventListener("load",y),i.removeEventListener("timeout",b),t.reportProgress&&(i.removeEventListener("progress",R),null!==a&&i.upload&&i.upload.removeEventListener("progress",B)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(On))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const AR=new g.OlP("XSRF_COOKIE_NAME"),xR=new g.OlP("XSRF_HEADER_NAME");class KF{}let v$=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=an(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Te),g.LFG(g.Lbi),g.LFG(AR))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),MR=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const a=this.tokenService.getToken();return null!==a&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,a)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(KF),g.LFG(xR))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),w$=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(qF,[]);this.chain=r.reduceRight((i,a)=>new WF(i,a),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(VF),g.LFG(g.zs3))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),E$=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:MR,useClass:m$}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:AR,useValue:t.cookieName}:[],t.headerName?{provide:xR,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[MR,{provide:qF,useExisting:MR,multi:!0},{provide:KF,useClass:v$},{provide:AR,useValue:"XSRF-TOKEN"},{provide:xR,useValue:"X-XSRF-TOKEN"}]}),n})(),b$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[g$,{provide:UF,useClass:w$},ZF,{provide:VF,useExisting:ZF}],imports:[[E$.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();const YF="firebasestorage.googleapis.com",QF="storageBucket";class wi extends z.ZR{constructor(e,t){super(PR(e),`Firebase Storage: ${t} (${PR(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,wi.prototype)}_codeEquals(e){return PR(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function PR(n){return"storage/"+n}function RR(){return new wi("unknown","An unknown error occurred, please check the error payload for server response.")}function JF(){return new wi("canceled","User canceled the upload/download.")}function XF(){return new wi("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function P_(n){return new wi("invalid-argument",n)}function eU(){return new wi("app-deleted","The Firebase app was deleted.")}function tU(n){return new wi("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function zw(n,e){return new wi("invalid-format","String does not match format '"+n+"': "+e)}function Hw(n){throw new wi("internal-error","Internal error: "+n)}class Po{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Po.makeFromUrl(e,t)}catch(i){return new Po(e,"")}if(""===r.path)return r;throw function k$(n){return new wi("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",p=new RegExp("^gs://"+i+"(/(.*))?$","i");function b(It){It.path_=decodeURIComponent(It.path)}const R=t.replace(/[.]/g,"\\."),At=[{regex:p,indices:{bucket:1,path:3},postModify:function a(It){"/"===It.path.charAt(It.path.length-1)&&(It.path_=It.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${R}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:b},{regex:new RegExp(`^https?://${t===YF?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:b}];for(let It=0;It<At.length;It++){const gn=At[It],xn=gn.regex.exec(e);if(xn){let yl=xn[gn.indices.path];yl||(yl=""),r=new Po(xn[gn.indices.bucket],yl),gn.postModify(r);break}}if(null==r)throw function R$(n){return new wi("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class F${constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function qT(n){return"string"==typeof n||n instanceof String}function nU(n){return kR()&&n instanceof Blob}function kR(){return"undefined"!=typeof Blob}function NR(n,e,t,r){if(r<e)throw P_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw P_(`Invalid value for '${n}'. Expected ${t} or less.`)}function vd(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function rU(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Qh=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Qh||(Qh={})),Qh))();class H${constructor(e,t,r,i,a,c,p,y,b,x,R){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=p,this.errorCallback_=y,this.timeout_=b,this.progressCallback_=x,this.connectionFactory_=R,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((B,G)=>{this.resolve_=B,this.reject_=G,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,c=this.reject_,p=i.connection;if(i.wasSuccessCode)try{const y=this.callback_(p,p.getResponse());!function B$(n){return void 0!==n}(y)?a():a(y)}catch(y){c(y)}else if(null!==p){const y=RR();y.serverResponse=p.getErrorText(),c(this.errorCallback_?this.errorCallback_(p,y):y)}else c(i.canceled?this.appDelete_?eU():JF():function P$(){return new wi("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new ZT(!1,null,!0)):this.backoffId_=function U$(n,e,t){let r=1,i=null,a=null,c=!1,p=0;function y(){return 2===p}let b=!1;function x(...Ze){b||(b=!0,e.apply(null,Ze))}function R(Ze){i=setTimeout(()=>{i=null,n(G,y())},Ze)}function B(){a&&clearTimeout(a)}function G(Ze,...vt){if(b)return void B();if(Ze)return B(),void x.call(null,Ze,...vt);if(y()||c)return B(),void x.call(null,Ze,...vt);let At;r<64&&(r*=2),1===p?(p=2,At=0):At=1e3*(r+Math.random()),R(At)}let J=!1;function xe(Ze){J||(J=!0,B(),!b&&(null!==i?(Ze||(p=2),clearTimeout(i),R(0)):Ze||(p=1)))}return R(0),a=setTimeout(()=>{c=!0,xe(!0)},t),xe}((r,i)=>{if(i)return void r(!1,new ZT(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const c=p=>{null!==this.progressCallback_&&this.progressCallback_(p.loaded,p.lengthComputable?p.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const p=a.getErrorCode()===Qh.NO_ERROR,y=a.getStatus();if(!p||this.isRetryStatusCode_(y)){const x=a.getErrorCode()===Qh.ABORT;return void r(!1,new ZT(!1,null,x))}const b=-1!==this.successCodes_.indexOf(y);r(!0,new ZT(b,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function V$(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),a=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||a}}class ZT{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function Y$(...n){const e=function K$(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(kR())return new Blob(n);throw new wi("unsupported-environment","This browser doesn't seem to support creating Blobs")}const cu={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class OR{constructor(e,t){this.data=e,this.contentType=t||null}}function LR(n,e){switch(n){case cu.RAW:return new OR(iU(e));case cu.BASE64:case cu.BASE64URL:return new OR(sU(n,e));case cu.DATA_URL:return new OR(function eG(n){const e=new oU(n);return e.base64?sU(cu.BASE64,e.rest):function X$(n){let e;try{e=decodeURIComponent(n)}catch(t){throw zw(cu.DATA_URL,"Malformed data URL.")}return iU(e)}(e.rest)}(e),function tG(n){return new oU(n).contentType}(e))}throw RR()}function iU(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function sU(n,e){switch(n){case cu.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw zw(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case cu.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw zw(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function J$(n){return atob(n)}(e)}catch(i){throw zw(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class oU{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw zw(cu.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function nG(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class pc{constructor(e,t){let r=0,i="";nU(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(nU(this.data_)){const i=function Q$(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new pc(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new pc(r,!0)}}static getBlob(...e){if(kR()){const t=e.map(r=>r instanceof pc?r.data_:r);return new pc(Y$.apply(null,t))}{const t=e.map(c=>qT(c)?LR(cu.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(c=>{for(let p=0;p<c.length;p++)i[a++]=c[p]}),new pc(i,!0)}}uploadData(){return this.data_}}function FR(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function z$(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function aU(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function sG(n,e){return e}class oa{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||sG}}let KT=null;function $w(){if(KT)return KT;const n=[];n.push(new oa("bucket")),n.push(new oa("generation")),n.push(new oa("metageneration")),n.push(new oa("name","fullPath",!0));const t=new oa("name");t.xform=function e(a,c){return function oG(n){return!qT(n)||n.length<2?n:aU(n)}(c)},n.push(t);const i=new oa("size");return i.xform=function r(a,c){return void 0!==c?Number(c):c},n.push(i),n.push(new oa("timeCreated")),n.push(new oa("updated")),n.push(new oa("md5Hash",null,!0)),n.push(new oa("cacheControl",null,!0)),n.push(new oa("contentDisposition",null,!0)),n.push(new oa("contentEncoding",null,!0)),n.push(new oa("contentLanguage",null,!0)),n.push(new oa("contentType",null,!0)),n.push(new oa("metadata","customMetadata",!0)),KT=n,KT}function uU(n,e,t){const r=FR(e);return null===r?null:function uG(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const c=t[a];r[c.local]=c.xform(r,e[c.server])}return function aG(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new Po(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function UR(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const lU="prefixes";class gc{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function mc(n){if(!n)throw RR()}function YT(n,e){return function t(r,i){const a=uU(n,i,e);return mc(null!==a),a}}function R_(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function x$(){return new wi("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function A$(){return new wi("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function S$(n){return new wi("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function M$(n){return new wi("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function Gw(n){const e=R_(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function D$(n){return new wi("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function dU(n,e,t){const i=vd(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,p=new gc(i,"GET",YT(n,t),c);return p.errorHandler=Gw(e),p}function pG(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const p=vd(e.bucketOnlyServerUrl(),n.host,n._protocol),b=n.maxOperationRetryTime,x=new gc(p,"GET",function hG(n,e){return function t(r,i){const a=function dG(n,e,t){const r=FR(t);return null===r?null:function cG(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[lU])for(const i of t[lU]){const a=i.replace(/\/$/,""),c=n._makeStorageReference(new Po(e,a));r.prefixes.push(c)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new Po(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return mc(null!==a),a}}(n,e.bucket),b);return x.urlParams=a,x.errorHandler=R_(e),x}function fU(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function yG(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class QT{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function VR(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){mc(!1)}return mc(!!t&&-1!==(e||["active"]).indexOf(t)),t}const bG={STATE_CHANGED:"state_changed"},aa={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function BR(n){switch(n){case"running":case"pausing":case"canceling":return aa.RUNNING;case"paused":return aa.PAUSED;case"success":return aa.SUCCESS;case"canceled":return aa.CANCELED;default:return aa.ERROR}}class CG{constructor(e,t,r){if(function j$(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function k_(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class TG extends class IG{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Qh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Qh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Qh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Hw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Hw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Hw("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw Hw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Hw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function _l(){return new TG}class _U{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=$w(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function vG(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),c=fU(e,r,i),p={name:c.fullPath},y=vd(a,n.host,n._protocol),x={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},R=UR(c,t),J=new gc(y,"POST",function G(xe){let Ze;VR(xe);try{Ze=xe.getResponseHeader("X-Goog-Upload-URL")}catch(vt){mc(!1)}return mc(qT(Ze)),Ze},n.maxUploadRetryTime);return J.urlParams=p,J.headers=x,J.body=R,J.errorHandler=R_(e),J}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,_l,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function wG(n,e,t,r){const y=new gc(t,"POST",function a(b){const x=VR(b,["active","final"]);let R=null;try{R=b.getResponseHeader("X-Goog-Upload-Size-Received")}catch(G){mc(!1)}R||mc(!1);const B=Number(R);return mc(!isNaN(B)),new QT(B,r.size(),"final"===x)},n.maxUploadRetryTime);return y.headers={"X-Goog-Upload-Command":"query"},y.errorHandler=R_(e),y}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,_l,t,r);this._request=a,a.getPromise().then(c=>{c=c,this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new QT(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let c;try{c=function EG(n,e,t,r,i,a,c,p){const y=new QT(0,0);if(c?(y.current=c.current,y.total=c.total):(y.current=0,y.total=r.size()),r.size()!==y.total)throw function O$(){return new wi("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const b=y.total-y.current;let x=b;i>0&&(x=Math.min(x,i));const R=y.current,J={"X-Goog-Upload-Command":x===b?"upload, finalize":"upload","X-Goog-Upload-Offset":`${y.current}`},xe=r.slice(R,R+x);if(null===xe)throw XF();const At=new gc(t,"POST",function Ze(It,gn){const xn=VR(It,["active","final"]),es=y.current+x,yl=r.size();let HR;return HR="final"===xn?YT(e,a)(It,gn):null,new QT(es,yl,"final"===xn,HR)},e.maxUploadRetryTime);return At.headers=J,At.body=xe.uploadData(),At.progressCallback=p||null,At.errorHandler=R_(n),At}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(y){return this._error=y,void this._transition("error")}const p=this._ref.storage._makeRequest(c,_l,i,a);this._request=p,p.getPromise().then(y=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(y.current),y.finalized?(this._metadata=y.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=dU(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,_l,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function pU(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},y=function p(){let At="";for(let It=0;It<2;It++)At+=Math.random().toString().slice(2);return At}();c["Content-Type"]="multipart/related; boundary="+y;const b=fU(e,r,i),x=UR(b,t),G=pc.getBlob("--"+y+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+x+"\r\n--"+y+"\r\nContent-Type: "+b.contentType+"\r\n\r\n",r,"\r\n--"+y+"--");if(null===G)throw XF();const J={name:b.fullPath},xe=vd(a,n.host,n._protocol),vt=n.maxUploadRetryTime,Mt=new gc(xe,"POST",YT(n,t),vt);return Mt.urlParams=J,Mt.headers=c,Mt.body=G.uploadData(),Mt.errorHandler=R_(e),Mt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,_l,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=JF(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=BR(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new CG(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(BR(this._state)){case aa.SUCCESS:k_(this._resolve.bind(null,this.snapshot))();break;case aa.CANCELED:case aa.ERROR:k_(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(BR(this._state)){case aa.RUNNING:case aa.PAUSED:e.next&&k_(e.next.bind(e,this.snapshot))();break;case aa.SUCCESS:e.complete&&k_(e.complete.bind(e))();break;default:e.error&&k_(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class qp{constructor(e,t){this._service=e,this._location=t instanceof Po?t:Po.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new qp(e,t)}get root(){const e=new Po(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return aU(this._location.path)}get storage(){return this._service}get parent(){const e=function rG(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Po(this._location.bucket,e);return new qp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw tU(e)}}function vU(n,e,t){return jR.apply(this,arguments)}function jR(){return jR=(0,Oe.Z)(function*(n,e,t){const i=yield wU(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield vU(n,e,i.nextPageToken))}),jR.apply(this,arguments)}function wU(n,e){null!=e&&"number"==typeof e.maxResults&&NR("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=pG(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,_l)}function FG(n){n._throwIfRoot("getDownloadURL");const e=function gG(n,e,t){const i=vd(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,p=new gc(i,"GET",function fG(n,e){return function t(r,i){const a=uU(n,i,e);return mc(null!==a),function lG(n,e,t,r){const i=FR(e);if(null===i||!qT(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const c=encodeURIComponent;return a.split(",").map(b=>{const R=n.fullPath;return vd("/b/"+c(n.bucket)+"/o/"+c(R),t,r)+rU({alt:"media",token:b})})[0]}(a,i,n.host,n._protocol)}}(n,t),c);return p.errorHandler=Gw(e),p}(n.storage,n._location,$w());return n.storage.makeRequestWithTokens(e,_l).then(t=>{if(null===t)throw function L$(){return new wi("no-download-url","The given file does not have any download URLs.")}();return t})}function EU(n,e){const t=function iG(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Po(n._location.bucket,t);return new qp(n.storage,r)}function bU(n,e){if(n instanceof zR){const t=n;if(null==t._bucket)throw function N$(){return new wi("no-default-bucket","No default bucket found. Did you set the '"+QF+"' property when initializing the app?")}();const r=new qp(t,t._bucket);return null!=e?bU(r,e):r}return void 0!==e?EU(n,e):n}function jG(n,e){if(e&&function VG(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof zR)return function BG(n,e){return new qp(n,e)}(n,e);throw P_("To use ref(service, url), the first argument must be a Storage instance.")}return bU(n,e)}function CU(n,e){const t=null==e?void 0:e[QF];return null==t?null:Po.makeFromBucketSpec(t,n)}class zR{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=YF,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Po.makeFromBucketSpec(i,this._host):CU(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Po.makeFromBucketSpec(this._url,e):CU(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){NR("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){NR("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Oe.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Oe.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new qp(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new F$(eU());{const a=function Z$(n,e,t,r,i,a){const c=rU(n.urlParams),p=n.url+c,y=Object.assign({},n.headers);return function W$(n,e){e&&(n["X-Firebase-GMPID"]=e)}(y,e),function $$(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(y,t),function G$(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(y,a),function q$(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(y,r),new H$(p,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var r=this;return(0,Oe.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const IU="@firebase/storage";function SU(n,e){return jG(n=(0,z.m9)(n),e)}function JG(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new zR(t,r,i,e,yi.SDK_VERSION)}!function XG(){(0,yi._registerComponent)(new ai.wA("storage",JG,"PUBLIC").setMultipleInstances(!0)),(0,yi.registerVersion)(IU,"0.9.6",""),(0,yi.registerVersion)(IU,"0.9.6","esm2017")}();class JT{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class AU{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new JT(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new JT(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?c=>t(new JT(c,this,this._ref)):{next:t.next?c=>t.next(new JT(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class xU{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new wd(e,this._service))}get items(){return this._delegate.items.map(e=>new wd(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class wd{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function YG(n,e){return EU(n,e)}(this._delegate,e);return new wd(t,this.storage)}get root(){return new wd(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new wd(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new AU(function HG(n,e,t){return function RG(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new _U(n,new pc(e),t)}(n=(0,z.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=cu.RAW,r){this._throwIfRoot("putString");const i=LR(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new AU(new _U(this._delegate,new pc(i.data,!0),a),this)}listAll(){return function qG(n){return function NG(n){const e={prefixes:[],items:[]};return vU(n,e).then(()=>e)}(n=(0,z.m9)(n))}(this._delegate).then(e=>new xU(e,this.storage))}list(e){return function WG(n,e){return wU(n=(0,z.m9)(n),e)}(this._delegate,e||void 0).then(t=>new xU(t,this.storage))}getMetadata(){return function $G(n){return function OG(n){n._throwIfRoot("getMetadata");const e=dU(n.storage,n._location,$w());return n.storage.makeRequestWithTokens(e,_l)}(n=(0,z.m9)(n))}(this._delegate)}updateMetadata(e){return function GG(n,e){return function LG(n,e){n._throwIfRoot("updateMetadata");const t=function mG(n,e,t,r){const a=vd(e.fullServerUrl(),n.host,n._protocol),p=UR(t,r),b=n.maxOperationRetryTime,x=new gc(a,"PATCH",YT(n,r),b);return x.headers={"Content-Type":"application/json; charset=utf-8"},x.body=p,x.errorHandler=Gw(e),x}(n.storage,n._location,e,$w());return n.storage.makeRequestWithTokens(t,_l)}(n=(0,z.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function ZG(n){return FG(n=(0,z.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function KG(n){return function UG(n){n._throwIfRoot("deleteObject");const e=function _G(n,e){const r=vd(e.fullServerUrl(),n.host,n._protocol),p=new gc(r,"DELETE",function c(y,b){},n.maxOperationRetryTime);return p.successCodes=[200,204],p.errorHandler=Gw(e),p}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,_l)}(n=(0,z.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw tU(e)}}class MU{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(PU(e))throw P_("ref() expected a child path but got a URL, use refFromURL instead.");return new wd(SU(this._delegate,e),this)}refFromURL(e){if(!PU(e))throw P_("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Po.makeFromUrl(e,this._delegate.host)}catch(t){throw P_("refFromUrl() expected a valid full URL but got an invalid one.")}return new wd(SU(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function QG(n,e,t,r={}){!function zG(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,z.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function PU(n){return/^[A-Za-z]+:\/\//.test(n)}function rW(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new MU(t,r)}function RU(n){const e=function sW(n){return new ri.y(e=>{const t=c=>e.next(c);t(n.snapshot);const a=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){a()}}).pipe(function C$(n,e=Vg.z){return(0,fr.e)((t,r)=>{let i=null,a=null,c=null;const p=()=>{if(i){i.unsubscribe(),i=null;const b=a;a=null,r.next(b)}};function y(){const b=c+n,x=e.now();if(x<b)return i=this.schedule(void 0,b-x),void r.add(i);p()}t.subscribe((0,de.x)(r,b=>{a=b,c=e.now(),i||(i=e.schedule(y,n),r.add(i))},()=>{p(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,v.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function XT(n){return{getDownloadURL:()=>yt(void 0).pipe(un.fc,Ir(()=>n.getDownloadURL()),un.iC),getMetadata:()=>yt(void 0).pipe(un.fc,Ir(()=>n.getMetadata()),un.iC),delete:()=>(0,Ln.D)(n.delete()),child:e=>XT(n.child(e)),updateMetadata:e=>(0,Ln.D)(n.updateMetadata(e)),put:(e,t)=>RU(n.put(e,t)),putString:(e,t,r)=>RU(n.putString(e,t,r)),list:e=>(0,Ln.D)(n.list(e)),listAll:()=>(0,Ln.D)(n.listAll())}}!function iW(n){const e={TaskState:aa,TaskEvent:bG,StringFormat:cu,Storage:MU,Reference:wd};n.INTERNAL.registerComponent(new ai.wA("storage-compat",rW,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.14")}(Af.Z);const oW=new g.OlP("angularfire2.storageBucket"),aW=new g.OlP("angularfire2.storage.maxUploadRetryTime"),uW=new g.OlP("angularfire2.storage.maxOperationRetryTime"),lW=new g.OlP("angularfire2.storage.use-emulator");let cW=(()=>{class n{constructor(t,r,i,a,c,p,y,b,x,R){const B=(0,_i.on)(t,c,r);this.storage=(0,_i.cc)(`${B.name}.storage.${i}`,"AngularFireStorage",B.name,()=>{const G=c.runOutsideAngular(()=>B.storage(i||void 0)),J=x;return J&&G.useEmulator(...J),y&&G.setMaxUploadRetryTime(y),b&&G.setMaxOperationRetryTime(b),G},[y,b])}ref(t){return XT(this.storage.ref(t))}refFromURL(t){return XT(this.storage.refFromURL(t))}upload(t,r,i){return XT(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(_i.Dh),g.LFG(_i.xv,8),g.LFG(oW,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(un.HU),g.LFG(aW,8),g.LFG(uW,8),g.LFG(lW,8),g.LFG(zc,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),dW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})(),hW=(()=>{class n{constructor(){Tf.Z.registerVersion("angularfire",un.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[cW],imports:[dW]}),n})(),fW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n,bootstrap:[GH]}),n.\u0275inj=g.cJS({providers:[M_],imports:[[$a,zH,_i.hO.initializeApp(wR_firebase),sV,oV,MD(()=>RD(wR_firebase)),JH(()=>XH()),o$(()=>a$()),b$,hW,kk,MH]]}),n})();(0,g.G48)(),vu().bootstrapModule(fW).catch(n=>console.error(n))},5867:(pt,ke,O)=>{"use strict";O.d(ke,{C6:()=>g.getApps,KN:()=>g.registerVersion,Mq:()=>g.getApp,ZF:()=>g.initializeApp});var g=O(9681);(0,g.registerVersion)("firebase","9.8.1","app")},127:(pt,ke,O)=>{"use strict";O.d(ke,{Z:()=>g.Z});var g=O(3942);g.Z.registerVersion("firebase","9.8.1","app-compat")},5881:(pt,ke,O)=>{"use strict";O.r(ke);var g=O(5861),W=O(3942),j=O(198),le=O(2090),Te=(O(9681),O(1877),O(4859));function ve(){return window}function X(){return(X=(0,g.Z)(function*(Ce,re,q){var Ue;const{BuildInfo:lt}=ve();(0,j.aq)(re.sessionId,"AuthEvent did not contain a session ID");const Et=yield Le(re.sessionId),Wt={};return(0,j.ar)()?Wt.ibi=lt.packageName:(0,j.as)()?Wt.apn=lt.packageName:(0,j.at)(Ce,"operation-not-supported-in-this-environment"),lt.displayName&&(Wt.appDisplayName=lt.displayName),Wt.sessionId=Et,(0,j.au)(Ce,q,re.type,void 0,null!==(Ue=re.eventId)&&void 0!==Ue?Ue:void 0,Wt)})).apply(this,arguments)}function qe(){return(qe=(0,g.Z)(function*(Ce){const{BuildInfo:re}=ve(),q={};(0,j.ar)()?q.iosBundleId=re.packageName:(0,j.as)()?q.androidPackageName=re.packageName:(0,j.at)(Ce,"operation-not-supported-in-this-environment"),yield(0,j.av)(Ce,q)})).apply(this,arguments)}function nt(){return(nt=(0,g.Z)(function*(Ce,re,q){const{cordova:Ue}=ve();let lt=()=>{};try{yield new Promise((Et,Wt)=>{let sn=null;function tn(){var on;Et();const Qr=null===(on=Ue.plugins.browsertab)||void 0===on?void 0:on.close;"function"==typeof Qr&&Qr(),"function"==typeof(null==q?void 0:q.close)&&q.close()}function $n(){sn||(sn=window.setTimeout(()=>{Wt((0,j.aw)(Ce,"redirect-cancelled-by-user"))},2e3))}function li(){"visible"===(null==document?void 0:document.visibilityState)&&$n()}re.addPassiveListener(tn),document.addEventListener("resume",$n,!1),(0,j.as)()&&document.addEventListener("visibilitychange",li,!1),lt=()=>{re.removePassiveListener(tn),document.removeEventListener("resume",$n,!1),document.removeEventListener("visibilitychange",li,!1),sn&&window.clearTimeout(sn)}})}finally{lt()}})).apply(this,arguments)}function Le(Ce){return ot.apply(this,arguments)}function ot(){return(ot=(0,g.Z)(function*(Ce){const re=it(Ce),q=yield crypto.subtle.digest("SHA-256",re);return Array.from(new Uint8Array(q)).map(lt=>lt.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function it(Ce){if((0,j.aq)(/[0-9a-zA-Z]+/.test(Ce),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(Ce);const re=new ArrayBuffer(Ce.length),q=new Uint8Array(re);for(let Ue=0;Ue<Ce.length;Ue++)q[Ue]=Ce.charCodeAt(Ue);return q}class He extends j.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(re=>{this.resolveInialized=re})}addPassiveListener(re){this.passiveListeners.add(re)}removePassiveListener(re){this.passiveListeners.delete(re)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(re){return this.resolveInialized(),this.passiveListeners.forEach(q=>q(re)),super.onEvent(re)}initialized(){var re=this;return(0,g.Z)(function*(){yield re.initPromise})()}}function ce(Ce){return be.apply(this,arguments)}function be(){return(be=(0,g.Z)(function*(Ce){const re=yield me()._get(pe(Ce));return re&&(yield me()._remove(pe(Ce))),re})).apply(this,arguments)}function se(){const Ce=[],re="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let q=0;q<20;q++){const Ue=Math.floor(Math.random()*re.length);Ce.push(re.charAt(Ue))}return Ce.join("")}function me(){return(0,j.ay)(j.b)}function pe(Ce){return(0,j.az)("authEvent",Ce.config.apiKey,Ce.name)}function Qe(Ce){if(!(null==Ce?void 0:Ce.includes("?")))return{};const[re,...q]=Ce.split("?");return(0,le.zd)(q.join("?"))}function Xe(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,j.aw)("no-auth-event")}}function Gt(){var Ce;return(null===(Ce=null==self?void 0:self.location)||void 0===Ce?void 0:Ce.protocol)||null}function Vn(Ce=(0,le.z$)()){return!("file:"!==Gt()&&"ionic:"!==Gt()||!Ce.toLowerCase().match(/iphone|ipad|ipod|android/))}function bi(){try{const Ce=self.localStorage,re=j.aI();if(Ce)return Ce.setItem(re,"1"),Ce.removeItem(re),!function hs(Ce=(0,le.z$)()){return function yr(){return(0,le.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Hn(Ce=(0,le.z$)()){return/Edge\/\d+/.test(Ce)}(Ce)}()||(0,le.hl)()}catch(Ce){return Li()&&(0,le.hl)()}return!1}function Li(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Xn(){return(function wn(){return"http:"===Gt()||"https:"===Gt()}()||(0,le.ru)()||Vn())&&!function Ei(){return(0,le.b$)()||(0,le.UG)()}()&&bi()&&!Li()}function Ci(){return Vn()&&"undefined"!=typeof document}function Yr(){return(Yr=(0,g.Z)(function*(){return!!Ci()&&new Promise(Ce=>{const re=setTimeout(()=>{Ce(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(re),Ce(!0)})})})).apply(this,arguments)}const Cn={LOCAL:"local",NONE:"none",SESSION:"session"},Fr=j.ax,xr="persistence";function Nn(Ce){return vr.apply(this,arguments)}function vr(){return(vr=(0,g.Z)(function*(Ce){yield Ce._initializationPromise;const re=cn(),q=j.az(xr,Ce.config.apiKey,Ce.name);re&&re.setItem(q,Ce._getPersistence())})).apply(this,arguments)}function cn(){var Ce;try{return(null===(Ce=function kn(){return"undefined"!=typeof window?window:null}())||void 0===Ce?void 0:Ce.sessionStorage)||null}catch(re){return null}}const bt=j.ax;class mt{constructor(){this.browserResolver=j.ay(j.k),this.cordovaResolver=j.ay(class Tt{constructor(){this._redirectPersistence=j.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=j.aB,this._overrideRedirectResult=j.aC}_initialize(re){var q=this;return(0,g.Z)(function*(){const Ue=re._key();let lt=q.eventManagers.get(Ue);return lt||(lt=new He(re),q.eventManagers.set(Ue,lt),q.attachCallbackListeners(re,lt)),lt})()}_openPopup(re){(0,j.at)(re,"operation-not-supported-in-this-environment")}_openRedirect(re,q,Ue,lt){var Et=this;return(0,g.Z)(function*(){!function Ie(Ce){var re,q,Ue,lt,Et,Wt,sn,tn,$n,li;const on=ve();(0,j.ax)("function"==typeof(null===(re=null==on?void 0:on.universalLinks)||void 0===re?void 0:re.subscribe),Ce,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,j.ax)(void 0!==(null===(q=null==on?void 0:on.BuildInfo)||void 0===q?void 0:q.packageName),Ce,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,j.ax)("function"==typeof(null===(Et=null===(lt=null===(Ue=null==on?void 0:on.cordova)||void 0===Ue?void 0:Ue.plugins)||void 0===lt?void 0:lt.browsertab)||void 0===Et?void 0:Et.openUrl),Ce,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,j.ax)("function"==typeof(null===(tn=null===(sn=null===(Wt=null==on?void 0:on.cordova)||void 0===Wt?void 0:Wt.plugins)||void 0===sn?void 0:sn.browsertab)||void 0===tn?void 0:tn.isAvailable),Ce,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,j.ax)("function"==typeof(null===(li=null===($n=null==on?void 0:on.cordova)||void 0===$n?void 0:$n.InAppBrowser)||void 0===li?void 0:li.open),Ce,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(re);const Wt=yield Et._initialize(re);yield Wt.initialized(),Wt.resetRedirect(),(0,j.aD)(),yield Et._originValidation(re);const sn=function Re(Ce,re,q=null){return{type:re,eventId:q,urlResponse:null,sessionId:se(),postBody:null,tenantId:Ce.tenantId,error:(0,j.aw)(Ce,"no-auth-event")}}(re,Ue,lt);yield function at(Ce,re){return me()._set(pe(Ce),re)}(re,sn);const tn=yield function Q(Ce,re,q){return X.apply(this,arguments)}(re,sn,q),$n=yield function je(Ce){const{cordova:re}=ve();return new Promise(q=>{re.plugins.browsertab.isAvailable(Ue=>{let lt=null;Ue?re.plugins.browsertab.openUrl(Ce):lt=re.InAppBrowser.open(Ce,(0,j.ap)()?"_blank":"_system","location=yes"),q(lt)})})}(tn);return function Ke(Ce,re,q){return nt.apply(this,arguments)}(re,Wt,$n)})()}_isIframeWebStorageSupported(re,q){throw new Error("Method not implemented.")}_originValidation(re){const q=re._key();return this.originValidationPromises[q]||(this.originValidationPromises[q]=function ge(Ce){return qe.apply(this,arguments)}(re)),this.originValidationPromises[q]}attachCallbackListeners(re,q){const{universalLinks:Ue,handleOpenURL:lt,BuildInfo:Et}=ve(),Wt=setTimeout((0,g.Z)(function*(){yield ce(re),q.onEvent(Xe())}),500),sn=function(){var li=(0,g.Z)(function*(on){clearTimeout(Wt);const Qr=yield ce(re);let ps=null;Qr&&(null==on?void 0:on.url)&&(ps=function Ne(Ce,re){var q,Ue;const lt=function oe(Ce){const re=Qe(Ce),q=re.link?decodeURIComponent(re.link):void 0,Ue=Qe(q).link,lt=re.deep_link_id?decodeURIComponent(re.deep_link_id):void 0;return Qe(lt).link||lt||Ue||q||Ce}(re);if(lt.includes("/__/auth/callback")){const Et=Qe(lt),Wt=Et.firebaseError?function Se(Ce){try{return JSON.parse(Ce)}catch(re){return null}}(decodeURIComponent(Et.firebaseError)):null,sn=null===(Ue=null===(q=null==Wt?void 0:Wt.code)||void 0===q?void 0:q.split("auth/"))||void 0===Ue?void 0:Ue[1],tn=sn?(0,j.aw)(sn):null;return tn?{type:Ce.type,eventId:Ce.eventId,tenantId:Ce.tenantId,error:tn,urlResponse:null,sessionId:null,postBody:null}:{type:Ce.type,eventId:Ce.eventId,tenantId:Ce.tenantId,sessionId:Ce.sessionId,urlResponse:lt,postBody:null}}return null}(Qr,on.url)),q.onEvent(ps||Xe())});return function(Qr){return li.apply(this,arguments)}}();void 0!==Ue&&"function"==typeof Ue.subscribe&&Ue.subscribe(null,sn);const tn=lt,$n=`${Et.packageName.toLowerCase()}://`;ve().handleOpenURL=function(){var li=(0,g.Z)(function*(on){if(on.toLowerCase().startsWith($n)&&sn({url:on}),"function"==typeof tn)try{tn(on)}catch(Qr){console.error(Qr)}});return function(on){return li.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=j.a,this._completeRedirectFn=j.aB,this._overrideRedirectResult=j.aC}_initialize(re){var q=this;return(0,g.Z)(function*(){return yield q.selectUnderlyingResolver(),q.assertedUnderlyingResolver._initialize(re)})()}_openPopup(re,q,Ue,lt){var Et=this;return(0,g.Z)(function*(){return yield Et.selectUnderlyingResolver(),Et.assertedUnderlyingResolver._openPopup(re,q,Ue,lt)})()}_openRedirect(re,q,Ue,lt){var Et=this;return(0,g.Z)(function*(){return yield Et.selectUnderlyingResolver(),Et.assertedUnderlyingResolver._openRedirect(re,q,Ue,lt)})()}_isIframeWebStorageSupported(re,q){this.assertedUnderlyingResolver._isIframeWebStorageSupported(re,q)}_originValidation(re){return this.assertedUnderlyingResolver._originValidation(re)}get _shouldInitProactively(){return Ci()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return bt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var re=this;return(0,g.Z)(function*(){if(re.underlyingResolver)return;const q=yield function xt(){return Yr.apply(this,arguments)}();re.underlyingResolver=q?re.cordovaResolver:re.browserResolver})()}}function Fi(Ce){return Ce.unwrap()}function en(Ce){return or(Ce)}function or(Ce){const{_tokenResponse:re}=Ce instanceof le.ZR?Ce.customData:Ce;if(!re)return null;if(!(Ce instanceof le.ZR)&&"temporaryProof"in re&&"phoneNumber"in re)return j.P.credentialFromResult(Ce);const q=re.providerId;if(!q||q===j.o.PASSWORD)return null;let Ue;switch(q){case j.o.GOOGLE:Ue=j.Q;break;case j.o.FACEBOOK:Ue=j.N;break;case j.o.GITHUB:Ue=j.T;break;case j.o.TWITTER:Ue=j.W;break;default:const{oauthIdToken:lt,oauthAccessToken:Et,oauthTokenSecret:Wt,pendingToken:sn,nonce:tn}=re;return Et||Wt||lt||sn?sn?q.startsWith("saml.")?j.aL._create(q,sn):j.J._fromParams({providerId:q,signInMethod:q,pendingToken:sn,idToken:lt,accessToken:Et}):new j.U(q).credential({idToken:lt,accessToken:Et,rawNonce:tn}):null}return Ce instanceof le.ZR?Ue.credentialFromError(Ce):Ue.credentialFromResult(Ce)}function Tn(Ce,re){return re.catch(q=>{throw q instanceof le.ZR&&function ts(Ce,re){var q;const Ue=null===(q=re.customData)||void 0===q?void 0:q._tokenResponse;if("auth/multi-factor-auth-required"===re.code)re.resolver=new ie(Ce,j.an(Ce,re));else if(Ue){const lt=or(re),Et=re;lt&&(Et.credential=lt,Et.tenantId=Ue.tenantId||void 0,Et.email=Ue.email||void 0,Et.phoneNumber=Ue.phoneNumber||void 0)}}(Ce,q),q}).then(q=>{const lt=q.user;return{operationType:q.operationType,credential:en(q),additionalUserInfo:j.al(q),user:Pe.getOrCreate(lt)}})}function K(Ce,re){return ne.apply(this,arguments)}function ne(){return(ne=(0,g.Z)(function*(Ce,re){const q=yield re;return{verificationId:q.verificationId,confirm:Ue=>Tn(Ce,q.confirm(Ue))}})).apply(this,arguments)}class ie{constructor(re,q){this.resolver=q,this.auth=function Ii(Ce){return Ce.wrapped()}(re)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(re){return Tn(Fi(this.auth),this.resolver.resolveSignIn(re))}}class Pe{constructor(re){this._delegate=re,this.multiFactor=j.ao(re)}static getOrCreate(re){return Pe.USER_MAP.has(re)||Pe.USER_MAP.set(re,new Pe(re)),Pe.USER_MAP.get(re)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(re){return this._delegate.getIdTokenResult(re)}getIdToken(re){return this._delegate.getIdToken(re)}linkAndRetrieveDataWithCredential(re){return this.linkWithCredential(re)}linkWithCredential(re){var q=this;return(0,g.Z)(function*(){return Tn(q.auth,j.Z(q._delegate,re))})()}linkWithPhoneNumber(re,q){var Ue=this;return(0,g.Z)(function*(){return K(Ue.auth,j.l(Ue._delegate,re,q))})()}linkWithPopup(re){var q=this;return(0,g.Z)(function*(){return Tn(q.auth,j.d(q._delegate,re,mt))})()}linkWithRedirect(re){var q=this;return(0,g.Z)(function*(){return yield Nn(j.aE(q.auth)),j.g(q._delegate,re,mt)})()}reauthenticateAndRetrieveDataWithCredential(re){return this.reauthenticateWithCredential(re)}reauthenticateWithCredential(re){var q=this;return(0,g.Z)(function*(){return Tn(q.auth,j._(q._delegate,re))})()}reauthenticateWithPhoneNumber(re,q){return K(this.auth,j.r(this._delegate,re,q))}reauthenticateWithPopup(re){return Tn(this.auth,j.e(this._delegate,re,mt))}reauthenticateWithRedirect(re){var q=this;return(0,g.Z)(function*(){return yield Nn(j.aE(q.auth)),j.h(q._delegate,re,mt)})()}sendEmailVerification(re){return j.ab(this._delegate,re)}unlink(re){var q=this;return(0,g.Z)(function*(){return yield j.ak(q._delegate,re),q})()}updateEmail(re){return j.ag(this._delegate,re)}updatePassword(re){return j.ah(this._delegate,re)}updatePhoneNumber(re){return j.u(this._delegate,re)}updateProfile(re){return j.af(this._delegate,re)}verifyBeforeUpdateEmail(re,q){return j.ac(this._delegate,re,q)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Pe.USER_MAP=new WeakMap;const ee=j.ax;let he=(()=>{class Ce{constructor(q,Ue){if(this.app=q,Ue.isInitialized())return this._delegate=Ue.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:lt}=q.options;ee(lt,"invalid-api-key",{appName:q.name}),ee(lt,"invalid-api-key",{appName:q.name});const Et="undefined"!=typeof window?mt:void 0;this._delegate=Ue.initialize({options:{persistence:dt(lt,q.name),popupRedirectResolver:Et}}),this._delegate._updateErrorMap(j.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Pe.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(q){this._delegate.languageCode=q}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(q){this._delegate.tenantId=q}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(q,Ue){j.G(this._delegate,q,Ue)}applyActionCode(q){return j.a2(this._delegate,q)}checkActionCode(q){return j.a3(this._delegate,q)}confirmPasswordReset(q,Ue){return j.a1(this._delegate,q,Ue)}createUserWithEmailAndPassword(q,Ue){var lt=this;return(0,g.Z)(function*(){return Tn(lt._delegate,j.a5(lt._delegate,q,Ue))})()}fetchProvidersForEmail(q){return this.fetchSignInMethodsForEmail(q)}fetchSignInMethodsForEmail(q){return j.aa(this._delegate,q)}isSignInWithEmailLink(q){return j.a8(this._delegate,q)}getRedirectResult(){var q=this;return(0,g.Z)(function*(){ee(Xn(),q._delegate,"operation-not-supported-in-this-environment");const Ue=yield j.j(q._delegate,mt);return Ue?Tn(q._delegate,Promise.resolve(Ue)):{credential:null,user:null}})()}addFrameworkForLogging(q){!function zt(Ce,re){(0,j.aE)(Ce)._logFramework(re)}(this._delegate,q)}onAuthStateChanged(q,Ue,lt){const{next:Et,error:Wt,complete:sn}=$e(q,Ue,lt);return this._delegate.onAuthStateChanged(Et,Wt,sn)}onIdTokenChanged(q,Ue,lt){const{next:Et,error:Wt,complete:sn}=$e(q,Ue,lt);return this._delegate.onIdTokenChanged(Et,Wt,sn)}sendSignInLinkToEmail(q,Ue){return j.a7(this._delegate,q,Ue)}sendPasswordResetEmail(q,Ue){return j.a0(this._delegate,q,Ue||void 0)}setPersistence(q){var Ue=this;return(0,g.Z)(function*(){let lt;switch(function ui(Ce,re){Fr(Object.values(Cn).includes(re),Ce,"invalid-persistence-type"),(0,le.b$)()?Fr(re!==Cn.SESSION,Ce,"unsupported-persistence-type"):(0,le.UG)()?Fr(re===Cn.NONE,Ce,"unsupported-persistence-type"):Li()?Fr(re===Cn.NONE||re===Cn.LOCAL&&(0,le.hl)(),Ce,"unsupported-persistence-type"):Fr(re===Cn.NONE||bi(),Ce,"unsupported-persistence-type")}(Ue._delegate,q),q){case Cn.SESSION:lt=j.a;break;case Cn.LOCAL:lt=(yield j.ay(j.i)._isAvailable())?j.i:j.b;break;case Cn.NONE:lt=j.L;break;default:return j.at("argument-error",{appName:Ue._delegate.name})}return Ue._delegate.setPersistence(lt)})()}signInAndRetrieveDataWithCredential(q){return this.signInWithCredential(q)}signInAnonymously(){return Tn(this._delegate,j.X(this._delegate))}signInWithCredential(q){return Tn(this._delegate,j.Y(this._delegate,q))}signInWithCustomToken(q){return Tn(this._delegate,j.$(this._delegate,q))}signInWithEmailAndPassword(q,Ue){return Tn(this._delegate,j.a6(this._delegate,q,Ue))}signInWithEmailLink(q,Ue){return Tn(this._delegate,j.a9(this._delegate,q,Ue))}signInWithPhoneNumber(q,Ue){return K(this._delegate,j.s(this._delegate,q,Ue))}signInWithPopup(q){var Ue=this;return(0,g.Z)(function*(){return ee(Xn(),Ue._delegate,"operation-not-supported-in-this-environment"),Tn(Ue._delegate,j.c(Ue._delegate,q,mt))})()}signInWithRedirect(q){var Ue=this;return(0,g.Z)(function*(){return ee(Xn(),Ue._delegate,"operation-not-supported-in-this-environment"),yield Nn(Ue._delegate),j.f(Ue._delegate,q,mt)})()}updateCurrentUser(q){return this._delegate.updateCurrentUser(q)}verifyPasswordResetCode(q){return j.a4(this._delegate,q)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return Ce.Persistence=Cn,Ce})();function $e(Ce,re,q){let Ue=Ce;"function"!=typeof Ce&&({next:Ue,error:re,complete:q}=Ce);const lt=Ue;return{next:Wt=>lt(Wt&&Pe.getOrCreate(Wt)),error:re,complete:q}}function dt(Ce,re){const q=function fs(Ce,re){const q=cn();if(!q)return[];const Ue=j.az(xr,Ce,re);switch(q.getItem(Ue)){case Cn.NONE:return[j.L];case Cn.LOCAL:return[j.i,j.a];case Cn.SESSION:return[j.a];default:return[]}}(Ce,re);if("undefined"!=typeof self&&!q.includes(j.i)&&q.push(j.i),"undefined"!=typeof window)for(const Ue of[j.b,j.a])q.includes(Ue)||q.push(Ue);return q.includes(j.L)||q.push(j.L),q}class St{constructor(){this.providerId="phone",this._delegate=new j.P(Fi(W.Z.auth()))}static credential(re,q){return j.P.credential(re,q)}verifyPhoneNumber(re,q){return this._delegate.verifyPhoneNumber(re,q)}unwrap(){return this._delegate}}St.PHONE_SIGN_IN_METHOD=j.P.PHONE_SIGN_IN_METHOD,St.PROVIDER_ID=j.P.PROVIDER_ID;const Qt=j.ax;class Mn{constructor(re,q,Ue=W.Z.app()){var lt;Qt(null===(lt=Ue.options)||void 0===lt?void 0:lt.apiKey,"invalid-api-key",{appName:Ue.name}),this._delegate=new j.R(re,q,Ue.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function wr(Ce){Ce.INTERNAL.registerComponent(new Te.wA("auth-compat",re=>{const q=re.getProvider("app-compat").getImmediate(),Ue=re.getProvider("auth");return new he(q,Ue)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:j.A.EMAIL_SIGNIN,PASSWORD_RESET:j.A.PASSWORD_RESET,RECOVER_EMAIL:j.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:j.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:j.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:j.A.VERIFY_EMAIL}},EmailAuthProvider:j.M,FacebookAuthProvider:j.N,GithubAuthProvider:j.T,GoogleAuthProvider:j.Q,OAuthProvider:j.U,SAMLAuthProvider:j.V,PhoneAuthProvider:St,PhoneMultiFactorGenerator:j.m,RecaptchaVerifier:Mn,TwitterAuthProvider:j.W,Auth:he,AuthCredential:j.H,Error:le.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Ce.registerVersion("@firebase/auth-compat","0.2.14")}(W.Z)},8407:function(pt,ke){!function(O){"use strict";function W(l){var f,v,T,P;for(v=1,T=arguments.length;v<T;v++)for(f in P=arguments[v])l[f]=P[f];return l}var j=Object.create||function(){function l(){}return function(f){return l.prototype=f,new l}}();function le(l,f){var v=Array.prototype.slice;if(l.bind)return l.bind.apply(l,v.call(arguments,1));var T=v.call(arguments,2);return function(){return l.apply(f,T.length?T.concat(v.call(arguments)):arguments)}}var we=0;function _e(l){return"_leaflet_id"in l||(l._leaflet_id=++we),l._leaflet_id}function Te(l,f,v){var T,P,V,Y;return Y=function(){T=!1,P&&(V.apply(v,P),P=!1)},V=function(){T?P=arguments:(l.apply(v,arguments),setTimeout(Y,f),T=!0)},V}function ve(l,f,v){var T=f[1],P=f[0],V=T-P;return l===T&&v?l:((l-P)%V+V)%V+P}function Ee(){return!1}function Q(l,f){if(!1===f)return l;var v=Math.pow(10,void 0===f?6:f);return Math.round(l*v)/v}function X(l){return l.trim?l.trim():l.replace(/^\s+|\s+$/g,"")}function ge(l){return X(l).split(/\s+/)}function qe(l,f){for(var v in Object.prototype.hasOwnProperty.call(l,"options")||(l.options=l.options?j(l.options):{}),f)l.options[v]=f[v];return l.options}function je(l,f,v){var T=[];for(var P in l)T.push(encodeURIComponent(v?P.toUpperCase():P)+"="+encodeURIComponent(l[P]));return(f&&-1!==f.indexOf("?")?"&":"?")+T.join("&")}var Ke=/\{ *([\w_ -]+) *\}/g;function nt(l,f){return l.replace(Ke,function(v,T){var P=f[T];if(void 0===P)throw new Error("No value provided for variable "+v);return"function"==typeof P&&(P=P(f)),P})}var Ie=Array.isArray||function(l){return"[object Array]"===Object.prototype.toString.call(l)};function Le(l,f){for(var v=0;v<l.length;v++)if(l[v]===f)return v;return-1}var ot="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function it(l){return window["webkit"+l]||window["moz"+l]||window["ms"+l]}var ze=0;function He(l){var f=+new Date,v=Math.max(0,16-(f-ze));return ze=f+v,window.setTimeout(l,v)}var Re=window.requestAnimationFrame||it("RequestAnimationFrame")||He,at=window.cancelAnimationFrame||it("CancelAnimationFrame")||it("CancelRequestAnimationFrame")||function(l){window.clearTimeout(l)};function ce(l,f,v){if(!v||Re!==He)return Re.call(window,le(l,f));l.call(f)}function be(l){l&&at.call(window,l)}var Ne={__proto__:null,extend:W,create:j,bind:le,get lastId(){return we},stamp:_e,throttle:Te,wrapNum:ve,falseFn:Ee,formatNum:Q,trim:X,splitWords:ge,setOptions:qe,getParamString:je,template:nt,isArray:Ie,indexOf:Le,emptyImageUrl:ot,requestFn:Re,cancelFn:at,requestAnimFrame:ce,cancelAnimFrame:be};function se(){}se.extend=function(l){var f=function(){qe(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},v=f.__super__=this.prototype,T=j(v);for(var P in T.constructor=f,f.prototype=T,this)Object.prototype.hasOwnProperty.call(this,P)&&"prototype"!==P&&"__super__"!==P&&(f[P]=this[P]);return l.statics&&W(f,l.statics),l.includes&&(function me(l){if("undefined"!=typeof L&&L&&L.Mixin){l=Ie(l)?l:[l];for(var f=0;f<l.length;f++)l[f]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(l.includes),W.apply(null,[T].concat(l.includes))),W(T,l),delete T.statics,delete T.includes,T.options&&(T.options=v.options?j(v.options):{},W(T.options,l.options)),T._initHooks=[],T.callInitHooks=function(){if(!this._initHooksCalled){v.callInitHooks&&v.callInitHooks.call(this),this._initHooksCalled=!0;for(var V=0,Y=T._initHooks.length;V<Y;V++)T._initHooks[V].call(this)}},f},se.include=function(l){var f=this.prototype.options;return W(this.prototype,l),l.options&&(this.prototype.options=f,this.mergeOptions(l.options)),this},se.mergeOptions=function(l){return W(this.prototype.options,l),this},se.addInitHook=function(l){var f=Array.prototype.slice.call(arguments,1),v="function"==typeof l?l:function(){this[l].apply(this,f)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(v),this};var pe={on:function(l,f,v){if("object"==typeof l)for(var T in l)this._on(T,l[T],f);else for(var P=0,V=(l=ge(l)).length;P<V;P++)this._on(l[P],f,v);return this},off:function(l,f,v){if(arguments.length)if("object"==typeof l)for(var T in l)this._off(T,l[T],f);else{l=ge(l);for(var P=1===arguments.length,V=0,Y=l.length;V<Y;V++)P?this._off(l[V]):this._off(l[V],f,v)}else delete this._events;return this},_on:function(l,f,v){if("function"==typeof f){this._events=this._events||{};var T=this._events[l];T||(this._events[l]=T=[]),v===this&&(v=void 0);for(var P={fn:f,ctx:v},V=T,Y=0,de=V.length;Y<de;Y++)if(V[Y].fn===f&&V[Y].ctx===v)return;V.push(P)}else console.warn("wrong listener type: "+typeof f)},_off:function(l,f,v){var T,P,V;if(this._events&&(T=this._events[l])){if(1===arguments.length){if(this._firingCount)for(P=0,V=T.length;P<V;P++)T[P].fn=Ee;return void delete this._events[l]}if(v===this&&(v=void 0),"function"!=typeof f)return void console.warn("wrong listener type: "+typeof f);for(P=0,V=T.length;P<V;P++){var Y=T[P];if(Y.ctx===v&&Y.fn===f)return this._firingCount&&(Y.fn=Ee,this._events[l]=T=T.slice()),void T.splice(P,1)}console.warn("listener not found")}},fire:function(l,f,v){if(!this.listens(l,v))return this;var T=W({},f,{type:l,target:this,sourceTarget:f&&f.sourceTarget||this});if(this._events){var P=this._events[l];if(P){this._firingCount=this._firingCount+1||1;for(var V=0,Y=P.length;V<Y;V++){var de=P[V];de.fn.call(de.ctx||this,T)}this._firingCount--}}return v&&this._propagateEvent(T),this},listens:function(l,f){"string"!=typeof l&&console.warn('"string" type argument expected');var v=this._events&&this._events[l];if(v&&v.length)return!0;if(f)for(var T in this._eventParents)if(this._eventParents[T].listens(l,f))return!0;return!1},once:function(l,f,v){if("object"==typeof l){for(var T in l)this.once(T,l[T],f);return this}var P=le(function(){this.off(l,f,v).off(l,P,v)},this);return this.on(l,f,v).on(l,P,v)},addEventParent:function(l){return this._eventParents=this._eventParents||{},this._eventParents[_e(l)]=l,this},removeEventParent:function(l){return this._eventParents&&delete this._eventParents[_e(l)],this},_propagateEvent:function(l){for(var f in this._eventParents)this._eventParents[f].fire(l.type,W({layer:l.target,propagatedFrom:l.target},l),!0)}};pe.addEventListener=pe.on,pe.removeEventListener=pe.clearAllEventListeners=pe.off,pe.addOneTimeEventListener=pe.once,pe.fireEvent=pe.fire,pe.hasEventListeners=pe.listens;var Se=se.extend(pe);function oe(l,f,v){this.x=v?Math.round(l):l,this.y=v?Math.round(f):f}var Qe=Math.trunc||function(l){return l>0?Math.floor(l):Math.ceil(l)};function et(l,f,v){return l instanceof oe?l:Ie(l)?new oe(l[0],l[1]):null==l?l:"object"==typeof l&&"x"in l&&"y"in l?new oe(l.x,l.y):new oe(l,f,v)}function Tt(l,f){if(l)for(var v=f?[l,f]:l,T=0,P=v.length;T<P;T++)this.extend(v[T])}function Ut(l,f){return!l||l instanceof Tt?l:new Tt(l,f)}function Xe(l,f){if(l)for(var v=f?[l,f]:l,T=0,P=v.length;T<P;T++)this.extend(v[T])}function zt(l,f){return l instanceof Xe?l:new Xe(l,f)}function Vt(l,f,v){if(isNaN(l)||isNaN(f))throw new Error("Invalid LatLng object: ("+l+", "+f+")");this.lat=+l,this.lng=+f,void 0!==v&&(this.alt=+v)}function Nt(l,f,v){return l instanceof Vt?l:Ie(l)&&"object"!=typeof l[0]?3===l.length?new Vt(l[0],l[1],l[2]):2===l.length?new Vt(l[0],l[1]):null:null==l?l:"object"==typeof l&&"lat"in l?new Vt(l.lat,"lng"in l?l.lng:l.lon,l.alt):void 0===f?null:new Vt(l,f,v)}oe.prototype={clone:function(){return new oe(this.x,this.y)},add:function(l){return this.clone()._add(et(l))},_add:function(l){return this.x+=l.x,this.y+=l.y,this},subtract:function(l){return this.clone()._subtract(et(l))},_subtract:function(l){return this.x-=l.x,this.y-=l.y,this},divideBy:function(l){return this.clone()._divideBy(l)},_divideBy:function(l){return this.x/=l,this.y/=l,this},multiplyBy:function(l){return this.clone()._multiplyBy(l)},_multiplyBy:function(l){return this.x*=l,this.y*=l,this},scaleBy:function(l){return new oe(this.x*l.x,this.y*l.y)},unscaleBy:function(l){return new oe(this.x/l.x,this.y/l.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Qe(this.x),this.y=Qe(this.y),this},distanceTo:function(l){var f=(l=et(l)).x-this.x,v=l.y-this.y;return Math.sqrt(f*f+v*v)},equals:function(l){return(l=et(l)).x===this.x&&l.y===this.y},contains:function(l){return l=et(l),Math.abs(l.x)<=Math.abs(this.x)&&Math.abs(l.y)<=Math.abs(this.y)},toString:function(){return"Point("+Q(this.x)+", "+Q(this.y)+")"}},Tt.prototype={extend:function(l){return l=et(l),this.min||this.max?(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(l.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(l.y,this.max.y)):(this.min=l.clone(),this.max=l.clone()),this},getCenter:function(l){return new oe((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,l)},getBottomLeft:function(){return new oe(this.min.x,this.max.y)},getTopRight:function(){return new oe(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(l){var f,v;return(l="number"==typeof l[0]||l instanceof oe?et(l):Ut(l))instanceof Tt?(f=l.min,v=l.max):f=v=l,f.x>=this.min.x&&v.x<=this.max.x&&f.y>=this.min.y&&v.y<=this.max.y},intersects:function(l){l=Ut(l);var f=this.min,v=this.max,T=l.min,P=l.max;return P.x>=f.x&&T.x<=v.x&&P.y>=f.y&&T.y<=v.y},overlaps:function(l){l=Ut(l);var f=this.min,v=this.max,T=l.min,P=l.max;return P.x>f.x&&T.x<v.x&&P.y>f.y&&T.y<v.y},isValid:function(){return!(!this.min||!this.max)}},Xe.prototype={extend:function(l){var T,P,f=this._southWest,v=this._northEast;if(l instanceof Vt)T=l,P=l;else{if(!(l instanceof Xe))return l?this.extend(Nt(l)||zt(l)):this;if(P=l._northEast,!(T=l._southWest)||!P)return this}return f||v?(f.lat=Math.min(T.lat,f.lat),f.lng=Math.min(T.lng,f.lng),v.lat=Math.max(P.lat,v.lat),v.lng=Math.max(P.lng,v.lng)):(this._southWest=new Vt(T.lat,T.lng),this._northEast=new Vt(P.lat,P.lng)),this},pad:function(l){var f=this._southWest,v=this._northEast,T=Math.abs(f.lat-v.lat)*l,P=Math.abs(f.lng-v.lng)*l;return new Xe(new Vt(f.lat-T,f.lng-P),new Vt(v.lat+T,v.lng+P))},getCenter:function(){return new Vt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Vt(this.getNorth(),this.getWest())},getSouthEast:function(){return new Vt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(l){l="number"==typeof l[0]||l instanceof Vt||"lat"in l?Nt(l):zt(l);var T,P,f=this._southWest,v=this._northEast;return l instanceof Xe?(T=l.getSouthWest(),P=l.getNorthEast()):T=P=l,T.lat>=f.lat&&P.lat<=v.lat&&T.lng>=f.lng&&P.lng<=v.lng},intersects:function(l){l=zt(l);var f=this._southWest,v=this._northEast,T=l.getSouthWest(),P=l.getNorthEast();return P.lat>=f.lat&&T.lat<=v.lat&&P.lng>=f.lng&&T.lng<=v.lng},overlaps:function(l){l=zt(l);var f=this._southWest,v=this._northEast,T=l.getSouthWest(),P=l.getNorthEast();return P.lat>f.lat&&T.lat<v.lat&&P.lng>f.lng&&T.lng<v.lng},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(l,f){return!!l&&(l=zt(l),this._southWest.equals(l.getSouthWest(),f)&&this._northEast.equals(l.getNorthEast(),f))},isValid:function(){return!(!this._southWest||!this._northEast)}},Vt.prototype={equals:function(l,f){return!!l&&(l=Nt(l),Math.max(Math.abs(this.lat-l.lat),Math.abs(this.lng-l.lng))<=(void 0===f?1e-9:f))},toString:function(l){return"LatLng("+Q(this.lat,l)+", "+Q(this.lng,l)+")"},distanceTo:function(l){return Gt.distance(this,Nt(l))},wrap:function(){return Gt.wrapLatLng(this)},toBounds:function(l){var f=180*l/40075017,v=f/Math.cos(Math.PI/180*this.lat);return zt([this.lat-f,this.lng-v],[this.lat+f,this.lng+v])},clone:function(){return new Vt(this.lat,this.lng,this.alt)}};var l,Xt={latLngToPoint:function(l,f){var v=this.projection.project(l),T=this.scale(f);return this.transformation._transform(v,T)},pointToLatLng:function(l,f){var v=this.scale(f),T=this.transformation.untransform(l,v);return this.projection.unproject(T)},project:function(l){return this.projection.project(l)},unproject:function(l){return this.projection.unproject(l)},scale:function(l){return 256*Math.pow(2,l)},zoom:function(l){return Math.log(l/256)/Math.LN2},getProjectedBounds:function(l){if(this.infinite)return null;var f=this.projection.bounds,v=this.scale(l);return new Tt(this.transformation.transform(f.min,v),this.transformation.transform(f.max,v))},infinite:!1,wrapLatLng:function(l){var f=this.wrapLng?ve(l.lng,this.wrapLng,!0):l.lng;return new Vt(this.wrapLat?ve(l.lat,this.wrapLat,!0):l.lat,f,l.alt)},wrapLatLngBounds:function(l){var f=l.getCenter(),v=this.wrapLatLng(f),T=f.lat-v.lat,P=f.lng-v.lng;if(0===T&&0===P)return l;var V=l.getSouthWest(),Y=l.getNorthEast();return new Xe(new Vt(V.lat-T,V.lng-P),new Vt(Y.lat-T,Y.lng-P))}},Gt=W({},Xt,{wrapLng:[-180,180],R:6371e3,distance:function(l,f){var v=Math.PI/180,T=l.lat*v,P=f.lat*v,V=Math.sin((f.lat-l.lat)*v/2),Y=Math.sin((f.lng-l.lng)*v/2),de=V*V+Math.cos(T)*Math.cos(P)*Y*Y,De=2*Math.atan2(Math.sqrt(de),Math.sqrt(1-de));return this.R*De}}),Vn={R:6378137,MAX_LATITUDE:85.0511287798,project:function(l){var f=Math.PI/180,v=this.MAX_LATITUDE,T=Math.max(Math.min(v,l.lat),-v),P=Math.sin(T*f);return new oe(this.R*l.lng*f,this.R*Math.log((1+P)/(1-P))/2)},unproject:function(l){var f=180/Math.PI;return new Vt((2*Math.atan(Math.exp(l.y/this.R))-Math.PI/2)*f,l.x*f/this.R)},bounds:(l=6378137*Math.PI,new Tt([-l,-l],[l,l]))};function Ei(l,f,v,T){if(Ie(l))return this._a=l[0],this._b=l[1],this._c=l[2],void(this._d=l[3]);this._a=l,this._b=f,this._c=v,this._d=T}function yr(l,f,v,T){return new Ei(l,f,v,T)}Ei.prototype={transform:function(l,f){return this._transform(l.clone(),f)},_transform:function(l,f){return l.x=(f=f||1)*(this._a*l.x+this._b),l.y=f*(this._c*l.y+this._d),l},untransform:function(l,f){return new oe((l.x/(f=f||1)-this._b)/this._a,(l.y/f-this._d)/this._c)}};var Hn=W({},Gt,{code:"EPSG:3857",projection:Vn,transformation:function(){var l=.5/(Math.PI*Vn.R);return yr(l,.5,-l,.5)}()}),hs=W({},Hn,{code:"EPSG:900913"});function bi(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function Li(l,f){var T,P,V,Y,de,De,v="";for(T=0,V=l.length;T<V;T++){for(P=0,Y=(de=l[T]).length;P<Y;P++)v+=(P?"L":"M")+(De=de[P]).x+" "+De.y;v+=f?q.svg?"z":"x":""}return v||"M0 0"}var Xn=document.documentElement.style,Ci="ActiveXObject"in window,xt=Ci&&!document.addEventListener,Yr="msLaunchUri"in navigator&&!("documentMode"in document),kn=re("webkit"),Cn=re("android"),Fr=re("android 2")||re("android 3"),xr=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ui=Cn&&re("Google")&&xr<537&&!("AudioNode"in window),Nn=!!window.opera,vr=!Yr&&re("chrome"),fs=re("gecko")&&!kn&&!Nn&&!Ci,cn=!vr&&re("safari"),bt=re("phantom"),mt="OTransition"in Xn,Fi=0===navigator.platform.indexOf("Win"),Ii=Ci&&"transition"in Xn,en="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Fr,ts="MozPerspective"in Xn,or=!window.L_DISABLE_3D&&(Ii||en||ts)&&!mt&&!bt,Tn="undefined"!=typeof orientation||re("mobile"),K=Tn&&kn,ne=Tn&&en,ie=!window.PointerEvent&&window.MSPointerEvent,Pe=!(!window.PointerEvent&&!ie),ee="ontouchstart"in window||!!window.TouchEvent,he=!window.L_NO_TOUCH&&(ee||Pe),$e=Tn&&Nn,dt=Tn&&fs,St=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Qt=function(){var l=!1;try{var f=Object.defineProperty({},"passive",{get:function(){l=!0}});window.addEventListener("testPassiveEventSupport",Ee,f),window.removeEventListener("testPassiveEventSupport",Ee,f)}catch(v){}return l}(),Mn=!!document.createElement("canvas").getContext,Ot=!(!document.createElementNS||!bi("svg").createSVGRect),wr=!!Ot&&function(){var l=document.createElement("div");return l.innerHTML="<svg/>","http://www.w3.org/2000/svg"===(l.firstChild&&l.firstChild.namespaceURI)}(),Ce=!Ot&&function(){try{var l=document.createElement("div");l.innerHTML='<v:shape adj="1"/>';var f=l.firstChild;return f.style.behavior="url(#default#VML)",f&&"object"==typeof f.adj}catch(v){return!1}}();function re(l){return navigator.userAgent.toLowerCase().indexOf(l)>=0}var q={ie:Ci,ielt9:xt,edge:Yr,webkit:kn,android:Cn,android23:Fr,androidStock:ui,opera:Nn,chrome:vr,gecko:fs,safari:cn,phantom:bt,opera12:mt,win:Fi,ie3d:Ii,webkit3d:en,gecko3d:ts,any3d:or,mobile:Tn,mobileWebkit:K,mobileWebkit3d:ne,msPointer:ie,pointer:Pe,touch:he,touchNative:ee,mobileOpera:$e,mobileGecko:dt,retina:St,passiveEvents:Qt,canvas:Mn,svg:Ot,vml:Ce,inlineSvg:wr},Ue=q.msPointer?"MSPointerDown":"pointerdown",lt=q.msPointer?"MSPointerMove":"pointermove",Et=q.msPointer?"MSPointerUp":"pointerup",Wt=q.msPointer?"MSPointerCancel":"pointercancel",sn={touchstart:Ue,touchmove:lt,touchend:Et,touchcancel:Wt},tn={touchstart:function nn(l,f){f.MSPOINTER_TYPE_TOUCH&&f.pointerType===f.MSPOINTER_TYPE_TOUCH&&Jn(f),tt(l,f)},touchmove:tt,touchend:tt,touchcancel:tt},$n={},li=!1;function on(l,f,v){return"touchstart"===f&&function Ti(){li||(document.addEventListener(Ue,ps,!0),document.addEventListener(lt,Ur,!0),document.addEventListener(Et,ua,!0),document.addEventListener(Wt,ua,!0),li=!0)}(),tn[f]?(v=tn[f].bind(this,v),l.addEventListener(sn[f],v,!1),v):(console.warn("wrong event specified:",f),L.Util.falseFn)}function ps(l){$n[l.pointerId]=l}function Ur(l){$n[l.pointerId]&&($n[l.pointerId]=l)}function ua(l){delete $n[l.pointerId]}function tt(l,f){if(f.pointerType!==(f.MSPOINTER_TYPE_MOUSE||"mouse")){for(var v in f.touches=[],$n)f.touches.push($n[v]);f.changedTouches=[f],l(f)}}var jr,Oa,du,$u,ss,ns=Jr(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),In=Jr(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),oo="webkitTransition"===In||"OTransition"===In?In+"End":"transitionend";function er(l){return"string"==typeof l?document.getElementById(l):l}function Ht(l,f){var v=l.style[f]||l.currentStyle&&l.currentStyle[f];if((!v||"auto"===v)&&document.defaultView){var T=document.defaultView.getComputedStyle(l,null);v=T?T[f]:null}return"auto"===v?null:v}function an(l,f,v){var T=document.createElement(l);return T.className=f||"",v&&v.appendChild(T),T}function Rn(l){var f=l.parentNode;f&&f.removeChild(l)}function Rs(l){for(;l.firstChild;)l.removeChild(l.firstChild)}function rs(l){var f=l.parentNode;f&&f.lastChild!==l&&f.appendChild(l)}function Gn(l){var f=l.parentNode;f&&f.firstChild!==l&&f.insertBefore(l,f.firstChild)}function gs(l,f){if(void 0!==l.classList)return l.classList.contains(f);var v=Na(l);return v.length>0&&new RegExp("(^|\\s)"+f+"(\\s|$)").test(v)}function jt(l,f){if(void 0!==l.classList)for(var v=ge(f),T=0,P=v.length;T<P;T++)l.classList.add(v[T]);else if(!gs(l,f)){var V=Na(l);An(l,(V?V+" ":"")+f)}}function mn(l,f){void 0!==l.classList?l.classList.remove(f):An(l,X((" "+Na(l)+" ").replace(" "+f+" "," ")))}function An(l,f){void 0===l.className.baseVal?l.className=f:l.className.baseVal=f}function Na(l){return l.correspondingElement&&(l=l.correspondingElement),void 0===l.className.baseVal?l.className:l.className.baseVal}function Mr(l,f){"opacity"in l.style?l.style.opacity=f:"filter"in l.style&&function is(l,f){var v=!1,T="DXImageTransform.Microsoft.Alpha";try{v=l.filters.item(T)}catch(P){if(1===f)return}f=Math.round(100*f),v?(v.Enabled=100!==f,v.Opacity=f):l.style.filter+=" progid:"+T+"(opacity="+f+")"}(l,f)}function Jr(l){for(var f=document.documentElement.style,v=0;v<l.length;v++)if(l[v]in f)return l[v];return!1}function ao(l,f,v){var T=f||new oe(0,0);l.style[ns]=(q.ie3d?"translate("+T.x+"px,"+T.y+"px)":"translate3d("+T.x+"px,"+T.y+"px,0)")+(v?" scale("+v+")":"")}function Qn(l,f){l._leaflet_pos=f,q.any3d?ao(l,f):(l.style.left=f.x+"px",l.style.top=f.y+"px")}function di(l){return l._leaflet_pos||new oe(0,0)}if("onselectstart"in document)jr=function(){Zt(window,"selectstart",Jn)},Oa=function(){Wn(window,"selectstart",Jn)};else{var uo=Jr(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);jr=function(){if(uo){var l=document.documentElement.style;du=l[uo],l[uo]="none"}},Oa=function(){uo&&(document.documentElement.style[uo]=du,du=void 0)}}function ar(){Zt(window,"dragstart",Jn)}function hu(){Wn(window,"dragstart",Jn)}function vl(l){for(;-1===l.tabIndex;)l=l.parentNode;!l.style||(La(),$u=l,ss=l.style.outline,l.style.outline="none",Zt(window,"keydown",La))}function La(){!$u||($u.style.outline=ss,$u=void 0,ss=void 0,Wn(window,"keydown",La))}function _c(l){do{l=l.parentNode}while(!(l.offsetWidth&&l.offsetHeight||l===document.body));return l}function Ro(l){var f=l.getBoundingClientRect();return{x:f.width/l.offsetWidth||1,y:f.height/l.offsetHeight||1,boundingClientRect:f}}var la={__proto__:null,TRANSFORM:ns,TRANSITION:In,TRANSITION_END:oo,get:er,getStyle:Ht,create:an,remove:Rn,empty:Rs,toFront:rs,toBack:Gn,hasClass:gs,addClass:jt,removeClass:mn,setClass:An,getClass:Na,setOpacity:Mr,testProp:Jr,setTransform:ao,setPosition:Qn,getPosition:di,get disableTextSelection(){return jr},get enableTextSelection(){return Oa},disableImageDrag:ar,enableImageDrag:hu,preventOutline:vl,restoreOutline:La,getSizedParentNode:_c,getScale:Ro};function Zt(l,f,v,T){if(f&&"object"==typeof f)for(var P in f)wl(l,P,f[P],v);else for(var V=0,Y=(f=ge(f)).length;V<Y;V++)wl(l,f[V],v,T);return this}var ks="_leaflet_events";function Wn(l,f,v,T){if(1===arguments.length)Gu(l),delete l[ks];else if(f&&"object"==typeof f)for(var P in f)Wu(l,P,f[P],v);else if(f=ge(f),2===arguments.length)Gu(l,function(de){return-1!==Le(f,de)});else for(var V=0,Y=f.length;V<Y;V++)Wu(l,f[V],v,T);return this}function Gu(l,f){for(var v in l[ks]){var T=v.split(/\d/)[0];(!f||f(T))&&Wu(l,T,null,null,v)}}var lo={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function wl(l,f,v,T){var P=f+_e(v)+(T?"_"+_e(T):"");if(l[ks]&&l[ks][P])return this;var V=function(de){return v.call(T||l,de||window.event)},Y=V;!q.touchNative&&q.pointer&&0===f.indexOf("touch")?V=on(l,f,V):q.touch&&"dblclick"===f?V=function Ps(l,f){l.addEventListener("dblclick",f);var T,v=0;function P(V){if(1===V.detail){if("mouse"!==V.pointerType&&(!V.sourceCapabilities||V.sourceCapabilities.firesTouchEvents)){var Y=Date.now();Y-v<=200?2==++T&&f(function Bn(l){var v,T,f={};for(T in l)f[T]=(v=l[T])&&v.bind?v.bind(l):v;return l=f,f.type="dblclick",f.detail=2,f.isTrusted=!1,f._simulated=!0,f}(V)):T=1,v=Y}}else T=V.detail}return l.addEventListener("click",P),{dblclick:f,simDblclick:P}}(l,V):"addEventListener"in l?"touchstart"===f||"touchmove"===f||"wheel"===f||"mousewheel"===f?l.addEventListener(lo[f]||f,V,!!q.passiveEvents&&{passive:!1}):"mouseenter"===f||"mouseleave"===f?l.addEventListener(lo[f],V=function(de){de=de||window.event,qu(l,de)&&Y(de)},!1):l.addEventListener(f,Y,!1):l.attachEvent("on"+f,V),l[ks]=l[ks]||{},l[ks][P]=V}function Wu(l,f,v,T,P){P=P||f+_e(v)+(T?"_"+_e(T):"");var V=l[ks]&&l[ks][P];if(!V)return this;!q.touchNative&&q.pointer&&0===f.indexOf("touch")?function Qr(l,f,v){sn[f]?l.removeEventListener(sn[f],v,!1):console.warn("wrong event specified:",f)}(l,f,V):q.touch&&"dblclick"===f?function dr(l,f){l.removeEventListener("dblclick",f.dblclick),l.removeEventListener("click",f.simDblclick)}(l,V):"removeEventListener"in l?l.removeEventListener(lo[f]||f,V,!1):l.detachEvent("on"+f,V),l[ks][P]=null}function Xr(l){return l.stopPropagation?l.stopPropagation():l.originalEvent?l.originalEvent._stopped=!0:l.cancelBubble=!0,this}function yc(l){return wl(l,"wheel",Xr),this}function Ns(l){return Zt(l,"mousedown touchstart dblclick contextmenu",Xr),l._leaflet_disable_click=!0,this}function Jn(l){return l.preventDefault?l.preventDefault():l.returnValue=!1,this}function Pr(l){return Jn(l),Xr(l),this}function ko(l,f){if(!f)return new oe(l.clientX,l.clientY);var v=Ro(f),T=v.boundingClientRect;return new oe((l.clientX-T.left)/v.x-f.clientLeft,(l.clientY-T.top)/v.y-f.clientTop)}var Fa=q.win&&q.chrome?2*window.devicePixelRatio:q.gecko?window.devicePixelRatio:1;function ca(l){return q.edge?l.wheelDeltaY/2:l.deltaY&&0===l.deltaMode?-l.deltaY/Fa:l.deltaY&&1===l.deltaMode?20*-l.deltaY:l.deltaY&&2===l.deltaMode?60*-l.deltaY:l.deltaX||l.deltaZ?0:l.wheelDelta?(l.wheelDeltaY||l.wheelDelta)/2:l.detail&&Math.abs(l.detail)<32765?20*-l.detail:l.detail?l.detail/-32765*60:0}function qu(l,f){var v=f.relatedTarget;if(!v)return!0;try{for(;v&&v!==l;)v=v.parentNode}catch(T){return!1}return v!==l}var Ed={__proto__:null,on:Zt,off:Wn,stopPropagation:Xr,disableScrollPropagation:yc,disableClickPropagation:Ns,preventDefault:Jn,stop:Pr,getMousePosition:ko,getWheelDelta:ca,isExternalTarget:qu,addListener:Zt,removeListener:Wn},co=Se.extend({run:function(l,f,v,T){this.stop(),this._el=l,this._inProgress=!0,this._duration=v||.25,this._easeOutPower=1/Math.max(T||.5,.2),this._startPos=di(l),this._offset=f.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){!this._inProgress||(this._step(!0),this._complete())},_animate:function(){this._animId=ce(this._animate,this),this._step()},_step:function(l){var f=+new Date-this._startTime,v=1e3*this._duration;f<v?this._runFrame(this._easeOut(f/v),l):(this._runFrame(1),this._complete())},_runFrame:function(l,f){var v=this._startPos.add(this._offset.multiplyBy(l));f&&v._round(),Qn(this._el,v),this.fire("step")},_complete:function(){be(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(l){return 1-Math.pow(1-l,this._easeOutPower)}}),yn=Se.extend({options:{crs:Hn,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(l,f){f=qe(this,f),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(l),this._initLayout(),this._onResize=le(this._onResize,this),this._initEvents(),f.maxBounds&&this.setMaxBounds(f.maxBounds),void 0!==f.zoom&&(this._zoom=this._limitZoom(f.zoom)),f.center&&void 0!==f.zoom&&this.setView(Nt(f.center),f.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=In&&q.any3d&&!q.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Zt(this._proxy,oo,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(l,f,v){return f=void 0===f?this._zoom:this._limitZoom(f),l=this._limitCenter(Nt(l),f,this.options.maxBounds),v=v||{},this._stop(),this._loaded&&!v.reset&&!0!==v&&(void 0!==v.animate&&(v.zoom=W({animate:v.animate},v.zoom),v.pan=W({animate:v.animate,duration:v.duration},v.pan)),this._zoom!==f?this._tryAnimatedZoom&&this._tryAnimatedZoom(l,f,v.zoom):this._tryAnimatedPan(l,v.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(l,f),this)},setZoom:function(l,f){return this._loaded?this.setView(this.getCenter(),l,{zoom:f}):(this._zoom=l,this)},zoomIn:function(l,f){return this.setZoom(this._zoom+(l=l||(q.any3d?this.options.zoomDelta:1)),f)},zoomOut:function(l,f){return this.setZoom(this._zoom-(l=l||(q.any3d?this.options.zoomDelta:1)),f)},setZoomAround:function(l,f,v){var T=this.getZoomScale(f),P=this.getSize().divideBy(2),Y=(l instanceof oe?l:this.latLngToContainerPoint(l)).subtract(P).multiplyBy(1-1/T),de=this.containerPointToLatLng(P.add(Y));return this.setView(de,f,{zoom:v})},_getBoundsCenterZoom:function(l,f){f=f||{},l=l.getBounds?l.getBounds():zt(l);var v=et(f.paddingTopLeft||f.padding||[0,0]),T=et(f.paddingBottomRight||f.padding||[0,0]),P=this.getBoundsZoom(l,!1,v.add(T));if((P="number"==typeof f.maxZoom?Math.min(f.maxZoom,P):P)===1/0)return{center:l.getCenter(),zoom:P};var V=T.subtract(v).divideBy(2),Y=this.project(l.getSouthWest(),P),de=this.project(l.getNorthEast(),P);return{center:this.unproject(Y.add(de).divideBy(2).add(V),P),zoom:P}},fitBounds:function(l,f){if(!(l=zt(l)).isValid())throw new Error("Bounds are not valid.");var v=this._getBoundsCenterZoom(l,f);return this.setView(v.center,v.zoom,f)},fitWorld:function(l){return this.fitBounds([[-90,-180],[90,180]],l)},panTo:function(l,f){return this.setView(l,this._zoom,{pan:f})},panBy:function(l,f){if(f=f||{},!(l=et(l).round()).x&&!l.y)return this.fire("moveend");if(!0!==f.animate&&!this.getSize().contains(l))return this._resetView(this.unproject(this.project(this.getCenter()).add(l)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new co,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),f.noMoveStart||this.fire("movestart"),!1!==f.animate){jt(this._mapPane,"leaflet-pan-anim");var v=this._getMapPanePos().subtract(l).round();this._panAnim.run(this._mapPane,v,f.duration||.25,f.easeLinearity)}else this._rawPanBy(l),this.fire("move").fire("moveend");return this},flyTo:function(l,f,v){if(!1===(v=v||{}).animate||!q.any3d)return this.setView(l,f,v);this._stop();var T=this.project(this.getCenter()),P=this.project(l),V=this.getSize(),Y=this._zoom;l=Nt(l),f=void 0===f?Y:f;var de=Math.max(V.x,V.y),De=de*this.getZoomScale(Y,f),We=P.distanceTo(T)||1,_t=1.42,Lt=_t*_t;function Kt(rr){var bs=(De*De-de*de+(rr?-1:1)*Lt*Lt*We*We)/(2*(rr?De:de)*Lt*We),Ai=Math.sqrt(bs*bs+1)-bs;return Ai<1e-9?-18:Math.log(Ai)}function mi(rr){return(Math.exp(rr)-Math.exp(-rr))/2}function Di(rr){return(Math.exp(rr)+Math.exp(-rr))/2}var ii=Kt(0);function qa(rr){return de*(Di(ii)*function Hs(rr){return mi(rr)/Di(rr)}(ii+_t*rr)-mi(ii))/Lt}var Tu=Date.now(),Bi=(Kt(1)-ii)/_t,Dl=v.duration?1e3*v.duration:1e3*Bi*.8;return this._moveStart(!0,v.noMoveStart),function fr(){var rr=(Date.now()-Tu)/Dl,Si=function Iu(rr){return 1-Math.pow(1-rr,1.5)}(rr)*Bi;rr<=1?(this._flyToFrame=ce(fr,this),this._move(this.unproject(T.add(P.subtract(T).multiplyBy(qa(Si)/We)),Y),this.getScaleZoom(de/function $s(rr){return de*(Di(ii)/Di(ii+_t*rr))}(Si),Y),{flyTo:!0})):this._move(l,f)._moveEnd(!0)}.call(this),this},flyToBounds:function(l,f){var v=this._getBoundsCenterZoom(l,f);return this.flyTo(v.center,v.zoom,f)},setMaxBounds:function(l){return(l=zt(l)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=l,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(l){var f=this.options.minZoom;return this.options.minZoom=l,this._loaded&&f!==l&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(l):this},setMaxZoom:function(l){var f=this.options.maxZoom;return this.options.maxZoom=l,this._loaded&&f!==l&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(l):this},panInsideBounds:function(l,f){this._enforcingBounds=!0;var v=this.getCenter(),T=this._limitCenter(v,this._zoom,zt(l));return v.equals(T)||this.panTo(T,f),this._enforcingBounds=!1,this},panInside:function(l,f){var v=et((f=f||{}).paddingTopLeft||f.padding||[0,0]),T=et(f.paddingBottomRight||f.padding||[0,0]),P=this.project(this.getCenter()),V=this.project(l),Y=this.getPixelBounds(),de=Ut([Y.min.add(v),Y.max.subtract(T)]),De=de.getSize();if(!de.contains(V)){this._enforcingBounds=!0;var We=V.subtract(de.getCenter()),_t=de.extend(V).getSize().subtract(De);P.x+=We.x<0?-_t.x:_t.x,P.y+=We.y<0?-_t.y:_t.y,this.panTo(this.unproject(P),f),this._enforcingBounds=!1}return this},invalidateSize:function(l){if(!this._loaded)return this;l=W({animate:!1,pan:!0},!0===l?{animate:!0}:l);var f=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var v=this.getSize(),T=f.divideBy(2).round(),P=v.divideBy(2).round(),V=T.subtract(P);return V.x||V.y?(l.animate&&l.pan?this.panBy(V):(l.pan&&this._rawPanBy(V),this.fire("move"),l.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(le(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:f,newSize:v})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(l){if(l=this._locateOptions=W({timeout:1e4,watch:!1},l),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var f=le(this._handleGeolocationResponse,this),v=le(this._handleGeolocationError,this);return l.watch?this._locationWatchId=navigator.geolocation.watchPosition(f,v,l):navigator.geolocation.getCurrentPosition(f,v,l),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(l){if(this._container._leaflet_id){var f=l.code,v=l.message||(1===f?"permission denied":2===f?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:f,message:"Geolocation error: "+v+"."})}},_handleGeolocationResponse:function(l){if(this._container._leaflet_id){var T=new Vt(l.coords.latitude,l.coords.longitude),P=T.toBounds(2*l.coords.accuracy),V=this._locateOptions;if(V.setView){var Y=this.getBoundsZoom(P);this.setView(T,V.maxZoom?Math.min(Y,V.maxZoom):Y)}var de={latlng:T,bounds:P,timestamp:l.timestamp};for(var De in l.coords)"number"==typeof l.coords[De]&&(de[De]=l.coords[De]);this.fire("locationfound",de)}},addHandler:function(l,f){if(!f)return this;var v=this[l]=new f(this);return this._handlers.push(v),this.options[l]&&v.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(f){this._container._leaflet_id=void 0,this._containerId=void 0}var l;for(l in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),Rn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(be(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[l].remove();for(l in this._panes)Rn(this._panes[l]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(l,f){var T=an("div","leaflet-pane"+(l?" leaflet-"+l.replace("Pane","")+"-pane":""),f||this._mapPane);return l&&(this._panes[l]=T),T},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var l=this.getPixelBounds();return new Xe(this.unproject(l.getBottomLeft()),this.unproject(l.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(l,f,v){l=zt(l),v=et(v||[0,0]);var T=this.getZoom()||0,P=this.getMinZoom(),V=this.getMaxZoom(),Y=l.getNorthWest(),de=l.getSouthEast(),De=this.getSize().subtract(v),We=Ut(this.project(de,T),this.project(Y,T)).getSize(),_t=q.any3d?this.options.zoomSnap:1,Lt=De.x/We.x,Kt=De.y/We.y,mi=f?Math.max(Lt,Kt):Math.min(Lt,Kt);return T=this.getScaleZoom(mi,T),_t&&(T=Math.round(T/(_t/100))*(_t/100),T=f?Math.ceil(T/_t)*_t:Math.floor(T/_t)*_t),Math.max(P,Math.min(V,T))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new oe(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(l,f){var v=this._getTopLeftPoint(l,f);return new Tt(v,v.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(l){return this.options.crs.getProjectedBounds(void 0===l?this.getZoom():l)},getPane:function(l){return"string"==typeof l?this._panes[l]:l},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(l,f){var v=this.options.crs;return f=void 0===f?this._zoom:f,v.scale(l)/v.scale(f)},getScaleZoom:function(l,f){var v=this.options.crs,T=v.zoom(l*v.scale(f=void 0===f?this._zoom:f));return isNaN(T)?1/0:T},project:function(l,f){return f=void 0===f?this._zoom:f,this.options.crs.latLngToPoint(Nt(l),f)},unproject:function(l,f){return f=void 0===f?this._zoom:f,this.options.crs.pointToLatLng(et(l),f)},layerPointToLatLng:function(l){var f=et(l).add(this.getPixelOrigin());return this.unproject(f)},latLngToLayerPoint:function(l){return this.project(Nt(l))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(l){return this.options.crs.wrapLatLng(Nt(l))},wrapLatLngBounds:function(l){return this.options.crs.wrapLatLngBounds(zt(l))},distance:function(l,f){return this.options.crs.distance(Nt(l),Nt(f))},containerPointToLayerPoint:function(l){return et(l).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(l){return et(l).add(this._getMapPanePos())},containerPointToLatLng:function(l){var f=this.containerPointToLayerPoint(et(l));return this.layerPointToLatLng(f)},latLngToContainerPoint:function(l){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Nt(l)))},mouseEventToContainerPoint:function(l){return ko(l,this._container)},mouseEventToLayerPoint:function(l){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(l))},mouseEventToLatLng:function(l){return this.layerPointToLatLng(this.mouseEventToLayerPoint(l))},_initContainer:function(l){var f=this._container=er(l);if(!f)throw new Error("Map container not found.");if(f._leaflet_id)throw new Error("Map container is already initialized.");Zt(f,"scroll",this._onScroll,this),this._containerId=_e(f)},_initLayout:function(){var l=this._container;this._fadeAnimated=this.options.fadeAnimation&&q.any3d,jt(l,"leaflet-container"+(q.touch?" leaflet-touch":"")+(q.retina?" leaflet-retina":"")+(q.ielt9?" leaflet-oldie":"")+(q.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var f=Ht(l,"position");"absolute"!==f&&"relative"!==f&&"fixed"!==f&&(l.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var l=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Qn(this._mapPane,new oe(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(jt(l.markerPane,"leaflet-zoom-hide"),jt(l.shadowPane,"leaflet-zoom-hide"))},_resetView:function(l,f){Qn(this._mapPane,new oe(0,0));var v=!this._loaded;this._loaded=!0,f=this._limitZoom(f),this.fire("viewprereset");var T=this._zoom!==f;this._moveStart(T,!1)._move(l,f)._moveEnd(T),this.fire("viewreset"),v&&this.fire("load")},_moveStart:function(l,f){return l&&this.fire("zoomstart"),f||this.fire("movestart"),this},_move:function(l,f,v,T){void 0===f&&(f=this._zoom);var P=this._zoom!==f;return this._zoom=f,this._lastCenter=l,this._pixelOrigin=this._getNewPixelOrigin(l),T?v&&v.pinch&&this.fire("zoom",v):((P||v&&v.pinch)&&this.fire("zoom",v),this.fire("move",v)),this},_moveEnd:function(l){return l&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return be(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(l){Qn(this._mapPane,this._getMapPanePos().subtract(l))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(l){this._targets={},this._targets[_e(this._container)]=this;var f=l?Wn:Zt;f(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&f(window,"resize",this._onResize,this),q.any3d&&this.options.transform3DLimit&&(l?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){be(this._resizeRequest),this._resizeRequest=ce(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var l=this._getMapPanePos();Math.max(Math.abs(l.x),Math.abs(l.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(l,f){for(var T,v=[],P="mouseout"===f||"mouseover"===f,V=l.target||l.srcElement,Y=!1;V;){if((T=this._targets[_e(V)])&&("click"===f||"preclick"===f)&&this._draggableMoved(T)){Y=!0;break}if(T&&T.listens(f,!0)&&(P&&!qu(V,l)||(v.push(T),P))||V===this._container)break;V=V.parentNode}return!v.length&&!Y&&!P&&this.listens(f,!0)&&(v=[this]),v},_isClickDisabled:function(l){for(;l!==this._container;){if(l._leaflet_disable_click)return!0;l=l.parentNode}},_handleDOMEvent:function(l){var f=l.target||l.srcElement;if(!(!this._loaded||f._leaflet_disable_events||"click"===l.type&&this._isClickDisabled(f))){var v=l.type;"mousedown"===v&&vl(f),this._fireDOMEvent(l,v)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(l,f,v){if("click"===l.type){var T=W({},l);T.type="preclick",this._fireDOMEvent(T,T.type,v)}var P=this._findEventTargets(l,f);if(v){for(var V=[],Y=0;Y<v.length;Y++)v[Y].listens(f,!0)&&V.push(v[Y]);P=V.concat(P)}if(P.length){"contextmenu"===f&&Jn(l);var de=P[0],De={originalEvent:l};if("keypress"!==l.type&&"keydown"!==l.type&&"keyup"!==l.type){var We=de.getLatLng&&(!de._radius||de._radius<=10);De.containerPoint=We?this.latLngToContainerPoint(de.getLatLng()):this.mouseEventToContainerPoint(l),De.layerPoint=this.containerPointToLayerPoint(De.containerPoint),De.latlng=We?de.getLatLng():this.layerPointToLatLng(De.layerPoint)}for(Y=0;Y<P.length;Y++)if(P[Y].fire(f,De,!0),De.originalEvent._stopped||!1===P[Y].options.bubblingMouseEvents&&-1!==Le(this._mouseEvents,f))return}},_draggableMoved:function(l){return(l=l.dragging&&l.dragging.enabled()?l:this).dragging&&l.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var l=0,f=this._handlers.length;l<f;l++)this._handlers[l].disable()},whenReady:function(l,f){return this._loaded?l.call(f||this,{target:this}):this.on("load",l,f),this},_getMapPanePos:function(){return di(this._mapPane)||new oe(0,0)},_moved:function(){var l=this._getMapPanePos();return l&&!l.equals([0,0])},_getTopLeftPoint:function(l,f){return(l&&void 0!==f?this._getNewPixelOrigin(l,f):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(l,f){var v=this.getSize()._divideBy(2);return this.project(l,f)._subtract(v)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(l,f,v){var T=this._getNewPixelOrigin(v,f);return this.project(l,f)._subtract(T)},_latLngBoundsToNewLayerBounds:function(l,f,v){var T=this._getNewPixelOrigin(v,f);return Ut([this.project(l.getSouthWest(),f)._subtract(T),this.project(l.getNorthWest(),f)._subtract(T),this.project(l.getSouthEast(),f)._subtract(T),this.project(l.getNorthEast(),f)._subtract(T)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(l){return this.latLngToLayerPoint(l).subtract(this._getCenterLayerPoint())},_limitCenter:function(l,f,v){if(!v)return l;var T=this.project(l,f),P=this.getSize().divideBy(2),V=new Tt(T.subtract(P),T.add(P)),Y=this._getBoundsOffset(V,v,f);return Y.round().equals([0,0])?l:this.unproject(T.add(Y),f)},_limitOffset:function(l,f){if(!f)return l;var v=this.getPixelBounds(),T=new Tt(v.min.add(l),v.max.add(l));return l.add(this._getBoundsOffset(T,f))},_getBoundsOffset:function(l,f,v){var T=Ut(this.project(f.getNorthEast(),v),this.project(f.getSouthWest(),v)),P=T.min.subtract(l.min),V=T.max.subtract(l.max);return new oe(this._rebound(P.x,-V.x),this._rebound(P.y,-V.y))},_rebound:function(l,f){return l+f>0?Math.round(l-f)/2:Math.max(0,Math.ceil(l))-Math.max(0,Math.floor(f))},_limitZoom:function(l){var f=this.getMinZoom(),v=this.getMaxZoom(),T=q.any3d?this.options.zoomSnap:1;return T&&(l=Math.round(l/T)*T),Math.max(f,Math.min(v,l))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){mn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(l,f){var v=this._getCenterOffset(l)._trunc();return!(!0!==(f&&f.animate)&&!this.getSize().contains(v)||(this.panBy(v,f),0))},_createAnimProxy:function(){var l=this._proxy=an("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(l),this.on("zoomanim",function(f){var v=ns,T=this._proxy.style[v];ao(this._proxy,this.project(f.center,f.zoom),this.getZoomScale(f.zoom,1)),T===this._proxy.style[v]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Rn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var l=this.getCenter(),f=this.getZoom();ao(this._proxy,this.project(l,f),this.getZoomScale(f,1))},_catchTransitionEnd:function(l){this._animatingZoom&&l.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(l,f,v){if(this._animatingZoom)return!0;if(v=v||{},!this._zoomAnimated||!1===v.animate||this._nothingToAnimate()||Math.abs(f-this._zoom)>this.options.zoomAnimationThreshold)return!1;var T=this.getZoomScale(f),P=this._getCenterOffset(l)._divideBy(1-1/T);return!(!0!==v.animate&&!this.getSize().contains(P)||(ce(function(){this._moveStart(!0,!1)._animateZoom(l,f,!0)},this),0))},_animateZoom:function(l,f,v,T){!this._mapPane||(v&&(this._animatingZoom=!0,this._animateToCenter=l,this._animateToZoom=f,jt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:l,zoom:f,noUpdate:T}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(le(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){!this._animatingZoom||(this._mapPane&&mn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});var ur=se.extend({options:{position:"topright"},initialize:function(l){qe(this,l)},getPosition:function(){return this.options.position},setPosition:function(l){var f=this._map;return f&&f.removeControl(this),this.options.position=l,f&&f.addControl(this),this},getContainer:function(){return this._container},addTo:function(l){this.remove(),this._map=l;var f=this._container=this.onAdd(l),v=this.getPosition(),T=l._controlCorners[v];return jt(f,"leaflet-control"),-1!==v.indexOf("bottom")?T.insertBefore(f,T.firstChild):T.appendChild(f),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Rn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(l){this._map&&l&&l.screenX>0&&l.screenY>0&&this._map.getContainer().focus()}}),da=function(l){return new ur(l)};yn.include({addControl:function(l){return l.addTo(this),this},removeControl:function(l){return l.remove(),this},_initControlPos:function(){var l=this._controlCorners={},f="leaflet-",v=this._controlContainer=an("div",f+"control-container",this._container);function T(P,V){l[P+V]=an("div",f+P+" "+f+V,v)}T("top","left"),T("top","right"),T("bottom","left"),T("bottom","right")},_clearControlPos:function(){for(var l in this._controlCorners)Rn(this._controlCorners[l]);Rn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var zr=ur.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(l,f,v,T){return v<T?-1:T<v?1:0}},initialize:function(l,f,v){for(var T in qe(this,v),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,l)this._addLayer(l[T],T);for(T in f)this._addLayer(f[T],T,!0)},onAdd:function(l){this._initLayout(),this._update(),this._map=l,l.on("zoomend",this._checkDisabledLayers,this);for(var f=0;f<this._layers.length;f++)this._layers[f].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(l){return ur.prototype.addTo.call(this,l),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(l,f){return this._addLayer(l,f),this._map?this._update():this},addOverlay:function(l,f){return this._addLayer(l,f,!0),this._map?this._update():this},removeLayer:function(l){l.off("add remove",this._onLayerChange,this);var f=this._getLayer(_e(l));return f&&this._layers.splice(this._layers.indexOf(f),1),this._map?this._update():this},expand:function(){jt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var l=this._map.getSize().y-(this._container.offsetTop+50);return l<this._section.clientHeight?(jt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=l+"px"):mn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return mn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var l="leaflet-control-layers",f=this._container=an("div",l),v=this.options.collapsed;f.setAttribute("aria-haspopup",!0),Ns(f),yc(f);var T=this._section=an("section",l+"-list");v&&(this._map.on("click",this.collapse,this),Zt(f,{mouseenter:function(){Zt(T,"click",Jn),this.expand(),setTimeout(function(){Wn(T,"click",Jn)})},mouseleave:this.collapse},this));var P=this._layersLink=an("a",l+"-toggle",f);P.href="#",P.title="Layers",P.setAttribute("role","button"),Zt(P,"click",Jn),Zt(P,"focus",this.expand,this),v||this.expand(),this._baseLayersList=an("div",l+"-base",T),this._separator=an("div",l+"-separator",T),this._overlaysList=an("div",l+"-overlays",T),f.appendChild(T)},_getLayer:function(l){for(var f=0;f<this._layers.length;f++)if(this._layers[f]&&_e(this._layers[f].layer)===l)return this._layers[f]},_addLayer:function(l,f,v){this._map&&l.on("add remove",this._onLayerChange,this),this._layers.push({layer:l,name:f,overlay:v}),this.options.sortLayers&&this._layers.sort(le(function(T,P){return this.options.sortFunction(T.layer,P.layer,T.name,P.name)},this)),this.options.autoZIndex&&l.setZIndex&&(this._lastZIndex++,l.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Rs(this._baseLayersList),Rs(this._overlaysList),this._layerControlInputs=[];var l,f,v,T,P=0;for(v=0;v<this._layers.length;v++)this._addItem(T=this._layers[v]),f=f||T.overlay,l=l||!T.overlay,P+=T.overlay?0:1;return this.options.hideSingleBase&&(this._baseLayersList.style.display=(l=l&&P>1)?"":"none"),this._separator.style.display=f&&l?"":"none",this},_onLayerChange:function(l){this._handlingClick||this._update();var f=this._getLayer(_e(l.target)),v=f.overlay?"add"===l.type?"overlayadd":"overlayremove":"add"===l.type?"baselayerchange":null;v&&this._map.fire(v,f)},_createRadioElement:function(l,f){var v='<input type="radio" class="leaflet-control-layers-selector" name="'+l+'"'+(f?' checked="checked"':"")+"/>",T=document.createElement("div");return T.innerHTML=v,T.firstChild},_addItem:function(l){var T,f=document.createElement("label"),v=this._map.hasLayer(l.layer);l.overlay?((T=document.createElement("input")).type="checkbox",T.className="leaflet-control-layers-selector",T.defaultChecked=v):T=this._createRadioElement("leaflet-base-layers_"+_e(this),v),this._layerControlInputs.push(T),T.layerId=_e(l.layer),Zt(T,"click",this._onInputClick,this);var P=document.createElement("span");P.innerHTML=" "+l.name;var V=document.createElement("span");return f.appendChild(V),V.appendChild(T),V.appendChild(P),(l.overlay?this._overlaysList:this._baseLayersList).appendChild(f),this._checkDisabledLayers(),f},_onInputClick:function(){var f,v,l=this._layerControlInputs,T=[],P=[];this._handlingClick=!0;for(var V=l.length-1;V>=0;V--)v=this._getLayer((f=l[V]).layerId).layer,f.checked?T.push(v):f.checked||P.push(v);for(V=0;V<P.length;V++)this._map.hasLayer(P[V])&&this._map.removeLayer(P[V]);for(V=0;V<T.length;V++)this._map.hasLayer(T[V])||this._map.addLayer(T[V]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var f,v,l=this._layerControlInputs,T=this._map.getZoom(),P=l.length-1;P>=0;P--)v=this._getLayer((f=l[P]).layerId).layer,f.disabled=void 0!==v.options.minZoom&&T<v.options.minZoom||void 0!==v.options.maxZoom&&T>v.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this}}),fu=ur.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(l){var f="leaflet-control-zoom",v=an("div",f+" leaflet-bar"),T=this.options;return this._zoomInButton=this._createButton(T.zoomInText,T.zoomInTitle,f+"-in",v,this._zoomIn),this._zoomOutButton=this._createButton(T.zoomOutText,T.zoomOutTitle,f+"-out",v,this._zoomOut),this._updateDisabled(),l.on("zoomend zoomlevelschange",this._updateDisabled,this),v},onRemove:function(l){l.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(l){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(l.shiftKey?3:1))},_zoomOut:function(l){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(l.shiftKey?3:1))},_createButton:function(l,f,v,T,P){var V=an("a",v,T);return V.innerHTML=l,V.href="#",V.title=f,V.setAttribute("role","button"),V.setAttribute("aria-label",f),Ns(V),Zt(V,"click",Pr),Zt(V,"click",P,this),Zt(V,"click",this._refocusOnMap,this),V},_updateDisabled:function(){var l=this._map,f="leaflet-disabled";mn(this._zoomInButton,f),mn(this._zoomOutButton,f),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||l._zoom===l.getMinZoom())&&(jt(this._zoomOutButton,f),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||l._zoom===l.getMaxZoom())&&(jt(this._zoomInButton,f),this._zoomInButton.setAttribute("aria-disabled","true"))}});yn.mergeOptions({zoomControl:!0}),yn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new fu,this.addControl(this.zoomControl))});var Ua=ur.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(l){var f="leaflet-control-scale",v=an("div",f),T=this.options;return this._addScales(T,f+"-line",v),l.on(T.updateWhenIdle?"moveend":"move",this._update,this),l.whenReady(this._update,this),v},onRemove:function(l){l.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(l,f,v){l.metric&&(this._mScale=an("div",f,v)),l.imperial&&(this._iScale=an("div",f,v))},_update:function(){var l=this._map,f=l.getSize().y/2,v=l.distance(l.containerPointToLatLng([0,f]),l.containerPointToLatLng([this.options.maxWidth,f]));this._updateScales(v)},_updateScales:function(l){this.options.metric&&l&&this._updateMetric(l),this.options.imperial&&l&&this._updateImperial(l)},_updateMetric:function(l){var f=this._getRoundNum(l);this._updateScale(this._mScale,f<1e3?f+" m":f/1e3+" km",f/l)},_updateImperial:function(l){var v,T,P,f=3.2808399*l;f>5280?(T=this._getRoundNum(v=f/5280),this._updateScale(this._iScale,T+" mi",T/v)):(P=this._getRoundNum(f),this._updateScale(this._iScale,P+" ft",P/f))},_updateScale:function(l,f,v){l.style.width=Math.round(this.options.maxWidth*v)+"px",l.innerHTML=f},_getRoundNum:function(l){var f=Math.pow(10,(Math.floor(l)+"").length-1),v=l/f;return f*(v>=10?10:v>=5?5:v>=3?3:v>=2?2:1)}}),Va=ur.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(q.inlineSvg?'<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg> ':"")+"Leaflet</a>"},initialize:function(l){qe(this,l),this._attributions={}},onAdd:function(l){for(var f in l.attributionControl=this,this._container=an("div","leaflet-control-attribution"),Ns(this._container),l._layers)l._layers[f].getAttribution&&this.addAttribution(l._layers[f].getAttribution());return this._update(),l.on("layeradd",this._addAttribution,this),this._container},onRemove:function(l){l.off("layeradd",this._addAttribution,this)},_addAttribution:function(l){l.layer.getAttribution&&(this.addAttribution(l.layer.getAttribution()),l.layer.once("remove",function(){this.removeAttribution(l.layer.getAttribution())},this))},setPrefix:function(l){return this.options.prefix=l,this._update(),this},addAttribution:function(l){return l?(this._attributions[l]||(this._attributions[l]=0),this._attributions[l]++,this._update(),this):this},removeAttribution:function(l){return l?(this._attributions[l]&&(this._attributions[l]--,this._update()),this):this},_update:function(){if(this._map){var l=[];for(var f in this._attributions)this._attributions[f]&&l.push(f);var v=[];this.options.prefix&&v.push(this.options.prefix),l.length&&v.push(l.join(", ")),this._container.innerHTML=v.join(' <span aria-hidden="true">|</span> ')}}});yn.mergeOptions({attributionControl:!0}),yn.addInitHook(function(){this.options.attributionControl&&(new Va).addTo(this)});ur.Layers=zr,ur.Zoom=fu,ur.Scale=Ua,ur.Attribution=Va,da.layers=function(l,f,v){return new zr(l,f,v)},da.zoom=function(l){return new fu(l)},da.scale=function(l){return new Ua(l)},da.attribution=function(l){return new Va(l)};var Ui=se.extend({initialize:function(l){this._map=l},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ui.addTo=function(l,f){return l.addHandler(f,this),this};var tr,On={Events:pe},ha=q.touch?"touchstart mousedown":"mousedown",ti=Se.extend({options:{clickTolerance:3},initialize:function(l,f,v,T){qe(this,T),this._element=l,this._dragStartTarget=f||l,this._preventOutline=v},enable:function(){this._enabled||(Zt(this._dragStartTarget,ha,this._onDown,this),this._enabled=!0)},disable:function(){!this._enabled||(ti._dragging===this&&this.finishDrag(!0),Wn(this._dragStartTarget,ha,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(l){if(this._enabled&&(this._moved=!1,!gs(this._element,"leaflet-zoom-anim"))){if(l.touches&&1!==l.touches.length)return void(ti._dragging===this&&this.finishDrag());if(!(ti._dragging||l.shiftKey||1!==l.which&&1!==l.button&&!l.touches||(ti._dragging=this,this._preventOutline&&vl(this._element),ar(),jr(),this._moving))){this.fire("down");var f=l.touches?l.touches[0]:l,v=_c(this._element);this._startPoint=new oe(f.clientX,f.clientY),this._startPos=di(this._element),this._parentScale=Ro(v);var T="mousedown"===l.type;Zt(document,T?"mousemove":"touchmove",this._onMove,this),Zt(document,T?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(l){if(this._enabled){if(l.touches&&l.touches.length>1)return void(this._moved=!0);var f=l.touches&&1===l.touches.length?l.touches[0]:l,v=new oe(f.clientX,f.clientY)._subtract(this._startPoint);!v.x&&!v.y||Math.abs(v.x)+Math.abs(v.y)<this.options.clickTolerance||(v.x/=this._parentScale.x,v.y/=this._parentScale.y,Jn(l),this._moved||(this.fire("dragstart"),this._moved=!0,jt(document.body,"leaflet-dragging"),this._lastTarget=l.target||l.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),jt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(v),this._moving=!0,this._lastEvent=l,this._updatePosition())}},_updatePosition:function(){var l={originalEvent:this._lastEvent};this.fire("predrag",l),Qn(this._element,this._newPos),this.fire("drag",l)},_onUp:function(){!this._enabled||this.finishDrag()},finishDrag:function(l){mn(document.body,"leaflet-dragging"),this._lastTarget&&(mn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Wn(document,"mousemove touchmove",this._onMove,this),Wn(document,"mouseup touchend touchcancel",this._onUp,this),hu(),Oa(),this._moved&&this._moving&&this.fire("dragend",{noInertia:l,distance:this._newPos.distanceTo(this._startPos)}),this._moving=!1,ti._dragging=!1}});function Pn(l,f){if(!f||!l.length)return l.slice();var v=f*f;return function No(l,f){var v=l.length,P=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(v);P[0]=P[v-1]=1,Er(l,P,f,0,v-1);var V,Y=[];for(V=0;V<v;V++)P[V]&&Y.push(l[V]);return Y}(l=function mu(l,f){for(var v=[l[0]],T=1,P=0,V=l.length;T<V;T++)_s(l[T],l[P])>f&&(v.push(l[T]),P=T);return P<V-1&&v.push(l[V-1]),v}(l,v),v)}function Ba(l,f,v){return Math.sqrt(Oo(l,f,v,!0))}function Er(l,f,v,T,P){var Y,de,De,V=0;for(de=T+1;de<=P-1;de++)(De=Oo(l[de],l[T],l[P],!0))>V&&(Y=de,V=De);V>v&&(f[Y]=1,Er(l,f,v,T,Y),Er(l,f,v,Y,P))}function ms(l,f,v,T,P){var de,De,We,V=T?tr:Vi(l,v),Y=Vi(f,v);for(tr=Y;;){if(!(V|Y))return[l,f];if(V&Y)return!1;We=Vi(De=hr(l,f,de=V||Y,v,P),v),de===V?(l=De,V=We):(f=De,Y=We)}}function hr(l,f,v,T,P){var We,_t,V=f.x-l.x,Y=f.y-l.y,de=T.min,De=T.max;return 8&v?(We=l.x+V*(De.y-l.y)/Y,_t=De.y):4&v?(We=l.x+V*(de.y-l.y)/Y,_t=de.y):2&v?(We=De.x,_t=l.y+Y*(De.x-l.x)/V):1&v&&(We=de.x,_t=l.y+Y*(de.x-l.x)/V),new oe(We,_t,P)}function Vi(l,f){var v=0;return l.x<f.min.x?v|=1:l.x>f.max.x&&(v|=2),l.y<f.min.y?v|=4:l.y>f.max.y&&(v|=8),v}function _s(l,f){var v=f.x-l.x,T=f.y-l.y;return v*v+T*T}function Oo(l,f,v,T){var We,P=f.x,V=f.y,Y=v.x-P,de=v.y-V,De=Y*Y+de*de;return De>0&&((We=((l.x-P)*Y+(l.y-V)*de)/De)>1?(P=v.x,V=v.y):We>0&&(P+=Y*We,V+=de*We)),Y=l.x-P,de=l.y-V,T?Y*Y+de*de:new oe(P,V)}function lr(l){return!Ie(l[0])||"object"!=typeof l[0][0]&&void 0!==l[0][0]}function Fs(l){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),lr(l)}var ho={__proto__:null,simplify:Pn,pointToSegmentDistance:Ba,closestPointOnSegment:function ja(l,f,v){return Oo(l,f,v)},clipSegment:ms,_getEdgeIntersection:hr,_getBitCode:Vi,_sqClosestPointOnSegment:Oo,isFlat:lr,_flat:Fs};function Rt(l,f,v){var T,V,Y,de,De,We,_t,Lt,Kt,P=[1,4,2,8];for(V=0,_t=l.length;V<_t;V++)l[V]._code=Vi(l[V],f);for(de=0;de<4;de++){for(Lt=P[de],T=[],V=0,Y=(_t=l.length)-1;V<_t;Y=V++)We=l[Y],(De=l[V])._code&Lt?We._code&Lt||((Kt=hr(We,De,Lt,f,v))._code=Vi(Kt,f),T.push(Kt)):(We._code&Lt&&((Kt=hr(We,De,Lt,f,v))._code=Vi(Kt,f),T.push(Kt)),T.push(De));l=T}return l}var Lo={__proto__:null,clipPolygon:Rt},fa={project:function(l){return new oe(l.lng,l.lat)},unproject:function(l){return new Vt(l.y,l.x)},bounds:new Tt([-180,-90],[180,90])},_u={R:6378137,R_MINOR:6356752.314245179,bounds:new Tt([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(l){var f=Math.PI/180,v=this.R,T=l.lat*f,P=this.R_MINOR/v,V=Math.sqrt(1-P*P),Y=V*Math.sin(T),de=Math.tan(Math.PI/4-T/2)/Math.pow((1-Y)/(1+Y),V/2);return T=-v*Math.log(Math.max(de,1e-10)),new oe(l.lng*f*v,T)},unproject:function(l){for(var We,f=180/Math.PI,v=this.R,T=this.R_MINOR/v,P=Math.sqrt(1-T*T),V=Math.exp(-l.y/v),Y=Math.PI/2-2*Math.atan(V),de=0,De=.1;de<15&&Math.abs(De)>1e-7;de++)We=P*Math.sin(Y),We=Math.pow((1-We)/(1+We),P/2),Y+=De=Math.PI/2-2*Math.atan(V*We)-Y;return new Vt(Y*f,l.x*f/v)}},za={__proto__:null,LonLat:fa,Mercator:_u,SphericalMercator:Vn},bl=W({},Gt,{code:"EPSG:3395",projection:_u,transformation:function(){var l=.5/(Math.PI*_u.R);return yr(l,.5,-l,.5)}()}),Fo=W({},Gt,{code:"EPSG:4326",projection:fa,transformation:yr(1/180,1,-1/180,.5)}),vc=W({},Xt,{projection:fa,transformation:yr(1,0,-1,0),scale:function(l){return Math.pow(2,l)},zoom:function(l){return Math.log(l)/Math.LN2},distance:function(l,f){var v=f.lng-l.lng,T=f.lat-l.lat;return Math.sqrt(v*v+T*T)},infinite:!0});Xt.Earth=Gt,Xt.EPSG3395=bl,Xt.EPSG3857=Hn,Xt.EPSG900913=hs,Xt.EPSG4326=Fo,Xt.Simple=vc;var Rr=Se.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(l){return l.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(l){return l&&l.removeLayer(this),this},getPane:function(l){return this._map.getPane(l?this.options[l]||l:this.options.pane)},addInteractiveTarget:function(l){return this._map._targets[_e(l)]=this,this},removeInteractiveTarget:function(l){return delete this._map._targets[_e(l)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(l){var f=l.target;if(f.hasLayer(this)){if(this._map=f,this._zoomAnimated=f._zoomAnimated,this.getEvents){var v=this.getEvents();f.on(v,this),this.once("remove",function(){f.off(v,this)},this)}this.onAdd(f),this.fire("add"),f.fire("layeradd",{layer:this})}}});yn.include({addLayer:function(l){if(!l._layerAdd)throw new Error("The provided object is not a Layer.");var f=_e(l);return this._layers[f]||(this._layers[f]=l,l._mapToAdd=this,l.beforeAdd&&l.beforeAdd(this),this.whenReady(l._layerAdd,l)),this},removeLayer:function(l){var f=_e(l);return this._layers[f]?(this._loaded&&l.onRemove(this),delete this._layers[f],this._loaded&&(this.fire("layerremove",{layer:l}),l.fire("remove")),l._map=l._mapToAdd=null,this):this},hasLayer:function(l){return _e(l)in this._layers},eachLayer:function(l,f){for(var v in this._layers)l.call(f,this._layers[v]);return this},_addLayers:function(l){for(var f=0,v=(l=l?Ie(l)?l:[l]:[]).length;f<v;f++)this.addLayer(l[f])},_addZoomLimit:function(l){(!isNaN(l.options.maxZoom)||!isNaN(l.options.minZoom))&&(this._zoomBoundLayers[_e(l)]=l,this._updateZoomLevels())},_removeZoomLimit:function(l){var f=_e(l);this._zoomBoundLayers[f]&&(delete this._zoomBoundLayers[f],this._updateZoomLevels())},_updateZoomLevels:function(){var l=1/0,f=-1/0,v=this._getZoomSpan();for(var T in this._zoomBoundLayers){var P=this._zoomBoundLayers[T].options;l=void 0===P.minZoom?l:Math.min(l,P.minZoom),f=void 0===P.maxZoom?f:Math.max(f,P.maxZoom)}this._layersMaxZoom=f===-1/0?void 0:f,this._layersMinZoom=l===1/0?void 0:l,v!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ve=Rr.extend({initialize:function(l,f){var v,T;if(qe(this,f),this._layers={},l)for(v=0,T=l.length;v<T;v++)this.addLayer(l[v])},addLayer:function(l){var f=this.getLayerId(l);return this._layers[f]=l,this._map&&this._map.addLayer(l),this},removeLayer:function(l){var f=l in this._layers?l:this.getLayerId(l);return this._map&&this._layers[f]&&this._map.removeLayer(this._layers[f]),delete this._layers[f],this},hasLayer:function(l){return("number"==typeof l?l:this.getLayerId(l))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(l){var v,T,f=Array.prototype.slice.call(arguments,1);for(v in this._layers)(T=this._layers[v])[l]&&T[l].apply(T,f);return this},onAdd:function(l){this.eachLayer(l.addLayer,l)},onRemove:function(l){this.eachLayer(l.removeLayer,l)},eachLayer:function(l,f){for(var v in this._layers)l.call(f,this._layers[v]);return this},getLayer:function(l){return this._layers[l]},getLayers:function(){var l=[];return this.eachLayer(l.push,l),l},setZIndex:function(l){return this.invoke("setZIndex",l)},getLayerId:function(l){return _e(l)}}),Us=Ve.extend({addLayer:function(l){return this.hasLayer(l)?this:(l.addEventParent(this),Ve.prototype.addLayer.call(this,l),this.fire("layeradd",{layer:l}))},removeLayer:function(l){return this.hasLayer(l)?(l in this._layers&&(l=this._layers[l]),l.removeEventParent(this),Ve.prototype.removeLayer.call(this,l),this.fire("layerremove",{layer:l})):this},setStyle:function(l){return this.invoke("setStyle",l)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var l=new Xe;for(var f in this._layers){var v=this._layers[f];l.extend(v.getBounds?v.getBounds():v.getLatLng())}return l}}),Uo=se.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(l){qe(this,l)},createIcon:function(l){return this._createIcon("icon",l)},createShadow:function(l){return this._createIcon("shadow",l)},_createIcon:function(l,f){var v=this._getIconUrl(l);if(!v){if("icon"===l)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var T=this._createImg(v,f&&"IMG"===f.tagName?f:null);return this._setIconStyles(T,l),(this.options.crossOrigin||""===this.options.crossOrigin)&&(T.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),T},_setIconStyles:function(l,f){var v=this.options,T=v[f+"Size"];"number"==typeof T&&(T=[T,T]);var P=et(T),V=et("shadow"===f&&v.shadowAnchor||v.iconAnchor||P&&P.divideBy(2,!0));l.className="leaflet-marker-"+f+" "+(v.className||""),V&&(l.style.marginLeft=-V.x+"px",l.style.marginTop=-V.y+"px"),P&&(l.style.width=P.x+"px",l.style.height=P.y+"px")},_createImg:function(l,f){return(f=f||document.createElement("img")).src=l,f},_getIconUrl:function(l){return q.retina&&this.options[l+"RetinaUrl"]||this.options[l+"Url"]}});var hi=Uo.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(l){return"string"!=typeof hi.imagePath&&(hi.imagePath=this._detectIconPath()),(this.options.imagePath||hi.imagePath)+Uo.prototype._getIconUrl.call(this,l)},_stripUrl:function(l){var f=function(v,T,P){var V=T.exec(v);return V&&V[P]};return(l=f(l,/^url\((['"])?(.+)\1\)$/,2))&&f(l,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var l=an("div","leaflet-default-icon-path",document.body),f=Ht(l,"background-image")||Ht(l,"backgroundImage");if(document.body.removeChild(l),f=this._stripUrl(f))return f;var v=document.querySelector('link[href$="leaflet.css"]');return v?v.href.substring(0,v.href.length-11-1):""}}),yu=Ui.extend({initialize:function(l){this._marker=l},addHooks:function(){var l=this._marker._icon;this._draggable||(this._draggable=new ti(l,l,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),jt(l,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&mn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(l){var f=this._marker,v=f._map,T=this._marker.options.autoPanSpeed,P=this._marker.options.autoPanPadding,V=di(f._icon),Y=v.getPixelBounds(),de=v.getPixelOrigin(),De=Ut(Y.min._subtract(de).add(P),Y.max._subtract(de).subtract(P));if(!De.contains(V)){var We=et((Math.max(De.max.x,V.x)-De.max.x)/(Y.max.x-De.max.x)-(Math.min(De.min.x,V.x)-De.min.x)/(Y.min.x-De.min.x),(Math.max(De.max.y,V.y)-De.max.y)/(Y.max.y-De.max.y)-(Math.min(De.min.y,V.y)-De.min.y)/(Y.min.y-De.min.y)).multiplyBy(T);v.panBy(We,{animate:!1}),this._draggable._newPos._add(We),this._draggable._startPos._add(We),Qn(f._icon,this._draggable._newPos),this._onDrag(l),this._panRequest=ce(this._adjustPan.bind(this,l))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(l){this._marker.options.autoPan&&(be(this._panRequest),this._panRequest=ce(this._adjustPan.bind(this,l)))},_onDrag:function(l){var f=this._marker,v=f._shadow,T=di(f._icon),P=f._map.layerPointToLatLng(T);v&&Qn(v,T),f._latlng=P,l.latlng=P,l.oldLatLng=this._oldLatLng,f.fire("move",l).fire("drag",l)},_onDragEnd:function(l){be(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",l)}}),fo=Rr.extend({options:{icon:new hi,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(l,f){qe(this,f),this._latlng=Nt(l)},onAdd:function(l){this._zoomAnimated=this._zoomAnimated&&l.options.markerZoomAnimation,this._zoomAnimated&&l.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(l){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&l.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(l){var f=this._latlng;return this._latlng=Nt(l),this.update(),this.fire("move",{oldLatLng:f,latlng:this._latlng})},setZIndexOffset:function(l){return this.options.zIndexOffset=l,this.update()},getIcon:function(){return this.options.icon},setIcon:function(l){return this.options.icon=l,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var l=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(l)}return this},_initIcon:function(){var l=this.options,f="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),v=l.icon.createIcon(this._icon),T=!1;v!==this._icon&&(this._icon&&this._removeIcon(),T=!0,l.title&&(v.title=l.title),"IMG"===v.tagName&&(v.alt=l.alt||"")),jt(v,f),l.keyboard&&(v.tabIndex="0",v.setAttribute("role","button")),this._icon=v,l.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Zt(v,"focus",this._panOnFocus,this);var P=l.icon.createShadow(this._shadow),V=!1;P!==this._shadow&&(this._removeShadow(),V=!0),P&&(jt(P,f),P.alt=""),this._shadow=P,l.opacity<1&&this._updateOpacity(),T&&this.getPane().appendChild(this._icon),this._initInteraction(),P&&V&&this.getPane(l.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Wn(this._icon,"focus",this._panOnFocus,this),Rn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Rn(this._shadow),this._shadow=null},_setPos:function(l){this._icon&&Qn(this._icon,l),this._shadow&&Qn(this._shadow,l),this._zIndex=l.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(l){this._icon&&(this._icon.style.zIndex=this._zIndex+l)},_animateZoom:function(l){var f=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center).round();this._setPos(f)},_initInteraction:function(){if(this.options.interactive&&(jt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),yu)){var l=this.options.draggable;this.dragging&&(l=this.dragging.enabled(),this.dragging.disable()),this.dragging=new yu(this),l&&this.dragging.enable()}},setOpacity:function(l){return this.options.opacity=l,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var l=this.options.opacity;this._icon&&Mr(this._icon,l),this._shadow&&Mr(this._shadow,l)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var l=this._map;if(l){var f=this.options.icon.options,v=f.iconSize?et(f.iconSize):et(0,0),T=f.iconAnchor?et(f.iconAnchor):et(0,0);l.panInside(this._latlng,{paddingTopLeft:T,paddingBottomRight:v.subtract(T)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});var Bs=Rr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(l){this._renderer=l.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(l){return qe(this,l),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&l&&Object.prototype.hasOwnProperty.call(l,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Ha=Bs.extend({options:{fill:!0,radius:10},initialize:function(l,f){qe(this,f),this._latlng=Nt(l),this._radius=this.options.radius},setLatLng:function(l){var f=this._latlng;return this._latlng=Nt(l),this.redraw(),this.fire("move",{oldLatLng:f,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(l){return this.options.radius=this._radius=l,this.redraw()},getRadius:function(){return this._radius},setStyle:function(l){var f=l&&l.radius||this._radius;return Bs.prototype.setStyle.call(this,l),this.setRadius(f),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var l=this._radius,f=this._radiusY||l,v=this._clickTolerance(),T=[l+v,f+v];this._pxBounds=new Tt(this._point.subtract(T),this._point.add(T))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(l){return l.distanceTo(this._point)<=this._radius+this._clickTolerance()}});var br=Ha.extend({initialize:function(l,f,v){if("number"==typeof f&&(f=W({},v,{radius:f})),qe(this,f),this._latlng=Nt(l),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(l){return this._mRadius=l,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var l=[this._radius,this._radiusY||this._radius];return new Xe(this._map.layerPointToLatLng(this._point.subtract(l)),this._map.layerPointToLatLng(this._point.add(l)))},setStyle:Bs.prototype.setStyle,_project:function(){var l=this._latlng.lng,f=this._latlng.lat,v=this._map,T=v.options.crs;if(T.distance===Gt.distance){var P=Math.PI/180,V=this._mRadius/Gt.R/P,Y=v.project([f+V,l]),de=v.project([f-V,l]),De=Y.add(de).divideBy(2),We=v.unproject(De).lat,_t=Math.acos((Math.cos(V*P)-Math.sin(f*P)*Math.sin(We*P))/(Math.cos(f*P)*Math.cos(We*P)))/P;(isNaN(_t)||0===_t)&&(_t=V/Math.cos(Math.PI/180*f)),this._point=De.subtract(v.getPixelOrigin()),this._radius=isNaN(_t)?0:De.x-v.project([We,l-_t]).x,this._radiusY=De.y-Y.y}else{var Lt=T.unproject(T.project(this._latlng).subtract([this._mRadius,0]));this._point=v.latLngToLayerPoint(this._latlng),this._radius=this._point.x-v.latLngToLayerPoint(Lt).x}this._updateBounds()}});var fi=Bs.extend({options:{smoothFactor:1,noClip:!1},initialize:function(l,f){qe(this,f),this._setLatLngs(l)},getLatLngs:function(){return this._latlngs},setLatLngs:function(l){return this._setLatLngs(l),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(l){for(var P,V,f=1/0,v=null,T=Oo,Y=0,de=this._parts.length;Y<de;Y++)for(var De=this._parts[Y],We=1,_t=De.length;We<_t;We++){var Lt=T(l,P=De[We-1],V=De[We],!0);Lt<f&&(f=Lt,v=T(l,P,V))}return v&&(v.distance=Math.sqrt(f)),v},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var l,f,v,T,P,V,Y,de=this._rings[0],De=de.length;if(!De)return null;for(l=0,f=0;l<De-1;l++)f+=de[l].distanceTo(de[l+1])/2;if(0===f)return this._map.layerPointToLatLng(de[0]);for(l=0,T=0;l<De-1;l++)if((T+=v=(P=de[l]).distanceTo(V=de[l+1]))>f)return this._map.layerPointToLatLng([V.x-(Y=(T-f)/v)*(V.x-P.x),V.y-Y*(V.y-P.y)])},getBounds:function(){return this._bounds},addLatLng:function(l,f){return f=f||this._defaultShape(),l=Nt(l),f.push(l),this._bounds.extend(l),this.redraw()},_setLatLngs:function(l){this._bounds=new Xe,this._latlngs=this._convertLatLngs(l)},_defaultShape:function(){return lr(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(l){for(var f=[],v=lr(l),T=0,P=l.length;T<P;T++)v?(f[T]=Nt(l[T]),this._bounds.extend(f[T])):f[T]=this._convertLatLngs(l[T]);return f},_project:function(){var l=new Tt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,l),this._bounds.isValid()&&l.isValid()&&(this._rawPxBounds=l,this._updateBounds())},_updateBounds:function(){var l=this._clickTolerance(),f=new oe(l,l);!this._rawPxBounds||(this._pxBounds=new Tt([this._rawPxBounds.min.subtract(f),this._rawPxBounds.max.add(f)]))},_projectLatlngs:function(l,f,v){var V,Y,P=l.length;if(l[0]instanceof Vt){for(Y=[],V=0;V<P;V++)Y[V]=this._map.latLngToLayerPoint(l[V]),v.extend(Y[V]);f.push(Y)}else for(V=0;V<P;V++)this._projectLatlngs(l[V],f,v)},_clipPoints:function(){var l=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(l)){if(this.options.noClip)return void(this._parts=this._rings);var v,T,P,V,Y,de,De,f=this._parts;for(v=0,P=0,V=this._rings.length;v<V;v++)for(T=0,Y=(De=this._rings[v]).length;T<Y-1;T++)(de=ms(De[T],De[T+1],l,T,!0))&&(f[P]=f[P]||[],f[P].push(de[0]),(de[1]!==De[T+1]||T===Y-2)&&(f[P].push(de[1]),P++))}},_simplifyPoints:function(){for(var l=this._parts,f=this.options.smoothFactor,v=0,T=l.length;v<T;v++)l[v]=Pn(l[v],f)},_update:function(){!this._map||(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(l,f){var v,T,P,V,Y,de,De=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(v=0,V=this._parts.length;v<V;v++)for(T=0,P=(Y=(de=this._parts[v]).length)-1;T<Y;P=T++)if((f||0!==T)&&Ba(l,de[P],de[T])<=De)return!0;return!1}});fi._flat=Fs;var kr=fi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var l,f,v,T,P,V,Y,de,We=this._rings[0],_t=We.length;if(!_t)return null;for(V=Y=de=0,l=0,f=_t-1;l<_t;f=l++)Y+=((v=We[l]).x+(T=We[f]).x)*(P=v.y*T.x-T.y*v.x),de+=(v.y+T.y)*P,V+=3*P;return this._map.layerPointToLatLng(0===V?We[0]:[Y/V,de/V])},_convertLatLngs:function(l){var f=fi.prototype._convertLatLngs.call(this,l),v=f.length;return v>=2&&f[0]instanceof Vt&&f[0].equals(f[v-1])&&f.pop(),f},_setLatLngs:function(l){fi.prototype._setLatLngs.call(this,l),lr(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return lr(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var l=this._renderer._bounds,f=this.options.weight,v=new oe(f,f);if(l=new Tt(l.min.subtract(v),l.max.add(v)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(l)){if(this.options.noClip)return void(this._parts=this._rings);for(var V,T=0,P=this._rings.length;T<P;T++)(V=Rt(this._rings[T],l,!0)).length&&this._parts.push(V)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(l){var v,T,P,V,Y,de,De,We,f=!1;if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(V=0,De=this._parts.length;V<De;V++)for(Y=0,de=(We=(v=this._parts[V]).length)-1;Y<We;de=Y++)(T=v[Y]).y>l.y!=(P=v[de]).y>l.y&&l.x<(P.x-T.x)*(l.y-T.y)/(P.y-T.y)+T.x&&(f=!f);return f||fi.prototype._containsPoint.call(this,l,!0)}});var pi=Us.extend({initialize:function(l,f){qe(this,f),this._layers={},l&&this.addData(l)},addData:function(l){var v,T,P,f=Ie(l)?l:l.features;if(f){for(v=0,T=f.length;v<T;v++)((P=f[v]).geometries||P.geometry||P.features||P.coordinates)&&this.addData(P);return this}var V=this.options;if(V.filter&&!V.filter(l))return this;var Y=vu(l,V);return Y?(Y.feature=go(l),Y.defaultOptions=Y.options,this.resetStyle(Y),V.onEachFeature&&V.onEachFeature(l,Y),this.addLayer(Y)):this},resetStyle:function(l){return void 0===l?this.eachLayer(this.resetStyle,this):(l.options=W({},l.defaultOptions),this._setLayerStyle(l,this.options.style),this)},setStyle:function(l){return this.eachLayer(function(f){this._setLayerStyle(f,l)},this)},_setLayerStyle:function(l,f){l.setStyle&&("function"==typeof f&&(f=f(l.feature)),l.setStyle(f))}});function vu(l,f){var de,De,We,_t,v="Feature"===l.type?l.geometry:l,T=v?v.coordinates:null,P=[],V=f&&f.pointToLayer,Y=f&&f.coordsToLatLng||$a;if(!T&&!v)return null;switch(v.type){case"Point":return ga(V,l,de=Y(T),f);case"MultiPoint":for(We=0,_t=T.length;We<_t;We++)de=Y(T[We]),P.push(ga(V,l,de,f));return new Us(P);case"LineString":case"MultiLineString":return De=js(T,"LineString"===v.type?0:1,Y),new fi(De,f);case"Polygon":case"MultiPolygon":return De=js(T,"Polygon"===v.type?1:2,Y),new kr(De,f);case"GeometryCollection":for(We=0,_t=v.geometries.length;We<_t;We++){var Lt=vu({geometry:v.geometries[We],type:"Feature",properties:l.properties},f);Lt&&P.push(Lt)}return new Us(P);default:throw new Error("Invalid GeoJSON object.")}}function ga(l,f,v,T){return l?l(f,v):new fo(v,T&&T.markersInheritOptions&&T)}function $a(l){return new Vt(l[1],l[0],l[2])}function js(l,f,v){for(var Y,T=[],P=0,V=l.length;P<V;P++)Y=f?js(l[P],f-1,v):(v||$a)(l[P]),T.push(Y);return T}function wu(l,f){return void 0!==(l=Nt(l)).alt?[Q(l.lng,f),Q(l.lat,f),Q(l.alt,f)]:[Q(l.lng,f),Q(l.lat,f)]}function Ga(l,f,v,T){for(var P=[],V=0,Y=l.length;V<Y;V++)P.push(f?Ga(l[V],f-1,v,T):wu(l[V],T));return!f&&v&&P.push(P[0]),P}function po(l,f){return l.feature?W({},l.feature,{geometry:f}):go(f)}function go(l){return"Feature"===l.type||"FeatureCollection"===l.type?l:{type:"Feature",properties:{},geometry:l}}var Bo={toGeoJSON:function(l){return po(this,{type:"Point",coordinates:wu(this.getLatLng(),l)})}};function mo(l,f){return new pi(l,f)}fo.include(Bo),br.include(Bo),Ha.include(Bo),fi.include({toGeoJSON:function(l){var f=!lr(this._latlngs);return po(this,{type:(f?"Multi":"")+"LineString",coordinates:Ga(this._latlngs,f?1:0,!1,l)})}}),kr.include({toGeoJSON:function(l){var f=!lr(this._latlngs),v=f&&!lr(this._latlngs[0]),T=Ga(this._latlngs,v?2:f?1:0,!0,l);return f||(T=[T]),po(this,{type:(v?"Multi":"")+"Polygon",coordinates:T})}}),Ve.include({toMultiPoint:function(l){var f=[];return this.eachLayer(function(v){f.push(v.toGeoJSON(l).geometry.coordinates)}),po(this,{type:"MultiPoint",coordinates:f})},toGeoJSON:function(l){var f=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===f)return this.toMultiPoint(l);var v="GeometryCollection"===f,T=[];return this.eachLayer(function(P){if(P.toGeoJSON){var V=P.toGeoJSON(l);if(v)T.push(V.geometry);else{var Y=go(V);"FeatureCollection"===Y.type?T.push.apply(T,Y.features):T.push(Y)}}}),v?po(this,{geometries:T,type:"GeometryCollection"}):{type:"FeatureCollection",features:T}}});var Cl=mo,Eu=Rr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(l,f,v){this._url=l,this._bounds=zt(f),qe(this,v)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(jt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Rn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(l){return this.options.opacity=l,this._image&&this._updateOpacity(),this},setStyle:function(l){return l.opacity&&this.setOpacity(l.opacity),this},bringToFront:function(){return this._map&&rs(this._image),this},bringToBack:function(){return this._map&&Gn(this._image),this},setUrl:function(l){return this._url=l,this._image&&(this._image.src=l),this},setBounds:function(l){return this._bounds=zt(l),this._map&&this._reset(),this},getEvents:function(){var l={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var l="IMG"===this._url.tagName,f=this._image=l?this._url:an("img");jt(f,"leaflet-image-layer"),this._zoomAnimated&&jt(f,"leaflet-zoom-animated"),this.options.className&&jt(f,this.options.className),f.onselectstart=Ee,f.onmousemove=Ee,f.onload=le(this.fire,this,"load"),f.onerror=le(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(f.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),l?this._url=f.src:(f.src=this._url,f.alt=this.options.alt)},_animateZoom:function(l){var f=this._map.getZoomScale(l.zoom),v=this._map._latLngBoundsToNewLayerBounds(this._bounds,l.zoom,l.center).min;ao(this._image,v,f)},_reset:function(){var l=this._image,f=new Tt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),v=f.getSize();Qn(l,f.min),l.style.width=v.x+"px",l.style.height=v.y+"px"},_updateOpacity:function(){Mr(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&null!=this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var l=this.options.errorOverlayUrl;l&&this._url!==l&&(this._url=l,this._image.src=l)},getCenter:function(){return this._bounds.getCenter()}}),gi=Eu.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var l="VIDEO"===this._url.tagName,f=this._image=l?this._url:an("video");if(jt(f,"leaflet-image-layer"),this._zoomAnimated&&jt(f,"leaflet-zoom-animated"),this.options.className&&jt(f,this.options.className),f.onselectstart=Ee,f.onmousemove=Ee,f.onloadeddata=le(this.fire,this,"load"),l){for(var v=f.getElementsByTagName("source"),T=[],P=0;P<v.length;P++)T.push(v[P].src);this._url=v.length>0?T:[f.src]}else{Ie(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(f.style,"objectFit")&&(f.style.objectFit="fill"),f.autoplay=!!this.options.autoplay,f.loop=!!this.options.loop,f.muted=!!this.options.muted,f.playsInline=!!this.options.playsInline;for(var V=0;V<this._url.length;V++){var Y=an("source");Y.src=this._url[V],f.appendChild(Y)}}}});var Cu=Eu.extend({_initImage:function(){var l=this._image=this._url;jt(l,"leaflet-image-layer"),this._zoomAnimated&&jt(l,"leaflet-zoom-animated"),this.options.className&&jt(l,this.options.className),l.onselectstart=Ee,l.onmousemove=Ee}});var $r=Rr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0},initialize:function(l,f){qe(this,l),this._source=f},openOn:function(l){return(l=arguments.length?l:this._source._map).hasLayer(this)||l.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(l){return this._map?this.close():(arguments.length?this._source=l:l=this._source,this._prepareOpen(),this.openOn(l._map)),this},onAdd:function(l){this._zoomAnimated=l._zoomAnimated,this._container||this._initLayout(),l._fadeAnimated&&Mr(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),l._fadeAnimated&&Mr(this._container,1),this.bringToFront(),this.options.interactive&&(jt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(l){l._fadeAnimated?(Mr(this._container,0),this._removeTimeout=setTimeout(le(Rn,void 0,this._container),200)):Rn(this._container),this.options.interactive&&(mn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(l){return this._latlng=Nt(l),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(l){return this._content=l,this.update(),this},getElement:function(){return this._container},update:function(){!this._map||(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var l={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&rs(this._container),this},bringToBack:function(){return this._map&&Gn(this._container),this},_prepareOpen:function(l){var f=this._source;if(!f._map)return!1;if(f instanceof Us){f=null;var v=this._source._layers;for(var T in v)if(v[T]._map){f=v[T];break}if(!f)return!1;this._source=f}if(!l)if(f.getCenter)l=f.getCenter();else if(f.getLatLng)l=f.getLatLng();else{if(!f.getBounds)throw new Error("Unable to get source layer LatLng.");l=f.getBounds().getCenter()}return this.setLatLng(l),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var l=this._contentNode,f="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof f)l.innerHTML=f;else{for(;l.hasChildNodes();)l.removeChild(l.firstChild);l.appendChild(f)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var l=this._map.latLngToLayerPoint(this._latlng),f=et(this.options.offset),v=this._getAnchor();this._zoomAnimated?Qn(this._container,l.add(v)):f=f.add(l).add(v);var T=this._containerBottom=-f.y,P=this._containerLeft=-Math.round(this._containerWidth/2)+f.x;this._container.style.bottom=T+"px",this._container.style.left=P+"px"}},_getAnchor:function(){return[0,0]}});yn.include({_initOverlay:function(l,f,v,T){var P=f;return P instanceof l||(P=new l(T).setContent(f)),v&&P.setLatLng(v),P}}),Rr.include({_initOverlay:function(l,f,v,T){var P=v;return P instanceof l?(qe(P,T),P._source=this):(P=f&&!T?f:new l(T,this)).setContent(v),P}});var nr=$r.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(l){return!(l=arguments.length?l:this._source._map).hasLayer(this)&&l._popup&&l._popup.options.autoClose&&l.removeLayer(l._popup),l._popup=this,$r.prototype.openOn.call(this,l)},onAdd:function(l){$r.prototype.onAdd.call(this,l),l.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Bs||this._source.on("preclick",Xr))},onRemove:function(l){$r.prototype.onRemove.call(this,l),l.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Bs||this._source.off("preclick",Xr))},getEvents:function(){var l=$r.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(l.preclick=this.close),this.options.keepInView&&(l.moveend=this._adjustPan),l},_initLayout:function(){var l="leaflet-popup",f=this._container=an("div",l+" "+(this.options.className||"")+" leaflet-zoom-animated"),v=this._wrapper=an("div",l+"-content-wrapper",f);if(this._contentNode=an("div",l+"-content",v),Ns(f),yc(this._contentNode),Zt(f,"contextmenu",Xr),this._tipContainer=an("div",l+"-tip-container",f),this._tip=an("div",l+"-tip",this._tipContainer),this.options.closeButton){var T=this._closeButton=an("a",l+"-close-button",f);T.setAttribute("role","button"),T.setAttribute("aria-label","Close popup"),T.href="#close",T.innerHTML='<span aria-hidden="true">&#215;</span>',Zt(T,"click",this.close,this)}},_updateLayout:function(){var l=this._contentNode,f=l.style;f.width="",f.whiteSpace="nowrap";var v=l.offsetWidth;v=Math.min(v,this.options.maxWidth),v=Math.max(v,this.options.minWidth),f.width=v+1+"px",f.whiteSpace="",f.height="";var P=this.options.maxHeight,V="leaflet-popup-scrolled";P&&l.offsetHeight>P?(f.height=P+"px",jt(l,V)):mn(l,V),this._containerWidth=this._container.offsetWidth},_animateZoom:function(l){var f=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center),v=this._getAnchor();Qn(this._container,f.add(v))},_adjustPan:function(l){if(this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var f=this._map,v=parseInt(Ht(this._container,"marginBottom"),10)||0,T=this._container.offsetHeight+v,P=this._containerWidth,V=new oe(this._containerLeft,-T-this._containerBottom);V._add(di(this._container));var Y=f.layerPointToContainerPoint(V),de=et(this.options.autoPanPadding),De=et(this.options.autoPanPaddingTopLeft||de),We=et(this.options.autoPanPaddingBottomRight||de),_t=f.getSize(),Lt=0,Kt=0;Y.x+P+We.x>_t.x&&(Lt=Y.x+P-_t.x+We.x),Y.x-Lt-De.x<0&&(Lt=Y.x-De.x),Y.y+T+We.y>_t.y&&(Kt=Y.y+T-_t.y+We.y),Y.y-Kt-De.y<0&&(Kt=Y.y-De.y),(Lt||Kt)&&f.fire("autopanstart").panBy([Lt,Kt],{animate:l&&"moveend"===l.type})}},_getAnchor:function(){return et(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});yn.mergeOptions({closePopupOnClick:!0}),yn.include({openPopup:function(l,f,v){return this._initOverlay(nr,l,f,v).openOn(this),this},closePopup:function(l){return(l=arguments.length?l:this._popup)&&l.close(),this}}),Rr.include({bindPopup:function(l,f){return this._popup=this._initOverlay(nr,this._popup,l,f),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(l){return this._popup&&this._popup._prepareOpen(l)&&this._popup.openOn(this._map),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(l){return this._popup&&this._popup.setContent(l),this},getPopup:function(){return this._popup},_openPopup:function(l){if(this._popup&&this._map){Pr(l);var f=l.layer||l.target;if(this._popup._source===f&&!(f instanceof Bs))return void(this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(l.latlng));this._popup._source=f,this.openPopup(l.latlng)}},_movePopup:function(l){this._popup.setLatLng(l.latlng)},_onKeyPress:function(l){13===l.originalEvent.keyCode&&this._openPopup(l)}});var Ic=$r.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(l){$r.prototype.onAdd.call(this,l),this.setOpacity(this.options.opacity),l.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(l){$r.prototype.onRemove.call(this,l),l.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var l=$r.prototype.getEvents.call(this);return this.options.permanent||(l.preclick=this.close),l},_initLayout:function(){this._contentNode=this._container=an("div","leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(l){var f,v,T=this._map,P=this._container,V=T.latLngToContainerPoint(T.getCenter()),Y=T.layerPointToContainerPoint(l),de=this.options.direction,De=P.offsetWidth,We=P.offsetHeight,_t=et(this.options.offset),Lt=this._getAnchor();"top"===de?(f=De/2,v=We):"bottom"===de?(f=De/2,v=0):"center"===de?(f=De/2,v=We/2):"right"===de?(f=0,v=We/2):"left"===de?(f=De,v=We/2):Y.x<V.x?(de="right",f=0,v=We/2):(de="left",f=De+2*(_t.x+Lt.x),v=We/2),l=l.subtract(et(f,v,!0)).add(_t).add(Lt),mn(P,"leaflet-tooltip-right"),mn(P,"leaflet-tooltip-left"),mn(P,"leaflet-tooltip-top"),mn(P,"leaflet-tooltip-bottom"),jt(P,"leaflet-tooltip-"+de),Qn(P,l)},_updatePosition:function(){var l=this._map.latLngToLayerPoint(this._latlng);this._setPosition(l)},setOpacity:function(l){this.options.opacity=l,this._container&&Mr(this._container,l)},_animateZoom:function(l){var f=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center);this._setPosition(f)},_getAnchor:function(){return et(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});yn.include({openTooltip:function(l,f,v){return this._initOverlay(Ic,l,f,v).openOn(this),this},closeTooltip:function(l){return l.close(),this}}),Rr.include({bindTooltip:function(l,f){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ic,this._tooltip,l,f),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(l){if(l||!this._tooltipHandlersAdded){var f=l?"off":"on",v={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?v.add=this._openTooltip:(v.mouseover=this._openTooltip,v.mouseout=this.closeTooltip,v.click=this._openTooltip),this._tooltip.options.sticky&&(v.mousemove=this._moveTooltip),this[f](v),this._tooltipHandlersAdded=!l}},openTooltip:function(l){return this._tooltip&&this._tooltip._prepareOpen(l)&&this._tooltip.openOn(this._map),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(l){return this._tooltip&&this._tooltip.setContent(l),this},getTooltip:function(){return this._tooltip},_openTooltip:function(l){!this._tooltip||!this._map||this._map.dragging&&this._map.dragging.moving()||(this._tooltip._source=l.layer||l.target,this.openTooltip(this._tooltip.options.sticky?l.latlng:void 0))},_moveTooltip:function(l){var v,T,f=l.latlng;this._tooltip.options.sticky&&l.originalEvent&&(v=this._map.mouseEventToContainerPoint(l.originalEvent),T=this._map.containerPointToLayerPoint(v),f=this._map.layerPointToLatLng(T)),this._tooltip.setLatLng(f)}});var Zu=Uo.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(l){var f=l&&"DIV"===l.tagName?l:document.createElement("div"),v=this.options;if(v.html instanceof Element?(Rs(f),f.appendChild(v.html)):f.innerHTML=!1!==v.html?v.html:"",v.bgPos){var T=et(v.bgPos);f.style.backgroundPosition=-T.x+"px "+-T.y+"px"}return this._setIconStyles(f,"icon"),f},createShadow:function(){return null}});Uo.Default=hi;var ma=Rr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:q.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(l){qe(this,l)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(l){l._addZoomLimit(this)},onRemove:function(l){this._removeAllTiles(),Rn(this._container),l._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(rs(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Gn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(l){return this.options.opacity=l,this._updateOpacity(),this},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var l=this._clampZoom(this._map.getZoom());l!==this._tileZoom&&(this._tileZoom=l,this._updateLevels()),this._update()}return this},getEvents:function(){var l={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=Te(this._onMoveEnd,this.options.updateInterval,this)),l.move=this._onMove),this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},createTile:function(){return document.createElement("div")},getTileSize:function(){var l=this.options.tileSize;return l instanceof oe?l:new oe(l,l)},_updateZIndex:function(){this._container&&null!=this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(l){for(var V,f=this.getPane().children,v=-l(-1/0,1/0),T=0,P=f.length;T<P;T++)V=f[T].style.zIndex,f[T]!==this._container&&V&&(v=l(v,+V));isFinite(v)&&(this.options.zIndex=v+l(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!q.ielt9){Mr(this._container,this.options.opacity);var l=+new Date,f=!1,v=!1;for(var T in this._tiles){var P=this._tiles[T];if(P.current&&P.loaded){var V=Math.min(1,(l-P.loaded)/200);Mr(P.el,V),V<1?f=!0:(P.active?v=!0:this._onOpaqueTile(P),P.active=!0)}}v&&!this._noPrune&&this._pruneTiles(),f&&(be(this._fadeFrame),this._fadeFrame=ce(this._updateOpacity,this))}},_onOpaqueTile:Ee,_initContainer:function(){this._container||(this._container=an("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var l=this._tileZoom,f=this.options.maxZoom;if(void 0!==l){for(var v in this._levels)v=Number(v),this._levels[v].el.children.length||v===l?(this._levels[v].el.style.zIndex=f-Math.abs(l-v),this._onUpdateLevel(v)):(Rn(this._levels[v].el),this._removeTilesAtZoom(v),this._onRemoveLevel(v),delete this._levels[v]);var T=this._levels[l],P=this._map;return T||((T=this._levels[l]={}).el=an("div","leaflet-tile-container leaflet-zoom-animated",this._container),T.el.style.zIndex=f,T.origin=P.project(P.unproject(P.getPixelOrigin()),l).round(),T.zoom=l,this._setZoomTransform(T,P.getCenter(),P.getZoom()),this._onCreateLevel(T)),this._level=T,T}},_onUpdateLevel:Ee,_onRemoveLevel:Ee,_onCreateLevel:Ee,_pruneTiles:function(){if(this._map){var l,f,v=this._map.getZoom();if(v>this.options.maxZoom||v<this.options.minZoom)return void this._removeAllTiles();for(l in this._tiles)(f=this._tiles[l]).retain=f.current;for(l in this._tiles)if((f=this._tiles[l]).current&&!f.active){var T=f.coords;this._retainParent(T.x,T.y,T.z,T.z-5)||this._retainChildren(T.x,T.y,T.z,T.z+2)}for(l in this._tiles)this._tiles[l].retain||this._removeTile(l)}},_removeTilesAtZoom:function(l){for(var f in this._tiles)this._tiles[f].coords.z===l&&this._removeTile(f)},_removeAllTiles:function(){for(var l in this._tiles)this._removeTile(l)},_invalidateAll:function(){for(var l in this._levels)Rn(this._levels[l].el),this._onRemoveLevel(Number(l)),delete this._levels[l];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(l,f,v,T){var P=Math.floor(l/2),V=Math.floor(f/2),Y=v-1,de=new oe(+P,+V);de.z=+Y;var De=this._tileCoordsToKey(de),We=this._tiles[De];return We&&We.active?(We.retain=!0,!0):(We&&We.loaded&&(We.retain=!0),Y>T&&this._retainParent(P,V,Y,T))},_retainChildren:function(l,f,v,T){for(var P=2*l;P<2*l+2;P++)for(var V=2*f;V<2*f+2;V++){var Y=new oe(P,V);Y.z=v+1;var de=this._tileCoordsToKey(Y),De=this._tiles[de];De&&De.active?De.retain=!0:(De&&De.loaded&&(De.retain=!0),v+1<T&&this._retainChildren(P,V,v+1,T))}},_resetView:function(l){var f=l&&(l.pinch||l.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),f,f)},_animateZoom:function(l){this._setView(l.center,l.zoom,!0,l.noUpdate)},_clampZoom:function(l){var f=this.options;return void 0!==f.minNativeZoom&&l<f.minNativeZoom?f.minNativeZoom:void 0!==f.maxNativeZoom&&f.maxNativeZoom<l?f.maxNativeZoom:l},_setView:function(l,f,v,T){var P=Math.round(f);P=void 0!==this.options.maxZoom&&P>this.options.maxZoom||void 0!==this.options.minZoom&&P<this.options.minZoom?void 0:this._clampZoom(P),(!T||this.options.updateWhenZooming&&P!==this._tileZoom)&&(this._tileZoom=P,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==P&&this._update(l),v||this._pruneTiles(),this._noPrune=!!v),this._setZoomTransforms(l,f)},_setZoomTransforms:function(l,f){for(var v in this._levels)this._setZoomTransform(this._levels[v],l,f)},_setZoomTransform:function(l,f,v){var T=this._map.getZoomScale(v,l.zoom),P=l.origin.multiplyBy(T).subtract(this._map._getNewPixelOrigin(f,v)).round();q.any3d?ao(l.el,P,T):Qn(l.el,P)},_resetGrid:function(){var l=this._map,f=l.options.crs,v=this._tileSize=this.getTileSize(),T=this._tileZoom,P=this._map.getPixelWorldBounds(this._tileZoom);P&&(this._globalTileRange=this._pxBoundsToTileRange(P)),this._wrapX=f.wrapLng&&!this.options.noWrap&&[Math.floor(l.project([0,f.wrapLng[0]],T).x/v.x),Math.ceil(l.project([0,f.wrapLng[1]],T).x/v.y)],this._wrapY=f.wrapLat&&!this.options.noWrap&&[Math.floor(l.project([f.wrapLat[0],0],T).y/v.x),Math.ceil(l.project([f.wrapLat[1],0],T).y/v.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(l){var f=this._map,v=f._animatingZoom?Math.max(f._animateToZoom,f.getZoom()):f.getZoom(),T=f.getZoomScale(v,this._tileZoom),P=f.project(l,this._tileZoom).floor(),V=f.getSize().divideBy(2*T);return new Tt(P.subtract(V),P.add(V))},_update:function(l){var f=this._map;if(f){var v=this._clampZoom(f.getZoom());if(void 0===l&&(l=f.getCenter()),void 0!==this._tileZoom){var T=this._getTiledPixelBounds(l),P=this._pxBoundsToTileRange(T),V=P.getCenter(),Y=[],de=this.options.keepBuffer,De=new Tt(P.getBottomLeft().subtract([de,-de]),P.getTopRight().add([de,-de]));if(!(isFinite(P.min.x)&&isFinite(P.min.y)&&isFinite(P.max.x)&&isFinite(P.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var We in this._tiles){var _t=this._tiles[We].coords;(_t.z!==this._tileZoom||!De.contains(new oe(_t.x,_t.y)))&&(this._tiles[We].current=!1)}if(Math.abs(v-this._tileZoom)>1)return void this._setView(l,v);for(var Lt=P.min.y;Lt<=P.max.y;Lt++)for(var Kt=P.min.x;Kt<=P.max.x;Kt++){var mi=new oe(Kt,Lt);if(mi.z=this._tileZoom,this._isValidTile(mi)){var Di=this._tiles[this._tileCoordsToKey(mi)];Di?Di.current=!0:Y.push(mi)}}if(Y.sort(function(ii,$s){return ii.distanceTo(V)-$s.distanceTo(V)}),0!==Y.length){this._loading||(this._loading=!0,this.fire("loading"));var Hs=document.createDocumentFragment();for(Kt=0;Kt<Y.length;Kt++)this._addTile(Y[Kt],Hs);this._level.el.appendChild(Hs)}}}},_isValidTile:function(l){var f=this._map.options.crs;if(!f.infinite){var v=this._globalTileRange;if(!f.wrapLng&&(l.x<v.min.x||l.x>v.max.x)||!f.wrapLat&&(l.y<v.min.y||l.y>v.max.y))return!1}if(!this.options.bounds)return!0;var T=this._tileCoordsToBounds(l);return zt(this.options.bounds).overlaps(T)},_keyToBounds:function(l){return this._tileCoordsToBounds(this._keyToTileCoords(l))},_tileCoordsToNwSe:function(l){var f=this._map,v=this.getTileSize(),T=l.scaleBy(v),P=T.add(v);return[f.unproject(T,l.z),f.unproject(P,l.z)]},_tileCoordsToBounds:function(l){var f=this._tileCoordsToNwSe(l),v=new Xe(f[0],f[1]);return this.options.noWrap||(v=this._map.wrapLatLngBounds(v)),v},_tileCoordsToKey:function(l){return l.x+":"+l.y+":"+l.z},_keyToTileCoords:function(l){var f=l.split(":"),v=new oe(+f[0],+f[1]);return v.z=+f[2],v},_removeTile:function(l){var f=this._tiles[l];!f||(Rn(f.el),delete this._tiles[l],this.fire("tileunload",{tile:f.el,coords:this._keyToTileCoords(l)}))},_initTile:function(l){jt(l,"leaflet-tile");var f=this.getTileSize();l.style.width=f.x+"px",l.style.height=f.y+"px",l.onselectstart=Ee,l.onmousemove=Ee,q.ielt9&&this.options.opacity<1&&Mr(l,this.options.opacity)},_addTile:function(l,f){var v=this._getTilePos(l),T=this._tileCoordsToKey(l),P=this.createTile(this._wrapCoords(l),le(this._tileReady,this,l));this._initTile(P),this.createTile.length<2&&ce(le(this._tileReady,this,l,null,P)),Qn(P,v),this._tiles[T]={el:P,coords:l,current:!0},f.appendChild(P),this.fire("tileloadstart",{tile:P,coords:l})},_tileReady:function(l,f,v){f&&this.fire("tileerror",{error:f,tile:v,coords:l});var T=this._tileCoordsToKey(l);(v=this._tiles[T])&&(v.loaded=+new Date,this._map._fadeAnimated?(Mr(v.el,0),be(this._fadeFrame),this._fadeFrame=ce(this._updateOpacity,this)):(v.active=!0,this._pruneTiles()),f||(jt(v.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:v.el,coords:l})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),q.ielt9||!this._map._fadeAnimated?ce(this._pruneTiles,this):setTimeout(le(this._pruneTiles,this),250)))},_getTilePos:function(l){return l.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(l){var f=new oe(this._wrapX?ve(l.x,this._wrapX):l.x,this._wrapY?ve(l.y,this._wrapY):l.y);return f.z=l.z,f},_pxBoundsToTileRange:function(l){var f=this.getTileSize();return new Tt(l.min.unscaleBy(f).floor(),l.max.unscaleBy(f).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var l in this._tiles)if(!this._tiles[l].loaded)return!1;return!0}});var vs=ma.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(l,f){this._url=l,(f=qe(this,f)).detectRetina&&q.retina&&f.maxZoom>0&&(f.tileSize=Math.floor(f.tileSize/2),f.zoomReverse?(f.zoomOffset--,f.minZoom++):(f.zoomOffset++,f.maxZoom--),f.minZoom=Math.max(0,f.minZoom)),"string"==typeof f.subdomains&&(f.subdomains=f.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(l,f){return this._url===l&&void 0===f&&(f=!0),this._url=l,f||this.redraw(),this},createTile:function(l,f){var v=document.createElement("img");return Zt(v,"load",le(this._tileOnLoad,this,f,v)),Zt(v,"error",le(this._tileOnError,this,f,v)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(v.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"==typeof this.options.referrerPolicy&&(v.referrerPolicy=this.options.referrerPolicy),v.alt="",v.setAttribute("role","presentation"),v.src=this.getTileUrl(l),v},getTileUrl:function(l){var f={r:q.retina?"@2x":"",s:this._getSubdomain(l),x:l.x,y:l.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var v=this._globalTileRange.max.y-l.y;this.options.tms&&(f.y=v),f["-y"]=v}return nt(this._url,W(f,this.options))},_tileOnLoad:function(l,f){q.ielt9?setTimeout(le(l,this,null,f),0):l(null,f)},_tileOnError:function(l,f,v){var T=this.options.errorTileUrl;T&&f.getAttribute("src")!==T&&(f.src=T),l(v,f)},_onTileRemove:function(l){l.tile.onload=null},_getZoomForUrl:function(){var l=this._tileZoom;return this.options.zoomReverse&&(l=this.options.maxZoom-l),l+this.options.zoomOffset},_getSubdomain:function(l){var f=Math.abs(l.x+l.y)%this.options.subdomains.length;return this.options.subdomains[f]},_abortLoading:function(){var l,f;for(l in this._tiles)if(this._tiles[l].coords.z!==this._tileZoom&&((f=this._tiles[l].el).onload=Ee,f.onerror=Ee,!f.complete)){f.src=ot;var v=this._tiles[l].coords;Rn(f),delete this._tiles[l],this.fire("tileabort",{tile:f,coords:v})}},_removeTile:function(l){var f=this._tiles[l];if(f)return f.el.setAttribute("src",ot),ma.prototype._removeTile.call(this,l)},_tileReady:function(l,f,v){if(this._map&&(!v||v.getAttribute("src")!==ot))return ma.prototype._tileReady.call(this,l,f,v)}});function _a(l,f){return new vs(l,f)}var Cr=vs.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(l,f){this._url=l;var v=W({},this.defaultWmsParams);for(var T in f)T in this.options||(v[T]=f[T]);var P=(f=qe(this,f)).detectRetina&&q.retina?2:1,V=this.getTileSize();v.width=V.x*P,v.height=V.y*P,this.wmsParams=v},onAdd:function(l){this._crs=this.options.crs||l.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version),this.wmsParams[this._wmsVersion>=1.3?"crs":"srs"]=this._crs.code,vs.prototype.onAdd.call(this,l)},getTileUrl:function(l){var f=this._tileCoordsToNwSe(l),v=this._crs,T=Ut(v.project(f[0]),v.project(f[1])),P=T.min,V=T.max,Y=(this._wmsVersion>=1.3&&this._crs===Fo?[P.y,P.x,V.y,V.x]:[P.x,P.y,V.x,V.y]).join(","),de=vs.prototype.getTileUrl.call(this,l);return de+je(this.wmsParams,de,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Y},setParams:function(l,f){return W(this.wmsParams,l),f||this.redraw(),this}});vs.WMS=Cr,_a.wms=function Il(l,f){return new Cr(l,f)};var _o=Rr.extend({options:{padding:.1},initialize:function(l){qe(this,l),_e(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&jt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var l={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(l.zoomanim=this._onAnimZoom),l},_onAnimZoom:function(l){this._updateTransform(l.center,l.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(l,f){var v=this._map.getZoomScale(f,this._zoom),T=this._map.getSize().multiplyBy(.5+this.options.padding),P=this._map.project(this._center,f),V=T.multiplyBy(-v).add(P).subtract(this._map._getNewPixelOrigin(l,f));q.any3d?ao(this._container,V,v):Qn(this._container,V)},_reset:function(){for(var l in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[l]._reset()},_onZoomEnd:function(){for(var l in this._layers)this._layers[l]._project()},_updatePaths:function(){for(var l in this._layers)this._layers[l]._update()},_update:function(){var l=this.options.padding,f=this._map.getSize(),v=this._map.containerPointToLayerPoint(f.multiplyBy(-l)).round();this._bounds=new Tt(v,v.add(f.multiplyBy(1+2*l)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ws=_o.extend({options:{tolerance:0},getEvents:function(){var l=_o.prototype.getEvents.call(this);return l.viewprereset=this._onViewPreReset,l},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){_o.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var l=this._container=document.createElement("canvas");Zt(l,"mousemove",this._onMouseMove,this),Zt(l,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Zt(l,"mouseout",this._handleMouseOut,this),l._leaflet_disable_events=!0,this._ctx=l.getContext("2d")},_destroyContainer:function(){be(this._redrawRequest),delete this._ctx,Rn(this._container),Wn(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var f in this._redrawBounds=null,this._layers)this._layers[f]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){_o.prototype._update.call(this);var l=this._bounds,f=this._container,v=l.getSize(),T=q.retina?2:1;Qn(f,l.min),f.width=T*v.x,f.height=T*v.y,f.style.width=v.x+"px",f.style.height=v.y+"px",q.retina&&this._ctx.scale(2,2),this._ctx.translate(-l.min.x,-l.min.y),this.fire("update")}},_reset:function(){_o.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(l){this._updateDashArray(l),this._layers[_e(l)]=l;var f=l._order={layer:l,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=f),this._drawLast=f,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(l){this._requestRedraw(l)},_removePath:function(l){var f=l._order,v=f.next,T=f.prev;v?v.prev=T:this._drawLast=T,T?T.next=v:this._drawFirst=v,delete l._order,delete this._layers[_e(l)],this._requestRedraw(l)},_updatePath:function(l){this._extendRedrawBounds(l),l._project(),l._update(),this._requestRedraw(l)},_updateStyle:function(l){this._updateDashArray(l),this._requestRedraw(l)},_updateDashArray:function(l){if("string"==typeof l.options.dashArray){var T,P,f=l.options.dashArray.split(/[, ]+/),v=[];for(P=0;P<f.length;P++){if(T=Number(f[P]),isNaN(T))return;v.push(T)}l.options._dashArray=v}else l.options._dashArray=l.options.dashArray},_requestRedraw:function(l){!this._map||(this._extendRedrawBounds(l),this._redrawRequest=this._redrawRequest||ce(this._redraw,this))},_extendRedrawBounds:function(l){if(l._pxBounds){var f=(l.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Tt,this._redrawBounds.extend(l._pxBounds.min.subtract([f,f])),this._redrawBounds.extend(l._pxBounds.max.add([f,f]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var l=this._redrawBounds;if(l){var f=l.getSize();this._ctx.clearRect(l.min.x,l.min.y,f.x,f.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var l,f=this._redrawBounds;if(this._ctx.save(),f){var v=f.getSize();this._ctx.beginPath(),this._ctx.rect(f.min.x,f.min.y,v.x,v.y),this._ctx.clip()}this._drawing=!0;for(var T=this._drawFirst;T;T=T.next)l=T.layer,(!f||l._pxBounds&&l._pxBounds.intersects(f))&&l._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(l,f){if(this._drawing){var v,T,P,V,Y=l._parts,de=Y.length,De=this._ctx;if(de){for(De.beginPath(),v=0;v<de;v++){for(T=0,P=Y[v].length;T<P;T++)De[T?"lineTo":"moveTo"]((V=Y[v][T]).x,V.y);f&&De.closePath()}this._fillStroke(De,l)}}},_updateCircle:function(l){if(this._drawing&&!l._empty()){var f=l._point,v=this._ctx,T=Math.max(Math.round(l._radius),1),P=(Math.max(Math.round(l._radiusY),1)||T)/T;1!==P&&(v.save(),v.scale(1,P)),v.beginPath(),v.arc(f.x,f.y/P,T,0,2*Math.PI,!1),1!==P&&v.restore(),this._fillStroke(v,l)}},_fillStroke:function(l,f){var v=f.options;v.fill&&(l.globalAlpha=v.fillOpacity,l.fillStyle=v.fillColor||v.color,l.fill(v.fillRule||"evenodd")),v.stroke&&0!==v.weight&&(l.setLineDash&&l.setLineDash(f.options&&f.options._dashArray||[]),l.globalAlpha=v.opacity,l.lineWidth=v.weight,l.strokeStyle=v.color,l.lineCap=v.lineCap,l.lineJoin=v.lineJoin,l.stroke())},_onClick:function(l){for(var v,T,f=this._map.mouseEventToLayerPoint(l),P=this._drawFirst;P;P=P.next)(v=P.layer).options.interactive&&v._containsPoint(f)&&("click"!==l.type&&"preclick"!==l.type||!this._map._draggableMoved(v))&&(T=v);this._fireEvent(!!T&&[T],l)},_onMouseMove:function(l){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var f=this._map.mouseEventToLayerPoint(l);this._handleMouseHover(l,f)}},_handleMouseOut:function(l){var f=this._hoveredLayer;f&&(mn(this._container,"leaflet-interactive"),this._fireEvent([f],l,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(l,f){if(!this._mouseHoverThrottled){for(var v,T,P=this._drawFirst;P;P=P.next)(v=P.layer).options.interactive&&v._containsPoint(f)&&(T=v);T!==this._hoveredLayer&&(this._handleMouseOut(l),T&&(jt(this._container,"leaflet-interactive"),this._fireEvent([T],l,"mouseover"),this._hoveredLayer=T)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],l),this._mouseHoverThrottled=!0,setTimeout(le(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(l,f,v){this._map._fireDOMEvent(f,v||f.type,l)},_bringToFront:function(l){var f=l._order;if(f){var v=f.next,T=f.prev;if(!v)return;v.prev=T,T?T.next=v:v&&(this._drawFirst=v),f.prev=this._drawLast,this._drawLast.next=f,f.next=null,this._drawLast=f,this._requestRedraw(l)}},_bringToBack:function(l){var f=l._order;if(f){var v=f.next,T=f.prev;if(!T)return;T.next=v,v?v.prev=T:T&&(this._drawLast=T),f.prev=null,f.next=this._drawFirst,this._drawFirst.prev=f,this._drawFirst=f,this._requestRedraw(l)}}});function jo(l){return q.canvas?new ws(l):null}var ya=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(l){return document.createElement("<lvml:"+l+' class="lvml">')}}catch(l){}return function(l){return document.createElement("<"+l+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Ku={_initContainer:function(){this._container=an("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(_o.prototype._update.call(this),this.fire("update"))},_initPath:function(l){var f=l._container=ya("shape");jt(f,"leaflet-vml-shape "+(this.options.className||"")),f.coordsize="1 1",l._path=ya("path"),f.appendChild(l._path),this._updateStyle(l),this._layers[_e(l)]=l},_addPath:function(l){var f=l._container;this._container.appendChild(f),l.options.interactive&&l.addInteractiveTarget(f)},_removePath:function(l){var f=l._container;Rn(f),l.removeInteractiveTarget(f),delete this._layers[_e(l)]},_updateStyle:function(l){var f=l._stroke,v=l._fill,T=l.options,P=l._container;P.stroked=!!T.stroke,P.filled=!!T.fill,T.stroke?(f||(f=l._stroke=ya("stroke")),P.appendChild(f),f.weight=T.weight+"px",f.color=T.color,f.opacity=T.opacity,f.dashStyle=T.dashArray?Ie(T.dashArray)?T.dashArray.join(" "):T.dashArray.replace(/( *, *)/g," "):"",f.endcap=T.lineCap.replace("butt","flat"),f.joinstyle=T.lineJoin):f&&(P.removeChild(f),l._stroke=null),T.fill?(v||(v=l._fill=ya("fill")),P.appendChild(v),v.color=T.fillColor||T.color,v.opacity=T.fillOpacity):v&&(P.removeChild(v),l._fill=null)},_updateCircle:function(l){var f=l._point.round(),v=Math.round(l._radius),T=Math.round(l._radiusY||v);this._setPath(l,l._empty()?"M0 0":"AL "+f.x+","+f.y+" "+v+","+T+" 0,23592600")},_setPath:function(l,f){l._path.v=f},_bringToFront:function(l){rs(l._container)},_bringToBack:function(l){Gn(l._container)}},Es=q.vml?ya:bi,zo=_o.extend({_initContainer:function(){this._container=Es("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Es("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Rn(this._container),Wn(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){_o.prototype._update.call(this);var l=this._bounds,f=l.getSize(),v=this._container;(!this._svgSize||!this._svgSize.equals(f))&&(this._svgSize=f,v.setAttribute("width",f.x),v.setAttribute("height",f.y)),Qn(v,l.min),v.setAttribute("viewBox",[l.min.x,l.min.y,f.x,f.y].join(" ")),this.fire("update")}},_initPath:function(l){var f=l._path=Es("path");l.options.className&&jt(f,l.options.className),l.options.interactive&&jt(f,"leaflet-interactive"),this._updateStyle(l),this._layers[_e(l)]=l},_addPath:function(l){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(l._path),l.addInteractiveTarget(l._path)},_removePath:function(l){Rn(l._path),l.removeInteractiveTarget(l._path),delete this._layers[_e(l)]},_updatePath:function(l){l._project(),l._update()},_updateStyle:function(l){var f=l._path,v=l.options;!f||(v.stroke?(f.setAttribute("stroke",v.color),f.setAttribute("stroke-opacity",v.opacity),f.setAttribute("stroke-width",v.weight),f.setAttribute("stroke-linecap",v.lineCap),f.setAttribute("stroke-linejoin",v.lineJoin),v.dashArray?f.setAttribute("stroke-dasharray",v.dashArray):f.removeAttribute("stroke-dasharray"),v.dashOffset?f.setAttribute("stroke-dashoffset",v.dashOffset):f.removeAttribute("stroke-dashoffset")):f.setAttribute("stroke","none"),v.fill?(f.setAttribute("fill",v.fillColor||v.color),f.setAttribute("fill-opacity",v.fillOpacity),f.setAttribute("fill-rule",v.fillRule||"evenodd")):f.setAttribute("fill","none"))},_updatePoly:function(l,f){this._setPath(l,Li(l._parts,f))},_updateCircle:function(l){var f=l._point,v=Math.max(Math.round(l._radius),1),P="a"+v+","+(Math.max(Math.round(l._radiusY),1)||v)+" 0 1,0 ",V=l._empty()?"M0 0":"M"+(f.x-v)+","+f.y+P+2*v+",0 "+P+2*-v+",0 ";this._setPath(l,V)},_setPath:function(l,f){l._path.setAttribute("d",f)},_bringToFront:function(l){rs(l._path)},_bringToBack:function(l){Gn(l._path)}});function Tc(l){return q.svg||q.vml?new zo(l):null}q.vml&&zo.include(Ku),yn.include({getRenderer:function(l){var f=l.options.renderer||this._getPaneRenderer(l.options.pane)||this.options.renderer||this._renderer;return f||(f=this._renderer=this._createRenderer()),this.hasLayer(f)||this.addLayer(f),f},_getPaneRenderer:function(l){if("overlayPane"===l||void 0===l)return!1;var f=this._paneRenderers[l];return void 0===f&&(f=this._createRenderer({pane:l}),this._paneRenderers[l]=f),f},_createRenderer:function(l){return this.options.preferCanvas&&jo(l)||Tc(l)}});var Ln=kr.extend({initialize:function(l,f){kr.prototype.initialize.call(this,this._boundsToLatLngs(l),f)},setBounds:function(l){return this.setLatLngs(this._boundsToLatLngs(l))},_boundsToLatLngs:function(l){return[(l=zt(l)).getSouthWest(),l.getNorthWest(),l.getNorthEast(),l.getSouthEast()]}});zo.create=Es,zo.pointsToPath=Li,pi.geometryToLayer=vu,pi.coordsToLatLng=$a,pi.coordsToLatLngs=js,pi.latLngToCoords=wu,pi.latLngsToCoords=Ga,pi.getFeature=po,pi.asFeature=go,yn.mergeOptions({boxZoom:!0});var yt=Ui.extend({initialize:function(l){this._map=l,this._container=l._container,this._pane=l._panes.overlayPane,this._resetStateTimeout=0,l.on("unload",this._destroy,this)},addHooks:function(){Zt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Wn(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Rn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(l){if(!l.shiftKey||1!==l.which&&1!==l.button)return!1;this._clearDeferredResetState(),this._resetState(),jr(),ar(),this._startPoint=this._map.mouseEventToContainerPoint(l),Zt(document,{contextmenu:Pr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(l){this._moved||(this._moved=!0,this._box=an("div","leaflet-zoom-box",this._container),jt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(l);var f=new Tt(this._point,this._startPoint),v=f.getSize();Qn(this._box,f.min),this._box.style.width=v.x+"px",this._box.style.height=v.y+"px"},_finish:function(){this._moved&&(Rn(this._box),mn(this._container,"leaflet-crosshair")),Oa(),hu(),Wn(document,{contextmenu:Pr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(l){if((1===l.which||1===l.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(le(this._resetState,this),0);var f=new Xe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(f).fire("boxzoomend",{boxZoomBounds:f})}},_onKeyDown:function(l){27===l.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});yn.addInitHook("addHandler","boxZoom",yt),yn.mergeOptions({doubleClickZoom:!0});var os=Ui.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(l){var f=this._map,v=f.getZoom(),T=f.options.zoomDelta,P=l.originalEvent.shiftKey?v-T:v+T;"center"===f.options.doubleClickZoom?f.setZoom(P):f.setZoomAround(l.containerPoint,P)}});yn.addInitHook("addHandler","doubleClickZoom",os),yn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ni=Ui.extend({addHooks:function(){if(!this._draggable){var l=this._map;this._draggable=new ti(l._mapPane,l._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),l.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),l.on("zoomend",this._onZoomEnd,this),l.whenReady(this._onZoomEnd,this))}jt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){mn(this._map._container,"leaflet-grab"),mn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var l=this._map;if(l._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var f=zt(this._map.options.maxBounds);this._offsetLimit=Ut(this._map.latLngToContainerPoint(f.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(f.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;l.fire("movestart").fire("dragstart"),l.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(l){if(this._map.options.inertia){var f=this._lastTime=+new Date,v=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(v),this._times.push(f),this._prunePositions(f)}this._map.fire("move",l).fire("drag",l)},_prunePositions:function(l){for(;this._positions.length>1&&l-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var l=this._map.getSize().divideBy(2),f=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=f.subtract(l).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(l,f){return l-(l-f)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var l=this._draggable._newPos.subtract(this._draggable._startPos),f=this._offsetLimit;l.x<f.min.x&&(l.x=this._viscousLimit(l.x,f.min.x)),l.y<f.min.y&&(l.y=this._viscousLimit(l.y,f.min.y)),l.x>f.max.x&&(l.x=this._viscousLimit(l.x,f.max.x)),l.y>f.max.y&&(l.y=this._viscousLimit(l.y,f.max.y)),this._draggable._newPos=this._draggable._startPos.add(l)}},_onPreDragWrap:function(){var l=this._worldWidth,f=Math.round(l/2),v=this._initialWorldOffset,T=this._draggable._newPos.x,P=(T-f+v)%l+f-v,V=(T+f+v)%l-f-v,Y=Math.abs(P+v)<Math.abs(V+v)?P:V;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Y},_onDragEnd:function(l){var f=this._map,v=f.options,T=!v.inertia||l.noInertia||this._times.length<2;if(f.fire("dragend",l),T)f.fire("moveend");else{this._prunePositions(+new Date);var P=this._lastPos.subtract(this._positions[0]),Y=v.easeLinearity,de=P.multiplyBy(Y/((this._lastTime-this._times[0])/1e3)),De=de.distanceTo([0,0]),We=Math.min(v.inertiaMaxSpeed,De),_t=de.multiplyBy(We/De),Lt=We/(v.inertiaDeceleration*Y),Kt=_t.multiplyBy(-Lt/2).round();Kt.x||Kt.y?(Kt=f._limitOffset(Kt,f.options.maxBounds),ce(function(){f.panBy(Kt,{duration:Lt,easeLinearity:Y,noMoveStart:!0,animate:!0})})):f.fire("moveend")}}});yn.addInitHook("addHandler","dragging",ni),yn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ri=Ui.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(l){this._map=l,this._setPanDelta(l.options.keyboardPanDelta),this._setZoomDelta(l.options.zoomDelta)},addHooks:function(){var l=this._map._container;l.tabIndex<=0&&(l.tabIndex="0"),Zt(l,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Wn(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var l=document.body,f=document.documentElement,v=l.scrollTop||f.scrollTop,T=l.scrollLeft||f.scrollLeft;this._map._container.focus(),window.scrollTo(T,v)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(l){var T,P,f=this._panKeys={},v=this.keyCodes;for(T=0,P=v.left.length;T<P;T++)f[v.left[T]]=[-1*l,0];for(T=0,P=v.right.length;T<P;T++)f[v.right[T]]=[l,0];for(T=0,P=v.down.length;T<P;T++)f[v.down[T]]=[0,l];for(T=0,P=v.up.length;T<P;T++)f[v.up[T]]=[0,-1*l]},_setZoomDelta:function(l){var T,P,f=this._zoomKeys={},v=this.keyCodes;for(T=0,P=v.zoomIn.length;T<P;T++)f[v.zoomIn[T]]=l;for(T=0,P=v.zoomOut.length;T<P;T++)f[v.zoomOut[T]]=-l},_addHooks:function(){Zt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Wn(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(l){if(!(l.altKey||l.ctrlKey||l.metaKey)){var T,f=l.keyCode,v=this._map;if(f in this._panKeys)(!v._panAnim||!v._panAnim._inProgress)&&(T=this._panKeys[f],l.shiftKey&&(T=et(T).multiplyBy(3)),v.panBy(T),v.options.maxBounds&&v.panInsideBounds(v.options.maxBounds));else if(f in this._zoomKeys)v.setZoom(v.getZoom()+(l.shiftKey?3:1)*this._zoomKeys[f]);else{if(27!==f||!v._popup||!v._popup.options.closeOnEscapeKey)return;v.closePopup()}Pr(l)}}});yn.addInitHook("addHandler","keyboard",ri),yn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var va=Ui.extend({addHooks:function(){Zt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Wn(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(l){var f=ca(l),v=this._map.options.wheelDebounceTime;this._delta+=f,this._lastMousePos=this._map.mouseEventToContainerPoint(l),this._startTime||(this._startTime=+new Date);var T=Math.max(v-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(le(this._performZoom,this),T),Pr(l)},_performZoom:function(){var l=this._map,f=l.getZoom(),v=this._map.options.zoomSnap||0;l._stop();var P=4*Math.log(2/(1+Math.exp(-Math.abs(this._delta/(4*this._map.options.wheelPxPerZoomLevel)))))/Math.LN2,V=v?Math.ceil(P/v)*v:P,Y=l._limitZoom(f+(this._delta>0?V:-V))-f;this._delta=0,this._startTime=null,Y&&("center"===l.options.scrollWheelZoom?l.setZoom(f+Y):l.setZoomAround(this._lastMousePos,f+Y))}});yn.addInitHook("addHandler","scrollWheelZoom",va);yn.mergeOptions({tapHold:q.touchNative&&q.safari&&q.mobile,tapTolerance:15});var Yu=Ui.extend({addHooks:function(){Zt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Wn(this._map._container,"touchstart",this._onDown,this)},_onDown:function(l){if(clearTimeout(this._holdTimeout),1===l.touches.length){var f=l.touches[0];this._startPos=this._newPos=new oe(f.clientX,f.clientY),this._holdTimeout=setTimeout(le(function(){this._cancel(),this._isTapValid()&&(Zt(document,"touchend",Jn),Zt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",f))},this),600),Zt(document,"touchend touchcancel contextmenu",this._cancel,this),Zt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function l(){Wn(document,"touchend",Jn),Wn(document,"touchend touchcancel",l)},_cancel:function(){clearTimeout(this._holdTimeout),Wn(document,"touchend touchcancel contextmenu",this._cancel,this),Wn(document,"touchmove",this._onMove,this)},_onMove:function(l){var f=l.touches[0];this._newPos=new oe(f.clientX,f.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(l,f){var v=new MouseEvent(l,{bubbles:!0,cancelable:!0,view:window,screenX:f.screenX,screenY:f.screenY,clientX:f.clientX,clientY:f.clientY});v._simulated=!0,f.target.dispatchEvent(v)}});yn.addInitHook("addHandler","tapHold",Yu),yn.mergeOptions({touchZoom:q.touch,bounceAtZoomLimits:!0});var Fn=Ui.extend({addHooks:function(){jt(this._map._container,"leaflet-touch-zoom"),Zt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){mn(this._map._container,"leaflet-touch-zoom"),Wn(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(l){var f=this._map;if(l.touches&&2===l.touches.length&&!f._animatingZoom&&!this._zooming){var v=f.mouseEventToContainerPoint(l.touches[0]),T=f.mouseEventToContainerPoint(l.touches[1]);this._centerPoint=f.getSize()._divideBy(2),this._startLatLng=f.containerPointToLatLng(this._centerPoint),"center"!==f.options.touchZoom&&(this._pinchStartLatLng=f.containerPointToLatLng(v.add(T)._divideBy(2))),this._startDist=v.distanceTo(T),this._startZoom=f.getZoom(),this._moved=!1,this._zooming=!0,f._stop(),Zt(document,"touchmove",this._onTouchMove,this),Zt(document,"touchend touchcancel",this._onTouchEnd,this),Jn(l)}},_onTouchMove:function(l){if(l.touches&&2===l.touches.length&&this._zooming){var f=this._map,v=f.mouseEventToContainerPoint(l.touches[0]),T=f.mouseEventToContainerPoint(l.touches[1]),P=v.distanceTo(T)/this._startDist;if(this._zoom=f.getScaleZoom(P,this._startZoom),!f.options.bounceAtZoomLimits&&(this._zoom<f.getMinZoom()&&P<1||this._zoom>f.getMaxZoom()&&P>1)&&(this._zoom=f._limitZoom(this._zoom)),"center"===f.options.touchZoom){if(this._center=this._startLatLng,1===P)return}else{var V=v._add(T)._divideBy(2)._subtract(this._centerPoint);if(1===P&&0===V.x&&0===V.y)return;this._center=f.unproject(f.project(this._pinchStartLatLng,this._zoom).subtract(V),this._zoom)}this._moved||(f._moveStart(!0,!1),this._moved=!0),be(this._animRequest);var Y=le(f._move,f,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=ce(Y,this,!0),Jn(l)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,be(this._animRequest),Wn(document,"touchmove",this._onTouchMove,this),Wn(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});yn.addInitHook("addHandler","touchZoom",Fn),yn.BoxZoom=yt,yn.DoubleClickZoom=os,yn.Drag=ni,yn.Keyboard=ri,yn.ScrollWheelZoom=va,yn.TapHold=Yu,yn.TouchZoom=Fn,O.Bounds=Tt,O.Browser=q,O.CRS=Xt,O.Canvas=ws,O.Circle=br,O.CircleMarker=Ha,O.Class=se,O.Control=ur,O.DivIcon=Zu,O.DivOverlay=$r,O.DomEvent=Ed,O.DomUtil=la,O.Draggable=ti,O.Evented=Se,O.FeatureGroup=Us,O.GeoJSON=pi,O.GridLayer=ma,O.Handler=Ui,O.Icon=Uo,O.ImageOverlay=Eu,O.LatLng=Vt,O.LatLngBounds=Xe,O.Layer=Rr,O.LayerGroup=Ve,O.LineUtil=ho,O.Map=yn,O.Marker=fo,O.Mixin=On,O.Path=Bs,O.Point=oe,O.PolyUtil=Lo,O.Polygon=kr,O.Polyline=fi,O.Popup=nr,O.PosAnimation=co,O.Projection=za,O.Rectangle=Ln,O.Renderer=_o,O.SVG=zo,O.SVGOverlay=Cu,O.TileLayer=vs,O.Tooltip=Ic,O.Transformation=Ei,O.Util=Ne,O.VideoOverlay=gi,O.bind=le,O.bounds=Ut,O.canvas=jo,O.circle=function ys(l,f,v){return new br(l,f,v)},O.circleMarker=function Vo(l,f){return new Ha(l,f)},O.control=da,O.divIcon=function bd(l){return new Zu(l)},O.extend=W,O.featureGroup=function(l,f){return new Us(l,f)},O.geoJSON=mo,O.geoJson=Cl,O.gridLayer=function zs(l){return new ma(l)},O.icon=function Vs(l){return new Uo(l)},O.imageOverlay=function(l,f,v){return new Eu(l,f,v)},O.latLng=Nt,O.latLngBounds=zt,O.layerGroup=function(l,f){return new Ve(l,f)},O.map=function Os(l,f){return new yn(l,f)},O.marker=function wc(l,f){return new fo(l,f)},O.point=et,O.polygon=function Ec(l,f){return new kr(l,f)},O.polyline=function pa(l,f){return new fi(l,f)},O.popup=function(l,f){return new nr(l,f)},O.rectangle=function Wa(l,f){return new Ln(l,f)},O.setOptions=qe,O.stamp=_e,O.svg=Tc,O.svgOverlay=function Hr(l,f,v){return new Cu(l,f,v)},O.tileLayer=_a,O.tooltip=function(l,f){return new Ic(l,f)},O.transformation=yr,O.version="1.8.0",O.videoOverlay=function bc(l,f,v){return new gi(l,f,v)};var Tl=window.L;O.noConflict=function(){return window.L=Tl,this},window.L=O}(ke)},8306:(pt,ke,O)=>{"use strict";O.d(ke,{y:()=>Q});var g=O(930),W=O(727),j=O(8822),le=O(4671);var Te=O(2416),ve=O(576),Ee=O(2806);let Q=(()=>{class je{constructor(nt){nt&&(this._subscribe=nt)}lift(nt){const Ie=new je;return Ie.source=this,Ie.operator=nt,Ie}subscribe(nt,Ie,Le){const ot=function qe(je){return je&&je instanceof g.Lv||function ge(je){return je&&(0,ve.m)(je.next)&&(0,ve.m)(je.error)&&(0,ve.m)(je.complete)}(je)&&(0,W.Nn)(je)}(nt)?nt:new g.Hp(nt,Ie,Le);return(0,Ee.x)(()=>{const{operator:it,source:ze}=this;ot.add(it?it.call(ot,ze):ze?this._subscribe(ot):this._trySubscribe(ot))}),ot}_trySubscribe(nt){try{return this._subscribe(nt)}catch(Ie){nt.error(Ie)}}forEach(nt,Ie){return new(Ie=X(Ie))((Le,ot)=>{const it=new g.Hp({next:ze=>{try{nt(ze)}catch(He){ot(He),it.unsubscribe()}},error:ot,complete:Le});this.subscribe(it)})}_subscribe(nt){var Ie;return null===(Ie=this.source)||void 0===Ie?void 0:Ie.subscribe(nt)}[j.L](){return this}pipe(...nt){return function _e(je){return 0===je.length?le.y:1===je.length?je[0]:function(nt){return je.reduce((Ie,Le)=>Le(Ie),nt)}}(nt)(this)}toPromise(nt){return new(nt=X(nt))((Ie,Le)=>{let ot;this.subscribe(it=>ot=it,it=>Le(it),()=>Ie(ot))})}}return je.create=Ke=>new je(Ke),je})();function X(je){var Ke;return null!==(Ke=null!=je?je:Te.v.Promise)&&void 0!==Ke?Ke:Promise}},7579:(pt,ke,O)=>{"use strict";O.d(ke,{x:()=>Te});var g=O(8306),W=O(727);const le=(0,O(3888).d)(Ee=>function(){Ee(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var we=O(8737),_e=O(2806);let Te=(()=>{class Ee extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(X){const ge=new ve(this,this);return ge.operator=X,ge}_throwIfClosed(){if(this.closed)throw new le}next(X){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ge of this.currentObservers)ge.next(X)}})}error(X){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=X;const{observers:ge}=this;for(;ge.length;)ge.shift().error(X)}})}complete(){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:X}=this;for(;X.length;)X.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var X;return(null===(X=this.observers)||void 0===X?void 0:X.length)>0}_trySubscribe(X){return this._throwIfClosed(),super._trySubscribe(X)}_subscribe(X){return this._throwIfClosed(),this._checkFinalizedStatuses(X),this._innerSubscribe(X)}_innerSubscribe(X){const{hasError:ge,isStopped:qe,observers:je}=this;return ge||qe?W.Lc:(this.currentObservers=null,je.push(X),new W.w0(()=>{this.currentObservers=null,(0,we.P)(je,X)}))}_checkFinalizedStatuses(X){const{hasError:ge,thrownError:qe,isStopped:je}=this;ge?X.error(qe):je&&X.complete()}asObservable(){const X=new g.y;return X.source=this,X}}return Ee.create=(Q,X)=>new ve(Q,X),Ee})();class ve extends Te{constructor(Q,X){super(),this.destination=Q,this.source=X}next(Q){var X,ge;null===(ge=null===(X=this.destination)||void 0===X?void 0:X.next)||void 0===ge||ge.call(X,Q)}error(Q){var X,ge;null===(ge=null===(X=this.destination)||void 0===X?void 0:X.error)||void 0===ge||ge.call(X,Q)}complete(){var Q,X;null===(X=null===(Q=this.destination)||void 0===Q?void 0:Q.complete)||void 0===X||X.call(Q)}_subscribe(Q){var X,ge;return null!==(ge=null===(X=this.source)||void 0===X?void 0:X.subscribe(Q))&&void 0!==ge?ge:W.Lc}}},930:(pt,ke,O)=>{"use strict";O.d(ke,{Hp:()=>nt,Lv:()=>ge});var g=O(576),W=O(727),j=O(2416),le=O(7849),we=O(5032);const _e=Ee("C",void 0,void 0);function Ee(ze,He,Re){return{kind:ze,value:He,error:Re}}var Q=O(3410),X=O(2806);class ge extends W.w0{constructor(He){super(),this.isStopped=!1,He?(this.destination=He,(0,W.Nn)(He)&&He.add(this)):this.destination=it}static create(He,Re,at){return new nt(He,Re,at)}next(He){this.isStopped?ot(function ve(ze){return Ee("N",ze,void 0)}(He),this):this._next(He)}error(He){this.isStopped?ot(function Te(ze){return Ee("E",void 0,ze)}(He),this):(this.isStopped=!0,this._error(He))}complete(){this.isStopped?ot(_e,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(He){this.destination.next(He)}_error(He){try{this.destination.error(He)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const qe=Function.prototype.bind;function je(ze,He){return qe.call(ze,He)}class Ke{constructor(He){this.partialObserver=He}next(He){const{partialObserver:Re}=this;if(Re.next)try{Re.next(He)}catch(at){Ie(at)}}error(He){const{partialObserver:Re}=this;if(Re.error)try{Re.error(He)}catch(at){Ie(at)}else Ie(He)}complete(){const{partialObserver:He}=this;if(He.complete)try{He.complete()}catch(Re){Ie(Re)}}}class nt extends ge{constructor(He,Re,at){let ce;if(super(),(0,g.m)(He)||!He)ce={next:null!=He?He:void 0,error:null!=Re?Re:void 0,complete:null!=at?at:void 0};else{let be;this&&j.v.useDeprecatedNextContext?(be=Object.create(He),be.unsubscribe=()=>this.unsubscribe(),ce={next:He.next&&je(He.next,be),error:He.error&&je(He.error,be),complete:He.complete&&je(He.complete,be)}):ce=He}this.destination=new Ke(ce)}}function Ie(ze){j.v.useDeprecatedSynchronousErrorHandling?(0,X.O)(ze):(0,le.h)(ze)}function ot(ze,He){const{onStoppedNotification:Re}=j.v;Re&&Q.z.setTimeout(()=>Re(ze,He))}const it={closed:!0,next:we.Z,error:function Le(ze){throw ze},complete:we.Z}},727:(pt,ke,O)=>{"use strict";O.d(ke,{Lc:()=>_e,w0:()=>we,Nn:()=>Te});var g=O(576);const j=(0,O(3888).d)(Ee=>function(X){Ee(this),this.message=X?`${X.length} errors occurred during unsubscription:\n${X.map((ge,qe)=>`${qe+1}) ${ge.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=X});var le=O(8737);class we{constructor(Q){this.initialTeardown=Q,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Q;if(!this.closed){this.closed=!0;const{_parentage:X}=this;if(X)if(this._parentage=null,Array.isArray(X))for(const je of X)je.remove(this);else X.remove(this);const{initialTeardown:ge}=this;if((0,g.m)(ge))try{ge()}catch(je){Q=je instanceof j?je.errors:[je]}const{_finalizers:qe}=this;if(qe){this._finalizers=null;for(const je of qe)try{ve(je)}catch(Ke){Q=null!=Q?Q:[],Ke instanceof j?Q=[...Q,...Ke.errors]:Q.push(Ke)}}if(Q)throw new j(Q)}}add(Q){var X;if(Q&&Q!==this)if(this.closed)ve(Q);else{if(Q instanceof we){if(Q.closed||Q._hasParent(this))return;Q._addParent(this)}(this._finalizers=null!==(X=this._finalizers)&&void 0!==X?X:[]).push(Q)}}_hasParent(Q){const{_parentage:X}=this;return X===Q||Array.isArray(X)&&X.includes(Q)}_addParent(Q){const{_parentage:X}=this;this._parentage=Array.isArray(X)?(X.push(Q),X):X?[X,Q]:Q}_removeParent(Q){const{_parentage:X}=this;X===Q?this._parentage=null:Array.isArray(X)&&(0,le.P)(X,Q)}remove(Q){const{_finalizers:X}=this;X&&(0,le.P)(X,Q),Q instanceof we&&Q._removeParent(this)}}we.EMPTY=(()=>{const Ee=new we;return Ee.closed=!0,Ee})();const _e=we.EMPTY;function Te(Ee){return Ee instanceof we||Ee&&"closed"in Ee&&(0,g.m)(Ee.remove)&&(0,g.m)(Ee.add)&&(0,g.m)(Ee.unsubscribe)}function ve(Ee){(0,g.m)(Ee)?Ee():Ee.unsubscribe()}},2416:(pt,ke,O)=>{"use strict";O.d(ke,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(pt,ke,O)=>{"use strict";O.d(ke,{E:()=>W});const W=new(O(8306).y)(we=>we.complete())},8996:(pt,ke,O)=>{"use strict";O.d(ke,{D:()=>He});var g=O(8421),W=O(5363),j=O(9468),_e=O(8306),ve=O(2202),Ee=O(576),Q=O(9672);function ge(Re,at){if(!Re)throw new Error("Iterable cannot be null");return new _e.y(ce=>{(0,Q.f)(ce,at,()=>{const be=Re[Symbol.asyncIterator]();(0,Q.f)(ce,at,()=>{be.next().then(Ne=>{Ne.done?ce.complete():ce.next(Ne.value)})},0,!0)})})}var qe=O(3670),je=O(8239),Ke=O(1144),nt=O(6495),Ie=O(2206),Le=O(4532),ot=O(3260);function He(Re,at){return at?function ze(Re,at){if(null!=Re){if((0,qe.c)(Re))return function le(Re,at){return(0,g.Xf)(Re).pipe((0,j.R)(at),(0,W.Q)(at))}(Re,at);if((0,Ke.z)(Re))return function Te(Re,at){return new _e.y(ce=>{let be=0;return at.schedule(function(){be===Re.length?ce.complete():(ce.next(Re[be++]),ce.closed||this.schedule())})})}(Re,at);if((0,je.t)(Re))return function we(Re,at){return(0,g.Xf)(Re).pipe((0,j.R)(at),(0,W.Q)(at))}(Re,at);if((0,Ie.D)(Re))return ge(Re,at);if((0,nt.T)(Re))return function X(Re,at){return new _e.y(ce=>{let be;return(0,Q.f)(ce,at,()=>{be=Re[ve.h](),(0,Q.f)(ce,at,()=>{let Ne,se;try{({value:Ne,done:se}=be.next())}catch(me){return void ce.error(me)}se?ce.complete():ce.next(Ne)},0,!0)}),()=>(0,Ee.m)(null==be?void 0:be.return)&&be.return()})}(Re,at);if((0,ot.L)(Re))return function it(Re,at){return ge((0,ot.Q)(Re),at)}(Re,at)}throw(0,Le.z)(Re)}(Re,at):(0,g.Xf)(Re)}},8421:(pt,ke,O)=>{"use strict";O.d(ke,{Xf:()=>qe});var g=O(655),W=O(1144),j=O(8239),le=O(8306),we=O(3670),_e=O(2206),Te=O(4532),ve=O(6495),Ee=O(3260),Q=O(576),X=O(7849),ge=O(8822);function qe(ze){if(ze instanceof le.y)return ze;if(null!=ze){if((0,we.c)(ze))return function je(ze){return new le.y(He=>{const Re=ze[ge.L]();if((0,Q.m)(Re.subscribe))return Re.subscribe(He);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ze);if((0,W.z)(ze))return function Ke(ze){return new le.y(He=>{for(let Re=0;Re<ze.length&&!He.closed;Re++)He.next(ze[Re]);He.complete()})}(ze);if((0,j.t)(ze))return function nt(ze){return new le.y(He=>{ze.then(Re=>{He.closed||(He.next(Re),He.complete())},Re=>He.error(Re)).then(null,X.h)})}(ze);if((0,_e.D)(ze))return Le(ze);if((0,ve.T)(ze))return function Ie(ze){return new le.y(He=>{for(const Re of ze)if(He.next(Re),He.closed)return;He.complete()})}(ze);if((0,Ee.L)(ze))return function ot(ze){return Le((0,Ee.Q)(ze))}(ze)}throw(0,Te.z)(ze)}function Le(ze){return new le.y(He=>{(function it(ze,He){var Re,at,ce,be;return(0,g.mG)(this,void 0,void 0,function*(){try{for(Re=(0,g.KL)(ze);!(at=yield Re.next()).done;)if(He.next(at.value),He.closed)return}catch(Ne){ce={error:Ne}}finally{try{at&&!at.done&&(be=Re.return)&&(yield be.call(Re))}finally{if(ce)throw ce.error}}He.complete()})})(ze,He).catch(Re=>He.error(Re))})}},6451:(pt,ke,O)=>{"use strict";O.d(ke,{T:()=>_e});var g=O(8189),W=O(8421),j=O(515),le=O(7669),we=O(8996);function _e(...Te){const ve=(0,le.yG)(Te),Ee=(0,le._6)(Te,1/0),Q=Te;return Q.length?1===Q.length?(0,W.Xf)(Q[0]):(0,g.J)(Ee)((0,we.D)(Q,ve)):j.E}},5403:(pt,ke,O)=>{"use strict";O.d(ke,{x:()=>W});var g=O(930);function W(le,we,_e,Te,ve){return new j(le,we,_e,Te,ve)}class j extends g.Lv{constructor(we,_e,Te,ve,Ee,Q){super(we),this.onFinalize=Ee,this.shouldUnsubscribe=Q,this._next=_e?function(X){try{_e(X)}catch(ge){we.error(ge)}}:super._next,this._error=ve?function(X){try{ve(X)}catch(ge){we.error(ge)}finally{this.unsubscribe()}}:super._error,this._complete=Te?function(){try{Te()}catch(X){we.error(X)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var we;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:_e}=this;super.unsubscribe(),!_e&&(null===(we=this.onFinalize)||void 0===we||we.call(this))}}}},4004:(pt,ke,O)=>{"use strict";O.d(ke,{U:()=>j});var g=O(4482),W=O(5403);function j(le,we){return(0,g.e)((_e,Te)=>{let ve=0;_e.subscribe((0,W.x)(Te,Ee=>{Te.next(le.call(we,Ee,ve++))}))})}},8189:(pt,ke,O)=>{"use strict";O.d(ke,{J:()=>j});var g=O(5577),W=O(4671);function j(le=1/0){return(0,g.z)(W.y,le)}},5577:(pt,ke,O)=>{"use strict";O.d(ke,{z:()=>ve});var g=O(4004),W=O(8421),j=O(4482),le=O(9672),we=O(5403),Te=O(576);function ve(Ee,Q,X=1/0){return(0,Te.m)(Q)?ve((ge,qe)=>(0,g.U)((je,Ke)=>Q(ge,je,qe,Ke))((0,W.Xf)(Ee(ge,qe))),X):("number"==typeof Q&&(X=Q),(0,j.e)((ge,qe)=>function _e(Ee,Q,X,ge,qe,je,Ke,nt){const Ie=[];let Le=0,ot=0,it=!1;const ze=()=>{it&&!Ie.length&&!Le&&Q.complete()},He=at=>Le<ge?Re(at):Ie.push(at),Re=at=>{je&&Q.next(at),Le++;let ce=!1;(0,W.Xf)(X(at,ot++)).subscribe((0,we.x)(Q,be=>{null==qe||qe(be),je?He(be):Q.next(be)},()=>{ce=!0},void 0,()=>{if(ce)try{for(Le--;Ie.length&&Le<ge;){const be=Ie.shift();Ke?(0,le.f)(Q,Ke,()=>Re(be)):Re(be)}ze()}catch(be){Q.error(be)}}))};return Ee.subscribe((0,we.x)(Q,He,()=>{it=!0,ze()})),()=>{null==nt||nt()}}(ge,qe,Ee,X)))}},5363:(pt,ke,O)=>{"use strict";O.d(ke,{Q:()=>le});var g=O(9672),W=O(4482),j=O(5403);function le(we,_e=0){return(0,W.e)((Te,ve)=>{Te.subscribe((0,j.x)(ve,Ee=>(0,g.f)(ve,we,()=>ve.next(Ee),_e),()=>(0,g.f)(ve,we,()=>ve.complete(),_e),Ee=>(0,g.f)(ve,we,()=>ve.error(Ee),_e)))})}},3099:(pt,ke,O)=>{"use strict";O.d(ke,{B:()=>_e});var g=O(8996),W=O(5698),j=O(7579),le=O(930),we=O(4482);function _e(ve={}){const{connector:Ee=(()=>new j.x),resetOnError:Q=!0,resetOnComplete:X=!0,resetOnRefCountZero:ge=!0}=ve;return qe=>{let je=null,Ke=null,nt=null,Ie=0,Le=!1,ot=!1;const it=()=>{null==Ke||Ke.unsubscribe(),Ke=null},ze=()=>{it(),je=nt=null,Le=ot=!1},He=()=>{const Re=je;ze(),null==Re||Re.unsubscribe()};return(0,we.e)((Re,at)=>{Ie++,!ot&&!Le&&it();const ce=nt=null!=nt?nt:Ee();at.add(()=>{Ie--,0===Ie&&!ot&&!Le&&(Ke=Te(He,ge))}),ce.subscribe(at),je||(je=new le.Hp({next:be=>ce.next(be),error:be=>{ot=!0,it(),Ke=Te(ze,Q,be),ce.error(be)},complete:()=>{Le=!0,it(),Ke=Te(ze,X),ce.complete()}}),(0,g.D)(Re).subscribe(je))})(qe)}}function Te(ve,Ee,...Q){return!0===Ee?(ve(),null):!1===Ee?null:Ee(...Q).pipe((0,W.q)(1)).subscribe(()=>ve())}},9468:(pt,ke,O)=>{"use strict";O.d(ke,{R:()=>W});var g=O(4482);function W(j,le=0){return(0,g.e)((we,_e)=>{_e.add(j.schedule(()=>we.subscribe(_e),le))})}},5698:(pt,ke,O)=>{"use strict";O.d(ke,{q:()=>le});var g=O(515),W=O(4482),j=O(5403);function le(we){return we<=0?()=>g.E:(0,W.e)((_e,Te)=>{let ve=0;_e.subscribe((0,j.x)(Te,Ee=>{++ve<=we&&(Te.next(Ee),we<=ve&&Te.complete())}))})}},8505:(pt,ke,O)=>{"use strict";O.d(ke,{b:()=>we});var g=O(576),W=O(4482),j=O(5403),le=O(4671);function we(_e,Te,ve){const Ee=(0,g.m)(_e)||Te||ve?{next:_e,error:Te,complete:ve}:_e;return Ee?(0,W.e)((Q,X)=>{var ge;null===(ge=Ee.subscribe)||void 0===ge||ge.call(Ee);let qe=!0;Q.subscribe((0,j.x)(X,je=>{var Ke;null===(Ke=Ee.next)||void 0===Ke||Ke.call(Ee,je),X.next(je)},()=>{var je;qe=!1,null===(je=Ee.complete)||void 0===je||je.call(Ee),X.complete()},je=>{var Ke;qe=!1,null===(Ke=Ee.error)||void 0===Ke||Ke.call(Ee,je),X.error(je)},()=>{var je,Ke;qe&&(null===(je=Ee.unsubscribe)||void 0===je||je.call(Ee)),null===(Ke=Ee.finalize)||void 0===Ke||Ke.call(Ee)}))}):le.y}},4408:(pt,ke,O)=>{"use strict";O.d(ke,{o:()=>we});var g=O(727);class W extends g.w0{constructor(Te,ve){super()}schedule(Te,ve=0){return this}}const j={setInterval(_e,Te,...ve){const{delegate:Ee}=j;return(null==Ee?void 0:Ee.setInterval)?Ee.setInterval(_e,Te,...ve):setInterval(_e,Te,...ve)},clearInterval(_e){const{delegate:Te}=j;return((null==Te?void 0:Te.clearInterval)||clearInterval)(_e)},delegate:void 0};var le=O(8737);class we extends W{constructor(Te,ve){super(Te,ve),this.scheduler=Te,this.work=ve,this.pending=!1}schedule(Te,ve=0){if(this.closed)return this;this.state=Te;const Ee=this.id,Q=this.scheduler;return null!=Ee&&(this.id=this.recycleAsyncId(Q,Ee,ve)),this.pending=!0,this.delay=ve,this.id=this.id||this.requestAsyncId(Q,this.id,ve),this}requestAsyncId(Te,ve,Ee=0){return j.setInterval(Te.flush.bind(Te,this),Ee)}recycleAsyncId(Te,ve,Ee=0){if(null!=Ee&&this.delay===Ee&&!1===this.pending)return ve;j.clearInterval(ve)}execute(Te,ve){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ee=this._execute(Te,ve);if(Ee)return Ee;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Te,ve){let Q,Ee=!1;try{this.work(Te)}catch(X){Ee=!0,Q=X||new Error("Scheduled action threw falsy error")}if(Ee)return this.unsubscribe(),Q}unsubscribe(){if(!this.closed){const{id:Te,scheduler:ve}=this,{actions:Ee}=ve;this.work=this.state=this.scheduler=null,this.pending=!1,(0,le.P)(Ee,this),null!=Te&&(this.id=this.recycleAsyncId(ve,Te,null)),this.delay=null,super.unsubscribe()}}}},7565:(pt,ke,O)=>{"use strict";O.d(ke,{v:()=>j});var g=O(6063);class W{constructor(we,_e=W.now){this.schedulerActionCtor=we,this.now=_e}schedule(we,_e=0,Te){return new this.schedulerActionCtor(this,we).schedule(Te,_e)}}W.now=g.l.now;class j extends W{constructor(we,_e=W.now){super(we,_e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(we){const{actions:_e}=this;if(this._active)return void _e.push(we);let Te;this._active=!0;do{if(Te=we.execute(we.state,we.delay))break}while(we=_e.shift());if(this._active=!1,Te){for(;we=_e.shift();)we.unsubscribe();throw Te}}}},4986:(pt,ke,O)=>{"use strict";O.d(ke,{z:()=>j});var g=O(4408);const j=new(O(7565).v)(g.o)},6063:(pt,ke,O)=>{"use strict";O.d(ke,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(pt,ke,O)=>{"use strict";O.d(ke,{z:()=>g});const g={setTimeout(W,j,...le){const{delegate:we}=g;return(null==we?void 0:we.setTimeout)?we.setTimeout(W,j,...le):setTimeout(W,j,...le)},clearTimeout(W){const{delegate:j}=g;return((null==j?void 0:j.clearTimeout)||clearTimeout)(W)},delegate:void 0}},2202:(pt,ke,O)=>{"use strict";O.d(ke,{h:()=>W});const W=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(pt,ke,O)=>{"use strict";O.d(ke,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(pt,ke,O)=>{"use strict";O.d(ke,{_6:()=>_e,jO:()=>le,yG:()=>we});var g=O(576);function j(Te){return Te[Te.length-1]}function le(Te){return(0,g.m)(j(Te))?Te.pop():void 0}function we(Te){return function W(Te){return Te&&(0,g.m)(Te.schedule)}(j(Te))?Te.pop():void 0}function _e(Te,ve){return"number"==typeof j(Te)?Te.pop():ve}},8737:(pt,ke,O)=>{"use strict";function g(W,j){if(W){const le=W.indexOf(j);0<=le&&W.splice(le,1)}}O.d(ke,{P:()=>g})},3888:(pt,ke,O)=>{"use strict";function g(W){const le=W(we=>{Error.call(we),we.stack=(new Error).stack});return le.prototype=Object.create(Error.prototype),le.prototype.constructor=le,le}O.d(ke,{d:()=>g})},2806:(pt,ke,O)=>{"use strict";O.d(ke,{O:()=>le,x:()=>j});var g=O(2416);let W=null;function j(we){if(g.v.useDeprecatedSynchronousErrorHandling){const _e=!W;if(_e&&(W={errorThrown:!1,error:null}),we(),_e){const{errorThrown:Te,error:ve}=W;if(W=null,Te)throw ve}}else we()}function le(we){g.v.useDeprecatedSynchronousErrorHandling&&W&&(W.errorThrown=!0,W.error=we)}},9672:(pt,ke,O)=>{"use strict";function g(W,j,le,we=0,_e=!1){const Te=j.schedule(function(){le(),_e?W.add(this.schedule(null,we)):this.unsubscribe()},we);if(W.add(Te),!_e)return Te}O.d(ke,{f:()=>g})},4671:(pt,ke,O)=>{"use strict";function g(W){return W}O.d(ke,{y:()=>g})},1144:(pt,ke,O)=>{"use strict";O.d(ke,{z:()=>g});const g=W=>W&&"number"==typeof W.length&&"function"!=typeof W},2206:(pt,ke,O)=>{"use strict";O.d(ke,{D:()=>W});var g=O(576);function W(j){return Symbol.asyncIterator&&(0,g.m)(null==j?void 0:j[Symbol.asyncIterator])}},576:(pt,ke,O)=>{"use strict";function g(W){return"function"==typeof W}O.d(ke,{m:()=>g})},3670:(pt,ke,O)=>{"use strict";O.d(ke,{c:()=>j});var g=O(8822),W=O(576);function j(le){return(0,W.m)(le[g.L])}},6495:(pt,ke,O)=>{"use strict";O.d(ke,{T:()=>j});var g=O(2202),W=O(576);function j(le){return(0,W.m)(null==le?void 0:le[g.h])}},8239:(pt,ke,O)=>{"use strict";O.d(ke,{t:()=>W});var g=O(576);function W(j){return(0,g.m)(null==j?void 0:j.then)}},3260:(pt,ke,O)=>{"use strict";O.d(ke,{L:()=>le,Q:()=>j});var g=O(655),W=O(576);function j(we){return(0,g.FC)(this,arguments,function*(){const Te=we.getReader();try{for(;;){const{value:ve,done:Ee}=yield(0,g.qq)(Te.read());if(Ee)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(ve)}}finally{Te.releaseLock()}})}function le(we){return(0,W.m)(null==we?void 0:we.getReader)}},4482:(pt,ke,O)=>{"use strict";O.d(ke,{A:()=>W,e:()=>j});var g=O(576);function W(le){return(0,g.m)(null==le?void 0:le.lift)}function j(le){return we=>{if(W(we))return we.lift(function(_e){try{return le(_e,this)}catch(Te){this.error(Te)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(pt,ke,O)=>{"use strict";function g(){}O.d(ke,{Z:()=>g})},7849:(pt,ke,O)=>{"use strict";O.d(ke,{h:()=>j});var g=O(2416),W=O(3410);function j(le){W.z.setTimeout(()=>{const{onUnhandledError:we}=g.v;if(!we)throw le;we(le)})}},4532:(pt,ke,O)=>{"use strict";function g(W){return new TypeError(`You provided ${null!==W&&"object"==typeof W?"an invalid object":`'${W}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(ke,{z:()=>g})},655:(pt,ke,O)=>{"use strict";function le(se,me){var pe={};for(var Se in se)Object.prototype.hasOwnProperty.call(se,Se)&&me.indexOf(Se)<0&&(pe[Se]=se[Se]);if(null!=se&&"function"==typeof Object.getOwnPropertySymbols){var oe=0;for(Se=Object.getOwnPropertySymbols(se);oe<Se.length;oe++)me.indexOf(Se[oe])<0&&Object.prototype.propertyIsEnumerable.call(se,Se[oe])&&(pe[Se[oe]]=se[Se[oe]])}return pe}function ve(se,me,pe,Se){return new(pe||(pe=Promise))(function(Qe,et){function Tt(zt){try{Xe(Se.next(zt))}catch(Vt){et(Vt)}}function Ut(zt){try{Xe(Se.throw(zt))}catch(Vt){et(Vt)}}function Xe(zt){zt.done?Qe(zt.value):function oe(Qe){return Qe instanceof pe?Qe:new pe(function(et){et(Qe)})}(zt.value).then(Tt,Ut)}Xe((Se=Se.apply(se,me||[])).next())})}function Ie(se){return this instanceof Ie?(this.v=se,this):new Ie(se)}function Le(se,me,pe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var oe,Se=pe.apply(se,me||[]),Qe=[];return oe={},et("next"),et("throw"),et("return"),oe[Symbol.asyncIterator]=function(){return this},oe;function et(Nt){Se[Nt]&&(oe[Nt]=function(Xt){return new Promise(function(Gt,wn){Qe.push([Nt,Xt,Gt,wn])>1||Tt(Nt,Xt)})})}function Tt(Nt,Xt){try{!function Ut(Nt){Nt.value instanceof Ie?Promise.resolve(Nt.value.v).then(Xe,zt):Vt(Qe[0][2],Nt)}(Se[Nt](Xt))}catch(Gt){Vt(Qe[0][3],Gt)}}function Xe(Nt){Tt("next",Nt)}function zt(Nt){Tt("throw",Nt)}function Vt(Nt,Xt){Nt(Xt),Qe.shift(),Qe.length&&Tt(Qe[0][0],Qe[0][1])}}function it(se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pe,me=se[Symbol.asyncIterator];return me?me.call(se):(se=function ge(se){var me="function"==typeof Symbol&&Symbol.iterator,pe=me&&se[me],Se=0;if(pe)return pe.call(se);if(se&&"number"==typeof se.length)return{next:function(){return se&&Se>=se.length&&(se=void 0),{value:se&&se[Se++],done:!se}}};throw new TypeError(me?"Object is not iterable.":"Symbol.iterator is not defined.")}(se),pe={},Se("next"),Se("throw"),Se("return"),pe[Symbol.asyncIterator]=function(){return this},pe);function Se(Qe){pe[Qe]=se[Qe]&&function(et){return new Promise(function(Tt,Ut){!function oe(Qe,et,Tt,Ut){Promise.resolve(Ut).then(function(Xe){Qe({value:Xe,done:Tt})},et)}(Tt,Ut,(et=se[Qe](et)).done,et.value)})}}}O.d(ke,{FC:()=>Le,KL:()=>it,_T:()=>le,mG:()=>ve,qq:()=>Ie})},5e3:(pt,ke,O)=>{"use strict";O.d(ke,{$8M:()=>Ho,$Z:()=>kf,AFp:()=>s0,AaK:()=>ve,CHM:()=>Us,CRH:()=>zC,CZH:()=>r0,CqO:()=>Qc,EJc:()=>YA,EpF:()=>tv,F4k:()=>nv,FYo:()=>jv,FiY:()=>$i,G48:()=>Xs,GfV:()=>Hv,Gpc:()=>X,JOm:()=>ku,LFG:()=>ut,LSH:()=>Ld,Lbi:()=>ZA,NdJ:()=>Jg,OlP:()=>Tr,Oqu:()=>ll,PXZ:()=>mI,Q6J:()=>rh,QGY:()=>Qg,Qsj:()=>oA,R0b:()=>au,RDi:()=>Va,Rgc:()=>ou,SBq:()=>hl,Sil:()=>QA,Suo:()=>jC,TTD:()=>Fa,TgZ:()=>Yc,VLi:()=>fI,X6Q:()=>uc,XFs:()=>xt,Xpm:()=>St,Y36:()=>_n,YKP:()=>CC,YNc:()=>Zy,Yjl:()=>lt,Yz7:()=>Xt,ZZ4:()=>M0,_Bn:()=>Xf,_UZ:()=>ev,_Vd:()=>tp,_c5:()=>Rh,_uU:()=>dh,aQg:()=>dp,c2e:()=>KA,cJS:()=>wn,cg1:()=>Hf,dDg:()=>ex,deG:()=>ef,dqk:()=>en,eFA:()=>m0,ekj:()=>uv,g9A:()=>aI,h0i:()=>Eh,hGG:()=>hp,hij:()=>cl,iGM:()=>BC,ifc:()=>cn,ip1:()=>oI,kL8:()=>$f,lG2:()=>Ue,n5z:()=>Ir,oAB:()=>Ce,oxw:()=>Db,q4F:()=>wC,qLn:()=>ag,qOj:()=>Hg,qZA:()=>Co,sBO:()=>Hm,sIi:()=>Mf,s_b:()=>km,soG:()=>l0,tBr:()=>Ca,tb:()=>u0,tp0:()=>as,uIk:()=>Gy,vHH:()=>Ke,vpe:()=>Ts,wAp:()=>Bt,xp6:()=>kD,z2F:()=>zm,zSh:()=>jg,zs3:()=>Zo});var g=O(7579),W=O(727),j=O(8306),le=O(6451),we=O(3099);function _e(s){for(let o in s)if(s[o]===_e)return o;throw Error("Could not find renamed property on target object.")}function Te(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function ve(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ve).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function Ee(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const Q=_e({__forward_ref__:_e});function X(s){return s.__forward_ref__=X,s.toString=function(){return ve(this())},s}function ge(s){return qe(s)?s():s}function qe(s){return"function"==typeof s&&s.hasOwnProperty(Q)&&s.__forward_ref__===X}class Ke extends Error{constructor(o,u){super(function nt(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,u)),this.code=o}}function Ie(s){return"string"==typeof s?s:null==s?"":String(s)}function Le(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Ie(s)}function He(s,o){const u=o?` in ${o}`:"";throw new Ke(-201,`No provider for ${Le(s)} found${u}`)}function Ut(s,o){null==s&&function Xe(s,o,u,d){throw new Error(`ASSERTION ERROR: ${s}`+(null==d?"":` [Expected=> ${u} ${d} ${o} <=Actual]`))}(o,s,null,"!=")}function Xt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function wn(s){return{providers:s.providers||[],imports:s.imports||[]}}function Vn(s){return Ei(s,bi)||Ei(s,Xn)}function Ei(s,o){return s.hasOwnProperty(o)?s[o]:null}function hs(s){return s&&(s.hasOwnProperty(Li)||s.hasOwnProperty(Ci))?s[Li]:null}const bi=_e({\u0275prov:_e}),Li=_e({\u0275inj:_e}),Xn=_e({ngInjectableDef:_e}),Ci=_e({ngInjectorDef:_e});var xt=(()=>((xt=xt||{})[xt.Default=0]="Default",xt[xt.Host=1]="Host",xt[xt.Self=2]="Self",xt[xt.SkipSelf=4]="SkipSelf",xt[xt.Optional=8]="Optional",xt))();let Yr;function Cn(s){const o=Yr;return Yr=s,o}function Fr(s,o,u){const d=Vn(s);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:u&xt.Optional?null:void 0!==o?o:void He(ve(s),"Injector")}function ui(s){return{toString:s}.toString()}var Nn=(()=>((Nn=Nn||{})[Nn.OnPush=0]="OnPush",Nn[Nn.Default=1]="Default",Nn))(),cn=(()=>{return(s=cn||(cn={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",cn;var s})();const bt="undefined"!=typeof globalThis&&globalThis,mt="undefined"!=typeof window&&window,Fi="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,en=bt||"undefined"!=typeof global&&global||mt||Fi,Tn={},K=[],ne=_e({\u0275cmp:_e}),ie=_e({\u0275dir:_e}),Pe=_e({\u0275pipe:_e}),ee=_e({\u0275mod:_e}),he=_e({\u0275fac:_e}),$e=_e({__NG_ELEMENT_ID__:_e});let dt=0;function St(s){return ui(()=>{const u={},d={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Nn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||K,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||cn.Emulated,id:"c",styles:s.styles||K,_:null,setInput:null,schemas:s.schemas||null,tView:null},h=s.directives,m=s.features,E=s.pipes;return d.id+=dt++,d.inputs=q(s.inputs,u),d.outputs=q(s.outputs),m&&m.forEach(I=>I(d)),d.directiveDefs=h?()=>("function"==typeof h?h():h).map(Mn):null,d.pipeDefs=E?()=>("function"==typeof E?E():E).map(Ot):null,d})}function Mn(s){return Et(s)||function Wt(s){return s[ie]||null}(s)}function Ot(s){return function sn(s){return s[Pe]||null}(s)}const wr={};function Ce(s){return ui(()=>{const o={type:s.type,bootstrap:s.bootstrap||K,declarations:s.declarations||K,imports:s.imports||K,exports:s.exports||K,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(wr[s.id]=s.type),o})}function q(s,o){if(null==s)return Tn;const u={};for(const d in s)if(s.hasOwnProperty(d)){let h=s[d],m=h;Array.isArray(h)&&(m=h[1],h=h[0]),u[h]=d,o&&(o[h]=m)}return u}const Ue=St;function lt(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function Et(s){return s[ne]||null}function tn(s,o){const u=s[ee]||null;if(!u&&!0===o)throw new Error(`Type ${ve(s)} does not have '\u0275mod' property.`);return u}function is(s){return Array.isArray(s)&&"object"==typeof s[1]}function Jr(s){return Array.isArray(s)&&!0===s[1]}function ao(s){return 0!=(8&s.flags)}function Qn(s){return 2==(2&s.flags)}function di(s){return 1==(1&s.flags)}function jr(s){return null!==s.template}function Oa(s){return 0!=(512&s[2])}function Pr(s,o){return s.hasOwnProperty(he)?s[he]:null}class ko{constructor(o,u,d){this.previousValue=o,this.currentValue=u,this.firstChange=d}isFirstChange(){return this.firstChange}}function Fa(){return ca}function ca(s){return s.type.prototype.ngOnChanges&&(s.setInput=Ed),qu}function qu(){const s=yn(this),o=null==s?void 0:s.current;if(o){const u=s.previous;if(u===Tn)s.previous=o;else for(let d in o)u[d]=o[d];s.current=null,this.ngOnChanges(o)}}function Ed(s,o,u,d){const h=yn(s)||function Os(s,o){return s[co]=o}(s,{previous:Tn,current:null}),m=h.current||(h.current={}),E=h.previous,I=this.declaredInputs[u],S=E[I];m[I]=new ko(S&&S.currentValue,o,E===Tn),s[d]=o}Fa.ngInherit=!0;const co="__ngSimpleChanges__";function yn(s){return s[co]||null}let gu;function Va(s){gu=s}function On(s){return!!s.listen}const ha={createRenderer:(s,o)=>function Ls(){return void 0!==gu?gu:"undefined"!=typeof document?document:void 0}()};function Pn(s){for(;Array.isArray(s);)s=s[0];return s}function No(s,o){return Pn(o[s])}function Er(s,o){return Pn(o[s.index])}function tr(s,o){return s.data[o]}function hr(s,o){const u=o[s];return is(u)?u:u[0]}function Vi(s){return 4==(4&s[2])}function _s(s){return 128==(128&s[2])}function lr(s,o){return null==o?null:s[o]}function Fs(s){s[18]=0}function ho(s,o){s[5]+=o;let u=s,d=s[3];for(;null!==d&&(1===o&&1===u[5]||-1===o&&0===u[5]);)d[5]+=o,u=d,d=d[3]}const Rt={lFrame:Cl(null),bindingsEnabled:!0};function Fo(){return Rt.bindingsEnabled}function Ve(){return Rt.lFrame.lView}function dn(){return Rt.lFrame.tView}function Us(s){return Rt.lFrame.contextLView=s,s[8]}function qn(){let s=Uo();for(;null!==s&&64===s.type;)s=s.parent;return s}function Uo(){return Rt.lFrame.currentTNode}function hi(s,o){const u=Rt.lFrame;u.currentTNode=s,u.isParent=o}function yu(){return Rt.lFrame.isParent}function pa(){return Rt.lFrame.bindingIndex++}function vu(s,o){const u=Rt.lFrame;u.bindingIndex=u.bindingRootIndex=s,$a(o)}function $a(s){Rt.lFrame.currentDirectiveIndex=s}function wu(){return Rt.lFrame.currentQueryIndex}function Ga(s){Rt.lFrame.currentQueryIndex=s}function po(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function go(s,o,u){if(u&xt.SkipSelf){let h=o,m=s;for(;!(h=h.parent,null!==h||u&xt.Host||(h=po(m),null===h||(m=m[15],10&h.type))););if(null===h)return!1;o=h,s=m}const d=Rt.lFrame=mo();return d.currentTNode=o,d.lView=s,!0}function Bo(s){const o=mo(),u=s[1];Rt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function mo(){const s=Rt.lFrame,o=null===s?null:s.child;return null===o?Cl(s):o}function Cl(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Eu(){const s=Rt.lFrame;return Rt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const bu=Eu;function gi(){const s=Eu();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Hr(){return Rt.lFrame.selectedIndex}function $r(s){Rt.lFrame.selectedIndex=s}function nr(){const s=Rt.lFrame;return tr(s.tView,s.selectedIndex)}function zs(s,o){for(let u=o.directiveStart,d=o.directiveEnd;u<d;u++){const m=s.data[u].type.prototype,{ngAfterContentInit:E,ngAfterContentChecked:I,ngAfterViewInit:S,ngAfterViewChecked:k,ngOnDestroy:F}=m;E&&(s.contentHooks||(s.contentHooks=[])).push(-u,E),I&&((s.contentHooks||(s.contentHooks=[])).push(u,I),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,I)),S&&(s.viewHooks||(s.viewHooks=[])).push(-u,S),k&&((s.viewHooks||(s.viewHooks=[])).push(u,k),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,k)),null!=F&&(s.destroyHooks||(s.destroyHooks=[])).push(u,F)}}function vs(s,o,u){Il(s,o,3,u)}function _a(s,o,u,d){(3&s[2])===u&&Il(s,o,u,d)}function Cr(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function Il(s,o,u,d){const m=null!=d?d:-1,E=o.length-1;let I=0;for(let S=void 0!==d?65535&s[18]:0;S<E;S++)if("number"==typeof o[S+1]){if(I=o[S],null!=d&&I>=d)break}else o[S]<0&&(s[18]+=65536),(I<m||-1==m)&&(_o(s,u,o,S),s[18]=(4294901760&s[18])+S+2),S++}function _o(s,o,u,d){const h=u[d]<0,m=u[d+1],I=s[h?-u[d]:u[d]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{m.call(I)}finally{}}}else try{m.call(I)}finally{}}class jo{constructor(o,u,d){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=d}}function os(s,o,u){const d=On(s);let h=0;for(;h<u.length;){const m=u[h];if("number"==typeof m){if(0!==m)break;h++;const E=u[h++],I=u[h++],S=u[h++];d?s.setAttribute(o,I,S,E):o.setAttributeNS(E,I,S)}else{const E=m,I=u[++h];ri(E)?d&&s.setProperty(o,E,I):d?s.setAttribute(o,E,I):o.setAttribute(E,I),h++}}return h}function ni(s){return 3===s||4===s||6===s}function ri(s){return 64===s.charCodeAt(0)}function va(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let d=0;d<o.length;d++){const h=o[d];"number"==typeof h?u=h:0===u||wa(s,u,h,null,-1===u||2===u?o[++d]:null)}}return s}function wa(s,o,u,d,h){let m=0,E=s.length;if(-1===o)E=-1;else for(;m<s.length;){const I=s[m++];if("number"==typeof I){if(I===o){E=-1;break}if(I>o){E=m-1;break}}}for(;m<s.length;){const I=s[m];if("number"==typeof I)break;if(I===u){if(null===d)return void(null!==h&&(s[m+1]=h));if(d===s[m+1])return void(s[m+2]=h)}m++,null!==d&&m++,null!==h&&m++}-1!==E&&(s.splice(E,0,o),m=E+1),s.splice(m++,0,u),null!==d&&s.splice(m++,0,d),null!==h&&s.splice(m++,0,h)}function Yu(s){return-1!==s}function Fn(s){return 32767&s}function l(s,o){let u=function Tl(s){return s>>16}(s),d=o;for(;u>0;)d=d[15],u--;return d}let f=!0;function v(s){const o=f;return f=s,o}let Y=0;function De(s,o){const u=_t(s,o);if(-1!==u)return u;const d=o[1];d.firstCreatePass&&(s.injectorIndex=o.length,We(d.data,s),We(o,null),We(d.blueprint,null));const h=Lt(s,o),m=s.injectorIndex;if(Yu(h)){const E=Fn(h),I=l(h,o),S=I[1].data;for(let k=0;k<8;k++)o[m+k]=I[E+k]|S[E+k]}return o[m+8]=h,m}function We(s,o){s.push(0,0,0,0,0,0,0,0,o)}function _t(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Lt(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,d=null,h=o;for(;null!==h;){const m=h[1],E=m.type;if(d=2===E?m.declTNode:1===E?h[6]:null,null===d)return-1;if(u++,h=h[15],-1!==d.injectorIndex)return d.injectorIndex|u<<16}return-1}function Kt(s,o,u){!function de(s,o,u){let d;"string"==typeof u?d=u.charCodeAt(0)||0:u.hasOwnProperty($e)&&(d=u[$e]),null==d&&(d=u[$e]=Y++);const h=255&d;o.data[s+(h>>5)]|=1<<h}(s,o,u)}function Di(s,o,u){if(u&xt.Optional)return s;He(o,"NodeInjector")}function Hs(s,o,u,d){if(u&xt.Optional&&void 0===d&&(d=null),0==(u&(xt.Self|xt.Host))){const h=s[9],m=Cn(void 0);try{return h?h.get(o,d,u&xt.Optional):Fr(o,d,u&xt.Optional)}finally{Cn(m)}}return Di(d,o,u)}function ii(s,o,u,d=xt.Default,h){if(null!==s){const m=function Dl(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty($e)?s[$e]:void 0;return"number"==typeof o?o>=0?255&o:qa:o}(u);if("function"==typeof m){if(!go(o,s,d))return d&xt.Host?Di(h,u,d):Hs(o,u,d,h);try{const E=m(d);if(null!=E||d&xt.Optional)return E;He(u)}finally{bu()}}else if("number"==typeof m){let E=null,I=_t(s,o),S=-1,k=d&xt.Host?o[16][6]:null;for((-1===I||d&xt.SkipSelf)&&(S=-1===I?Lt(s,o):o[I+8],-1!==S&&rr(d,!1)?(E=o[1],I=Fn(S),o=l(S,o)):I=-1);-1!==I;){const F=o[1];if(fr(m,I,F.data)){const $=Iu(I,o,u,E,d,k);if($!==$s)return $}S=o[I+8],-1!==S&&rr(d,o[1].data[I+8]===k)&&fr(m,I,o)?(E=F,I=Fn(S),o=l(S,o)):I=-1}}}return Hs(o,u,d,h)}const $s={};function qa(){return new Si(qn(),Ve())}function Iu(s,o,u,d,h,m){const E=o[1],I=E.data[s+8],F=Tu(I,E,u,null==d?Qn(I)&&f:d!=E&&0!=(3&I.type),h&xt.Host&&m===I);return null!==F?Bi(o,E,F,I):$s}function Tu(s,o,u,d,h){const m=s.providerIndexes,E=o.data,I=1048575&m,S=s.directiveStart,F=m>>20,te=h?I+F:s.directiveEnd;for(let fe=d?I:I+F;fe<te;fe++){const Fe=E[fe];if(fe<S&&u===Fe||fe>=S&&Fe.type===u)return fe}if(h){const fe=E[S];if(fe&&jr(fe)&&fe.type===u)return S}return null}function Bi(s,o,u,d){let h=s[u];const m=o.data;if(function ya(s){return s instanceof jo}(h)){const E=h;E.resolving&&function ot(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Ke(-200,`Circular dependency in DI detected for ${s}${u}`)}(Le(m[u]));const I=v(E.canSeeViewProviders);E.resolving=!0;const S=E.injectImpl?Cn(E.injectImpl):null;go(s,d,xt.Default);try{h=s[u]=E.factory(void 0,m,s,d),o.firstCreatePass&&u>=d.directiveStart&&function ma(s,o,u){const{ngOnChanges:d,ngOnInit:h,ngDoCheck:m}=o.type.prototype;if(d){const E=ca(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,E),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,E)}h&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,h),m&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,m),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,m))}(u,m[u],o)}finally{null!==S&&Cn(S),v(I),E.resolving=!1,bu()}}return h}function fr(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function rr(s,o){return!(s&xt.Self||s&xt.Host&&o)}class Si{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,d){return ii(this._tNode,this._lView,o,d,u)}}function Ir(s){return ui(()=>{const o=s.prototype.constructor,u=o[he]||yo(o),d=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==d;){const m=h[he]||yo(h);if(m&&m!==u)return m;h=Object.getPrototypeOf(h)}return m=>new m})}function yo(s){return qe(s)?()=>{const o=yo(ge(s));return o&&o()}:Pr(s)}function Ho(s){return function mi(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const d=u.length;let h=0;for(;h<d;){const m=u[h];if(ni(m))break;if(0===m)h+=2;else if("number"==typeof m)for(h++;h<d&&"string"==typeof u[h];)h++;else{if(m===o)return u[h+1];h+=2}}}return null}(qn(),s)}const Ai="__parameters__";function Gs(s,o,u){return ui(()=>{const d=function Gr(s){return function(...u){if(s){const d=s(...u);for(const h in d)this[h]=d[h]}}}(o);function h(...m){if(this instanceof h)return d.apply(this,m),this;const E=new h(...m);return I.annotation=E,I;function I(S,k,F){const $=S.hasOwnProperty(Ai)?S[Ai]:Object.defineProperty(S,Ai,{value:[]})[Ai];for(;$.length<=F;)$.push(null);return($[F]=$[F]||[]).push(E),S}}return u&&(h.prototype=Object.create(u.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class Tr{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Xt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const ef=new Tr("AnalyzeForEntryComponents");function xi(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let d=s[u];Array.isArray(d)?(o===s&&(o=s.slice(0,u)),xi(d,o)):o!==s&&o.push(d)}return o}function Mi(s,o){s.forEach(u=>Array.isArray(u)?Mi(u,o):o(u))}function Al(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function xu(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function zi(s,o,u){let d=Ju(s,o);return d>=0?s[1|d]=u:(d=~d,function xl(s,o,u,d){let h=s.length;if(h==o)s.push(u,d);else if(1===h)s.push(d,s[0]),s[0]=u;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=u,s[o+1]=d}}(s,d,o,u)),d}function Ml(s,o){const u=Ju(s,o);if(u>=0)return s[1|u]}function Ju(s,o){return function Dd(s,o,u){let d=0,h=s.length>>u;for(;h!==d;){const m=d+(h-d>>1),E=s[m<<u];if(o===E)return m<<u;E>o?h=m:d=m+1}return~(h<<u)}(s,o,1)}const $o={},Pu="__NG_DI_FLAG__",Nl="ngTempTokenPath",A=/\n/gm,U="__source",Z=_e({provide:String,useValue:_e});let ae;function ue(s){const o=ae;return ae=s,o}function Je(s,o=xt.Default){if(void 0===ae)throw new Ke(203,"");return null===ae?Fr(s,void 0,o):ae.get(s,o&xt.Optional?null:void 0,o)}function ut(s,o=xt.Default){return(function kn(){return Yr}()||Je)(ge(s),o)}const qt=ut;function vn(s){const o=[];for(let u=0;u<s.length;u++){const d=ge(s[u]);if(Array.isArray(d)){if(0===d.length)throw new Ke(900,"");let h,m=xt.Default;for(let E=0;E<d.length;E++){const I=d[E],S=Hi(I);"number"==typeof S?-1===S?h=I.token:m|=S:h=I}o.push(ut(h,m))}else o.push(ut(d))}return o}function $t(s,o){return s[Pu]=o,s.prototype[Pu]=o,s}function Hi(s){return s[Pu]}const Ca=$t(Gs("Inject",s=>({token:s})),-1),$i=$t(Gs("Optional"),8),as=$t(Gs("SkipSelf"),4);class Rc{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Go(s){return s instanceof Rc?s.changingThisBreaksApplicationSecurity:s}const H_=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,_=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var oi=(()=>((oi=oi||{})[oi.NONE=0]="NONE",oi[oi.HTML=1]="HTML",oi[oi.STYLE=2]="STYLE",oi[oi.SCRIPT=3]="SCRIPT",oi[oi.URL=4]="URL",oi[oi.RESOURCE_URL=5]="RESOURCE_URL",oi))();function Ld(s){const o=function Fd(){const s=Ve();return s&&s[12]}();return o?o.sanitize(oi.URL,s)||"":function Wo(s,o){const u=function cf(s){return s instanceof Rc&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}(s,"URL")?Go(s):function w(s){return(s=String(s)).match(H_)||s.match(_)?s:"unsafe:"+s}(Ie(s))}const Qw="__ngContext__";function Cs(s,o){s[Qw]=o}function W_(s){const o=function pf(s){return s[Qw]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function Y_(s){return s.ngOriginalError}function lD(s,...o){s.error(...o)}class ag{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o),d=function uD(s){return s&&s.ngErrorLogger||lD}(o);d(this._console,"ERROR",o),u&&d(this._console,"ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&Y_(o);for(;u&&Y_(u);)u=Y_(u);return u||null}}const vD=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(en))();function Ya(s){return s instanceof Function?s():s}var ku=(()=>((ku=ku||{})[ku.Important=1]="Important",ku[ku.DashCase=2]="DashCase",ku))();function J_(s,o){return undefined(s,o)}function yf(s){const o=s[3];return Jr(o)?o[3]:o}function cg(s){return iE(s[13])}function ey(s){return iE(s[4])}function iE(s){for(;null!==s&&!Jr(s);)s=s[4];return s}function Ud(s,o,u,d,h){if(null!=d){let m,E=!1;Jr(d)?m=d:is(d)&&(E=!0,d=d[0]);const I=Pn(d);0===s&&null!==u?null==h?cE(o,u,I):Hl(o,u,I,h||null,!0):1===s&&null!==u?Hl(o,u,I,h||null,!0):2===s?function _E(s,o,u){const d=pg(s,o);d&&function hE(s,o,u,d){On(s)?s.removeChild(o,u,d):o.removeChild(u)}(s,d,o,u)}(o,I,E):3===s&&o.destroyNode(I),null!=m&&function DD(s,o,u,d,h){const m=u[7];m!==Pn(u)&&Ud(o,s,d,m,h);for(let I=10;I<u.length;I++){const S=u[I];Uc(S[1],S,s,o,d,m)}}(o,s,m,u,h)}}function Ar(s,o,u){if(On(s))return s.createElement(o,u);{const d=null!==u?function pu(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(u):null;return null===d?s.createElement(o):s.createElementNS(d,o)}}function aE(s,o){const u=s[9],d=u.indexOf(o),h=o[3];1024&o[2]&&(o[2]&=-1025,ho(h,-1)),u.splice(d,1)}function hg(s,o){if(s.length<=10)return;const u=10+o,d=s[u];if(d){const h=d[17];null!==h&&h!==s&&aE(h,d),o>0&&(s[u-1][4]=d[4]);const m=xu(s,10+o);!function bD(s,o){Uc(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(d[1],d);const E=m[19];null!==E&&E.detachView(m[1]),d[3]=null,d[4]=null,d[2]&=-129}return d}function uE(s,o){if(!(256&o[2])){const u=o[11];On(u)&&u.destroyNode&&Uc(s,o,u,3,null,null),function ty(s){let o=s[13];if(!o)return fg(s[1],s);for(;o;){let u=null;if(is(o))u=o[13];else{const d=o[10];d&&(u=d)}if(!u){for(;o&&!o[4]&&o!==s;)is(o)&&fg(o[1],o),o=o[3];null===o&&(o=s),is(o)&&fg(o[1],o),u=o&&o[4]}o=u}}(o)}}function fg(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function ny(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let d=0;d<u.length;d+=2){const h=o[u[d]];if(!(h instanceof jo)){const m=u[d+1];if(Array.isArray(m))for(let E=0;E<m.length;E+=2){const I=h[m[E]],S=m[E+1];try{S.call(I)}finally{}}else try{m.call(h)}finally{}}}}(s,o),function lE(s,o){const u=s.cleanup,d=o[7];let h=-1;if(null!==u)for(let m=0;m<u.length-1;m+=2)if("string"==typeof u[m]){const E=u[m+1],I="function"==typeof E?E(o):Pn(o[E]),S=d[h=u[m+2]],k=u[m+3];"boolean"==typeof k?I.removeEventListener(u[m],S,k):k>=0?d[h=k]():d[h=-k].unsubscribe(),m+=2}else{const E=d[h=u[m+1]];u[m].call(E)}if(null!==d){for(let m=h+1;m<d.length;m++)d[m]();o[7]=null}}(s,o),1===o[1].type&&On(o[11])&&o[11].destroy();const u=o[17];if(null!==u&&Jr(o[3])){u!==o[3]&&aE(u,o);const d=o[19];null!==d&&d.detachView(s)}}}function ID(s,o,u){return function zl(s,o,u){let d=o;for(;null!==d&&40&d.type;)d=(o=d).parent;if(null===d)return u[0];if(2&d.flags){const h=s.data[d.directiveStart].encapsulation;if(h===cn.None||h===cn.Emulated)return null}return Er(d,u)}(s,o.parent,u)}function Hl(s,o,u,d,h){On(s)?s.insertBefore(o,u,d,h):o.insertBefore(u,d,h)}function cE(s,o,u){On(s)?s.appendChild(o,u):o.appendChild(u)}function dE(s,o,u,d,h){null!==d?Hl(s,o,u,d,h):cE(s,o,u)}function pg(s,o){return On(s)?s.parentNode(o):o.parentNode}let pE=function ry(s,o,u){return 40&s.type?Er(s,u):null};function jd(s,o,u,d){const h=ID(s,d,o),m=o[11],I=function fE(s,o,u){return pE(s,o,u)}(d.parent||o[6],d,o);if(null!=h)if(Array.isArray(u))for(let S=0;S<u.length;S++)dE(m,h,u[S],I,!1);else dE(m,h,u,I,!1)}function gg(s,o){if(null!==o){const u=o.type;if(3&u)return Er(o,s);if(4&u)return mg(-1,s[o.index]);if(8&u){const d=o.child;if(null!==d)return gg(s,d);{const h=s[o.index];return Jr(h)?mg(-1,h):Pn(h)}}if(32&u)return J_(o,s)()||Pn(s[o.index]);{const d=mE(s,o);return null!==d?Array.isArray(d)?d[0]:gg(yf(s[16]),d):gg(s,o.next)}}return null}function mE(s,o){return null!==o?s[16][6].projection[o.projection]:null}function mg(s,o){const u=10+s+1;if(u<o.length){const d=o[u],h=d[1].firstChild;if(null!==h)return gg(d,h)}return o[7]}function yE(s,o,u,d,h,m,E){for(;null!=u;){const I=d[u.index],S=u.type;if(E&&0===o&&(I&&Cs(Pn(I),d),u.flags|=4),64!=(64&u.flags))if(8&S)yE(s,o,u.child,d,h,m,!1),Ud(o,s,h,I,m);else if(32&S){const k=J_(u,d);let F;for(;F=k();)Ud(o,s,h,F,m);Ud(o,s,h,I,m)}else 16&S?vE(s,o,d,u,h,m):Ud(o,s,h,I,m);u=E?u.projectionNext:u.next}}function Uc(s,o,u,d,h,m){yE(u,d,s.firstChild,o,h,m,!1)}function vE(s,o,u,d,h,m){const E=u[16],S=E[6].projection[d.projection];if(Array.isArray(S))for(let k=0;k<S.length;k++)Ud(o,s,h,S[k],m);else yE(s,o,S,E[3],h,m,!0)}function sy(s,o,u){On(s)?s.setAttribute(o,"style",u):o.style.cssText=u}function yg(s,o,u){On(s)?""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u):o.className=u}function vg(s,o,u){let d=s.length;for(;;){const h=s.indexOf(o,u);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const m=o.length;if(h+m===d||s.charCodeAt(h+m)<=32)return h}u=h+1}}const _i="ng-template";function $l(s,o,u){let d=0;for(;d<s.length;){let h=s[d++];if(u&&"class"===h){if(h=s[d],-1!==vg(h.toLowerCase(),o,0))return!0}else if(1===h){for(;d<s.length&&"string"==typeof(h=s[d++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function Vc(s){return 4===s.type&&s.value!==_i}function oy(s,o,u){return o===(4!==s.type||u?s.value:_i)}function ZR(s,o,u){let d=4;const h=s.attrs||[],m=function AD(s){for(let o=0;o<s.length;o++)if(ni(s[o]))return o;return s.length}(h);let E=!1;for(let I=0;I<o.length;I++){const S=o[I];if("number"!=typeof S){if(!E)if(4&d){if(d=2|1&d,""!==S&&!oy(s,S,u)||""===S&&1===o.length){if(Qa(d))return!1;E=!0}}else{const k=8&d?S:o[++I];if(8&d&&null!==s.attrs){if(!$l(s.attrs,k,u)){if(Qa(d))return!1;E=!0}continue}const $=ay(8&d?"class":S,h,Vc(s),u);if(-1===$){if(Qa(d))return!1;E=!0;continue}if(""!==k){let te;te=$>m?"":h[$+1].toLowerCase();const fe=8&d?te:null;if(fe&&-1!==vg(fe,k,0)||2&d&&k!==te){if(Qa(d))return!1;E=!0}}}}else{if(!E&&!Qa(d)&&!Qa(S))return!1;if(E&&Qa(S))continue;E=!1,d=S|1&d}}return Qa(d)||E}function Qa(s){return 0==(1&s)}function ay(s,o,u,d){if(null===o)return-1;let h=0;if(d||!u){let m=!1;for(;h<o.length;){const E=o[h];if(E===s)return h;if(3===E||6===E)m=!0;else{if(1===E||2===E){let I=o[++h];for(;"string"==typeof I;)I=o[++h];continue}if(4===E)break;if(0===E){h+=4;continue}}h+=m?1:2}return-1}return function xD(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const d=s[u];if("number"==typeof d)return-1;if(d===o)return u;u++}return-1}(o,s)}function EE(s,o,u=!1){for(let d=0;d<o.length;d++)if(ZR(s,o[d],u))return!0;return!1}function PD(s,o){return s?":not("+o.trim()+")":o}function KR(s){let o=s[0],u=1,d=2,h="",m=!1;for(;u<s.length;){let E=s[u];if("string"==typeof E)if(2&d){const I=s[++u];h+="["+E+(I.length>0?'="'+I+'"':"")+"]"}else 8&d?h+="."+E:4&d&&(h+=" "+E);else""!==h&&!Qa(E)&&(o+=PD(m,h),h=""),d=E,m=m||!Qa(d);u++}return""!==h&&(o+=PD(m,h)),o}const fn={};function kD(s){ND(dn(),Ve(),Hr()+s,!1)}function ND(s,o,u,d){if(!d)if(3==(3&o[2])){const m=s.preOrderCheckHooks;null!==m&&vs(o,m,u)}else{const m=s.preOrderHooks;null!==m&&_a(o,m,0,u)}$r(u)}function yi(s,o){return s<<17|o<<2}function ai(s){return s>>17&32767}function wg(s){return 2|s}function rl(s){return(131068&s)>>2}function uy(s,o){return-131069&s|o<<2}function qo(s){return 1|s}function Rg(s,o){const u=s.contentQueries;if(null!==u)for(let d=0;d<u.length;d+=2){const h=u[d],m=u[d+1];if(-1!==m){const E=s.data[m];Ga(h),E.contentQueries(2,o[m],m)}}}function wf(s,o,u,d,h,m,E,I,S,k){const F=o.blueprint.slice();return F[0]=h,F[2]=140|d,Fs(F),F[3]=F[15]=s,F[8]=u,F[10]=E||s&&s[10],F[11]=I||s&&s[11],F[12]=S||s&&s[12]||null,F[9]=k||s&&s[9]||null,F[6]=m,F[16]=2==o.type?s[16]:F,F}function ol(s,o,u,d,h){let m=s.data[o];if(null===m)m=function Ef(s,o,u,d,h){const m=Uo(),E=yu(),S=s.data[o]=function HD(s,o,u,d,h,m){return{type:u,index:d,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,E?m:m&&m.parent,u,o,d,h);return null===s.firstChild&&(s.firstChild=S),null!==m&&(E?null==m.child&&null!==S.parent&&(m.child=S):null===m.next&&(m.next=S)),S}(s,o,u,d,h),function Ec(){return Rt.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=u,m.value=d,m.attrs=h;const E=function Vs(){const s=Rt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();m.injectorIndex=null===E?-1:E.injectorIndex}return hi(m,!0),m}function Gl(s,o,u,d){if(0===u)return-1;const h=o.length;for(let m=0;m<u;m++)o.push(d),s.blueprint.push(d),s.data.push(null);return h}function Bc(s,o,u){Bo(o);try{const d=s.viewQuery;null!==d&&Df(1,d,u);const h=s.template;null!==h&&_y(s,o,h,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Rg(s,o),s.staticViewQueries&&Df(2,s.viewQuery,u);const m=s.components;null!==m&&function BD(s,o){for(let u=0;u<o.length;u++)fk(s,o[u])}(o,m)}catch(d){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),d}finally{o[2]&=-5,gi()}}function jc(s,o,u,d){const h=o[2];if(256!=(256&h)){Bo(o);try{Fs(o),function fi(s){return Rt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&_y(s,o,u,2,d);const E=3==(3&h);if(E){const k=s.preOrderCheckHooks;null!==k&&vs(o,k,null)}else{const k=s.preOrderHooks;null!==k&&_a(o,k,0,null),Cr(o,0)}if(function dk(s){for(let o=cg(s);null!==o;o=ey(o)){if(!o[2])continue;const u=o[9];for(let d=0;d<u.length;d++){const h=u[d],m=h[3];0==(1024&h[2])&&ho(m,1),h[2]|=1024}}}(o),function JD(s){for(let o=cg(s);null!==o;o=ey(o))for(let u=10;u<o.length;u++){const d=o[u],h=d[1];_s(d)&&jc(h,d,h.template,d[8])}}(o),null!==s.contentQueries&&Rg(s,o),E){const k=s.contentCheckHooks;null!==k&&vs(o,k)}else{const k=s.contentHooks;null!==k&&_a(o,k,1),Cr(o,1)}!function xE(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let d=0;d<u.length;d++){const h=u[d];if(h<0)$r(~h);else{const m=h,E=u[++d],I=u[++d];vu(E,m),I(2,o[m])}}}finally{$r(-1)}}(s,o);const I=s.components;null!==I&&function VD(s,o){for(let u=0;u<o.length;u++)hk(s,o[u])}(o,I);const S=s.viewQuery;if(null!==S&&Df(2,S,d),E){const k=s.viewCheckHooks;null!==k&&vs(o,k)}else{const k=s.viewHooks;null!==k&&_a(o,k,2),Cr(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-73,1024&o[2]&&(o[2]&=-1025,ho(o[3],-1))}finally{gi()}}}function jD(s,o,u,d){const h=o[10],E=Vi(o);try{!E&&h.begin&&h.begin(),E&&Bc(s,o,d),jc(s,o,u,d)}finally{!E&&h.end&&h.end()}}function _y(s,o,u,d,h){const m=Hr(),E=2&d;try{$r(-1),E&&o.length>20&&ND(s,o,20,!1),u(d,h)}finally{$r(m)}}function yy(s,o,u){!Fo()||(function ak(s,o,u,d){const h=u.directiveStart,m=u.directiveEnd;s.firstCreatePass||De(u,o),Cs(d,o);const E=u.initialInputs;for(let I=h;I<m;I++){const S=s.data[I],k=jr(S);k&&zc(o,u,S);const F=Bi(o,s,I,u);Cs(F,o),null!==E&&ck(0,I-h,F,S,0,E),k&&(hr(u.index,o)[8]=F)}}(s,o,u,Er(u,o)),128==(128&u.flags)&&function uk(s,o,u){const d=u.directiveStart,h=u.directiveEnd,E=u.index,I=function ga(){return Rt.lFrame.currentDirectiveIndex}();try{$r(E);for(let S=d;S<h;S++){const k=s.data[S],F=o[S];$a(S),(null!==k.hostBindings||0!==k.hostVars||null!==k.hostAttrs)&&Og(k,F)}}finally{$r(-1),$a(I)}}(s,o,u))}function vy(s,o,u=Er){const d=o.localNames;if(null!==d){let h=o.index+1;for(let m=0;m<d.length;m+=2){const E=d[m+1],I=-1===E?u(o,s):s[E];s[h++]=I}}}function ME(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=kg(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function kg(s,o,u,d,h,m,E,I,S,k){const F=20+d,$=F+h,te=function zD(s,o){const u=[];for(let d=0;d<o;d++)u.push(d<s?null:fn);return u}(F,$),fe="function"==typeof k?k():k;return te[1]={type:s,blueprint:te,template:u,queries:null,viewQuery:I,declTNode:o,data:te.slice().fill(null,F),bindingStartIndex:F,expandoStartIndex:$,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof E?E():E,firstChild:null,schemas:S,consts:fe,incompleteFirstPass:!1}}function kE(s,o,u,d){const h=Ug(o);null===u?h.push(d):(h.push(u),s.firstCreatePass&&Sf(s).push(d,h.length-1))}function Cf(s,o,u){for(let d in s)if(s.hasOwnProperty(d)){const h=s[d];(u=null===u?{}:u).hasOwnProperty(d)?u[d].push(o,h):u[d]=[o,h]}return u}function Ng(s,o,u,d){let h=!1;if(Fo()){const m=function lk(s,o,u){const d=s.directiveRegistry;let h=null;if(d)for(let m=0;m<d.length;m++){const E=d[m];EE(u,E.selectors,!1)&&(h||(h=[]),Kt(De(u,o),s,E.type),jr(E)?(FE(s,u),h.unshift(E)):h.push(E))}return h}(s,o,u),E=null===d?null:{"":-1};if(null!==m){h=!0,Ey(u,s.data.length,m.length);for(let F=0;F<m.length;F++){const $=m[F];$.providersResolver&&$.providersResolver($)}let I=!1,S=!1,k=Gl(s,o,m.length,null);for(let F=0;F<m.length;F++){const $=m[F];u.mergedAttrs=va(u.mergedAttrs,$.hostAttrs),Lg(s,u,o,k,$),YD(k,$,E),null!==$.contentQueries&&(u.flags|=8),(null!==$.hostBindings||null!==$.hostAttrs||0!==$.hostVars)&&(u.flags|=128);const te=$.type.prototype;!I&&(te.ngOnChanges||te.ngOnInit||te.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),I=!0),!S&&(te.ngOnChanges||te.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),S=!0),k++}!function NE(s,o){const d=o.directiveEnd,h=s.data,m=o.attrs,E=[];let I=null,S=null;for(let k=o.directiveStart;k<d;k++){const F=h[k],$=F.inputs,te=null===m||Vc(o)?null:QD($,m);E.push(te),I=Cf($,k,I),S=Cf(F.outputs,k,S)}null!==I&&(I.hasOwnProperty("class")&&(o.flags|=16),I.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=E,o.inputs=I,o.outputs=S}(s,u)}E&&function UE(s,o,u){if(o){const d=s.localNames=[];for(let h=0;h<o.length;h+=2){const m=u[o[h+1]];if(null==m)throw new Ke(-301,!1);d.push(o[h],m)}}}(u,d,E)}return u.mergedAttrs=va(u.mergedAttrs,u.attrs),h}function ZD(s,o,u,d,h,m){const E=m.hostBindings;if(E){let I=s.hostBindingOpCodes;null===I&&(I=s.hostBindingOpCodes=[]);const S=~o.index;(function KD(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(I)!=S&&I.push(S),I.push(d,h,E)}}function Og(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function FE(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function YD(s,o,u){if(u){if(o.exportAs)for(let d=0;d<o.exportAs.length;d++)u[o.exportAs[d]]=s;jr(o)&&(u[""]=s)}}function Ey(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function Lg(s,o,u,d,h){s.data[d]=h;const m=h.factory||(h.factory=Pr(h.type)),E=new jo(m,jr(h),null);s.blueprint[d]=E,u[d]=E,ZD(s,o,0,d,Gl(s,u,h.hostVars,fn),h)}function zc(s,o,u){const d=Er(o,s),h=ME(u),m=s[10],E=Cy(s,wf(s,h,null,u.onPush?64:16,d,o,m,m.createRenderer(d,u),null,null));s[o.index]=E}function al(s,o,u,d,h,m){const E=Er(s,o);!function If(s,o,u,d,h,m,E){if(null==m)On(s)?s.removeAttribute(o,h,u):o.removeAttribute(h);else{const I=null==E?Ie(m):E(m,d||"",h);On(s)?s.setAttribute(o,h,I,u):u?o.setAttributeNS(u,h,I):o.setAttribute(h,I)}}(o[11],E,m,s.value,u,d,h)}function ck(s,o,u,d,h,m){const E=m[o];if(null!==E){const I=d.setInput;for(let S=0;S<E.length;){const k=E[S++],F=E[S++],$=E[S++];null!==I?d.setInput(u,$,k,F):u[F]=$}}}function QD(s,o){let u=null,d=0;for(;d<o.length;){const h=o[d];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===u&&(u=[]),u.push(h,s[h],o[d+1])),d+=2}else d+=2;else d+=4}return u}function VE(s,o,u,d){return new Array(s,!0,!1,o,null,0,d,u,null,null)}function hk(s,o){const u=hr(o,s);if(_s(u)){const d=u[1];80&u[2]?jc(d,u,d.template,u[8]):u[5]>0&&by(u)}}function by(s){for(let d=cg(s);null!==d;d=ey(d))for(let h=10;h<d.length;h++){const m=d[h];if(1024&m[2]){const E=m[1];jc(E,m,E.template,m[8])}else m[5]>0&&by(m)}const u=s[1].components;if(null!==u)for(let d=0;d<u.length;d++){const h=hr(u[d],s);_s(h)&&h[5]>0&&by(h)}}function fk(s,o){const u=hr(o,s),d=u[1];(function pk(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(d,u),Bc(d,u,u[8])}function Cy(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function BE(s){for(;s;){s[2]|=64;const o=yf(s);if(Oa(s)&&!o)return s;s=o}return null}function Fg(s){!function Tf(s){for(let o=0;o<s.components.length;o++){const u=s.components[o],d=W_(u),h=d[1];jD(h,d,h.template,u)}}(s[8])}function Df(s,o,u){Ga(0),o(s,u)}const Ty=(()=>Promise.resolve(null))();function Ug(s){return s[7]||(s[7]=[])}function Sf(s){return s.cleanup||(s.cleanup=[])}function Vg(s,o){const u=s[9],d=u?u.get(ag,null):null;d&&d.handleError(o)}function Dy(s,o,u,d,h){for(let m=0;m<u.length;){const E=u[m++],I=u[m++],S=o[E],k=s.data[E];null!==k.setInput?k.setInput(S,h,d,I):S[I]=h}}function ul(s,o,u){const d=No(o,s);!function sE(s,o,u){On(s)?s.setValue(o,u):o.textContent=u}(s[11],d,u)}function Bg(s,o,u){let d=u?s.styles:null,h=u?s.classes:null,m=0;if(null!==o)for(let E=0;E<o.length;E++){const I=o[E];"number"==typeof I?m=I:1==m?h=Ee(h,I):2==m&&(d=Ee(d,I+": "+o[++E]+";"))}u?s.styles=d:s.stylesWithoutHost=d,u?s.classes=h:s.classesWithoutHost=h}const Af=new Tr("INJECTOR",-1);class Sy{get(o,u=$o){if(u===$o){const d=new Error(`NullInjectorError: No provider for ${ve(o)}!`);throw d.name="NullInjectorError",d}return u}}const jg=new Tr("Set Injector scope."),Hc={},$E={};let Ay;function GE(){return void 0===Ay&&(Ay=new Sy),Ay}function xy(s,o=null,u=null,d){const h=Wl(s,o,u,d);return h._resolveInjectorDefTypes(),h}function Wl(s,o=null,u=null,d){return new My(s,u,o||GE(),d)}class My{constructor(o,u,d,h=null){this.parent=d,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const m=[];u&&Mi(u,I=>this.processProvider(I,o,u)),Mi([o],I=>this.processInjectorType(I,[],m)),this.records.set(Af,Da(void 0,this));const E=this.records.get(jg);this.scope=null!=E?E.value:null,this.source=h||("object"==typeof o?null:ve(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,u=$o,d=xt.Default){this.assertNotDestroyed();const h=ue(this),m=Cn(void 0);try{if(!(d&xt.SkipSelf)){let I=this.records.get(o);if(void 0===I){const S=function nS(s){return"function"==typeof s||"object"==typeof s&&s instanceof Tr}(o)&&Vn(o);I=S&&this.injectableDefInScope(S)?Da(ql(o),Hc):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(d&xt.Self?GE():this.parent).get(o,u=d&xt.Optional&&u===$o?null:u)}catch(E){if("NullInjectorError"===E.name){if((E[Nl]=E[Nl]||[]).unshift(ve(o)),h)throw E;return function mr(s,o,u,d){const h=s[Nl];throw o[U]&&h.unshift(o[U]),s.message=function wo(s,o,u,d=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let h=ve(o);if(Array.isArray(o))h=o.map(ve).join(" -> ");else if("object"==typeof o){let m=[];for(let E in o)if(o.hasOwnProperty(E)){let I=o[E];m.push(E+":"+("string"==typeof I?JSON.stringify(I):ve(I)))}h=`{${m.join(", ")}}`}return`${u}${d?"("+d+")":""}[${h}]: ${s.replace(A,"\n  ")}`}("\n"+s.message,h,u,d),s.ngTokenPath=h,s[Nl]=null,s}(E,o,"R3InjectorError",this.source)}throw E}finally{Cn(m),ue(h)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((d,h)=>o.push(ve(h))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ke(205,!1)}processInjectorType(o,u,d){if(!(o=ge(o)))return!1;let h=hs(o);const m=null==h&&o.ngModule||void 0,E=void 0===m?o:m,I=-1!==d.indexOf(E);if(void 0!==m&&(h=hs(m)),null==h)return!1;if(null!=h.imports&&!I){let F;d.push(E);try{Mi(h.imports,$=>{this.processInjectorType($,u,d)&&(void 0===F&&(F=[]),F.push($))})}finally{}if(void 0!==F)for(let $=0;$<F.length;$++){const{ngModule:te,providers:fe}=F[$];Mi(fe,Fe=>this.processProvider(Fe,te,fe||K))}}this.injectorDefTypes.add(E);const S=Pr(E)||(()=>new E);this.records.set(E,Da(S,Hc));const k=h.providers;if(null!=k&&!I){const F=o;Mi(k,$=>this.processProvider($,F,k))}return void 0!==m&&void 0!==o.providers}processProvider(o,u,d){let h=Nu(o=ge(o))?o:ge(o&&o.provide);const m=function qE(s,o,u){return Py(s)?Da(void 0,s.useValue):Da(Hd(s),Hc)}(o);if(Nu(o)||!0!==o.multi)this.records.get(h);else{let E=this.records.get(h);E||(E=Da(void 0,Hc,!0),E.factory=()=>vn(E.multi),this.records.set(h,E)),h=o,E.multi.push(o)}this.records.set(h,m)}hydrate(o,u){return u.value===Hc&&(u.value=$E,u.value=u.factory()),"object"==typeof u.value&&u.value&&function Is(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this.onDestroy.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=ge(o.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function ql(s){const o=Vn(s),u=null!==o?o.factory:Pr(s);if(null!==u)return u;if(s instanceof Tr)throw new Ke(204,!1);if(s instanceof Function)return function WE(s){const o=s.length;if(o>0)throw function Za(s,o){const u=[];for(let d=0;d<s;d++)u.push(o);return u}(o,"?"),new Ke(204,!1);const u=function yr(s){const o=s&&(s[bi]||s[Xn]);if(o){const u=function Hn(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new Ke(204,!1)}function Hd(s,o,u){let d;if(Nu(s)){const h=ge(s);return Pr(h)||ql(h)}if(Py(s))d=()=>ge(s.useValue);else if(function Gi(s){return!(!s||!s.useFactory)}(s))d=()=>s.useFactory(...vn(s.deps||[]));else if(function ZE(s){return!(!s||!s.useExisting)}(s))d=()=>ut(ge(s.useExisting));else{const h=ge(s&&(s.useClass||s.provide));if(!function Ou(s){return!!s.deps}(s))return Pr(h)||ql(h);d=()=>new h(...vn(s.deps))}return d}function Da(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function Py(s){return null!==s&&"object"==typeof s&&Z in s}function Nu(s){return"function"==typeof s}let Zo=(()=>{class s{static create(u,d){var h;if(Array.isArray(u))return xy({name:""},d,u,"");{const m=null!==(h=u.name)&&void 0!==h?h:"";return xy({name:m},u.parent,u.providers,m)}}}return s.THROW_IF_NOT_FOUND=$o,s.NULL=new Sy,s.\u0275prov=Xt({token:s,providedIn:"any",factory:()=>ut(Af)}),s.__NG_ELEMENT_ID__=-1,s})();function eb(s,o){zs(W_(s)[1],qn())}function Hg(s){let o=function By(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const d=[s];for(;o;){let h;if(jr(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Ke(903,"");h=o.\u0275dir}if(h){if(u){d.push(h);const E=s;E.inputs=$g(s.inputs),E.declaredInputs=$g(s.declaredInputs),E.outputs=$g(s.outputs);const I=h.hostBindings;I&&aS(s,I);const S=h.viewQuery,k=h.contentQueries;if(S&&tb(s,S),k&&zy(s,k),Te(s.inputs,h.inputs),Te(s.declaredInputs,h.declaredInputs),Te(s.outputs,h.outputs),jr(h)&&h.data.animation){const F=s.data;F.animation=(F.animation||[]).concat(h.data.animation)}}const m=h.features;if(m)for(let E=0;E<m.length;E++){const I=m[E];I&&I.ngInherit&&I(s),I===Hg&&(u=!1)}}o=Object.getPrototypeOf(o)}!function jy(s){let o=0,u=null;for(let d=s.length-1;d>=0;d--){const h=s[d];h.hostVars=o+=h.hostVars,h.hostAttrs=va(h.hostAttrs,u=va(u,h.hostAttrs))}}(d)}function $g(s){return s===Tn?{}:s===K?[]:s}function tb(s,o){const u=s.viewQuery;s.viewQuery=u?(d,h)=>{o(d,h),u(d,h)}:o}function zy(s,o){const u=s.contentQueries;s.contentQueries=u?(d,h,m)=>{o(d,h,m),u(d,h,m)}:o}function aS(s,o){const u=s.hostBindings;s.hostBindings=u?(d,h)=>{o(d,h),u(d,h)}:o}let qd=null;function Kl(){if(!qd){const s=en.Symbol;if(s&&s.iterator)qd=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const d=o[u];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(qd=d)}}}return qd}function Mf(s){return!!$y(s)&&(Array.isArray(s)||!(s instanceof Map)&&Kl()in s)}function $y(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function us(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function Gy(s,o,u,d){const h=Ve();return us(h,pa(),o)&&(dn(),al(nr(),h,s,o,u,d)),Gy}function Zy(s,o,u,d,h,m,E,I){const S=Ve(),k=dn(),F=s+20,$=k.firstCreatePass?function qy(s,o,u,d,h,m,E,I,S){const k=o.consts,F=ol(o,s,4,E||null,lr(k,I));Ng(o,u,F,lr(k,S)),zs(o,F);const $=F.tViews=kg(2,F,d,h,m,o.directiveRegistry,o.pipeRegistry,null,o.schemas,k);return null!==o.queries&&(o.queries.template(o,F),$.queries=o.queries.embeddedTView(F)),F}(F,k,S,o,u,d,h,m,E):k.data[F];hi($,!1);const te=S[11].createComment("");jd(k,S,te,$),Cs(te,S),Cy(S,S[F]=VE(te,S,te,$)),di($)&&yy(k,S,$),null!=E&&vy(S,$,I)}function _n(s,o=xt.Default){const u=Ve();return null===u?ut(s,o):ii(qn(),u,ge(s),o)}function kf(){throw new Error("invalid")}function rh(s,o,u){const d=Ve();return us(d,pa(),o)&&function Ks(s,o,u,d,h,m,E,I){const S=Er(o,u);let F,k=o.inputs;!I&&null!=k&&(F=k[d])?(Dy(s,u,F,d,h),Qn(o)&&function $D(s,o){const u=hr(o,s);16&u[2]||(u[2]|=64)}(u,o.index)):3&o.type&&(d=function OE(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(d),h=null!=E?E(h,o.value||"",d):h,On(m)?m.setProperty(S,d,h):ri(d)||(S.setProperty?S.setProperty(d,h):S[d]=h))}(dn(),nr(),d,s,o,d[11],u,!1),rh}function Yg(s,o,u,d,h){const E=h?"class":"style";Dy(s,u,o.inputs[E],E,d)}function Yc(s,o,u,d){const h=Ve(),m=dn(),E=20+s,I=h[11],S=h[E]=Ar(I,o,function bd(){return Rt.lFrame.currentNamespace}()),k=m.firstCreatePass?function Uu(s,o,u,d,h,m,E){const I=o.consts,k=ol(o,s,2,h,lr(I,m));return Ng(o,u,k,lr(I,E)),null!==k.attrs&&Bg(k,k.attrs,!1),null!==k.mergedAttrs&&Bg(k,k.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,k),k}(E,m,h,0,o,u,d):m.data[E];hi(k,!0);const F=k.mergedAttrs;null!==F&&os(I,S,F);const $=k.classes;null!==$&&yg(I,S,$);const te=k.styles;return null!==te&&sy(I,S,te),64!=(64&k.flags)&&jd(m,h,S,k),0===function _u(){return Rt.lFrame.elementDepthCount}()&&Cs(S,h),function za(){Rt.lFrame.elementDepthCount++}(),di(k)&&(yy(m,h,k),function bf(s,o,u){if(ao(o)){const h=o.directiveEnd;for(let m=o.directiveStart;m<h;m++){const E=s.data[m];E.contentQueries&&E.contentQueries(1,u[m],m)}}}(m,k,h)),null!==d&&vy(h,k),Yc}function Co(){let s=qn();yu()?function fo(){Rt.lFrame.isParent=!1}():(s=s.parent,hi(s,!1));const o=s;!function bl(){Rt.lFrame.elementDepthCount--}();const u=dn();return u.firstCreatePass&&(zs(u,s),ao(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Tc(s){return 0!=(16&s.flags)}(o)&&Yg(u,o,Ve(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Ln(s){return 0!=(32&s.flags)}(o)&&Yg(u,o,Ve(),o.stylesWithoutHost,!1),Co}function ev(s,o,u,d){return Yc(s,o,u,d),Co(),ev}function tv(){return Ve()}function Qg(s){return!!s&&"function"==typeof s.then}function nv(s){return!!s&&"function"==typeof s.subscribe}const Qc=nv;function Jg(s,o,u,d){const h=Ve(),m=dn(),E=qn();return function Ib(s,o,u,d,h,m,E,I){const S=di(d),F=s.firstCreatePass&&Sf(s),$=o[8],te=Ug(o);let fe=!0;if(3&d.type||I){const ct=Er(d,o),wt=I?I(ct):ct,Be=te.length,Pt=I?Sn=>I(Pn(Sn[d.index])):d.index;if(On(u)){let Sn=null;if(!I&&S&&(Sn=function _S(s,o,u,d){const h=s.cleanup;if(null!=h)for(let m=0;m<h.length-1;m+=2){const E=h[m];if(E===u&&h[m+1]===d){const I=o[7],S=h[m+2];return I.length>S?I[S]:null}"string"==typeof E&&(m+=2)}return null}(s,o,h,d.index)),null!==Sn)(Sn.__ngLastListenerFn__||Sn).__ngNextListenerFn__=m,Sn.__ngLastListenerFn__=m,fe=!1;else{m=ir(d,o,$,m,!1);const Kn=u.listen(wt,h,m);te.push(m,Kn),F&&F.push(h,Pt,Be,Be+1)}}else m=ir(d,o,$,m,!0),wt.addEventListener(h,m,E),te.push(m),F&&F.push(h,Pt,Be,E)}else m=ir(d,o,$,m,!1);const Fe=d.outputs;let rt;if(fe&&null!==Fe&&(rt=Fe[h])){const ct=rt.length;if(ct)for(let wt=0;wt<ct;wt+=2){const Xo=o[rt[wt]][rt[wt+1]].subscribe(m),kh=te.length;te.push(m,Xo),F&&F.push(h,d.index,kh,-(kh+1))}}}(m,h,h[11],E,s,o,!!u,d),Jg}function Tb(s,o,u,d){try{return!1!==u(d)}catch(h){return Vg(s,h),!1}}function ir(s,o,u,d,h){return function m(E){if(E===Function)return d;const I=2&s.flags?hr(s.index,o):o;0==(32&o[2])&&BE(I);let S=Tb(o,0,d,E),k=m.__ngNextListenerFn__;for(;k;)S=Tb(o,0,k,E)&&S,k=k.__ngNextListenerFn__;return h&&!1===S&&(E.preventDefault(),E.returnValue=!1),S}}function Db(s=1){return function bc(s){return(Rt.lFrame.contextLView=function Cu(s,o){for(;s>0;)o=o[15],s--;return o}(s,Rt.lFrame.contextLView))[8]}(s)}function ov(s,o,u,d,h){const m=s[u+1],E=null===o;let I=d?ai(m):rl(m),S=!1;for(;0!==I&&(!1===S||E);){const F=s[I+1];Pb(s[I],o)&&(S=!0,s[I+1]=d?qo(F):wg(F)),I=d?ai(F):rl(F)}S&&(s[u+1]=d?wg(m):qo(m))}function Pb(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Ju(s,o)>=0}function uv(s,o){return function Ma(s,o,u,d){const h=Ve(),m=dn(),E=function kr(s){const o=Rt.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}(2);m.firstUpdatePass&&function Vf(s,o,u,d){const h=s.data;if(null===h[u+1]){const m=h[Hr()],E=function Lb(s,o){return o>=s.expandoStartIndex}(s,u);(function Bf(s,o){return 0!=(s.flags&(o?16:32))})(m,d)&&null===o&&!E&&(o=!1),o=function uh(s,o,u,d){const h=function js(s){const o=Rt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let m=d?o.residualClasses:o.residualStyles;if(null===h)0===(d?o.classBindings:o.styleBindings)&&(u=lh(u=dv(null,s,o,u,d),o.attrs,d),m=null);else{const E=o.directiveStylingLast;if(-1===E||s[E]!==h)if(u=dv(h,s,o,u,d),null===m){let S=function lv(s,o,u){const d=u?o.classBindings:o.styleBindings;if(0!==rl(d))return s[ai(d)]}(s,o,d);void 0!==S&&Array.isArray(S)&&(S=dv(null,s,o,S[1],d),S=lh(S,o.attrs,d),function cv(s,o,u,d){s[ai(u?o.classBindings:o.styleBindings)]=d}(s,o,d,S))}else m=function bS(s,o,u){let d;const h=o.directiveEnd;for(let m=1+o.directiveStylingLast;m<h;m++)d=lh(d,s[m].hostAttrs,u);return lh(d,o.attrs,u)}(s,o,d)}return void 0!==m&&(d?o.residualClasses=m:o.residualStyles=m),u}(h,m,o,d),function oh(s,o,u,d,h,m){let E=m?o.classBindings:o.styleBindings,I=ai(E),S=rl(E);s[d]=u;let F,k=!1;if(Array.isArray(u)){const $=u;F=$[1],(null===F||Ju($,F)>0)&&(k=!0)}else F=u;if(h)if(0!==S){const te=ai(s[I+1]);s[d+1]=yi(te,I),0!==te&&(s[te+1]=uy(s[te+1],d)),s[I+1]=function Ja(s,o){return 131071&s|o<<17}(s[I+1],d)}else s[d+1]=yi(I,0),0!==I&&(s[I+1]=uy(s[I+1],d)),I=d;else s[d+1]=yi(S,0),0===I?I=d:s[S+1]=uy(s[S+1],d),S=d;k&&(s[d+1]=wg(s[d+1])),ov(s,F,d,!0),ov(s,F,d,!1),function sv(s,o,u,d,h){const m=h?s.residualClasses:s.residualStyles;null!=m&&"string"==typeof o&&Ju(m,o)>=0&&(u[d+1]=qo(u[d+1]))}(o,F,s,d,m),E=yi(I,S),m?o.classBindings=E:o.styleBindings=E}(h,m,o,u,E,d)}}(m,s,E,d),o!==fn&&us(h,E,o)&&function Qo(s,o,u,d,h,m,E,I){if(!(3&o.type))return;const S=s.data,k=S[I+1];ch(function Ri(s){return 1==(1&s)}(k)?rm(S,o,u,h,rl(k),E):void 0)||(ch(m)||function z(s){return 2==(2&s)}(k)&&(m=rm(S,null,u,h,I,E)),function wE(s,o,u,d,h){const m=On(s);if(o)h?m?s.addClass(u,d):u.classList.add(d):m?s.removeClass(u,d):u.classList.remove(d);else{let E=-1===d.indexOf("-")?void 0:ku.DashCase;if(null==h)m?s.removeStyle(u,d,E):u.style.removeProperty(d);else{const I="string"==typeof h&&h.endsWith("!important");I&&(h=h.slice(0,-10),E|=ku.Important),m?s.setStyle(u,d,h,E):u.style.setProperty(d,h,I?"important":"")}}}(d,E,No(Hr(),u),h,m))}(m,m.data[Hr()],h,h[11],s,h[E+1]=function hv(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=ve(Go(s)))),s}(o,u),d,E)}(s,o,null,!0),uv}function dv(s,o,u,d,h){let m=null;const E=u.directiveEnd;let I=u.directiveStylingLast;for(-1===I?I=u.directiveStart:I++;I<E&&(m=o[I],d=lh(d,m.hostAttrs,h),m!==s);)I++;return null!==s&&(u.directiveStylingLast=I),d}function lh(s,o,u){const d=u?1:2;let h=-1;if(null!==o)for(let m=0;m<o.length;m++){const E=o[m];"number"==typeof E?h=E:h===d&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),zi(s,E,!!u||o[++m]))}return void 0===s?null:s}function rm(s,o,u,d,h,m){const E=null===o;let I;for(;h>0;){const S=s[h],k=Array.isArray(S),F=k?S[1]:S,$=null===F;let te=u[h+1];te===fn&&(te=$?K:void 0);let fe=$?Ml(te,d):F===d?te:void 0;if(k&&!ch(fe)&&(fe=Ml(S,d)),ch(fe)&&(I=fe,E))return I;const Fe=s[h+1];h=E?ai(Fe):rl(Fe)}if(null!==o){let S=m?o.residualClasses:o.residualStyles;null!=S&&(I=Ml(S,d))}return I}function ch(s){return void 0!==s}function dh(s,o=""){const u=Ve(),d=dn(),h=s+20,m=d.firstCreatePass?ol(d,h,1,o,null):d.data[h],E=u[h]=function dg(s,o){return On(s)?s.createText(o):s.createTextNode(o)}(u[11],o);jd(d,u,E,m),hi(m,!1)}function ll(s){return cl("",s,""),ll}function cl(s,o,u){const d=Ve(),h=function Yd(s,o,u,d){return us(s,pa(),u)?o+Ie(u)+d:fn}(d,s,o,u);return h!==fn&&ul(d,Hr(),h),cl}const nd=void 0;var SS=["en",[["a","p"],["AM","PM"],nd],[["AM","PM"],nd,nd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],nd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],nd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",nd,"{1} 'at' {0}",nd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function DS(s){const u=Math.floor(Math.abs(s)),d=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===d?1:5}];let gh={};function Hf(s){const o=function rC(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=tC(o);if(u)return u;const d=o.split("-")[0];if(u=tC(d),u)return u;if("en"===d)return SS;throw new Error(`Missing locale data for the locale "${s}".`)}function $f(s){return Hf(s)[Bt.PluralCase]}function tC(s){return s in gh||(gh[s]=en.ng&&en.ng.common&&en.ng.common.locales&&en.ng.common.locales[s]),gh[s]}var Bt=(()=>((Bt=Bt||{})[Bt.LocaleId=0]="LocaleId",Bt[Bt.DayPeriodsFormat=1]="DayPeriodsFormat",Bt[Bt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Bt[Bt.DaysFormat=3]="DaysFormat",Bt[Bt.DaysStandalone=4]="DaysStandalone",Bt[Bt.MonthsFormat=5]="MonthsFormat",Bt[Bt.MonthsStandalone=6]="MonthsStandalone",Bt[Bt.Eras=7]="Eras",Bt[Bt.FirstDayOfWeek=8]="FirstDayOfWeek",Bt[Bt.WeekendRange=9]="WeekendRange",Bt[Bt.DateFormat=10]="DateFormat",Bt[Bt.TimeFormat=11]="TimeFormat",Bt[Bt.DateTimeFormat=12]="DateTimeFormat",Bt[Bt.NumberSymbols=13]="NumberSymbols",Bt[Bt.NumberFormats=14]="NumberFormats",Bt[Bt.CurrencyCode=15]="CurrencyCode",Bt[Bt.CurrencySymbol=16]="CurrencySymbol",Bt[Bt.CurrencyName=17]="CurrencyName",Bt[Bt.Currencies=18]="Currencies",Bt[Bt.Directionality=19]="Directionality",Bt[Bt.PluralCase=20]="PluralCase",Bt[Bt.ExtraData=21]="ExtraData",Bt))();const Gf="en-US";let Ev=Gf;function wm(s,o,u,d,h){if(s=ge(s),Array.isArray(s))for(let m=0;m<s.length;m++)wm(s[m],o,u,d,h);else{const m=dn(),E=Ve();let I=Nu(s)?s:ge(s.provide),S=Hd(s);const k=qn(),F=1048575&k.providerIndexes,$=k.directiveStart,te=k.providerIndexes>>20;if(Nu(s)||!s.multi){const fe=new jo(S,h,_n),Fe=Jf(I,o,h?F:F+te,$);-1===Fe?(Kt(De(k,E),m,I),Fv(m,s,o.length),o.push(I),k.directiveStart++,k.directiveEnd++,h&&(k.providerIndexes+=1048576),u.push(fe),E.push(fe)):(u[Fe]=fe,E[Fe]=fe)}else{const fe=Jf(I,o,F+te,$),Fe=Jf(I,o,F,F+te),rt=fe>=0&&u[fe],ct=Fe>=0&&u[Fe];if(h&&!ct||!h&&!rt){Kt(De(k,E),m,I);const wt=function Vv(s,o,u,d,h){const m=new jo(s,u,_n);return m.multi=[],m.index=o,m.componentProviders=0,vh(m,h,d&&!u),m}(h?rA:nA,u.length,h,d,S);!h&&ct&&(u[Fe].providerFactory=wt),Fv(m,s,o.length,0),o.push(I),k.directiveStart++,k.directiveEnd++,h&&(k.providerIndexes+=1048576),u.push(wt),E.push(wt)}else Fv(m,s,fe>-1?fe:Fe,vh(u[h?Fe:fe],S,!h&&d));!h&&d&&ct&&u[Fe].componentProviders++}}}function Fv(s,o,u,d){const h=Nu(o),m=function Ry(s){return!!s.useClass}(o);if(h||m){const S=(m?ge(o.useClass):o).prototype.ngOnDestroy;if(S){const k=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const F=k.indexOf(u);-1===F?k.push(u,[d,S]):k[F+1].push(d,S)}else k.push(u,S)}}}function vh(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function Jf(s,o,u,d){for(let h=u;h<d;h++)if(o[h]===s)return h;return-1}function nA(s,o,u,d){return Uv(this.multi,[])}function rA(s,o,u,d){const h=this.multi;let m;if(this.providerFactory){const E=this.providerFactory.componentProviders,I=Bi(u,u[1],this.providerFactory.index,d);m=I.slice(0,E),Uv(h,m);for(let S=E;S<I.length;S++)m.push(I[S])}else m=[],Uv(h,m);return m}function Uv(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function Xf(s,o=[]){return u=>{u.providersResolver=(d,h)=>function vm(s,o,u){const d=dn();if(d.firstCreatePass){const h=jr(s);wm(u,d.data,d.blueprint,h,!0),wm(o,d.data,d.blueprint,h,!1)}}(d,h?h(s):s,o)}}class vC{}class iA{resolveComponentFactory(o){throw function ep(s){const o=Error(`No component factory found for ${ve(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let tp=(()=>{class s{}return s.NULL=new iA,s})();function Bv(){return Vu(qn(),Ve())}function Vu(s,o){return new hl(Er(s,o))}let hl=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=Bv,s})();function sA(s){return s instanceof hl?s.nativeElement:s}class jv{}let oA=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function zv(){const s=Ve(),u=hr(qn().index,s);return function bm(s){return s[11]}(is(u)?u:s)}(),s})(),Pa=(()=>{class s{}return s.\u0275prov=Xt({token:s,providedIn:"root",factory:()=>null}),s})();class Hv{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const wC=new Hv("13.3.8"),Cm={};function Im(s,o,u,d,h=!1){for(;null!==u;){const m=o[u.index];if(null!==m&&d.push(Pn(m)),Jr(m))for(let I=10;I<m.length;I++){const S=m[I],k=S[1].firstChild;null!==k&&Im(S[1],S,k,d)}const E=u.type;if(8&E)Im(s,o,u.child,d);else if(32&E){const I=J_(u,o);let S;for(;S=I();)d.push(S)}else if(16&E){const I=mE(o,u);if(Array.isArray(I))d.push(...I);else{const S=yf(o[16]);Im(S[1],S,I,d,!0)}}u=h?u.projectionNext:u.next}return d}class np{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return Im(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Jr(o)){const u=o[8],d=u?u.indexOf(this):-1;d>-1&&(hg(o,d),xu(u,d))}this._attachedToViewContainer=!1}uE(this._lView[1],this._lView)}onDestroy(o){kE(this._lView[1],this._lView,null,o)}markForCheck(){BE(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function Iy(s,o,u){const d=o[10];d.begin&&d.begin();try{jc(s,o,s.template,u)}catch(h){throw Vg(o,h),h}finally{d.end&&d.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ke(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Vd(s,o){Uc(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Ke(902,"");this._appRef=o}}class aA extends np{constructor(o){super(o),this._view=o}detectChanges(){Fg(this._view)}checkNoChanges(){}get context(){return null}}class $v extends tp{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=Et(o);return new Gv(u,this.ngModule)}}function wh(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class Gv extends vC{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function YR(s){return s.map(KR).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return wh(this.componentDef.inputs)}get outputs(){return wh(this.componentDef.outputs)}create(o,u,d,h){const m=(h=h||this.ngModule)?function bC(s,o){return{get:(u,d,h)=>{const m=s.get(u,Cm,h);return m!==Cm||d===Cm?m:o.get(u,d,h)}}}(o,h.injector):o,E=m.get(jv,ha),I=m.get(Pa,null),S=E.createRenderer(null,this.componentDef),k=this.componentDef.selectors[0][0]||"div",F=d?function RE(s,o,u){if(On(s))return s.selectRootElement(o,u===cn.ShadowDom);let d="string"==typeof o?s.querySelector(o):o;return d.textContent="",d}(S,d,this.componentDef.encapsulation):Ar(E.createRenderer(null,this.componentDef),k,function EC(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(k)),$=this.componentDef.onPush?576:528,te=function Vy(s,o){return{components:[],scheduler:s||vD,clean:Ty,playerHandler:o||null,flags:0}}(),fe=kg(0,null,null,1,0,null,null,null,null,null),Fe=wf(null,fe,te,$,null,null,E,S,I,m);let rt,ct;Bo(Fe);try{const wt=function Fy(s,o,u,d,h,m){const E=u[1];u[20]=s;const S=ol(E,20,2,"#host",null),k=S.mergedAttrs=o.hostAttrs;null!==k&&(Bg(S,k,!0),null!==s&&(os(h,s,k),null!==S.classes&&yg(h,s,S.classes),null!==S.styles&&sy(h,s,S.styles)));const F=d.createRenderer(s,o),$=wf(u,ME(o),null,o.onPush?64:16,u[20],S,d,F,m||null,null);return E.firstCreatePass&&(Kt(De(S,u),E,o.type),FE(E,S),Ey(S,u.length,1)),Cy(u,$),u[20]=$}(F,this.componentDef,Fe,E,S);if(F)if(d)os(S,F,["ng-version",wC.full]);else{const{attrs:Be,classes:Pt}=function RD(s){const o=[],u=[];let d=1,h=2;for(;d<s.length;){let m=s[d];if("string"==typeof m)2===h?""!==m&&o.push(m,s[++d]):8===h&&u.push(m);else{if(!Qa(h))break;h=m}d++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);Be&&os(S,F,Be),Pt&&Pt.length>0&&yg(S,F,Pt.join(" "))}if(ct=tr(fe,20),void 0!==u){const Be=ct.projection=[];for(let Pt=0;Pt<this.ngContentSelectors.length;Pt++){const Sn=u[Pt];Be.push(null!=Sn?Array.from(Sn):null)}}rt=function Uy(s,o,u,d,h){const m=u[1],E=function LE(s,o,u){const d=qn();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),Lg(s,d,o,Gl(s,o,1,null),u));const h=Bi(o,s,d.directiveStart,d);Cs(h,o);const m=Er(d,o);return m&&Cs(m,o),h}(m,u,o);if(d.components.push(E),s[8]=E,h&&h.forEach(S=>S(E,o)),o.contentQueries){const S=qn();o.contentQueries(1,E,S.directiveStart)}const I=qn();return!m.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||($r(I.index),ZD(u[1],I,0,I.directiveStart,I.directiveEnd,o),Og(o,E)),E}(wt,this.componentDef,Fe,te,[eb]),Bc(fe,Fe,null)}finally{gi()}return new uA(this.componentType,rt,Vu(ct,Fe),Fe,ct)}}class uA extends class yC{}{constructor(o,u,d,h,m){super(),this.location=d,this._rootLView=h,this._tNode=m,this.instance=u,this.hostView=this.changeDetectorRef=new aA(h),this.componentType=o}get injector(){return new Si(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Eh{}class CC{}const bh=new Map;class TC extends Eh{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new $v(this);const d=tn(o);this._bootstrapComponents=Ya(d.bootstrap),this._r3Injector=Wl(o,u,[{provide:Eh,useValue:this},{provide:tp,useValue:this.componentFactoryResolver}],ve(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,u=Zo.THROW_IF_NOT_FOUND,d=xt.Default){return o===Zo||o===Eh||o===Af?this:this._r3Injector.get(o,u,d)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class rc extends CC{constructor(o){super(),this.moduleType=o,null!==tn(o)&&function cA(s){const o=new Set;!function u(d){const h=tn(d,!0),m=h.id;null!==m&&(function IC(s,o,u){if(o&&o!==u)throw new Error(`Duplicate module registered for ${s} - ${ve(o)} vs ${ve(o.name)}`)}(m,bh.get(m),d),bh.set(m,d));const E=Ya(h.imports);for(const I of E)o.has(I)||(o.add(I),u(I))}(s)}(o)}create(o){return new TC(this.moduleType,o)}}function Do(s){return o=>{setTimeout(s,void 0,o)}}const Ts=class Pm extends g.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,d){var h,m,E;let I=o,S=u||(()=>null),k=d;if(o&&"object"==typeof o){const $=o;I=null===(h=$.next)||void 0===h?void 0:h.bind($),S=null===(m=$.error)||void 0===m?void 0:m.bind($),k=null===(E=$.complete)||void 0===E?void 0:E.bind($)}this.__isAsync&&(S=Do(S),I&&(I=Do(I)),k&&(k=Do(k)));const F=super.subscribe({next:I,error:S,complete:k});return o instanceof W.w0&&o.add(F),F}};function OC(){return this._results[Kl()]()}class Rm{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Kl(),d=Rm.prototype;d[u]||(d[u]=OC)}get changes(){return this._changes||(this._changes=new Ts)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const d=this;d.dirty=!1;const h=xi(o);(this._changesDetected=!function Sl(s,o,u){if(s.length!==o.length)return!1;for(let d=0;d<s.length;d++){let h=s[d],m=o[d];if(u&&(h=u(h),m=u(m)),m!==h)return!1}return!0}(d._results,h,u))&&(d._results=h,d.length=h.length,d.last=h[this.length-1],d.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let ou=(()=>{class s{}return s.__NG_ELEMENT_ID__=_A,s})();const Ck=ou,mA=class extends Ck{constructor(o,u,d){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=d}createEmbeddedView(o){const u=this._declarationTContainer.tViews,d=wf(this._declarationLView,u,o,16,null,u.declTNode,null,null,null,null);d[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(d[19]=m.createEmbeddedView(u)),Bc(u,d,o),new np(d)}};function _A(){return Ih(qn(),Ve())}function Ih(s,o){return 4&s.type?new mA(o,s,Vu(s,o)):null}let km=(()=>{class s{}return s.__NG_ELEMENT_ID__=yA,s})();function yA(){return Dh(qn(),Ve())}const vA=km,LC=class extends vA{constructor(o,u,d){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=d}get element(){return Vu(this._hostTNode,this._hostLView)}get injector(){return new Si(this._hostTNode,this._hostLView)}get parentInjector(){const o=Lt(this._hostTNode,this._hostLView);if(Yu(o)){const u=l(o,this._hostLView),d=Fn(o);return new Si(u[1].data[d+8],u)}return new Si(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=rp(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,d){const h=o.createEmbeddedView(u||{});return this.insert(h,d),h}createComponent(o,u,d,h,m){const E=o&&!function Au(s){return"function"==typeof s}(o);let I;if(E)I=u;else{const $=u||{};I=$.index,d=$.injector,h=$.projectableNodes,m=$.ngModuleRef}const S=E?o:new Gv(Et(o)),k=d||this.parentInjector;if(!m&&null==S.ngModule){const te=(E?k:this.parentInjector).get(Eh,null);te&&(m=te)}const F=S.create(k,h,void 0,m);return this.insert(F.hostView,I),F}insert(o,u){const d=o._lView,h=d[1];if(function Oo(s){return Jr(s[3])}(d)){const F=this.indexOf(o);if(-1!==F)this.detach(F);else{const $=d[3],te=new LC($,$[6],$[3]);te.detach(te.indexOf(o))}}const m=this._adjustIndex(u),E=this._lContainer;!function Bd(s,o,u,d){const h=10+d,m=u.length;d>0&&(u[h-1][4]=o),d<m-10?(o[4]=u[h],Al(u,10+d,o)):(u.push(o),o[4]=null),o[3]=u;const E=o[17];null!==E&&u!==E&&function CD(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(E,o);const I=o[19];null!==I&&I.insertView(s),o[2]|=128}(h,d,E,m);const I=mg(m,E),S=d[11],k=pg(S,E[7]);return null!==k&&function oE(s,o,u,d,h,m){d[0]=h,d[6]=o,Uc(s,d,u,1,h,m)}(h,E[6],S,d,k,I),o.attachToViewContainerRef(),Al(Th(E),m,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=rp(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),d=hg(this._lContainer,u);d&&(xu(Th(this._lContainer),u),uE(d[1],d))}detach(o){const u=this._adjustIndex(o,-1),d=hg(this._lContainer,u);return d&&null!=xu(Th(this._lContainer),u)?new np(d):null}_adjustIndex(o,u=0){return null==o?this.length+u:o}};function rp(s){return s[8]}function Th(s){return s[8]||(s[8]=[])}function Dh(s,o){let u;const d=o[s.index];if(Jr(d))u=d;else{let h;if(8&s.type)h=Pn(d);else{const m=o[11];h=m.createComment("");const E=Er(s,o);Hl(m,pg(m,E),h,function TD(s,o){return On(s)?s.nextSibling(o):o.nextSibling}(m,E),!1)}o[s.index]=u=VE(d,o,h,s),Cy(o,u)}return new LC(u,s,o)}class Nm{constructor(o){this.queryList=o,this.matches=null}clone(){return new Nm(this.queryList)}setDirty(){this.queryList.setDirty()}}class Om{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const d=null!==o.contentQueries?o.contentQueries[0]:u.length,h=[];for(let m=0;m<d;m++){const E=u.getByIndex(m);h.push(this.queries[E.indexInDeclarationView].clone())}return new Om(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==GC(o,u).matches&&this.queries[u].setDirty()}}class Qv{constructor(o,u,d=null){this.predicate=o,this.flags=u,this.read=d}}class Jo{constructor(o=[]){this.queries=o}elementStart(o,u){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let d=0;d<this.length;d++){const h=null!==u?u.length:0,m=this.getByIndex(d).embeddedTView(o,h);m&&(m.indexInDeclarationView=d,null!==u?u.push(m):u=[m])}return null!==u?new Jo(u):null}template(o,u){for(let d=0;d<this.queries.length;d++)this.queries[d].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Lm{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new Lm(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let d=o.parent;for(;null!==d&&8&d.type&&d.index!==u;)d=d.parent;return u===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const d=this.metadata.predicate;if(Array.isArray(d))for(let h=0;h<d.length;h++){const m=d[h];this.matchTNodeWithReadOption(o,u,EA(u,m)),this.matchTNodeWithReadOption(o,u,Tu(u,o,m,!1,!1))}else d===ou?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,Tu(u,o,d,!1,!1))}matchTNodeWithReadOption(o,u,d){if(null!==d){const h=this.metadata.read;if(null!==h)if(h===hl||h===km||h===ou&&4&u.type)this.addMatch(u.index,-2);else{const m=Tu(u,o,h,!1,!1);null!==m&&this.addMatch(u.index,m)}else this.addMatch(u.index,d)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function EA(s,o){const u=s.localNames;if(null!==u)for(let d=0;d<u.length;d+=2)if(u[d]===o)return u[d+1];return null}function CA(s,o,u,d){return-1===u?function bA(s,o){return 11&s.type?Vu(s,o):4&s.type?Ih(s,o):null}(o,s):-2===u?function UC(s,o,u){return u===hl?Vu(o,s):u===ou?Ih(o,s):u===km?Dh(o,s):void 0}(s,o,d):Bi(s,s[1],u,o)}function VC(s,o,u,d){const h=o[19].queries[d];if(null===h.matches){const m=s.data,E=u.matches,I=[];for(let S=0;S<E.length;S+=2){const k=E[S];I.push(k<0?null:CA(o,m[k],E[S+1],u.metadata.read))}h.matches=I}return h.matches}function Jv(s,o,u,d){const h=s.queries.getByIndex(u),m=h.matches;if(null!==m){const E=VC(s,o,h,u);for(let I=0;I<m.length;I+=2){const S=m[I];if(S>0)d.push(E[I/2]);else{const k=m[I+1],F=o[-S];for(let $=10;$<F.length;$++){const te=F[$];te[17]===te[3]&&Jv(te[1],te,k,d)}if(null!==F[9]){const $=F[9];for(let te=0;te<$.length;te++){const fe=$[te];Jv(fe[1],fe,k,d)}}}}}return d}function BC(s){const o=Ve(),u=dn(),d=wu();Ga(d+1);const h=GC(u,d);if(s.dirty&&Vi(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const m=h.crossesNgTemplate?Jv(u,o,d,[]):VC(u,o,h,d);s.reset(m,sA),s.notifyOnChanges()}return!0}return!1}function jC(s,o,u,d){const h=dn();if(h.firstCreatePass){const m=qn();(function $C(s,o,u){null===s.queries&&(s.queries=new Jo),s.queries.track(new Lm(o,u))})(h,new Qv(o,u,d),m.index),function DA(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(h,s),2==(2&u)&&(h.staticContentQueries=!0)}!function HC(s,o,u){const d=new Rm(4==(4&u));kE(s,o,d,d.destroy),null===o[19]&&(o[19]=new Om),o[19].queries.push(new Nm(d))}(h,Ve(),u)}function zC(){return function TA(s,o){return s[19].queries[o].queryList}(Ve(),wu())}function GC(s,o){return s.queries.getByIndex(o)}function Vm(...s){}const oI=new Tr("Application Initializer");let r0=(()=>{class s{constructor(u){this.appInits=u,this.resolve=Vm,this.reject=Vm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,h)=>{this.resolve=d,this.reject=h})}runInitializers(){if(this.initialized)return;const u=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const m=this.appInits[h]();if(Qg(m))u.push(m);else if(Qc(m)){const E=new Promise((I,S)=>{m.subscribe({complete:I,error:S})});u.push(E)}}Promise.all(u).then(()=>{d()}).catch(h=>{this.reject(h)}),0===u.length&&d(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(ut(oI,8))},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const s0=new Tr("AppId",{providedIn:"root",factory:function o0(){return`${a0()}${a0()}${a0()}`}});function a0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const aI=new Tr("Platform Initializer"),ZA=new Tr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),u0=new Tr("appBootstrapListener");let KA=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const l0=new Tr("LocaleId",{providedIn:"root",factory:()=>qt(l0,xt.Optional|xt.SkipSelf)||function uI(){return"undefined"!=typeof $localize&&$localize.locale||Gf}()}),YA=new Tr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class c0{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let QA=(()=>{class s{compileModuleSync(u){return new rc(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const d=this.compileModuleSync(u),m=Ya(tn(u).declarations).reduce((E,I)=>{const S=Et(I);return S&&E.push(new Gv(S)),E},[]);return new c0(d,m)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Bu=(()=>Promise.resolve(0))();function d0(s){"undefined"==typeof Zone?Bu.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class au{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ts(!1),this.onMicrotaskEmpty=new Ts(!1),this.onStable=new Ts(!1),this.onError=new Ts(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!d&&u,h.shouldCoalesceRunChangeDetection=d,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function cI(){let s=en.requestAnimationFrame,o=en.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const d=o[Zone.__symbol__("OriginalDelegate")];d&&(o=d)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function oc(s){const o=()=>{!function Mh(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(en,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Bm(s),s.isCheckStableRunning=!0,h0(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Bm(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,d,h,m,E,I)=>{try{return ls(s),u.invokeTask(h,m,E,I)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||s.shouldCoalesceRunChangeDetection)&&o(),pl(s)}},onInvoke:(u,d,h,m,E,I,S)=>{try{return ls(s),u.invoke(h,m,E,I,S)}finally{s.shouldCoalesceRunChangeDetection&&o(),pl(s)}},onHasTask:(u,d,h,m)=>{u.hasTask(h,m),d===h&&("microTask"==m.change?(s._hasPendingMicrotasks=m.microTask,Bm(s),h0(s)):"macroTask"==m.change&&(s.hasPendingMacrotasks=m.macroTask))},onHandleError:(u,d,h,m)=>(u.handleError(h,m),s.runOutsideAngular(()=>s.onError.emit(m)),!1)})}(h)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!au.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(au.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,u,d){return this._inner.run(o,u,d)}runTask(o,u,d,h){const m=this._inner,E=m.scheduleEventTask("NgZoneEvent: "+h,o,JA,Vm,Vm);try{return m.runTask(E,u,d)}finally{m.cancelTask(E)}}runGuarded(o,u,d){return this._inner.runGuarded(o,u,d)}runOutsideAngular(o){return this._outer.run(o)}}const JA={};function h0(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Bm(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function ls(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function pl(s){s._nesting--,h0(s)}class XA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ts,this.onMicrotaskEmpty=new Ts,this.onStable=new Ts,this.onError=new Ts}run(o,u,d){return o.apply(u,d)}runGuarded(o,u,d){return o.apply(u,d)}runOutsideAngular(o){return o()}runTask(o,u,d,h){return o.apply(u,d)}}let ex=(()=>{class s{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{au.assertNotInAngularZone(),d0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())d0(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(u)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,d,h){let m=-1;d&&d>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(E=>E.timeoutId!==m),u(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:u,timeoutId:m,updateCb:h})}whenStable(u,d,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,d,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,d,h){return[]}}return s.\u0275fac=function(u){return new(u||s)(ut(au))},s.\u0275prov=Xt({token:s,factory:s.\u0275fac}),s})(),dI=(()=>{class s{constructor(){this._applications=new Map,jm.addToWindow(this)}registerApplication(u,d){this._applications.set(u,d)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,d=!0){return jm.findTestabilityInTree(this,u,d)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();class hI{addToWindow(o){}findTestabilityInTree(o,u,d){return null}}function fI(s){jm=s}let jm=new hI,ac=null;const f0=new Tr("AllowMultipleToken"),p0=new Tr("PlatformOnDestroy");class mI{constructor(o,u){this.name=o,this.token=u}}function m0(s,o,u=[]){const d=`Platform: ${o}`,h=new Tr(d);return(m=[])=>{let E=ap();if(!E||E.injector.get(f0,!1)){const I=[...u,...m,{provide:h,useValue:!0}];s?s(I):function _I(s){if(ac&&!ac.get(f0,!1))throw new Ke(400,"");ac=s;const o=s.get(_0),u=s.get(aI,null);u&&u.forEach(d=>d())}(function yI(s=[],o){return Zo.create({name:o,providers:[{provide:jg,useValue:"platform"},{provide:p0,useValue:()=>ac=null},...s]})}(I,d))}return function tx(s){const o=ap();if(!o)throw new Ke(401,"");return o}()}}function ap(){var s;return null!==(s=null==ac?void 0:ac.get(_0))&&void 0!==s?s:null}let _0=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,d){const I=function y0(s,o){let u;return u="noop"===s?new XA:("zone.js"===s?void 0:s)||new au({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),u}(d?d.ngZone:void 0,{ngZoneEventCoalescing:d&&d.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:d&&d.ngZoneRunCoalescing||!1}),S=[{provide:au,useValue:I}];return I.run(()=>{const k=Zo.create({providers:S,parent:this.injector,name:u.moduleType.name}),F=u.create(k),$=F.injector.get(ag,null);if(!$)throw new Ke(402,"");return I.runOutsideAngular(()=>{const te=I.onError.subscribe({next:fe=>{$.handleError(fe)}});F.onDestroy(()=>{up(this._modules,F),te.unsubscribe()})}),function vI(s,o,u){try{const d=u();return Qg(d)?d.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):d}catch(d){throw o.runOutsideAngular(()=>s.handleError(d)),d}}($,I,()=>{const te=F.injector.get(r0);return te.runInitializers(),te.donePromise.then(()=>(function um(s){Ut(s,"Expected localeId to be defined"),"string"==typeof s&&(Ev=s.toLowerCase().replace(/_/g,"-"))}(F.injector.get(l0,Gf)||Gf),this._moduleDoBootstrap(F),F))})})}bootstrapModule(u,d=[]){const h=v0({},d);return function pI(s,o,u){const d=new rc(u);return Promise.resolve(d)}(0,0,u).then(m=>this.bootstrapModuleFactory(m,h))}_moduleDoBootstrap(u){const d=u.injector.get(zm);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(h=>d.bootstrap(h));else{if(!u.instance.ngDoBootstrap)throw new Ke(403,"");u.instance.ngDoBootstrap(d)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ke(404,"");this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const u=this._injector.get(p0,null);null==u||u(),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(ut(Zo))},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function v0(s,o){return Array.isArray(o)?o.reduce(v0,s):Object.assign(Object.assign({},s),o)}let zm=(()=>{class s{constructor(u,d,h,m){this._zone=u,this._injector=d,this._exceptionHandler=h,this._initStatus=m,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new j.y(S=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{S.next(this._stable),S.complete()})}),I=new j.y(S=>{let k;this._zone.runOutsideAngular(()=>{k=this._zone.onStable.subscribe(()=>{au.assertNotInAngularZone(),d0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,S.next(!0))})})});const F=this._zone.onUnstable.subscribe(()=>{au.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{S.next(!1)}))});return()=>{k.unsubscribe(),F.unsubscribe()}});this.isStable=(0,le.T)(E,I.pipe((0,we.B)()))}bootstrap(u,d){if(!this._initStatus.done)throw new Ke(405,"");let h;h=u instanceof vC?u:this._injector.get(tp).resolveComponentFactory(u),this.componentTypes.push(h.componentType);const m=function gI(s){return s.isBoundToModule}(h)?void 0:this._injector.get(Eh),I=h.create(Zo.NULL,[],d||h.selector,m),S=I.location.nativeElement,k=I.injector.get(ex,null),F=k&&I.injector.get(dI);return k&&F&&F.registerApplication(S,k),I.onDestroy(()=>{this.detachView(I.hostView),up(this.components,I),F&&F.unregisterApplication(S)}),this._loadComponent(I),I}tick(){if(this._runningTick)throw new Ke(101,"");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const d=u;this._views.push(d),d.attachToAppRef(this)}detachView(u){const d=u;up(this._views,d),d.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(u0,[]).concat(this._bootstrapListeners).forEach(h=>h(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(u){return new(u||s)(ut(au),ut(Zo),ut(ag),ut(r0))},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function up(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let w0=!0,E0=!1;function uc(){return E0=!0,w0}function Xs(){if(E0)throw new Error("Cannot enable prod mode after platform setup.");w0=!1}let Hm=(()=>{class s{}return s.__NG_ELEMENT_ID__=cp,s})();function cp(s){return function b0(s,o,u){if(Qn(s)&&!u){const d=hr(s.index,o);return new np(d,d)}return 47&s.type?new np(o[16],o):null}(qn(),Ve(),16==(16&s))}class CI{constructor(){}supports(o){return Mf(o)}create(o){return new II(o)}}const ax=(s,o)=>o;class II{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||ax}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,d=this._removalsHead,h=0,m=null;for(;u||d;){const E=!d||u&&u.currentIndex<lx(d,h,m)?u:d,I=lx(E,h,m),S=E.currentIndex;if(E===d)h--,d=d._nextRemoved;else if(u=u._next,null==E.previousIndex)h++;else{m||(m=[]);const k=I-h,F=S-h;if(k!=F){for(let te=0;te<k;te++){const fe=te<m.length?m[te]:m[te]=0,Fe=fe+te;F<=Fe&&Fe<k&&(m[te]=fe+1)}m[E.previousIndex]=F-k}}I!==S&&o(E,I,S)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!Mf(o))throw new Ke(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,m,E,u=this._itHead,d=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)m=o[I],E=this._trackByFn(I,m),null!==u&&Object.is(u.trackById,E)?(d&&(u=this._verifyReinsertion(u,m,E,I)),Object.is(u.item,m)||this._addIdentityChange(u,m)):(u=this._mismatch(u,m,E,I),d=!0),u=u._next}else h=0,function cS(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[Kl()]();let d;for(;!(d=u.next()).done;)o(d.value)}}(o,I=>{E=this._trackByFn(h,I),null!==u&&Object.is(u.trackById,E)?(d&&(u=this._verifyReinsertion(u,I,E,h)),Object.is(u.item,I)||this._addIdentityChange(u,I)):(u=this._mismatch(u,I,E,h),d=!0),u=u._next,h++}),this.length=h;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,d,h){let m;return null===o?m=this._itTail:(m=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,m,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(d,h))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,m,h)):o=this._addAfter(new ux(u,d),m,h),o}_verifyReinsertion(o,u,d,h){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==m?o=this._reinsertAfter(m,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,m=o._nextRemoved;return null===h?this._removalsHead=m:h._nextRemoved=m,null===m?this._removalsTail=h:m._prevRemoved=h,this._insertAfter(o,u,d),this._addToMoves(o,d),o}_moveAfter(o,u,d){return this._unlink(o),this._insertAfter(o,u,d),this._addToMoves(o,d),o}_addAfter(o,u,d){return this._insertAfter(o,u,d),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,d){const h=null===u?this._itHead:u._next;return o._next=h,o._prev=u,null===h?this._itTail=o:h._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new DI),this._linkedRecords.put(o),o.currentIndex=d,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,d=o._next;return null===u?this._itHead=d:u._next=d,null===d?this._itTail=u:d._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new DI),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class ux{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class TI{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===u||u<=d.currentIndex)&&Object.is(d.trackById,o))return d;return null}remove(o){const u=o._prevDup,d=o._nextDup;return null===u?this._head=d:u._nextDup=d,null===d?this._tail=u:d._prevDup=u,null===this._head}}class DI{constructor(){this.map=new Map}put(o){const u=o.trackById;let d=this.map.get(u);d||(d=new TI,this.map.set(u,d)),d.add(o)}get(o,u){const h=this.map.get(o);return h?h.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function lx(s,o,u){const d=s.previousIndex;if(null===d)return d;let h=0;return u&&d<u.length&&(h=u[d]),d+o+h}class SI{constructor(){}supports(o){return o instanceof Map||$y(o)}create(){return new AI}}class AI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||$y(o)))throw new Ke(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(d,h)=>{if(u&&u.key===h)this._maybeAddToChanges(u,d),this._appendAfter=u,u=u._next;else{const m=this._getOrCreateRecordForKey(h,d);u=this._insertBeforeOrAppend(u,m)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let d=u;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const d=o._prev;return u._next=o,u._prev=d,o._prev=u,d&&(d._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,u);const m=h._prev,E=h._next;return m&&(m._next=E),E&&(E._prev=m),h._next=null,h._prev=null,h}const d=new Bk(o);return this._records.set(o,d),d.currentValue=u,this._addToAdditions(d),d}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(d=>u(o[d],d))}}class Bk{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function $m(){return new M0([new CI])}let M0=(()=>{class s{constructor(u){this.factories=u}static create(u,d){if(null!=d){const h=d.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:d=>s.create(u,d||$m()),deps:[[s,new as,new $i]]}}find(u){const d=this.factories.find(h=>h.supports(u));if(null!=d)return d;throw new Ke(901,"")}}return s.\u0275prov=Xt({token:s,providedIn:"root",factory:$m}),s})();function Gm(){return new dp([new SI])}let dp=(()=>{class s{constructor(u){this.factories=u}static create(u,d){if(d){const h=d.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:d=>s.create(u,d||Gm()),deps:[[s,new as,new $i]]}}find(u){const d=this.factories.find(m=>m.supports(u));if(d)return d;throw new Ke(901,"")}}return s.\u0275prov=Xt({token:s,providedIn:"root",factory:Gm}),s})();const Rh=m0(null,"core",[]);let hp=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(ut(zm))},s.\u0275mod=Ce({type:s}),s.\u0275inj=wn({}),s})()},3942:(pt,ke,O)=>{"use strict";O.d(ke,{Z:()=>Ke});var g=O(2090),W=O(4859),j=O(9681),le=O(1877);class we{constructor(Ie,Le){this._delegate=Ie,this.firebase=Le,(0,j._addComponent)(Ie,new W.wA("app-compat",()=>this,"PUBLIC")),this.container=Ie.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ie){this._delegate.automaticDataCollectionEnabled=Ie}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ie=>{this._delegate.checkDestroyed(),Ie()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,j.deleteApp)(this._delegate)))}_getService(Ie,Le=j._DEFAULT_ENTRY_NAME){var ot;this._delegate.checkDestroyed();const it=this._delegate.container.getProvider(Ie);return!it.isInitialized()&&"EXPLICIT"===(null===(ot=it.getComponent())||void 0===ot?void 0:ot.instantiationMode)&&it.initialize(),it.getImmediate({identifier:Le})}_removeServiceInstance(Ie,Le=j._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ie).clearInstance(Le)}_addComponent(Ie){(0,j._addComponent)(this._delegate,Ie)}_addOrOverwriteComponent(Ie){(0,j._addOrOverwriteComponent)(this._delegate,Ie)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Te=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Q=function Ee(){const nt=function ve(nt){const Ie={},Le={__esModule:!0,initializeApp:function ze(ce,be={}){const Ne=j.initializeApp(ce,be);if((0,g.r3)(Ie,Ne.name))return Ie[Ne.name];const se=new nt(Ne,Le);return Ie[Ne.name]=se,se},app:it,registerVersion:j.registerVersion,setLogLevel:j.setLogLevel,onLog:j.onLog,apps:null,SDK_VERSION:j.SDK_VERSION,INTERNAL:{registerComponent:function Re(ce){const be=ce.name,Ne=be.replace("-compat","");if(j._registerComponent(ce)&&"PUBLIC"===ce.type){const se=(me=it())=>{if("function"!=typeof me[Ne])throw Te.create("invalid-app-argument",{appName:be});return me[Ne]()};void 0!==ce.serviceProps&&(0,g.ZB)(se,ce.serviceProps),Le[Ne]=se,nt.prototype[Ne]=function(...me){return this._getService.bind(this,be).apply(this,ce.multipleInstances?me:[])}}return"PUBLIC"===ce.type?Le[Ne]:null},removeApp:function ot(ce){delete Ie[ce]},useAsService:function at(ce,be){return"serverAuth"===be?null:be},modularAPIs:j}};function it(ce){if(!(0,g.r3)(Ie,ce=ce||j._DEFAULT_ENTRY_NAME))throw Te.create("no-app",{appName:ce});return Ie[ce]}return Le.default=Le,Object.defineProperty(Le,"apps",{get:function He(){return Object.keys(Ie).map(ce=>Ie[ce])}}),it.App=nt,Le}(we);return nt.INTERNAL=Object.assign(Object.assign({},nt.INTERNAL),{createFirebaseNamespace:Ee,extendNamespace:function Ie(Le){(0,g.ZB)(nt,Le)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),nt}(),X=new le.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){X.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const nt=self.firebase.SDK_VERSION;nt&&nt.indexOf("LITE")>=0&&X.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ke=Q;!function je(nt){(0,j.registerVersion)("@firebase/app-compat","0.1.25",nt)}()},9681:(pt,ke,O)=>{"use strict";O.r(ke),O.d(ke,{FirebaseError:()=>le.ZR,SDK_VERSION:()=>bi,_DEFAULT_ENTRY_NAME:()=>Ut,_addComponent:()=>Nt,_addOrOverwriteComponent:()=>Xt,_apps:()=>zt,_clearComponents:()=>Ei,_components:()=>Vt,_getProvider:()=>wn,_registerComponent:()=>Gt,_removeServiceInstance:()=>Vn,deleteApp:()=>xt,getApp:()=>Xn,getApps:()=>Ci,initializeApp:()=>Li,onLog:()=>Cn,registerVersion:()=>kn,setLogLevel:()=>Fr});var g=O(5861),W=O(4859),j=O(1877),le=O(2090),we=O(8766);class _e{constructor(he){this.container=he}getPlatformInfoString(){return this.container.getProviders().map($e=>{if(function Te(ee){const he=ee.getComponent();return"VERSION"===(null==he?void 0:he.type)}($e)){const dt=$e.getImmediate();return`${dt.library}/${dt.version}`}return null}).filter($e=>$e).join(" ")}}const ve="@firebase/app",Q=new j.Yd("@firebase/app"),Ut="[DEFAULT]",Xe={[ve]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},zt=new Map,Vt=new Map;function Nt(ee,he){try{ee.container.addComponent(he)}catch($e){Q.debug(`Component ${he.name} failed to register with FirebaseApp ${ee.name}`,$e)}}function Xt(ee,he){ee.container.addOrOverwriteComponent(he)}function Gt(ee){const he=ee.name;if(Vt.has(he))return Q.debug(`There were multiple attempts to register component ${he}.`),!1;Vt.set(he,ee);for(const $e of zt.values())Nt($e,ee);return!0}function wn(ee,he){const $e=ee.container.getProvider("heartbeat").getImmediate({optional:!0});return $e&&$e.triggerHeartbeat(),ee.container.getProvider(he)}function Vn(ee,he,$e=Ut){wn(ee,he).clearInstance($e)}function Ei(){Vt.clear()}const Hn=new le.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class hs{constructor(he,$e,dt){this._isDeleted=!1,this._options=Object.assign({},he),this._config=Object.assign({},$e),this._name=$e.name,this._automaticDataCollectionEnabled=$e.automaticDataCollectionEnabled,this._container=dt,this.container.addComponent(new W.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(he){this.checkDestroyed(),this._automaticDataCollectionEnabled=he}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(he){this._isDeleted=he}checkDestroyed(){if(this.isDeleted)throw Hn.create("app-deleted",{appName:this._name})}}const bi="9.8.1";function Li(ee,he={}){"object"!=typeof he&&(he={name:he});const $e=Object.assign({name:Ut,automaticDataCollectionEnabled:!1},he),dt=$e.name;if("string"!=typeof dt||!dt)throw Hn.create("bad-app-name",{appName:String(dt)});const St=zt.get(dt);if(St){if((0,le.vZ)(ee,St.options)&&(0,le.vZ)($e,St.config))return St;throw Hn.create("duplicate-app",{appName:dt})}const Qt=new W.H0(dt);for(const Ot of Vt.values())Qt.addComponent(Ot);const Mn=new hs(ee,$e,Qt);return zt.set(dt,Mn),Mn}function Xn(ee=Ut){const he=zt.get(ee);if(!he)throw Hn.create("no-app",{appName:ee});return he}function Ci(){return Array.from(zt.values())}function xt(ee){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,g.Z)(function*(ee){const he=ee.name;zt.has(he)&&(zt.delete(he),yield Promise.all(ee.container.getProviders().map($e=>$e.delete())),ee.isDeleted=!0)})).apply(this,arguments)}function kn(ee,he,$e){var dt;let St=null!==(dt=Xe[ee])&&void 0!==dt?dt:ee;$e&&(St+=`-${$e}`);const Qt=St.match(/\s|\//),Mn=he.match(/\s|\//);if(Qt||Mn){const Ot=[`Unable to register library "${St}" with version "${he}":`];return Qt&&Ot.push(`library name "${St}" contains illegal characters (whitespace or "/")`),Qt&&Mn&&Ot.push("and"),Mn&&Ot.push(`version name "${he}" contains illegal characters (whitespace or "/")`),void Q.warn(Ot.join(" "))}Gt(new W.wA(`${St}-version`,()=>({library:St,version:he}),"VERSION"))}function Cn(ee,he){if(null!==ee&&"function"!=typeof ee)throw Hn.create("invalid-log-argument");(0,j.Am)(ee,he)}function Fr(ee){(0,j.Ub)(ee)}const Nn="firebase-heartbeat-store";let vr=null;function fs(){return vr||(vr=(0,we.X3)("firebase-heartbeat-database",1,{upgrade:(ee,he)=>{0===he&&ee.createObjectStore(Nn)}}).catch(ee=>{throw Hn.create("storage-open",{originalErrorMessage:ee.message})})),vr}function bt(){return(bt=(0,g.Z)(function*(ee){try{return(yield fs()).transaction(Nn).objectStore(Nn).get(Ii(ee))}catch(he){throw Hn.create("storage-get",{originalErrorMessage:he.message})}})).apply(this,arguments)}function mt(ee,he){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,g.Z)(function*(ee,he){try{const dt=(yield fs()).transaction(Nn,"readwrite");return yield dt.objectStore(Nn).put(he,Ii(ee)),dt.done}catch($e){throw Hn.create("storage-set",{originalErrorMessage:$e.message})}})).apply(this,arguments)}function Ii(ee){return`${ee.name}!${ee.options.appId}`}class or{constructor(he){this.container=he,this._heartbeatsCache=null;const $e=this.container.getProvider("app").getImmediate();this._storage=new ne($e),this._heartbeatsCachePromise=this._storage.read().then(dt=>(this._heartbeatsCache=dt,dt))}triggerHeartbeat(){var he=this;return(0,g.Z)(function*(){const dt=he.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),St=Tn();if(null===he._heartbeatsCache&&(he._heartbeatsCache=yield he._heartbeatsCachePromise),he._heartbeatsCache.lastSentHeartbeatDate!==St&&!he._heartbeatsCache.heartbeats.some(Qt=>Qt.date===St))return he._heartbeatsCache.heartbeats.push({date:St,agent:dt}),he._heartbeatsCache.heartbeats=he._heartbeatsCache.heartbeats.filter(Qt=>{const Mn=new Date(Qt.date).valueOf();return Date.now()-Mn<=2592e6}),he._storage.overwrite(he._heartbeatsCache)})()}getHeartbeatsHeader(){var he=this;return(0,g.Z)(function*(){if(null===he._heartbeatsCache&&(yield he._heartbeatsCachePromise),null===he._heartbeatsCache||0===he._heartbeatsCache.heartbeats.length)return"";const $e=Tn(),{heartbeatsToSend:dt,unsentEntries:St}=function K(ee,he=1024){const $e=[];let dt=ee.slice();for(const St of ee){const Qt=$e.find(Mn=>Mn.agent===St.agent);if(Qt){if(Qt.dates.push(St.date),ie($e)>he){Qt.dates.pop();break}}else if($e.push({agent:St.agent,dates:[St.date]}),ie($e)>he){$e.pop();break}dt=dt.slice(1)}return{heartbeatsToSend:$e,unsentEntries:dt}}(he._heartbeatsCache.heartbeats),Qt=(0,le.L)(JSON.stringify({version:2,heartbeats:dt}));return he._heartbeatsCache.lastSentHeartbeatDate=$e,St.length>0?(he._heartbeatsCache.heartbeats=St,yield he._storage.overwrite(he._heartbeatsCache)):(he._heartbeatsCache.heartbeats=[],he._storage.overwrite(he._heartbeatsCache)),Qt})()}}function Tn(){return(new Date).toISOString().substring(0,10)}class ne{constructor(he){this.app=he,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,le.hl)()&&(0,le.eu)().then(()=>!0).catch(()=>!1)})()}read(){var he=this;return(0,g.Z)(function*(){return(yield he._canUseIndexedDBPromise)&&(yield function cn(ee){return bt.apply(this,arguments)}(he.app))||{heartbeats:[]}})()}overwrite(he){var $e=this;return(0,g.Z)(function*(){var dt;if(yield $e._canUseIndexedDBPromise){const Qt=yield $e.read();return mt($e.app,{lastSentHeartbeatDate:null!==(dt=he.lastSentHeartbeatDate)&&void 0!==dt?dt:Qt.lastSentHeartbeatDate,heartbeats:he.heartbeats})}})()}add(he){var $e=this;return(0,g.Z)(function*(){var dt;if(yield $e._canUseIndexedDBPromise){const Qt=yield $e.read();return mt($e.app,{lastSentHeartbeatDate:null!==(dt=he.lastSentHeartbeatDate)&&void 0!==dt?dt:Qt.lastSentHeartbeatDate,heartbeats:[...Qt.heartbeats,...he.heartbeats]})}})()}}function ie(ee){return(0,le.L)(JSON.stringify({version:2,heartbeats:ee})).length}!function Pe(ee){Gt(new W.wA("platform-logger",he=>new _e(he),"PRIVATE")),Gt(new W.wA("heartbeat",he=>new or(he),"PRIVATE")),kn(ve,"0.7.24",ee),kn(ve,"0.7.24","esm2017"),kn("fire-js","")}("")},4859:(pt,ke,O)=>{"use strict";O.d(ke,{H0:()=>ve,wA:()=>j,zt:()=>we});var g=O(5861),W=O(2090);class j{constructor(Q,X,ge){this.name=Q,this.instanceFactory=X,this.type=ge,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Q){return this.instantiationMode=Q,this}setMultipleInstances(Q){return this.multipleInstances=Q,this}setServiceProps(Q){return this.serviceProps=Q,this}setInstanceCreatedCallback(Q){return this.onInstanceCreated=Q,this}}const le="[DEFAULT]";class we{constructor(Q,X){this.name=Q,this.container=X,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Q){const X=this.normalizeInstanceIdentifier(Q);if(!this.instancesDeferred.has(X)){const ge=new W.BH;if(this.instancesDeferred.set(X,ge),this.isInitialized(X)||this.shouldAutoInitialize())try{const qe=this.getOrInitializeService({instanceIdentifier:X});qe&&ge.resolve(qe)}catch(qe){}}return this.instancesDeferred.get(X).promise}getImmediate(Q){var X;const ge=this.normalizeInstanceIdentifier(null==Q?void 0:Q.identifier),qe=null!==(X=null==Q?void 0:Q.optional)&&void 0!==X&&X;if(!this.isInitialized(ge)&&!this.shouldAutoInitialize()){if(qe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ge})}catch(je){if(qe)return null;throw je}}getComponent(){return this.component}setComponent(Q){if(Q.name!==this.name)throw Error(`Mismatching Component ${Q.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Q,this.shouldAutoInitialize()){if(function Te(Ee){return"EAGER"===Ee.instantiationMode}(Q))try{this.getOrInitializeService({instanceIdentifier:le})}catch(X){}for(const[X,ge]of this.instancesDeferred.entries()){const qe=this.normalizeInstanceIdentifier(X);try{const je=this.getOrInitializeService({instanceIdentifier:qe});ge.resolve(je)}catch(je){}}}}clearInstance(Q=le){this.instancesDeferred.delete(Q),this.instancesOptions.delete(Q),this.instances.delete(Q)}delete(){var Q=this;return(0,g.Z)(function*(){const X=Array.from(Q.instances.values());yield Promise.all([...X.filter(ge=>"INTERNAL"in ge).map(ge=>ge.INTERNAL.delete()),...X.filter(ge=>"_delete"in ge).map(ge=>ge._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Q=le){return this.instances.has(Q)}getOptions(Q=le){return this.instancesOptions.get(Q)||{}}initialize(Q={}){const{options:X={}}=Q,ge=this.normalizeInstanceIdentifier(Q.instanceIdentifier);if(this.isInitialized(ge))throw Error(`${this.name}(${ge}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const qe=this.getOrInitializeService({instanceIdentifier:ge,options:X});for(const[je,Ke]of this.instancesDeferred.entries())ge===this.normalizeInstanceIdentifier(je)&&Ke.resolve(qe);return qe}onInit(Q,X){var ge;const qe=this.normalizeInstanceIdentifier(X),je=null!==(ge=this.onInitCallbacks.get(qe))&&void 0!==ge?ge:new Set;je.add(Q),this.onInitCallbacks.set(qe,je);const Ke=this.instances.get(qe);return Ke&&Q(Ke,qe),()=>{je.delete(Q)}}invokeOnInitCallbacks(Q,X){const ge=this.onInitCallbacks.get(X);if(ge)for(const qe of ge)try{qe(Q,X)}catch(je){}}getOrInitializeService({instanceIdentifier:Q,options:X={}}){let ge=this.instances.get(Q);if(!ge&&this.component&&(ge=this.component.instanceFactory(this.container,{instanceIdentifier:(Ee=Q,Ee===le?void 0:Ee),options:X}),this.instances.set(Q,ge),this.instancesOptions.set(Q,X),this.invokeOnInitCallbacks(ge,Q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Q,ge)}catch(qe){}var Ee;return ge||null}normalizeInstanceIdentifier(Q=le){return this.component?this.component.multipleInstances?Q:le:Q}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ve{constructor(Q){this.name=Q,this.providers=new Map}addComponent(Q){const X=this.getProvider(Q.name);if(X.isComponentSet())throw new Error(`Component ${Q.name} has already been registered with ${this.name}`);X.setComponent(Q)}addOrOverwriteComponent(Q){this.getProvider(Q.name).isComponentSet()&&this.providers.delete(Q.name),this.addComponent(Q)}getProvider(Q){if(this.providers.has(Q))return this.providers.get(Q);const X=new we(Q,this);return this.providers.set(Q,X),X}getProviders(){return Array.from(this.providers.values())}}},1877:(pt,ke,O)=>{"use strict";O.d(ke,{Am:()=>Ee,Ub:()=>ve,Yd:()=>Te,in:()=>W});const g=[];var W=(()=>{return(Q=W||(W={}))[Q.DEBUG=0]="DEBUG",Q[Q.VERBOSE=1]="VERBOSE",Q[Q.INFO=2]="INFO",Q[Q.WARN=3]="WARN",Q[Q.ERROR=4]="ERROR",Q[Q.SILENT=5]="SILENT",W;var Q})();const j={debug:W.DEBUG,verbose:W.VERBOSE,info:W.INFO,warn:W.WARN,error:W.ERROR,silent:W.SILENT},le=W.INFO,we={[W.DEBUG]:"log",[W.VERBOSE]:"log",[W.INFO]:"info",[W.WARN]:"warn",[W.ERROR]:"error"},_e=(Q,X,...ge)=>{if(X<Q.logLevel)return;const qe=(new Date).toISOString(),je=we[X];if(!je)throw new Error(`Attempted to log a message with an invalid logType (value: ${X})`);console[je](`[${qe}]  ${Q.name}:`,...ge)};class Te{constructor(X){this.name=X,this._logLevel=le,this._logHandler=_e,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(X){if(!(X in W))throw new TypeError(`Invalid value "${X}" assigned to \`logLevel\``);this._logLevel=X}setLogLevel(X){this._logLevel="string"==typeof X?j[X]:X}get logHandler(){return this._logHandler}set logHandler(X){if("function"!=typeof X)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=X}get userLogHandler(){return this._userLogHandler}set userLogHandler(X){this._userLogHandler=X}debug(...X){this._userLogHandler&&this._userLogHandler(this,W.DEBUG,...X),this._logHandler(this,W.DEBUG,...X)}log(...X){this._userLogHandler&&this._userLogHandler(this,W.VERBOSE,...X),this._logHandler(this,W.VERBOSE,...X)}info(...X){this._userLogHandler&&this._userLogHandler(this,W.INFO,...X),this._logHandler(this,W.INFO,...X)}warn(...X){this._userLogHandler&&this._userLogHandler(this,W.WARN,...X),this._logHandler(this,W.WARN,...X)}error(...X){this._userLogHandler&&this._userLogHandler(this,W.ERROR,...X),this._logHandler(this,W.ERROR,...X)}}function ve(Q){g.forEach(X=>{X.setLogLevel(Q)})}function Ee(Q,X){for(const ge of g){let qe=null;X&&X.level&&(qe=j[X.level]),ge.userLogHandler=null===Q?null:(je,Ke,...nt)=>{const Ie=nt.map(Le=>{if(null==Le)return null;if("string"==typeof Le)return Le;if("number"==typeof Le||"boolean"==typeof Le)return Le.toString();if(Le instanceof Error)return Le.message;try{return JSON.stringify(Le)}catch(ot){return null}}).filter(Le=>Le).join(" ");Ke>=(null!=qe?qe:je.logLevel)&&Q({level:W[Ke].toLowerCase(),message:Ie,args:nt,type:je.name})}}}},8766:(pt,ke,O)=>{"use strict";O.d(ke,{Lj:()=>ze,X3:()=>it});var g=O(5861);let j,le;const Te=new WeakMap,ve=new WeakMap,Ee=new WeakMap,Q=new WeakMap,X=new WeakMap;let je={get(be,Ne,se){if(be instanceof IDBTransaction){if("done"===Ne)return ve.get(be);if("objectStoreNames"===Ne)return be.objectStoreNames||Ee.get(be);if("store"===Ne)return se.objectStoreNames[1]?void 0:se.objectStore(se.objectStoreNames[0])}return Le(be[Ne])},set:(be,Ne,se)=>(be[Ne]=se,!0),has:(be,Ne)=>be instanceof IDBTransaction&&("done"===Ne||"store"===Ne)||Ne in be};function Ie(be){return"function"==typeof be?function nt(be){return be!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function _e(){return le||(le=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(be)?function(...Ne){return be.apply(ot(this),Ne),Le(Te.get(this))}:function(...Ne){return Le(be.apply(ot(this),Ne))}:function(Ne,...se){const me=be.call(ot(this),Ne,...se);return Ee.set(me,Ne.sort?Ne.sort():[Ne]),Le(me)}}(be):(be instanceof IDBTransaction&&function qe(be){if(ve.has(be))return;const Ne=new Promise((se,me)=>{const pe=()=>{be.removeEventListener("complete",Se),be.removeEventListener("error",oe),be.removeEventListener("abort",oe)},Se=()=>{se(),pe()},oe=()=>{me(be.error||new DOMException("AbortError","AbortError")),pe()};be.addEventListener("complete",Se),be.addEventListener("error",oe),be.addEventListener("abort",oe)});ve.set(be,Ne)}(be),((be,Ne)=>Ne.some(se=>be instanceof se))(be,function we(){return j||(j=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(be,je):be)}function Le(be){if(be instanceof IDBRequest)return function ge(be){const Ne=new Promise((se,me)=>{const pe=()=>{be.removeEventListener("success",Se),be.removeEventListener("error",oe)},Se=()=>{se(Le(be.result)),pe()},oe=()=>{me(be.error),pe()};be.addEventListener("success",Se),be.addEventListener("error",oe)});return Ne.then(se=>{se instanceof IDBCursor&&Te.set(se,be)}).catch(()=>{}),X.set(Ne,be),Ne}(be);if(Q.has(be))return Q.get(be);const Ne=Ie(be);return Ne!==be&&(Q.set(be,Ne),X.set(Ne,be)),Ne}const ot=be=>X.get(be);function it(be,Ne,{blocked:se,upgrade:me,blocking:pe,terminated:Se}={}){const oe=indexedDB.open(be,Ne),Qe=Le(oe);return me&&oe.addEventListener("upgradeneeded",et=>{me(Le(oe.result),et.oldVersion,et.newVersion,Le(oe.transaction))}),se&&oe.addEventListener("blocked",()=>se()),Qe.then(et=>{Se&&et.addEventListener("close",()=>Se()),pe&&et.addEventListener("versionchange",()=>pe())}).catch(()=>{}),Qe}function ze(be,{blocked:Ne}={}){const se=indexedDB.deleteDatabase(be);return Ne&&se.addEventListener("blocked",()=>Ne()),Le(se).then(()=>{})}const He=["get","getKey","getAll","getAllKeys","count"],Re=["put","add","delete","clear"],at=new Map;function ce(be,Ne){if(!(be instanceof IDBDatabase)||Ne in be||"string"!=typeof Ne)return;if(at.get(Ne))return at.get(Ne);const se=Ne.replace(/FromIndex$/,""),me=Ne!==se,pe=Re.includes(se);if(!(se in(me?IDBIndex:IDBObjectStore).prototype)||!pe&&!He.includes(se))return;const Se=function(){var oe=(0,g.Z)(function*(Qe,...et){const Tt=this.transaction(Qe,pe?"readwrite":"readonly");let Ut=Tt.store;return me&&(Ut=Ut.index(et.shift())),(yield Promise.all([Ut[se](...et),pe&&Tt.done]))[0]});return function(et){return oe.apply(this,arguments)}}();return at.set(Ne,Se),Se}!function Ke(be){je=be(je)}(be=>LU(OU({},be),{get:(Ne,se,me)=>ce(Ne,se)||be.get(Ne,se,me),has:(Ne,se)=>!!ce(Ne,se)||be.has(Ne,se)}))},5861:(pt,ke,O)=>{"use strict";function g(j,le,we,_e,Te,ve,Ee){try{var Q=j[ve](Ee),X=Q.value}catch(ge){return void we(ge)}Q.done?le(X):Promise.resolve(X).then(_e,Te)}function W(j){return function(){var le=this,we=arguments;return new Promise(function(_e,Te){var ve=j.apply(le,we);function Ee(X){g(ve,_e,Te,Ee,Q,"next",X)}function Q(X){g(ve,_e,Te,Ee,Q,"throw",X)}Ee(void 0)})}}O.d(ke,{Z:()=>W})}},pt=>{pt(pt.s=8907)}]);